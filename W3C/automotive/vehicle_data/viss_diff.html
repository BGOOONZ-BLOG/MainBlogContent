<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="generator" content="ReSpec 19.1.0">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style type="text/css">
/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style>
<title>Vehicle Information Service Specification</title>

<style type="text/css">
        table.parameters, table.exceptions {
            border-spacing: 0;
            border-collapse:    collapse;
            margin: 0.5em 0;
            width:  100%;
        }
        table.parameters { border-bottom:  1px solid #90b8de; }
        table.exceptions { border-bottom:  1px solid #deb890; }

        .parameters th, .exceptions th {
            color:  inherit;
            padding:    3px 5px;
            text-align: left;
            font-weight:    normal;
        }
        .parameters th { color: #fff; background: #005a9c; }
        .exceptions th { background: #deb890; }

        .parameters td, .exceptions td {
            padding:    3px 10px;
            border-top: 1px solid #ddd;
            vertical-align: top;
        }

        .parameters tr:first-child td, .exceptions tr:first-child td {
            border-top: none;
        }

        .parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
            width:  100px;
        }

        .parameters td.prmType {
            width:  120px;
        }

        table.exceptions table {
            border-spacing: 0;
            border-collapse:    collapse;
            width:  100%;
        }

        .simple {
          width:100%;
        }

        thead th{
          border-bottom: 1px solid black;
        }

        .simple tbody th{
          width:33%;
          background: white;
          color: black;        
        }
        pre { white-space: pre-wrap;}
</style>

<style id="respec-mainstyle" type="text/css">
/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* Override code highlighter background */
.hljs {
  background: transparent !important;
}

/* --- INLINES --- */
h1 abbr,
h2 abbr,
h3 abbr,
h4 abbr,
h5 abbr,
h6 abbr,
a abbr {
  border: none;
}

dfn {
  font-weight: bold;
}

a.internalDFN {
  color: inherit;
  border-bottom: 1px solid #99c;
  text-decoration: none;
}

a.externalDFN {
  color: inherit;
  border-bottom: 1px dotted #ccc;
  text-decoration: none;
}

a.bibref {
  text-decoration: none;
}

cite .bibref {
  font-style: normal;
}

code {
  color: #c83500;
}

th code {
  color: inherit;
}

/* --- TOC --- */

.toc a,
.tof a {
  text-decoration: none;
}

a .secno,
a .figno {
  color: #000;
}

ul.tof,
ol.tof {
  list-style: none outside none;
}

.caption {
  margin-top: 0.5em;
  font-style: italic;
}

/* --- TABLE --- */

table.simple {
  border-spacing: 0;
  border-collapse: collapse;
  border-bottom: 3px solid #005a9c;
}

.simple th {
  background: #005a9c;
  color: #fff;
  padding: 3px 5px;
  text-align: left;
}

.simple th[scope="row"] {
  background: inherit;
  color: inherit;
  border-top: 1px solid #ddd;
}

.simple td {
  padding: 3px 10px;
  border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
  background: #f0f6ff;
}

/* --- DL --- */

.section dd > p:first-child {
  margin-top: 0;
}

.section dd > p:last-child {
  margin-bottom: 0;
}

.section dd {
  margin-bottom: 1em;
}

.section dl.attrs dd,
.section dl.eldef dd {
  margin-bottom: 0;
}

#issue-summary > ul,
.respec-dfn-list {
  column-count: 2;
}

#issue-summary li,
.respec-dfn-list li {
  list-style: none;
}

details.respec-tests-details {
  margin-left: 1em;
  display: inline-block;
  vertical-align: top;
}

details.respec-tests-details > * {
  padding-right: 2em;
}

details.respec-tests-details[open] {
  z-index: 999999;
  position: absolute;
  border: thin solid #cad3e2;
  border-radius: .3em;
  background-color: white;
  padding-bottom: .5em;
}

details.respec-tests-details[open] > summary {
  border-bottom: thin solid #cad3e2;
  padding-left: 1em;
  margin-bottom: 1em;
  line-height: 2em;
}

details.respec-tests-details > ul {
  width: 100%;
  margin-top: -0.3em;
}

details.respec-tests-details > li {
  padding-left: 1em;
}

@media print {
  .removeOnSave {
    display: none;
  }
}
</style>

<style type="text/css">
/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-quote {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  color: #008080;
}

.hljs-string,
.hljs-doctag {
  color: #d14;
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  color: #900;
  font-weight: bold;
}

.hljs-subst {
  font-weight: normal;
}

.hljs-type,
.hljs-class .hljs-title {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  color: #000080;
  font-weight: normal;
}

.hljs-regexp,
.hljs-link {
  color: #009926;
}

.hljs-symbol,
.hljs-bullet {
  color: #990073;
}

.hljs-built_in,
.hljs-builtin-name {
  color: #0086b3;
}

.hljs-meta {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}
</style>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-CR" type="text/css">
<link rel="canonical" href="https://www.w3.org/TR/vehicle-information-service/">
<script id="initialUserConfig" type="application/json">
{
  "specStatus": "CR",
  "shortName": "vehicle-information-service",
  "previousMaturity": "WD",
  "previousPublishDate": "2016-10-20",
  "implementationReportURI": "https://w3c.github.io/automotive/vehicle_data/viss_implementations.html",
  "crEnd": "2018-03-08",
  "editors": [
    {
      "name": "Kevin Gavigan",
      "company": "Jaguar Land Rover",
      "url": "mailto:kgavigan@jaguarlandrover.com",
      "companyURL": "http://www.jaguarlandrover.com/",
      "w3cid": 71411
    },
    {
      "name": "Adam Crofts",
      "company": "Jaguar Land Rover",
      "url": "mailto:acrofts1@jaguarlandrover.com",
      "companyURL": "http://www.jaguarlandrover.com/",
      "w3cid": 74857
    },
    {
      "name": "이원석(Wonsuk Lee)",
      "company": "한국전자통신연구원(ETRI)",
      "url": "mailto:wonsuk.lee@etri.re.kr",
      "companyURL": "https://www.etri.re.kr/",
      "w3cid": 34457
    },
    {
      "name": "Powell Kinney",
      "company": "Vinli",
      "url": "mailto:powell@vin.li",
      "companyURL": "https://www.vin.li/",
      "w3cid": 83094
    }
  ],
  "edDraftURI": "https://w3c.github.io/automotive/vehicle_data/vehicle_information_service.html",
  "wg": "Automotive Working Group",
  "otherLinks": [
    {
      "key": "Repository and Participation",
      "data": [
        {
          "value": "We are on github.",
          "href": "https://github.com/w3c/automotive/"
        },
        {
          "value": "File a bug/issue.",
          "href": "https://github.com/w3c/automotive/issues"
        },
        {
          "value": "Commit history.",
          "href": "https://github.com/w3c/automotive/commits"
        },
        {
          "value": "Mailing list archive.",
          "href": "https://lists.w3.org/Archives/Public/public-automotive/"
        }
      ]
    }
  ],
  "wgURI": "https://www.w3.org/auto/wg/",
  "wgPublicList": "public-automotive",
  "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/76043/status",
  "localBiblio": {
    "VSS": {
      "title": "Vehicle Signal Specification",
      "href": "https://github.com/GENIVI/vehicle_signal_specification",
      "status": "1.0",
      "date": "March 2017",
      "publisher": "GENIVI Alliance"
    }
  },
  "publishISODate": "2018-02-05T00:00:00.000Z",
  "generatedSubtitle": "Candidate Recommendation 05 February 2018"
}
</script>
<meta name="description" content="This specification defines a WebSocket based API for a Vehicle Information Service (VIS) to enable client applications to get, set, subscribe and unsubscribe to vehicle signals and data attributes.">
<style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
</style>
<script src="https://w3c.github.io/htmldiff-nav/index.js"></script></head>
<body aria-busy="false" class="h-entry toc-inline">
<div class="head">
<p>
<a class="logo" href="https://www.w3.org/">
<img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" width="72" height="48">
</a>
</p>
<p>
</p>
<h1 class="title p-name" id="title">
Vehicle
<del class="diff-old">Signal
Server
</del>
<ins class="diff-chg">Information
Service
</ins>
Specification
</h1>
<h2 id="w3c-candidate-recommendation-05-february-2018">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<del class="diff-old">First
Public
Working
Draft
20
October
2016
</del>
<ins class="diff-chg">Candidate
Recommendation
</ins><time class="dt-published" datetime="2018-02-05"><ins class="diff-chg">
05
February
2018
</ins>
</time>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">https://www.w3.org/TR/2016/WD-vehicle-information-service-20161020/
</del>
<a class="u-url" href="https://www.w3.org/TR/2018/CR-vehicle-information-service-20180205/">
<ins class="diff-chg">https://www.w3.org/TR/2018/CR-vehicle-information-service-20180205/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href="https://www.w3.org/TR/vehicle-information-service/">
https://www.w3.org/TR/vehicle-information-service/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href="https://w3c.github.io/automotive/vehicle_data/vehicle_information_service.html">
https://w3c.github.io/automotive/vehicle_data/vehicle_information_service.html
</a>
</dd>
<dt>
<del class="diff-old">Editors:
</del>
<ins class="diff-chg">Implementation
report:
</ins>
</dt>
<dd>
<a href="https://w3c.github.io/automotive/vehicle_data/viss_implementations.html">
<ins class="diff-chg">https://w3c.github.io/automotive/vehicle_data/viss_implementations.html
</ins></a>
</dd>
<dt>
<ins class="diff-chg">Previous
version:
</ins></dt><dd><a href="https://www.w3.org/TR/2016/WD-vehicle-information-service-20161020/"><ins class="diff-chg">
https://www.w3.org/TR/2016/WD-vehicle-information-service-20161020/
</ins></a></dd><dt><ins class="diff-chg">
Editors:
</ins></dt><dd class="p-author h-card vcard" data-editor-id="71411"><a class="u-url url p-name fn" href="mailto:kgavigan@jaguarlandrover.com">
Kevin
Gavigan
</a>,
<a class="p-org org h-org h-card" href="http://www.jaguarlandrover.com/">
Jaguar
Land
Rover
</a>
</dd>
<dd class="p-author h-card vcard" data-editor-id="74857">
<a class="u-url url p-name fn" href="mailto:acrofts1@jaguarlandrover.com">
Adam
Crofts
</a>,
<a class="p-org org h-org h-card" href="http://www.jaguarlandrover.com/">
Jaguar
Land
Rover
</a>
</dd>
<dd class="p-author h-card vcard" data-editor-id="34457">
<a class="u-url url p-name fn" href="mailto:wonsuk.lee@etri.re.kr">
이원석(Wonsuk
Lee)
</a>,
<a class="p-org org h-org h-card" href="https://www.etri.re.kr/">
한국전자통신연구원(ETRI)
</a>
</dd>
<dd class="p-author h-card vcard" data-editor-id="83094">
<a class="u-url url p-name fn" href="mailto:powell@vin.li">
Powell
Kinney
</a>,
<a class="p-org org h-org h-card" href="https://www.vin.li/">
Vinli
</a>
</dd>
<dt>
Repository
and
Participation:
</dt>
<dd>
<a href="https://github.com/w3c/automotive/">
We
are
on
github.
</a>
</dd>
<dd>
<a href="https://github.com/w3c/automotive/issues">
File
a
bug/issue.
</a>
</dd>
<dd>
<a href="https://github.com/w3c/automotive/commits">
Commit
history.
</a>
</dd>
<dd>
<a href="https://lists.w3.org/Archives/Public/public-automotive/">
Mailing
list
archive.
</a>
</dd>
</dl>
<p class="copyright">
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
©
<del class="diff-old">2016
</del>
<ins class="diff-chg">2018
</ins>
<a href="https://www.w3.org/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
®
</sup>
(
<a href="https://www.csail.mit.edu/">
<abbr title="Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href="https://www.ercim.eu/">
<abbr title="European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="https://www.keio.ac.jp/">
Keio
</a>,
<a href="http://ev.buaa.edu.cn/">
Beihang
</a>
).
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">
<ins class="diff-chg">permissive
</ins>
document
<del class="diff-old">use
</del>
<ins class="diff-chg">license
</ins>
</a>
rules
apply.
</p>
<hr title="Separator for header">
</div>
<section id="abstract" class="introductory">
<h2 id="abstract-0">
Abstract
</h2>
<p>
<del class="diff-old">The
W3C
Vehicle
Signal
Server
Specification
</del>
<ins class="diff-chg">This
specification
</ins>
defines
a
WebSocket
based
API
<del class="diff-old">that
enables
</del>
<ins class="diff-chg">for
a
Vehicle
Information
Service
(VIS)
to
enable
</ins>
client
applications
to
<del class="diff-old">GET,
SET,
SUBSCRIBE
</del>
<ins class="diff-chg">get,
set,
subscribe
</ins>
and
<del class="diff-old">UNSUBSCRIBE
</del>
<ins class="diff-chg">unsubscribe
</ins>
to
vehicle
signals
and
data
attributes.
</p>
<p>
The
purpose
of
the
specification
is
to
promote
a
Server
API
that
enables
application
development
in
a
consistent
manner
across
participating
automotive
manufacturers.
</p>
<del class="diff-old">It
is
recommended
that
this
Vehicle
Signal
Server
Specification
(VSSS)
is
read
in
conjunction
with
the
W3C
Vehicle
Signal
Client
Specification
(VSCS)
and
the
GENIVI
Vehicle
Signal
Specification
(VSS).
The
Vehicle
Signal
Client
Specification
defines
an
API
that
wraps
the
data
access
and
security
primitives
defined
in
this
Server
Specification.
It
has
been
defined
to
support
the
development
of
'standards-compliant'
JavaScript
libraries
that
can
be
used
by
web
based
clients.
It
is
assumed
that
native
clients
(written
for
example
in
C/C++)
and
managed
runtime
clients
(written
in
languages
like
Java
or
C#)
invoke
the
WebSocket
Server
API
using
standard
WebSocket
libraries
that
have
been
created
specifically
for
those
languages.
The
GENIVI
Vehicle
Signal
Specification
(VSS)
defines
the
set
of
vehicle
signals
and
data
that
are
exposed
via
this
Server
Specification.
The
term
'signal'
is
used
here
to
represent
an
item
of
data
that
can
vary
over
time,
for
example
vehicle
speed,
whilst
the
term
'static
data'
is
used
to
denote
a
temporally
unchanging
property
like
vehicle
width.
This
Server
Specification
describes
a
discovery
mechanism
that
defines
the
set
of
signals
and
data
that
a
particular
client
can
access
at
a
particular
point
in
time.
It
is
recognized
that
some
automobile
manufacturers
may
expose
more
signals
and
data
than
others.
The
Vehicle
Signal
Specification
supports
both
extensibility
and
the
ability
to
define
private
branches.
In
addition,
the
'tree'
of
signals
that
is
accessible
at
any
point
in
time
may
also
vary
depending
on
standard
access
control
principles.
That
is,
it
can
vary
based
on
the
identity
of
the
user
(person
or
organisation)
requesting
the
data
and/or
the
device
(e.g.
vehicle)
where
the
request
originates.
To
support
this,
the
Server
Specification
describes
a
token
based
mechanism
that
can
optionally
be
used
to
pass
tokens
to
the
WebSocket
Server
to
represent
the
user
of
an
application
and
the
device
that
the
application
is
running
on.
The
target
platform
supported
by
the
specification
is
exclusively
passenger
vehicles.
Use
of
this
specification
for
non-passenger
applications
(for
example
heavy
machinery,
marine
and
airline
infotainment)
is
not
prohibited,
but
is
not
covered
in
the
design
or
content
of
the
API
and
therefore
may
be
insufficient.
An
example
use
case
could
be
the
implementation
of
a
'Home
Mechanic'
application
that
provides
warnings
if
any
the
following
need
attention:
tire
pressure,
engine
oil
level,
washer
fluid
level
and
battery
charge
level.
Future
use
case
innovations
in
transportation,
safety,
navigation,
smart
energy
grids,
smart
transportation,
consumer
infotainment
and
personalisation
are
all
possible
through
this
specification.
Web
developers
building
interoperable
applications
based
upon
this
API,
will
help
empower
a
common
web
platform
across
consumer
devices
and
passenger
vehicles
within
the
Web
of
Things.
</del>
</section>
<section id="sotd" class="introductory">
<h2 id="status-of-this-document">
Status
of
This
Document
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
<abbr title="World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href="https://www.w3.org/TR/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
https://www.w3.org/TR/.
</em>
</p>
<p>
This
document
was
published
by
the
<a href="https://www.w3.org/auto/wg/">
Automotive
Working
Group
</a>
as
a
<del class="diff-old">First
Public
Working
Draft.
</del>
<ins class="diff-chg">Candidate
Recommendation.
</ins>
This
document
is
intended
to
become
a
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Recommendation.
<del class="diff-old">If
you
wish
to
make
comments
</del>
<ins class="diff-chg">Comments
</ins>
regarding
this
<del class="diff-old">document,
please
</del>
<ins class="diff-chg">document
are
welcome.
Please
</ins>
send
them
to
<a href="mailto:public-automotive@w3.org">
public-automotive@w3.org
</a>
(
<a href="mailto:public-automotive-request@w3.org?subject=subscribe">
subscribe
</a>,
<a href="https://lists.w3.org/Archives/Public/public-automotive/">
archives
</a>
).
<del class="diff-old">All
comments
are
welcome.
</del>
<abbr title="World Wide Web Consortium">
<ins class="diff-chg">W3C
</ins></abbr><ins class="diff-chg">
publishes
a
Candidate
Recommendation
to
indicate
that
the
document
is
believed
to
be
stable
and
to
encourage
implementation
by
the
developer
community.
This
Candidate
Recommendation
is
expected
to
advance
to
Proposed
Recommendation
no
earlier
than
08
March
2018.
</ins></p><p><ins class="diff-chg">
Please
see
the
Working
Group's
</ins><a href="https://w3c.github.io/automotive/vehicle_data/viss_implementations.html"><ins class="diff-chg">
implementation
report
</ins></a>.
</p>
<p>
Publication
as
a
<del class="diff-old">First
Public
Working
Draft
</del>
<ins class="diff-chg">Candidate
Recommendation
</ins>
does
not
imply
endorsement
by
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p>
This
document
was
produced
by
a
group
operating
under
the
<del class="diff-old">5
February
2004
</del>
<a href="https://www.w3.org/Consortium/Patent-Policy/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
<abbr title="World Wide Web Consortium">
W3C
</abbr>
maintains
a
<a href="https://www.w3.org/2004/01/pp-impl/76043/status" rel="disclosure">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">
section
6
of
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="https://www.w3.org/2018/Process-20180201/">
1
<del class="diff-old">September
2015
</del>
<ins class="diff-chg">February
2018
</ins>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<nav id="toc">
<h2 class="introductory" id="table-of-contents">
Table
of
Contents
</h2>
<ol class="toc">
<li class="tocline">
<a href="#introduction" class="tocxref">
<span class="secno">
1.
</span>
Introduction
</a>
</li>
<li class="tocline">
<a href="#conformance" class="tocxref">
<span class="secno">
2.
</span>
Conformance
</a>
</li>
<li class="tocline">
<a href="#terminology" class="tocxref">
<span class="secno">
3.
</span>
Terminology
</a>
</li>
<li class="tocline">
<a href="#tof" class="tocxref">
<span class="secno">
4.
</span>
Table
of
Figures
</a>
</li>
<li class="tocline">
<a href="#architecture" class="tocxref">
<span class="secno">
5.
</span>
Architecture
</a>
</li>
<li class="tocline">
<a href="#security" class="tocxref">
<span class="secno">
6.
</span>
Security
and
Privacy
Considerations
</a>
</li>
<li class="tocline">
<a href="#initialisation-of-the-websocket" class="tocxref">
<span class="secno">
7.
</span>
Initialisation
of
the
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">WebSocket
</ins>
</a>
</li>
<li class="tocline">
<a href="#message-structure" class="tocxref">
<span class="secno">
8.
</span>
Message
Structure
</a>
</li>
<li class="tocline">
<a href="#server-side-filtering" class="tocxref">
<span class="secno">
9.
</span>
Server
Side
Filtering
</a>
<ol class="toc">
<li class="tocline">
<a href="#websocket-closure" class="tocxref">
<span class="secno">
<del class="diff-old">10.
</del>
<ins class="diff-chg">9.1
</ins>
</span>
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">WebSocket
</ins>
Closure
</a>
</li>
<li class="tocline">
<a href="#errors" class="tocxref">
<span class="secno">
<del class="diff-old">11.
</del>
<ins class="diff-chg">9.2
</ins>
</span>
Errors
</a>
</li>
</ol>
</li>
<li class="tocline">
<a href="#references" class="tocxref">
<span class="secno">
A.
</span>
References
</a>
<ol class="toc">
<li class="tocline">
<a href="#normative-references" class="tocxref">
<span class="secno">
A.1
</span>
Normative
references
</a>
</li>
</ol>
</li>
</ol>
</nav>
<section id="introduction" class="informative">
<h2 id="x1-introduction">
<span class="secno">
1.
</span>
Introduction
</h2>
<p>
<del class="diff-old">The
vehicle
SHALL
</del>
<em>
<ins class="diff-chg">This
section
is
non-normative.
</ins>
</em>
</p>
<p>
<ins class="diff-new">This
specification
describes
how
a
vehicle
can
</ins>
expose
vehicle
signals
<ins class="diff-new">and
static
data
</ins>
via
a
WebSocket.
This
enables
a
client
to
GET
or
SET
vehicle
signals
and
data;
to
SUBSCRIBE
to
receive
notifications
and
to
UNSUBSCRIBE
from
receiving
notifications.
</p>
<p>
<del class="diff-old">A
future
revision
of
this
specification
may
consider
additionally
exposing
</del>
<ins class="diff-chg">The
API
that
is
used
to
manage
access
to
</ins>
vehicle
signals
<del class="diff-old">via
a
RESTful
web
service
but
this
</del>
<ins class="diff-chg">and
static
data
</ins>
is
<del class="diff-old">out
of
scope
for
</del>
<ins class="diff-chg">defined
in
</ins>
this
<del class="diff-old">version
of
</del>
<ins class="diff-chg">Vehicle
Information
Service
Specification
(VISS).
The
VISS
also
describes
a
discovery
mechanism
that
defines
</ins>
the
<del class="diff-old">specification.
</del>
<ins class="diff-chg">set
of
signals
and
data
that
a
client
can
access
at
a
particular
point
in
time.
</ins>
</p>
<p>
The
<del class="diff-old">W3C
WebSocket
API
</del>
<ins class="diff-chg">term
'signal'
</ins>
is
<del class="diff-old">defined
</del>
<ins class="diff-chg">used
</ins>
here
<del class="diff-old">and
</del>
<ins class="diff-chg">to
represent
an
item
of
data
that
can
vary
over
time,
for
example
vehicle
speed,
whilst
</ins>
the
<del class="diff-old">WebSocket
Protocol
</del>
<ins class="diff-chg">expression
'static
data'
</ins>
is
<del class="diff-old">defined
in
RFC6455
.
</del>
<ins class="diff-chg">used
to
denote
a
temporally
invariant
property
like
vehicle
width.
</ins>
</p>
<p>
A
<del class="diff-old">component
or
</del>
<ins class="diff-chg">vehicle-based
software
</ins>
module
<del class="diff-old">running
on
</del>
<ins class="diff-chg">may
implement
</ins>
the
<del class="diff-old">vehicle
is
required
to
create
</del>
<ins class="diff-chg">interface
and
behaviours
defined
in
this
specification
by
creating
</ins>
a
WebSocket
<del class="diff-old">and
listen
</del>
<ins class="diff-chg">server
instance
that
listens
</ins>
for
<ins class="diff-new">an
</ins>
inbound
<del class="diff-old">connections
</del>
<ins class="diff-chg">connection
request
</ins>
from
<del class="diff-old">application
clients
</del>
<ins class="diff-chg">a
client
in
order
</ins>
to
enable
secure
access
to
vehicle
signals.
In
this
specification
this
module
<del class="diff-old">are
</del>
<ins class="diff-chg">is
</ins>
referred
to
as
the
<del class="diff-old">‘WebSocket
Vehicle
Signal
Server’
(WVSS)
</del>
<dfn data-dfn-type="dfn" id="dfn-vis-server">
<ins class="diff-chg">VIS
Server
</ins></dfn>
or
<del class="diff-old">for
simplicity
as
‘the
server’.
</del>
<ins class="diff-chg">just
'the
server'.
</ins>
</p>
<p>
<del class="diff-old">This
specification
assumes
that
</del>
<ins class="diff-chg">The
Vehicle
Information
Service
Specification
(VISS)
defines
</ins>
a
<del class="diff-old">single
WebSocket
is
used
</del>
<ins class="diff-chg">number
of
methods
for
accessing
vehicle
data
which
are
strictly
agnostic
</ins>
to
<del class="diff-old">enable
communication
between
</del>
the
<del class="diff-old">client
application
</del>
<ins class="diff-chg">data
model.
Any
data
model
where
data
</ins>
and
<ins class="diff-new">signals
can
be
specified
using
a
string
could
potentially
be
supported.
However
this
version
of
</ins>
the
<del class="diff-old">server
in
order
to
reduce
processing
overhead.
It
is
not
explicitly
prohibited
for
the
client
to
request
</del>
<ins class="diff-chg">specification
specifies
</ins>
that
the
<del class="diff-old">server
opens
more
than
one
WebSocket.
However,
</del>
<ins class="diff-chg">data
model
is
</ins>
the
<del class="diff-old">server
MAY
refuse
to
open
a
subsequent
WebSocket
connection
</del>
<ins class="diff-chg">GENIVI
Vehicle
Signal
Specification
[
</ins><cite><a class="bibref" href="#bib-VSS"><ins class="diff-chg">
VSS
</ins></a></cite><ins class="diff-chg">
].
The
VSS
supports
both
extensibility
</ins>
and
the
<del class="diff-old">client
is
responsible
</del>
<ins class="diff-chg">ability
to
define
private
branches
and
will
be
used
</ins>
for
<del class="diff-old">handling
</del>
<ins class="diff-chg">each
of
the
examples
within
</ins>
this
<del class="diff-old">gracefully.
</del>
<ins class="diff-chg">specification.
</ins>
</p>
<p>
<del class="diff-old">If
more
than
one
WebSocket
connection
is
established
between
a
Client
Application
and
the
server
then
each
connection
is
managed
independently.
For
example,
subscriptions
created
using
a
particular
WebSocket
connection
only
trigger
notifications
via
that
connection
and
</del>
<ins class="diff-chg">In
addition,
</ins>
the
<del class="diff-old">client
must
use
</del>
<ins class="diff-chg">'tree'
of
signals
</ins>
that
<del class="diff-old">WebSocket
instance
to
unsubscribe.
If
more
than
one
WebSocket
connection
has
been
established
between
one
or
more
clients
and
a
particular
server
instance,
there
</del>
is
<del class="diff-old">a
risk
that
race
conditions
and
concurrency
issues
could
occur.
An
example
</del>
<ins class="diff-chg">accessible
at
any
point
in
time
may
also
vary
depending
on
standard
access
control
principles.
That
is,
it
can
vary
based
on
the
identity
</ins>
of
<del class="diff-old">this
would
be,
where
two
</del>
<ins class="diff-chg">the
user
(person
</ins>
or
<del class="diff-old">more
WebSocket
connections
are
used
to
update
a
particular
setting
at
</del>
<ins class="diff-chg">organisation)
requesting
</ins>
the
<del class="diff-old">same
time.
</del>
<ins class="diff-chg">data
and/or
the
application
or
device
(e.g.
vehicle)
where
the
request
originates.
</ins>
</p>
<p>
<del class="diff-old">Unless
explicitly
stated
otherwise,
</del>
<ins class="diff-chg">To
support
this,
</ins>
the
<del class="diff-old">client
</del>
<ins class="diff-chg">Service
Specification
describes
an
extensible
token
based
security
mechanism
that
</ins>
can
<del class="diff-old">only
assume
</del>
<ins class="diff-chg">optionally
be
used
to
pass
tokens
to
the
VIS
Server,
for
example
to
represent
the
user
of
an
application
and/or
the
device
</ins>
that
the
<del class="diff-old">server
implements
</del>
<ins class="diff-chg">client
application
is
running
on.
</ins></p><p><ins class="diff-chg">
A
future
revision
of
this
specification
may
consider
additionally
exposing
vehicle
signals
via
</ins>
a
<del class="diff-old">simple
concurrency
model
where
lost
updates
and
dirty
reads
could
potentially
occur
if
</del>
<ins class="diff-chg">RESTful
web
service
but
this
is
out
of
scope
for
this
version
of
</ins>
the
<del class="diff-old">server
has
more
than
one
WebSocket
connection
open.
</del>
<ins class="diff-chg">specification.
</ins>
</p>
<p>
The
following
example
<del class="diff-old">illustrates
how
a
client
could
invoke
the
API.
This
simplified
example
</del>
is
for
illustrative
purposes
only,
it
does
not
show
error
handling
and
is
not
intended
to
be
commercial
code.
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
1
</span>
</div>
<del class="diff-old">// open WebSocket
var vehicle  = new WebSocket();
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<span class="hljs-comment">// Open the WebSocket</span>
<span class="hljs-keyword">var</span> vehicle  = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">"wss://wwwivi"</span>, <span class="hljs-string">"wvss1.0"</span>);
<del class="diff-old">// establish authorization
vehicle.onopen =  () {
  vehicle.send('{"action": "authorize",
    "tokens": {"authorization": "&lt;user_token_value&gt;"},
    "requestId": 103}');
</del>
<span class="hljs-comment">// Establish authorization</span>
<ins class="diff-chg">vehicle.onopen = <span class="hljs-function"><span class="hljs-keyword">function</span> () </span>{
  vehicle.send(<span class="hljs-string">'{"action": "authorize", "tokens": {"authorization": "user_token_value"}, "requestId": "103"}'</span>);
</ins>
};
<del class="diff-old">// request a signal
 (vehicle.readyState === OPEN) {
  vehicle.send();
</del>
<span class="hljs-comment">// Message response handler for all possible actions</span>
<ins class="diff-chg">vehicle.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
</ins>  <span class="hljs-keyword">var</span> msg = <span class="hljs-built_in">JSON</span>.parse(event.data);  <span class="hljs-keyword">switch</span>(msg.action){    <span class="hljs-keyword">case</span> <span class="hljs-string">"authorize"</span>:<ins class="diff-chg">
      authHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"getMetadata"</span>:<ins class="diff-chg">
      getMetadataHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"get"</span>:<ins class="diff-chg">
      getReqHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"set"</span>:<ins class="diff-chg">
      setReqHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"subscribe"</span>:<ins class="diff-chg">
      subscriptionSetupHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"subscription"</span>:<ins class="diff-chg">
      subscriptionHandler(msg);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"unsubscribe"</span>:<ins class="diff-chg">
      unsubscribeHandler(msg, <span class="hljs-literal">false</span>);
</ins>      <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">"unsubscribeAll"</span>:<ins class="diff-chg">
      unsubscribeHandler(msg, <span class="hljs-literal">true</span>);
</ins>      <span class="hljs-keyword">break</span>;<ins class="diff-chg">
  }
};
</ins>
<del class="diff-old">  // process messages from the server
  vehicle.onmessage = function(event){
    var msg = JSON.parse(event.data);
    if(msg.path ==  &amp;&amp; msg.value){
      console.log( + msg.value);
    }
  };
</del>
<span class="hljs-comment">// Auth request handler</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authHandler</span>(<span class="hljs-params">msg</span>) </span>{
  <span class="hljs-keyword">if</span>(msg.hasOwnProperty(<span class="hljs-string">"TTL"</span>)){
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"authorization successful"</span>);
<ins class="diff-chg">    requestMetadata();
  } <span class="hljs-keyword">else</span> {
</ins>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"authorization unsuccessful"</span>);<ins class="diff-chg">
  }
</ins>
}
<del class="diff-old">// close the WebSocket
vehicle.close();
</del>
<span class="hljs-comment">// Close the WebSocket to end the WebSocket session</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeSocket</span>()</span>{
<ins class="diff-chg">  vehicle.close();
}
</ins>
</pre>
</div>
<p>
<del class="diff-old">The
following
example
shows
a
JavaScript
</del>
<ins class="diff-chg">Once
the
WebSocket
connection
has
been
established,
the
</ins>
client
<del class="diff-old">subscription
request
</del>
<ins class="diff-chg">is
able
to
retrieve
the
metadata
from
the
server
</ins>
and
<del class="diff-old">response.
</del>
<ins class="diff-chg">request
signals
for
the
client's
current
level
of
authentication.
</ins>
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
2
</span>
</div>
<del class="diff-old">// set a subscription, assuming the same authorization and set up from Example 
 (vehicle.readyState === OPEN) {
  vehicle.send('{"action": "subscribe", "path": "Signal.Drivetrain.InternalCombustionEngine.RPM",
      "requestId": 104}');
  vehicle.onmessage = function(event){
    var msg = JSON.parse(event.data);
    if(msg.hasOwnProperty(){
      console.log( + msg.value);
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<span class="hljs-comment">// Request the entire data model, in this example the data model is defined using GENIVI's VSS</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">requestMetadata</span>()</span>{
<ins class="diff-chg">  vehicle.send(<span class="hljs-string">'{"action": "getMetadata", "requestId": "103"}'</span>);
}
</ins><span class="hljs-comment">// Request the entire data model and if successful, request a signal</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMetadataHandler</span>(<span class="hljs-params">msg</span>)</span>{  <span class="hljs-keyword">if</span>(msg.hasOwnProperty(<span class="hljs-string">'metadata'</span>)){    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Metadata Received"</span>);    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Metadata: "</span> + <span class="hljs-built_in">JSON</span>.stringify(msg.metadata));<ins class="diff-chg">
    getSignal(msg.metadata, <span class="hljs-string">"Signal.Drivetrain.Transmission.Speed"</span>);
  } <span class="hljs-keyword">else</span> {
</ins>    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"getMetadata Error"</span>);<ins class="diff-chg">
  }
}
</ins><span class="hljs-comment">// Request a signal</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getSignal</span>(<span class="hljs-params">metadata, path</span>)</span>{  <span class="hljs-comment">// A check could be made here to ensure the signal is available within the metadata</span><ins class="diff-chg">
  vehicle.send(<span class="hljs-string">'{"action": "get", "path": '</span> + path + <span class="hljs-string">', "requestId": "105"}'</span>);
}
</ins></pre></div><p><ins class="diff-chg">
The
client
is
also
able
to
subscribe
to
signals
if
the
client's
authentication
permits
access.
</ins></p><div class="example"><div class="example-title marker"><span><ins class="diff-chg">
Example
3
</ins></span></div><pre class="highlight hljs javascript" aria-busy="false"><span class="hljs-comment">// Set a subscription, assuming the same authorization and set up from Example 1</span><span class="hljs-keyword">var</span> rpmSubscriptionId, rpmRequestId = <span class="hljs-string">"106"</span>;<span class="hljs-comment">// Set up the subscription</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscribeToRPMNotifications</span>()</span>{<ins class="diff-chg">
  vehicle.send(<span class="hljs-string">'{"action": "subscribe", "path": "Signal.Drivetrain.InternalCombustionEngine.RPM",  "requestId": '</span> + rpmRequestId + <span class="hljs-string">'}'</span>);
}
</ins><span class="hljs-comment">// Handle the subscription response</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscriptionSetupHandler</span>(<span class="hljs-params">msg</span>)</span>{    <span class="hljs-keyword">if</span>(msg.hasOwnProperty(<span class="hljs-string">"requestId"</span>) &amp;&amp; msg.requestId == rpmRequestId){      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Subscription set with a subscription ID of "</span> + msg.subscriptionId);<ins class="diff-chg">
      rpmSubscriptionId = msg.subscriptionId;
    }
}
</ins><span class="hljs-comment">// Handle the subscription notification</span><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">subscriptionHandler</span>(<span class="hljs-params">msg</span>)</span>{    <span class="hljs-keyword">if</span>(msg.hasOwnProperty(<span class="hljs-string">"subscriptionId"</span>) &amp;&amp; msg.subscriptionId == rpmSubscriptionId){      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"The current engine rpm is "</span> + msg.value);
    }
<del class="diff-old">  };
</del>
}
</pre>
</div>
<p>
<ins class="diff-new">The
target
platform
supported
by
the
specification
is
exclusively
passenger
vehicles.
Use
of
this
specification
for
non-passenger
applications
(for
example
heavy
machinery,
marine
and
airline
infotainment)
is
not
prohibited,
but
is
not
covered
in
the
design
or
content
of
the
API.
</ins></p><p><ins class="diff-new">
An
example
use
case
could
be
the
implementation
of
a
'Home
Mechanic'
application
that
provides
warnings
if
any
the
following
need
attention:
tire
pressure,
engine
oil
level,
washer
fluid
level
and
battery
charge
level.
</ins></p><p><ins class="diff-new">
Exposing
vehicle
signals
in
a
standardized
manner
facilitates
the
integration
of
vehicles
within
the
Web
of
Things
(WoT)
and
supports
future
use
case
innovations
in
a
variety
of
fields
including
transportation,
safety,
navigation,
energy
management,
smart
transportation
and
consumer
infotainment.
</ins></p><p><ins class="diff-new">
The
data
format
used
for
client/server
communication
within
this
specification
is
JSON
encoded
strings,
however
other
data
formats
may
be
supported
in
future
versions
of
the
specification.
</ins></p>
</section>
<section id="conformance">
<h2 id="x2-conformance">
<span class="secno">
2.
</span>
Conformance
</h2>
<p>
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</p>
<p id="respecRFC2119">
The
key
words
<em class="rfc2119">
MAY
</em>,
<em class="rfc2119">
MUST
</em>,
and
<em class="rfc2119">
SHALL
</em>
are
to
be
interpreted
as
described
in
[
<cite>
<a class="bibref" href="#bib-RFC2119">
RFC2119
</a>
</cite>
].
</p>
<p>
This
specification
defines
conformance
criteria
that
apply
to
a
single
product:
specifically
the
'in-vehicle'
WebSocket
<dfn data-dfn-type="dfn" id="dfn-vehicle-information-service">
Vehicle
<del class="diff-old">Signal
Server
</del>
<ins class="diff-chg">Information
Service
</ins>
</dfn>
that
implements
the
interfaces,
semantics
and
behaviour
defined
in
this
document.
<del class="diff-old">For
simplicity,
this
usually
is
referred
to
as
the
'WebSocket
Server'
or
just
'the
server'
</del>
</p>
</section>
<section id="terminology">
<h2 id="x3-terminology">
<span class="secno">
3.
</span>
Terminology
</h2>
<p>
The
<ins class="diff-new">acronym
'VISS'
is
used
to
refer
to
this
document,
the
'Vehicle
Information
Service
Specification'.
</ins></p><p><ins class="diff-new">
The
acronym
'VSS'
is
used
to
refer
to
the
'Vehicle
Signal
Specification'
(see
</ins><a href="https://github.com/GENIVI/vehicle_signal_specification/"><ins class="diff-new">
here
</ins></a><ins class="diff-new">
)
which
is
defined
by
the
GENIVI
Alliance.
</ins></p><p><ins class="diff-new">
The
</ins>
term
'WebSocket'
when
used
in
this
document,
is
as
defined
in
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
WebSocket
API
(see
<a href="https://www.w3.org/TR/2011/WD-websockets-20110929">
here
</a>
)
and
the
WebSocket
Protocol
(see
<a href="https://tools.ietf.org/html/rfc6455">
RFC6455
</a>
).
</p>
</section>
<section id="tof">
<h2 id="x4-table-of-figures">
<span class="secno">
4.
</span>
Table
of
Figures
</h2>
<ul class="tof">
<li class="tofline">
<del class="diff-old">Fig.
</del>
<a class="tocxref" href="#fig-diagram-showing-an-example-vehicle-signal-tree">
<ins class="diff-chg">Figure
</ins>
<span class="figno">
1
</span>
<span class="fig-title">
Diagram
showing
<ins class="diff-new">an
example
Vehicle
Signal
Tree
</ins></span></a></li><li class="tofline"><a class="tocxref" href="#fig-diagram-showing-components-that-implement-the-w3c-vehicle-information-apis-and-their-clients"><ins class="diff-new">
Figure
</ins><span class="figno"><ins class="diff-new">
2
</ins></span><span class="fig-title"><ins class="diff-new">
Diagram
showing
</ins>
Components
that
implement
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Vehicle
<del class="diff-old">Signal
</del>
<ins class="diff-chg">Information
</ins>
APIs
and
their
clients
</span>
</a>
</li>
<li class="tofline">
<del class="diff-old">Fig.
</del>
<a class="tocxref" href="#fig-state-diagram-for-the-vis-server">
<ins class="diff-chg">Figure
</ins>
<span class="figno">
<del class="diff-old">2
</del>
<ins class="diff-chg">3
</ins>
</span>
<span class="fig-title">
<del class="diff-old">Diagram
showing
an
example
Vehicle
Signal
Tree
</del>
<ins class="diff-chg">State
diagram
for
the
VIS
Server
</ins>
</span>
</a>
</li>
<li class="tofline">
<del class="diff-old">Fig.
</del>
<a class="tocxref" href="#fig-diagram-showing-conceptual-websocket-security-token-flow-data-structures-are-illustrative-and-logical-content-has-been-simplified">
<ins class="diff-chg">Figure
</ins>
<span class="figno">
<del class="diff-old">3
</del>
<ins class="diff-chg">4
</ins>
</span>
<span class="fig-title">
Diagram
showing
<ins class="diff-new">conceptual
</ins>
WebSocket
Security
Token
flow
<ins class="diff-new">(data
structures
are
illustrative
and
logical
content
has
been
simplified)
</ins>
</span>
</a>
</li>
</ul>
</section>
<section id="architecture" class="informative">
<h2 id="x5-architecture">
<span class="secno">
5.
</span>
Architecture
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<del class="diff-old">Introduction
</del>
<h2 id="overview">
<ins class="diff-chg">Overview
</ins>
</h2>
<p>
In
a
typical
vehicle
design,
signals
and
data
are
transmitted
between
Electronic
Control
Units
(ECUs)
connected
via
internal
vehicle
networks.
These
include
Controller
Area
Networks
(CAN),
Media
Oriented
Systems
Transport
(MOST)
and
Local
Interconnect
Networks
(LIN).
ECUs
on
these
networks
broadcast
messages
on
network
buses,
and
other
ECUs
on
the
bus
respond
to
the
messages.
</p>
<p>
In
the
component
diagram
included
<del class="diff-old">below,
</del>
<ins class="diff-chg">in
Figure
2,
</ins>
the
internal
vehicle
CAN,
MOST
and
LIN
networks
and
the
ECUs
that
communicate
via
these
networks
are
abstracted
and
for
simplicity,
represented
by
the
<dfn data-dfn-type="dfn" id="dfn-system">
System
</dfn>
component.
</p>
<p>
For
safety,
security
and
commercial
reasons
not
all
clients
should
be
able
to
GET,
SET
or
SUBSCRIBE
to
particular
vehicle
signals
and
data
attributes.
As
a
consequence,
access-control
must
be
managed
so
clients
cannot
simply
connect
directly
to
ECUs
or
to
CAN,
MOST
or
LIN
network
buses.
</p>
<p>
In
this
specification,
the
term
'signal'
refers
to
a
value
that
can
change
over
time,
for
example,
vehicle
speed,
whilst
'static
data'
or
simply
'data'
is
used
for
a
value
that
does
not
change
e.g.
vehicle
length.
</p>
<p>
The
vehicle
signals
and
static
data
that
are
available
within
the
vehicle
System
are
exposed
in
a
controlled
manner
to
the
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">VIS
</ins>
Server.
The
interface
and
communication
mechanisms
that
are
used
between
the
vehicle
System
and
the
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">VIS
</ins>
Server
are
outside
of
the
scope
of
this
specification.
</p>
<del class="diff-old">Fig.
1
Diagram
showing
Components
that
implement
the
W3C
</del>
<h2 id="vehicle-information-service-vis-server">
Vehicle
<del class="diff-old">Signal
APIs
and
their
clients
WebSocket
</del>
<ins class="diff-chg">Information
Service
(VIS)
</ins>
Server
</h2>
<p>
<del class="diff-old">The
WebSocket
</del>
<ins class="diff-chg">As
stated
above,
the
</ins><strong><ins class="diff-chg">
VIS
</ins>
Server
</strong>
is
the
<del class="diff-old">vehicle
</del>
<ins class="diff-chg">'in-vehicle'
</ins>
system
that
is
responsible
for
exposing
vehicle
signals
and
data
to
<del class="diff-old">its
</del>
<ins class="diff-chg">on-board
</ins>
clients
by
implementing
the
interface
and
behaviours
defined
in
this
<dfn data-dfn-type="dfn" id="dfn-vehicle-information-service-specification-viss">
Vehicle
<del class="diff-old">Signal
Server
</del>
<ins class="diff-chg">Information
Service
</ins>
Specification
<del class="diff-old">(VSSS)
</del>
<ins class="diff-chg">(VISS)
</ins>
</dfn>.
</p>
<p>
The
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
exposes
signals
and
data
in
a
manner
that
is
consistent
with
the
<ins class="diff-new">accompanying
data
model.
The
data
model
is
not
mandated
by
this
specification,
however
the
recommended
data
model
used
within
this
specification
is
the
</ins>
<dfn data-dfn-type="dfn" id="dfn-vehicle-signal-specification-vss">
Vehicle
Signal
Specification
(VSS)
</dfn>.
This
defines
a
'tree-like'
logical
taxonomy
of
the
vehicle,
(formally
a
Directed
Acyclic
Graph),
where
major
vehicle
structures
(e.g.
body,
engine)
are
near
the
top
of
the
tree
and
the
logical
assemblies
and
components
that
comprise
them,
are
defined
as
their
child
nodes.
Each
of
the
child
nodes
in
the
tree
is
further
decomposed
into
its
logical
constituents,
and
the
process
is
repeated
until
<dfn data-dfn-type="dfn" id="dfn-leaf-nodes">
leaf
nodes
</dfn>
are
reached.
A
'leaf
node'
is
a
node
at
the
end
of
a
branch
that
cannot
be
decomposed
because
it
represents
a
single
signal
or
data
attribute
value.
An
example
VSS
tree
is
shown
below,
its
contents
are
illustrative:
</p>
<figure id="fig-diagram-showing-an-example-vehicle-signal-tree">
<img src="images/VSS_Tree_Simple_Example_v1.png" alt="Diagram showing an example Vehicle Signal tree">
<figcaption>
<del class="diff-old">Fig.
</del>
<ins class="diff-chg">Figure
</ins>
<span class="figno">
<del class="diff-old">2
</del>
<ins class="diff-chg">1
</ins>
</span>
<span class="fig-title">
Diagram
showing
an
example
Vehicle
Signal
Tree
</span>
</figcaption>
</figure>
<p>
<del class="diff-old">Signals
</del>
<ins class="diff-chg">Within
GENIVI's
VSS
data
model,
signals
</ins>
are
named
according
to
their
path
using
the
dot
notation
e.g.
engine.rpm.
<ins class="diff-new">The
methods
defined
within
this
document
support
any
path
notation
which
can
be
represented
as
a
string.
</ins>
</p>
<p>
The
client
<del class="diff-old">MAY
</del>
<ins class="diff-chg">may
</ins>
invoke
the
<del class="diff-old">WebSocket
Server
getVSS
</del>
<ins class="diff-chg">VIS
Server's
</ins><a href="#dfn-getmetadata" class="internalDFN" data-link-type="dfn"><ins class="diff-chg">
getMetadata
</ins>
</a>
method
to
request
that
the
server
returns
metadata
that
describes
which
signals
and
data
attributes
could
potentially
be
accessed
provided
that
the
user
and/or
device
is
suitably
<del class="diff-old">authorised.
</del>
<ins class="diff-chg">authorized.
</ins>
This
and
other
valid
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
actions
are
defined
in
more
detail
<a href="#action">
here
</a>.
</p>
<h3 id="in-vehicle-clients">
In-Vehicle
Clients
</h3>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
In-vehicle
clients
include
both
those
clients
that
are
running
on
an
ECU
in
the
vehicle
itself,
e.g.
an
ECU
that
implements
an
<del class="diff-old">In
Vehicle
</del>
<ins class="diff-chg">In-Vehicle
</ins>
Infotainment
(IVI)
system,
but
also
includes
clients
running
on
a
user's
device,
e.g.
a
laptop,
phone
or
tablet,
that
is
connected
via
the
vehicle's
WiFi
client
(if
one
exists).
</p>
<figure id="fig-diagram-showing-components-that-implement-the-w3c-vehicle-information-apis-and-their-clients">
<img src="images/W3C_Vehicle_API_Component_Diagram_v1_6.png" alt="Component diagram showing W3C Vehicle Information APIs">
<figcaption>
<ins class="diff-new">Figure
</ins><span class="figno"><ins class="diff-new">
2
</ins></span><span class="fig-title"><ins class="diff-new">
Diagram
showing
Components
that
implement
the
</ins><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr><ins class="diff-new">
Vehicle
Information
APIs
and
their
clients
</ins></span></figcaption></figure>
<p>
The
methods
defined
on
the
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
interface
may
be
invoked
by
different
types
of
on-board
and
off-board
clients.
On-board
clients,
running
on
the
vehicle
fall
into
one
of
two
major
categories:
</p>
<p>
<dfn data-dfn-type="dfn" id="dfn-applications">
Applications
</dfn>
<ins class="diff-new">running
in
the
vehicle
that
</ins>
can
access
vehicle
signals
and
data
and
have
a
User
Interface
that
the
driver
or
passengers
in
the
vehicle
can
interact
with.
</p>
<p>
<dfn data-dfn-type="dfn" id="dfn-agents">
Agents
</dfn>
typically
have
no
user
interface.
They
can
also
invoke
methods
exposed
on
the
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
but
their
purpose
is
to
connect
to
one
or
more
off-board
e.g.
<dfn data-dfn-type="dfn" id="dfn-vehicle-to-everything-v2x">
Vehicle
to
Everything
(V2X)
</dfn>
internet
Servers
in
order
to
send
data
off-board.
</p>
<p>
Both
applications
and
agents
can
be
subdivided
into
those
that
are
web-based
and
which
run
in
a
'Web
Runtime'
and
are
implemented
using
Web
Standards
like
HTML,
CSS
and
JavaScript;
those
that
run
in
their
own
native
process
written
using
e.g.
C,
C++
or
Objective-C;
and
those
that
run
in
a
Managed
Runtime
process
written
using
languages
like
C#
or
Java.
</p>
<p>
Web
applications
and
web
agents
<del class="diff-old">MAY
</del>
<ins class="diff-chg">may
</ins>
directly
invoke
the
Vehicle
<del class="diff-old">Signal
Server
</del>
<ins class="diff-chg">Information
Service
</ins>
interface
exposed
by
the
<del class="diff-old">WebSocker
server,
but
it
is
expected
that
they
typically
access
vehicle
signals
and
data
via
</del>
<ins class="diff-chg">VIS
Server
or
implement
</ins>
a
JavaScript
<del class="diff-old">Library
that
implements
the
W3C
Vehicle
Signal
Client
API
(TODO
Add
Link).
The
Client
API
defines
a
standard
approach
to
encapsulate
or
'wrap'
the
W3C
Vehicle
Server
Specification
API
to
make
it
easier
for
Web
based
clients
</del>
<ins class="diff-chg">'wrapper'
library
</ins>
to
<del class="diff-old">access
</del>
<ins class="diff-chg">simplify
accessing
</ins>
vehicle
signals
and
data
in
a
controlled
way.
</p>
<h3 id="sending-signals-and-data-off-board">
Sending
Signals
and
Data
off-board
</h3>
<p>
In
addition
to
local,
in-vehicle
applications
and
agents,
a
variety
of
internet-based
clients
and
servers
may
be
interested
in
accessing
vehicle
signals
and
data.
However,
when
a
vehicle
is
not
being
used,
most
electrical
systems
are
shut
down
in
order
to
<del class="diff-old">maximise
</del>
<ins class="diff-chg">maximize
</ins>
battery
life.
This
may
include
the
systems
that
enable
Wireless
or
Mobile
connectivity.
<del class="diff-old">Then,
when
</del>
<ins class="diff-chg">When
</ins>
the
vehicle
is
powered
up,
various
systems
start
up,
including
<ins class="diff-new">potentially
</ins>
those
that
provide
off-board
connectivity
and
the
vehicle
typically
connects
either
to
a
local
WiFi
network
or
to
a
Mobile
Network
Operator
(MNO)
and
<ins class="diff-new">is
</ins>
dynamically
<del class="diff-old">be
</del>
assigned
an
IP
address.
</p>
<p>
At
this
point,
internet
based
clients
and
servers
do
not
know
the
dynamic
IP
address
that
was
assigned
to
a
specific
vehicle.
So
normally,
a
vehicle
has
to
connect
to
a
well
known
endpoint,
generally
using
a
URL
to
connect
to
a
V2X
Server.
The
vehicle
and
the
internet
server
typically
mutually
authenticate
and
the
vehicle
'registers'
with
the
<ins class="diff-new">V2X
</ins>
server
over
an
encrypted
channel
passing
it
a
unique
identifier
e.g.
its
Vehicle
Identification
Number
(VIN).
From
that
point
on,
the
<ins class="diff-new">V2X
</ins>
server
has
the
IP
address
that
is
currently
assigned
to
a
vehicle
with
a
particular
VIN,
and
can
share
this
information
with
other
internet
based
clients
and
servers,
which
are
then
able
to
send
messages
to
the
vehicle.
</p>
<p>
However,
if
the
vehicle
loses
connectivity
and
is
dynamically
assigned
a
new
IP
address,
it
needs
to
re-register
its
new
IP
address
and
the
new
address
needs
to
be
communicated
to
any
interested
parties.
For
simplicity,
this
is
not
shown
in
the
component
diagram,
primarily
because
this
connectivity
only
becomes
possible
after
the
vehicle
has
registered
with
at
least
one
off-board
server
(which
is
shown)
but
also
because
these
scenarios
do
not
affect
the
interface
and
behaviours
defined
in
this
<del class="diff-old">WebSocket
Server
Specification
</del>
<ins class="diff-chg">Vehicle
Information
Service
Specification.
</ins>
</p>
<p>
The
component
diagram
shows
four
different
types
of
internet
based
clients.
A
user
may
use
a
<dfn data-dfn-type="dfn" id="dfn-web-page">
Web
Page
</dfn>
or
a
<dfn data-dfn-type="dfn" id="dfn-web-application">
Web
Application
</dfn>
running
on
a
phone
or
tablet
<ins class="diff-new">connected
to
the
vehicle's
ethernet
network
</ins>
to
request
access
to
vehicle
signals
on
a
particular
vehicle.
Alternatively
these
signals
could
be
accessed
using
a
<dfn data-dfn-type="dfn" id="dfn-native-or-managed-runtime-application">
Native
or
Managed
Runtime
Application
</dfn>
or
via
another
automated
<dfn data-dfn-type="dfn" id="dfn-client-system">
Client
System
</dfn>
or
service
e.g.
the
Traffic
Management
System
in
a
'Smart
City'.
</p>
<h3 id="vis-server-state-diagram">
<ins class="diff-chg">VIS
Server
State
Diagram
</ins></h3><p><ins class="diff-chg">
The
following
diagram
shows
a
number
of
possible
states
that
the
VIS
Server
could
occupy:
</ins></p><figure id="fig-state-diagram-for-the-vis-server">
<img src="images/VISS_State_Diagram_v1_2.png" alt="State Diagram for VIS Server">
<figcaption>
<ins class="diff-chg">Figure
</ins><span class="figno"><ins class="diff-chg">
3
</ins></span><span class="fig-title"><ins class="diff-chg">
State
diagram
for
the
VIS
Server
</ins></span></figcaption></figure><p><ins class="diff-chg">
The
state
diagram
is
for
illustrative
purposes
only
and
does
not
assume
that
the
VIS
Server
is
either
single
or
multi-threaded.
The
implementer
of
the
VIS
Server
is
free
to
determine
it's
internal
design
and
implementation,
however
in
normal
operation,
it
is
assumed
that
the
server
will
be
able
to
accept
multiple
requests
in
quick
succession
and
that
the
VIS
Server
will
attempt
to
process
and
respond
to
each
request
in
accordance
with
the
specified
API.
</ins></p></section><section id="security"><h2 id="x6-security-and-privacy-considerations">
<span class="secno">
6.
</span>
Security
and
Privacy
Considerations
</h2>
<h2 id="introduction-0">
Introduction
</h2>
<p>
The
<del class="diff-old">server
</del>
<ins class="diff-chg">VIS
Server
</ins>
implementation
<em class="rfc2119" title="MAY">
MAY
</em>
optionally
restrict
access
to
one
or
more
vehicle
signals
so
that
they
can
only
be
accessed
in
response
to
a
request
from
an
authorized
user
and/or
device.
This
could
be
for
a
variety
of
reasons,
including
safety,
privacy
or
commercial
considerations.
</p>
<p>
Hence,
a
request
to
GET,
SET,
SUBSCRIBE
or
UNSUBSCRIBE
to
data
may
require
the
client
to
demonstrate
to
the
server
that
the
request
is
from
one
or
more
suitably
authorized
Security
Principals.
</p>
<p>
The
different
types
of
Security
Principal,
the
approach
taken
to
control
access
to
signals
and
the
importance
of
data
privacy
are
described
in
the
sections
that
follow.
</p>
<h2 id="security-principals">
Security
Principals
</h2>
<p>
The
types
of
security
principal
include:
</p>
<table class="parameters">
<tbody>
<tr>
<th>
Type
</th>
<th>
Description
</th>
</tr>
<tr>
<td>
User
</td>
<td>
A
person,
system
or
organisation
responsible
for
making
the
request
e.g.
driver,
Emergency
Services,
Smart
City
Traffic
Management
System.
</td>
</tr>
<tr>
<td>
Device
</td>
<td>
Vehicle
or
device
where
the
request
originates.
Could
for
example
be
a
user's
Consumer
Electronics
(CE)
device
connected
to
the
vehicle's
WiFi
hotspot
or
another
vehicle
in
a
convoy;
an
Electronic
Control
Unit
(ECU)
on
the
same
vehicle
or
any
internet
connected
system
e.g.
a
Web
of
Things
(WoT)
device.
</td>
</tr>
</tbody>
</table>
<h3 id="access-control-and-authorization">
Access
Control
and
Authorization
</h3>
<p>
When
a
client
makes
a
request
to
access
signal
data
it
is
performing
the
request
on
behalf
of
one
or
more
Security
Principals,
that
is,
for
a
particular
user
and/or
vehicle/device.
</p>
<p>
Access
to
signals
is
managed
and
controlled
by
the
server.
The
server
<em class="rfc2119" title="MAY">
MAY
</em>
elect
not
to
enforce
access
controls
on
a
particular
signal
or
set
of
signals
and
to
enforce
different
access
controls
on
other
signals.
</p>
<p>
For
each
security
principal
that
must
be
<del class="diff-old">authorised
</del>
<ins class="diff-chg">authorized
</ins>
by
the
server,
the
client
<em class="rfc2119" title="SHALL">
SHALL
</em>
obtain
and
pass
a
security
token
e.g.
an
OAuth
2.0
token
(see
<a href="https://tools.ietf.org/html/rfc6749">
RFC6749
</a>
)
to
the
server
using
a
message
containing
an
'authorize'
action
as
defined
<a href="#authorize">
here
</a>.
</p>
<p>
A
server
implementation
<em class="rfc2119" title="MAY">
MAY
</em>
require
that
a
request
for
a
particular
signal
includes
a
security
token
for
both
the
user
(e.g.
driver
of
the
vehicle)
and
for
the
device
(e.g.
the
vehicle)
that
is
hosting
the
client.
A
request
for
a
different
set
of
vehicle
signals
<em class="rfc2119" title="MAY">
MAY
</em>
require
that
only
the
user
is
authorized
or
that
only
the
device
is
authorized
to
access
particular
signals.
</p>
<p>
<ins class="diff-new">The
client
and
the
server
are
each
individually
responsible
for
implementing
security
best
practice.
This
includes
but
is
not
limited
to
securely
obtaining
and
verifying
tokens
(as
applicable)
and
the
prevention
of
replays
or
spoofing
of
tokens
by
malicious
actors
or
agents.
</ins></p>
<h3 id="websocket-channel-authorization">
WebSocket
Channel
Authorization
</h3>
<p>
The
client
<em class="rfc2119" title="MAY">
MAY
</em>
send
a
message
with
an
'authorize'
action
to
modify
the
access-control
state
of
the
WebSocket
channel.
The
message
structure
is
defined
in
detail
<a href="#message-structure">
here
</a>.
</p>
<p>
The
following
diagram
illustrates
a
scenario
where
the
client
requests
vehicle
speed.
In
this
example
scenario,
this
signal
is
not
under
access
control
and
so
the
server
returns
a
message
containing
the
requested
data.
The
client
then
requests
that
the
server
sets
the
vehicle
trunk
status
to
open
and
the
server
demands
that
the
client
passes
access-control
credentials
before
satisfying
the
request.
The
<ins class="diff-new">sequence
of
</ins>
steps
<del class="diff-old">are
shown
in
more
detail
</del>
<ins class="diff-chg">is
illustrated
</ins>
in
the
diagram
below:
</p>
<figure id="fig-diagram-showing-conceptual-websocket-security-token-flow-data-structures-are-illustrative-and-logical-content-has-been-simplified">
<img src="images/WebSocket_Security_Flow_1_900px.png" alt="WebSocket Security token flow">
<figcaption>
<del class="diff-old">Fig.
</del>
<ins class="diff-chg">Figure
</ins>
<span class="figno">
<del class="diff-old">3
</del>
<ins class="diff-chg">4
</ins>
</span>
<span class="fig-title">
Diagram
showing
<ins class="diff-new">conceptual
</ins>
WebSocket
Security
Token
flow
<ins class="diff-new">(data
structures
are
illustrative
and
logical
content
has
been
simplified)
</ins>
</span>
</figcaption>
</figure>
<del class="diff-old">Note
TODO:
Update
diagram
to
reflect
auth
token
structure
and
review
including
other
diagrams
from
Wiki
</del>
<p>
After
receiving
a
message
with
an
'authorize'
action
the
server
attempts
to
verify
the
tokens
e.g.
by
checking
with
the
issuing
Security
Authority.
If
all
of
the
tokens
that
are
passed
to
the
server
are
valid,
it
returns
a
success
response
and
all
subsequent
requests
received
by
the
WebSocket
instance
have
elevated
access
control
privileges.
Specifically,
each
of
the
GET,
SET,
SUBSCRIBE
and
UNSUBSCRIBE
actions
have
the
access
control
rights
that
the
server
deems
to
be
appropriate
for
the
security
principals
represented
by
the
token(s).
</p>
<p>
If
the
client
sends
a
subsequent
'authorize'
message
to
the
server
with
different
token
value(s).
If
one
or
more
of
these
are
invalid,
then
the
server
returns
an
error
response
and
the
WebSocket
access
control
status
remain
unchanged.
However,
if
the
new
token
values
are
valid,
then
the
server
returns
a
success
response
and
the
access
control
privileges
associated
with
the
new
token(s)
only,
applies
for
all
requests
from
that
point.
</p>
<p>
If
the
client
or
the
server
close
the
WebSocket
connection
and
a
new
WebSocket
instance
is
opened,
then
it
is
opened
without
elevated
access
control
privileges.
</p>
<p>
This
<del class="diff-old">server
</del>
<ins class="diff-chg">service
</ins>
specification
defines
a
standardized,
token
based
approach
for
access
control
that
includes
specific
error
responses
for
common
user
and
device
access
control
scenarios.
It
is
important
however,
that
the
security
model
is
extensible.
Hence,
the
server
<em class="rfc2119" title="MAY">
MAY
</em>
implement
any
type
of
token
that
is
consistent
with
this
standardized
approach
and
<em class="rfc2119" title="MAY">
MAY
</em>
optionally
define
additional
token(s)
for
other
Security
Principal
type(s).
If
this
is
the
case,
it
is
expected
that
the
precise
type
of
security
tokens
that
are
supported
by
a
particular
server
implementation,
the
format
of
those
tokens
and
all
additional
error
codes
and
reasons
(e.g.
to
indicate
that
an
additional
token
type
has
expired
and
needs
to
be
renewed)
is
defined
in
the
Server's
documentation.
</p>
<h3 id="use-of-encryption">
Use
of
Encryption
</h3>
<p>
To
support
a
layered
security
model
and
to
help
establish
a
'defence
in
depth',
all
vehicle
signal
<ins class="diff-new">and
data
</ins>
communications
between
the
client
and
server
<em class="rfc2119" title="MUST">
MUST
</em>
be
strongly
encrypted.
This
is
to
make
it
more
difficult
for
an
attacker
to
eavesdrop
or
tamper
with
the
security
tokens;
the
request
data
or
the
response
payload.
</p>
<p>
One
way
in
which
this
may
be
implemented
is
for
the
client
and
the
server
to
use
a
Public
Key
Infrastructure
(PKI)
approach,
where
the
client
verifies
the
server's
identity
by
checking
the
server's
X.509
certificate
and
the
client
and
the
server
negotiate
to
establish
a
secure
Transport
Layer
Security
(TLS)
'tunnel'.
</p>
<p>
The
WebSocket
protocol
mandates
that
if
a
client
requests
that
the
server
opens
a
WebSocket
connection
and
the
request
is
received
over
HTTPS,
then
the
WebSocket
is
established
over
TLS,
that
is,
a
secure
'wss'
connection
is
created.
</p>
<h3 id="token-renewal">
Token
Renewal
</h3>
<p>
Each
security
token
<em class="rfc2119" title="SHALL">
SHALL
</em>
have
a
specified
lifetime
during
which
it
is
valid.
If
on
receiving
a
request
for
signals
that
are
subject
to
access-control,
the
server
determines
that
the
request
is
<del class="diff-old">unauthorised
</del>
<ins class="diff-chg">unauthorized
</ins>
because
the
token
has
expired,
the
server
<del class="diff-old">returns
</del>
<em class="rfc2119" title="SHALL">
<ins class="diff-chg">SHALL
</ins></em><ins class="diff-chg">
return
</ins>
an
error
response
indicating
the
fact
and
the
client
<del class="diff-old">requests
</del>
<em class="rfc2119" title="SHALL">
<ins class="diff-chg">SHALL
</ins></em><ins class="diff-chg">
request
</ins>
a
new
token
from
the
Security
Authority
and
repeat
the
request.
</p>
<p>
If
the
server
returns
an
error
response
indicating
that
the
request
is
forbidden,
renewing
the
security
token
does
not
make
the
request
valid.
In
this
case,
the
client
should
not
repeat
the
request
unless
some
other
change
has
been
made
that
may
mean
the
request
is
now
valid.
</p>
</section>
<section id="initialisation-of-the-websocket">
<h2 id="x7-initialisation-of-the-websocket">
<span class="secno">
7.
</span>
Initialisation
of
the
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">WebSocket
</ins>
</h2>
<p>
If
the
client
application
is
an
HTML
Application
running
in
a
web
runtime
or
is
a
web
page
running
in
a
browser,
the
WebSocket
instance
may
either
be
instantiated
natively
or
be
created
using
a
'standards
compliant'
WebSocket
JavaScript
library.
</p>
<p>
A
WebSocket
can
also
be
initiated
from
a
native
(e.g.
C++)
Application
or
from
an
Application
written
using
a
'Managed
Runtime'
language
like
Java
or
C#.
It
is
assumed
that
native
and
managed
clients
use
a
suitable
standards
compliant
WebSocket
library
to
request
that
a
WebSocket
connection
is
opened
on
the
server.
</p>
<p>
<ins class="diff-new">Implementations
that
support
additional
devices
or
multiple
VIS
services
should
provide
discovery.
Alternatively,
the
location
of
a
particular
VIS
Server
instance
on
the
local
vehicle
network
may
be
handled
by
configuration,
either
as
part
of
a
package
manifest
or
by
consulting
a
registry
on
application
install.
The
'wwwivi'
hostname
in
this
specification
is
used
an
example.
</ins></p><p>
A
client
running
on
the
vehicle
is
able
to
connect
to
the
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
instance
using
the
hostname
<ins class="diff-new">e.g.
</ins>
'wwwivi'
and
uses
the
default
port
443.
The
hostname
'wwwivi'
may
locally
be
mapped
to
the
localhost
IP
address
127.0.0.1
e.g.
by
adding
an
entry
to
the
/etc/hosts
file.
</p>
<p>
The
sub-protocol
name
<del class="diff-old">always
is
</del>
<em class="rfc2119" title="SHALL">
<ins class="diff-chg">SHALL
</ins></em><ins class="diff-chg">
be
</ins>
'wvss'
with
a
version
number
suffix,
e.g.
<del class="diff-old">wvss1.0
    );
  
RESTful
web
services
are
out
of
scope
for
the
first
revision
of
this
specification,
but
could
</del>
<ins class="diff-chg">wvss1.0.
The
sub-protocol
version
will
</ins>
be
<del class="diff-old">considered
for
addition
in
a
later
version.
To
support
‘defence
in
depth’
</del>
<ins class="diff-chg">associated
with
exactly
one
Vehicle
Server
Specification
(VSS)
version
so
that
the
client
</ins>
and
<del class="diff-old">a
layered
security
approach,
connections
between
clients
</del>
<ins class="diff-chg">server
can
correctly
validate
</ins>
and
<del class="diff-old">servers
are
strongly
encrypted.
This
is
to
make
it
more
difficult
for
an
attacker
that
has
succeeded
in
installing
malicious
code
on
a
vehicle
to
eavesdrop,
hijack
security
tokens
or
impersonate
valid
security
principals
in
order
to
get
</del>
<ins class="diff-chg">parse
request
</ins>
and
<del class="diff-old">set
sensitive
vehicle
signals.
</del>
<ins class="diff-chg">response
message
packets.
</ins>
</p>
<pre class="highlight hljs javascript" aria-busy="false">
         <span class="hljs-keyword">var</span> vehicle  = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">"wss://wwwivi"</span>, <span class="hljs-string">"wvss1.0"</span>);
<ins class="diff-new">        
</ins></pre>
<p>
The
client
<em class="rfc2119" title="SHALL">
SHALL
</em>
connect
to
the
server
over
HTTPS
and
request
that
the
server
opens
a
WebSocket.
All
WebSocket
communications
between
the
client
and
server
<em class="rfc2119" title="MUST">
MUST
</em>
be
over
‘wss’.
Non
encrypted
communication
is
not
supported,
hence
the
server
<em class="rfc2119" title="MUST">
MUST
</em>
refuse
‘ws’
connection
requests.
</p>
<p>
<del class="diff-old">For
security
reasons,
clients
are
not
able
</del>
<ins class="diff-chg">This
specification
assumes
that
a
single
WebSocket
is
used
</ins>
to
<del class="diff-old">connect
directly
</del>
<ins class="diff-chg">enable
communication
between
a
client
application
and
the
server.
It
is
not
explicitly
prohibited
for
the
client
</ins>
to
<del class="diff-old">ECUs
or
</del>
<ins class="diff-chg">request
that
the
server
opens
more
than
one
WebSocket,
however,
the
server
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
refuse
</ins>
to
<del class="diff-old">CAN,
MOST
or
LIN
networks.
All
access
</del>
<ins class="diff-chg">open
a
subsequent
WebSocket
connection
and
the
client
</ins>
is
<del class="diff-old">via
WebSocket.
This
allows
</del>
<ins class="diff-chg">responsible
for
handling
this
gracefully.
</ins></p><p><ins class="diff-chg">
If
more
than
one
WebSocket
connection
is
established
between
a
client
application
and
</ins>
the
server
<ins class="diff-new">then
each
connection
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
managed
independently.
For
example,
subscriptions
created
using
a
particular
WebSocket
connection
shall
only
trigger
notifications
via
that
connection
and
the
client
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
that
WebSocket
connection
</ins>
to
<del class="diff-old">securely
control
access
</del>
<ins class="diff-chg">unsubscribe.
</ins></p><p><ins class="diff-chg">
If
more
than
one
WebSocket
connection
has
been
established
between
one
or
more
clients
and
a
particular
server
instance,
there
is
a
risk
that
race
conditions
and
concurrency
issues
could
occur.
An
example
of
this
would
be
where
two
or
more
WebSocket
connections
are
used
</ins>
to
<del class="diff-old">vehicle
signals.
</del>
<ins class="diff-chg">update
a
particular
setting
at
the
same
time.
</ins></p><p><ins class="diff-chg">
Unless
explicitly
stated
otherwise,
the
client
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
only
assume
that
the
server
implements
a
simple
concurrency
model
where
lost
updates
and
dirty
reads
could
potentially
occur
if
the
server
has
more
than
one
WebSocket
connection
open.
</ins>
</p>
</section>
<section id="message-structure">
<h2 id="x8-message-structure">
<span class="secno">
8.
</span>
Message
Structure
</h2>
<p>
The
client
<em class="rfc2119" title="MUST">
MUST
</em>
use
the
WebSocket
<dfn data-dfn-type="dfn" id="dfn-send">
send
</dfn>
method,
defined
<a href="https://www.w3.org/TR/2011/WD-websockets-20110929/#the-websocket-interface">
here
</a>,
to
pass
request
messages
to
the
server.
The
message
signature
<em class="rfc2119" title="SHALL">
SHALL
</em>
be:
</p>
<del class="diff-old">    WebSocket.send(request)
  
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">               WebSocket.send(request)
        
</ins>
</pre>
<p>
The
request
message
<em class="rfc2119" title="MUST">
MUST
</em>
be
comprised
of
one
the
request
objects
defined
in
this
section.
The
client
<em class="rfc2119" title="SHALL">
SHALL
</em>
receive
responses
from
the
server
using
the
WebSocket
<dfn data-dfn-type="dfn" id="dfn-onmessage">
onmessage
</dfn>
method,
as
follows:
</p>
<del class="diff-old">    WebSocket.onmessage = {
      
    }
  
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">               WebSocket.onmessage = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">obj</span>)</span>{
</ins>                        <span class="hljs-comment">// process data</span><ins class="diff-chg">
                }
        
</ins>
</pre>
<p>
The
message
returned
by
the
server
<em class="rfc2119" title="MUST">
MUST
</em>
be
one
of
the
response
objects
defined
in
the
table
below.
</p>
<table class="parameters">
<tbody>
<tr>
<th>
Request
Objects
</th>
<th>
Response
Objects
</th>
</tr>
<tr>
<td>
<a href="#dfn-authorizerequest" class="internalDFN" data-link-type="dfn">
authorizeRequest
</a>
</td>
<td>
<a href="#dfn-authorizesuccessresponse" class="internalDFN" data-link-type="dfn">
authorizeSuccessResponse
</a>
<br>
<a href="#dfn-authorizeerrorresponse" class="internalDFN" data-link-type="dfn">
authorizeErrorResponse
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-metadatarequest" class="internalDFN" data-link-type="dfn">
<ins class="diff-chg">metadataRequest
</ins></a>
<del class="diff-old">getRequest
</del>
</td>
<td>
<a href="#dfn-metadatasuccessresponse" class="internalDFN" data-link-type="dfn">
<ins class="diff-new">metadataSuccessResponse
</ins></a><br><a href="#dfn-metadataerrorresponse" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
metadataErrorResponse
</ins>
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-getrequest" class="internalDFN" data-link-type="dfn">
<ins class="diff-chg">getRequest
</ins></a>
<del class="diff-old">getSuccessResponse
</del>
</td>
<td>
<a href="#dfn-getsuccessresponse" class="internalDFN" data-link-type="dfn">
<ins class="diff-new">getSuccessResponse
</ins>
</a>
<br>
<a href="#dfn-geterrorresponse" class="internalDFN" data-link-type="dfn">
getErrorResponse
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-setrequest" class="internalDFN" data-link-type="dfn">
setRequest
</a>
</td>
<td>
<a href="#dfn-setsuccessresponse" class="internalDFN" data-link-type="dfn">
setSuccessResponse
</a>
<br>
<a href="#dfn-seterrorresponse" class="internalDFN" data-link-type="dfn">
setErrorResponse
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-subscriberequest" class="internalDFN" data-link-type="dfn">
subscribeRequest
</a>
</td>
<td>
<a href="#dfn-subscribesuccessresponse" class="internalDFN" data-link-type="dfn">
subscribeSuccessResponse
</a>
<br>
<a href="#dfn-subscribeerrorresponse" class="internalDFN" data-link-type="dfn">
subscribeErrorResponse
</a>
<br>
<a href="#dfn-subscriptionnotification" class="internalDFN" data-link-type="dfn">
subscriptionNotification
</a>
<br>
<a href="#dfn-subscriptionnotificationerror" class="internalDFN" data-link-type="dfn">
subscriptionNotificationError
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-unsubscriberequest" class="internalDFN" data-link-type="dfn">
unsubscribeRequest
</a>
</td>
<td>
<a href="#dfn-unsubscribesuccessresponse" class="internalDFN" data-link-type="dfn">
unsubscribeSuccessResponse
</a>
<br>
<a href="#dfn-unsubscribeerrorresponse" class="internalDFN" data-link-type="dfn">
unsubscribeErrorResponse
</a>
</td>
</tr>
<tr>
<td>
<a href="#dfn-unsubscribeallrequest" class="internalDFN" data-link-type="dfn">
<ins class="diff-new">unsubscribeAllRequest
</ins></a></td><td><a href="#dfn-unsubscribeallsuccessresponse" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
unsubscribeAllSuccessResponse
</ins></a><br><a href="#dfn-unsubscribeallerrorresponse" class="internalDFN" data-link-type="dfn"><ins class="diff-new">
unsubscribeAllErrorResponse
</ins>
</a>
</td>
</tr>
</tbody>
</table>
<p>
The
request
and
response
parameters
contain
a
limited
number
of
attributes,
defined
in
the
table
below.
</p>
<h2 id="generatedID">
</h2>
<h2 id="generatedID-0">
</h2>
<h4 id="term-definitions">
<ins class="diff-new">Term
Definitions
</ins></h4>
<table class="parameters">
<tbody>
<tr>
<th>
Attribute
</th>
<th>
Type
</th>
<th>
Description
</th>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-action">
action
</dfn>
</td>
<td>
<a href="#action">
Action
</a>
</td>
<td>
The
<ins class="diff-new">type
of
</ins>
action
<del class="diff-old">that
the
server
is
</del>
requested
<del class="diff-old">to
perform.
</del>
<ins class="diff-chg">by
the
client
or
delivered
by
the
server.
</ins>
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-path">
path
</dfn>
</td>
<td>
<del class="diff-old">DOMString
</del>
<ins class="diff-chg">String
</ins>
</td>
<td>
The
path
to
the
desired
vehicle
signal(s),
as
defined
by
the
<a href="https://www.w3.org/auto/wg/wiki/Vehicle_Information_Service_Specification#Data_Model">
Vehicle
Signal
Specification
(VSS)
</a>.
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-requestid">
requestId
</dfn>
</td>
<td>
<del class="diff-old">DOMString
</del>
<ins class="diff-chg">String
</ins>
</td>
<td>
Unique
id
value
specified
by
the
client.
Returned
by
the
server
in
the
response
and
used
by
client
to
link
the
request
and
response
messages.
The
value
<em class="rfc2119" title="MAY">
MAY
</em>
be
an
integer
or
a
Universally
Unique
Identifier
(UUID).
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-subscriptionid">
subscriptionId
</dfn>
</td>
<td>
<del class="diff-old">DOMString
</del>
<ins class="diff-chg">String
</ins>
</td>
<td>
Value
returned
by
the
server
to
uniquely
identify
each
subscription.
The
value
<em class="rfc2119" title="MAY">
MAY
</em>
be
an
integer
or
a
Universally
Unique
Identifier
(UUID).
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-tokens">
tokens
</dfn>
</td>
<td>
object
</td>
<td>
Structure
containing
one
or
more
security
token
(e.g
OAuth2)
name/value
pairs.
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-timestamp">
timestamp
</dfn>
</td>
<td>
<del class="diff-old">DOMTimestamp
</del>
<ins class="diff-chg">integer
</ins>
</td>
<td>
The
Coordinated
Universal
Time
(UTC)
time
that
the
server
returned
the
response
(expressed
as
number
of
milliseconds).
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-value">
value
</dfn>
</td>
<td>
any
</td>
<td>
The
data
value
returned
by
the
server.
This
could
either
be
a
basic
type,
or
a
complex
type
comprised
of
nested
name/value
pairs
in
JSON
format.
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-ttl">
TTL
</dfn>
</td>
<td>
<del class="diff-old">int
</del>
<ins class="diff-chg">integer
</ins>
</td>
<td>
Returns
the
time
to
live
of
the
<del class="diff-old">authentication
</del>
<ins class="diff-chg">authorization
</ins>
token
in
<del class="diff-old">milliseconds.
</del>
<ins class="diff-chg">seconds.
</ins>
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-filters">
filters
</dfn>
</td>
<td>
object
</td>
<td>
Provides
a
filtering
mechanism
to
reduce
the
demands
of
a
subscription
on
the
server.
</td>
</tr>
<tr>
<td>
<del class="diff-old">error
</del>
<dfn data-dfn-type="dfn" id="dfn-metadata">
<ins class="diff-chg">metadata
</ins>
</dfn>
</td>
<td>
<ins class="diff-new">object
</ins></td><td><ins class="diff-new">
Metadata
describing
the
potentially
available
signal
tree.
</ins></td></tr><tr><td id="dfn-error">
<strong>
<ins class="diff-chg">error
</ins></strong>
<del class="diff-old">Error
</del>
</td>
<td>
<a href="#errors">
<ins class="diff-new">Error
</ins>
</a>
</td>
<td>
Returns
an
error
code,
reason
and
message.
</td>
</tr>
</tbody>
</table>
<h4 id="json-schema-definitions">
<ins class="diff-chg">JSON
Schema
Definitions
</ins></h4><p><ins class="diff-chg">
The
definitions
within
this
section
describe
the
datatypes
referenced
within
the
JSON
Schema
VISS
interfaces.
</ins></p><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"definitions"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"authorize"</span>, <span class="hljs-string">"getMetadata"</span>, <span class="hljs-string">"get"</span>, <span class="hljs-string">"set"</span>, <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"subscription"</span>, <span class="hljs-string">"unsubscribe"</span>, <span class="hljs-string">"unsubscribeAll"</span>],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The type of action requested by the client or delivered by the server"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Returned by the server in the response and used by the client to link the request and response messages."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"path"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The path to the desired vehicle signal(s), as defined by the metadata schema."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"value"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The data value returned by the server. This could either be a basic type, or a complex type comprised of nested name/value pairs in JSON format."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The Coordinated Universal Time (UTC) time that the server returned the response (expressed as number of milliseconds)."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"filters"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"May be specified in order to throttle the demands of subscriptions on the server."</span>,            <span class="hljs-attr">"type"</span>: [<span class="hljs-string">"object"</span>, <span class="hljs-string">"null"</span>],            <span class="hljs-attr">"properties"</span>: {                <span class="hljs-attr">"interval"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The server is requested to provide notifications with a period equal to this field's value."</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>                   <ins class="diff-chg">
                },
</ins>                <span class="hljs-attr">"range"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The server is requested to provide notifications only whilst a value is within a given range."</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,                    <span class="hljs-attr">"properties"</span>:{                      <span class="hljs-attr">"below"</span>: {                        <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The server is requested to provide notifications when the value is less than or equal to this field's value."</span>,                        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>  <ins class="diff-chg">
                      },
</ins>                      <span class="hljs-attr">"above"</span>: {                        <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The server is requested to provide notifications when the value is greater than or equal to this field's value."</span>,                        <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>  <ins class="diff-chg">
                      }
                    }                   
                },
</ins>                <span class="hljs-attr">"minChange"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The subscription will provide notifications when a value has changed by the amount specified in this field."</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>                   <ins class="diff-chg">
                }
            }
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>:{            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Integer handle value which is used to uniquely identify the subscription."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"metadata"</span>:{            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Metadata describing the potentially available signal tree."</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Server response for error cases"</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,            <span class="hljs-attr">"properties"</span>: {                <span class="hljs-attr">"number"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"HTTP Status Code Number"</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span>                   <ins class="diff-chg">
                },
</ins>                <span class="hljs-attr">"reason"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Pre-defined string value that can be used to distinguish between errors that have the same code"</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>                    <ins class="diff-chg">
                },
</ins>                <span class="hljs-attr">"message"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Message text describing the cause in more detail"</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span>                    <ins class="diff-chg">
                }
            }   
        }
    }
}
</ins></pre><h4 id="action">
Action
</h4>
<p>
The
Action
enumeration
is
used
to
define
the
type
of
action
requested
by
the
client.
All
client
messages
<em class="rfc2119" title="MUST">
MUST
</em>
contain
a
JSON
structure
that
has
an
'action'
name/value
pair
and
the
value
of
the
'action'
property
<em class="rfc2119" title="MUST">
MUST
</em>
be
one
of
the
values
specified
in
the
enumeration:
</p>
<del class="diff-old"> {
    "",
    "",
    "",
    "",
    "",
    "",
    ""
};
Enumeration
description
</del>
<dl title="enum Action" class="idl">
<dt>
<dfn data-dfn-type="dfn" id="dfn-authorize">
authorize
</dfn>
</dt>
<dd>
Enables
client
to
pass
security
tokens
for
Security
Principals
to
the
server
to
support
access-control.
</dd>
<dt>
<del class="diff-old">getVSS
</del>
<dfn data-dfn-type="dfn" id="dfn-getmetadata">
<ins class="diff-chg">getMetadata
</ins></dfn>
</dt>
<dd>
Allows
the
client
to
request
metadata
describing
signals
and
data
attributes
that
are
potentially
accessible.
</dd>
<dt>
<dfn data-dfn-type="dfn" id="dfn-get">
get
</dfn>
</dt>
<dd>
Enables
the
client
to
get
<del class="diff-old">a
value
</del>
<ins class="diff-chg">one
or
more
values
</ins>
once.
</dd>
<dt>
<dfn data-dfn-type="dfn" id="dfn-set">
set
</dfn>
</dt>
<dd>
Enables
the
client
to
set
<del class="diff-old">a
value
</del>
<ins class="diff-chg">one
or
more
values
</ins>
once.
</dd>
<dt>
<dfn data-dfn-type="dfn" id="dfn-subscribe">
subscribe
</dfn>
</dt>
<dd>
Enables
the
client
to
<del class="diff-old">receive
a
notification
</del>
<ins class="diff-chg">request
notifications
</ins>
containing
a
JSON
data
structure
with
values
for
one
or
more
vehicle
signals
and/or
data
attributes.
The
client
requests
that
it
is
notified
when
the
signal
changes
on
the
server.
</dd>
<dt>
<dfn data-dfn-type="dfn" id="dfn-subscription">
<ins class="diff-chg">subscription
</ins></dfn></dt><dd><ins class="diff-chg">
Enables
the
server
to
send
notifications
to
the
client
containing
a
JSON
data
structure
with
values
for
one
or
more
vehicle
signals
and/or
data
attributes.
</ins></dd><dt><dfn data-dfn-type="dfn" id="dfn-unsubscribe">
unsubscribe
</dfn>
</dt>
<dd>
Allows
the
client
to
notify
the
server
that
it
should
no
longer
receive
notifications
based
on
that
subscription.
</dd>
<dt>
<dfn data-dfn-type="dfn" id="dfn-unsubscribeall">
unsubscribeAll
</dfn>
</dt>
<dd>
Allows
the
client
to
notify
the
server
that
it
should
no
longer
receive
notifications
for
any
active
subscription.
</dd>
</dl>
<h2 id="authorize">
Authorize
</h2>
<p>
To
enable
access
to
signals
and
data
attributes
that
are
under
access
control,
the
client
<em class="rfc2119" title="MAY">
MAY
</em>
optionally
pass
a
message
with
an
'authorize'
action
to
the
server.
The
structure
of
the
message
and
the
associated
success
and
error
responses
are
defined
below.
</p>
<del class="diff-old"> {
};
</del>
<h4 data-idl="" id="idl-def-authorizerequest">
<ins class="diff-chg">Authorize
Request
Properties
</ins></h4><p><ins class="diff-chg">
The
properties
and
schema
for
an
authorizeRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-authorizerequest">
<ins class="diff-chg">authorizeRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-tokens"><ins class="diff-chg">
tokens
</ins></a></td><td><ins class="diff-chg">
object
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Authorize Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Enables the user to set access controls for the vehicle signals"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"tokens"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"authorize"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the authorize request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"tokens"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Extensible key-value pair token mechanism used for access control"</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,            <span class="hljs-attr">"properties"</span>: {                <span class="hljs-attr">"authorization"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The user token, for the user that the client is making requests on behalf of"</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
                },
</ins>                <span class="hljs-attr">"www-vehicle-device"</span>: {                    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The device token for the originating device that is making the request to the server"</span>,                    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
                }
            }
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
an
authorizeSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4"><dfn data-dfn-type="dfn" id="dfn-authorizesuccessresponse"><ins class="diff-chg">
authorizeSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-ttl"><ins class="diff-chg">
TTL
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
    
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Authorize Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful authorization request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"TTL"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"authorize"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the authorize request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"TTL"</span>: {            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The time to live of the authorization token"</span>,            <span class="hljs-attr">"type"</span>: <span class="hljs-string">"integer"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
an
authorizeErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4"><dfn data-dfn-type="dfn" id="dfn-authorizeerrorresponse"><ins class="diff-chg">
authorizeErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-chg">
error
</ins></a></td><td><a href="#errors"><ins class="diff-chg">
Error
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
  
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Authorize Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful authorization request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"authorize"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the authorize request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<p>
The
server
<em class="rfc2119" title="SHALL">
SHALL
</em>
provide
support
the
following
security
token
types
and
names:
</p>
<table class="parameters">
<tbody>
<tr>
<th>
Security&#160;Principal
</th>
<th>
Token
Name
</th>
<th>
Description
</th>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-user">
User
</dfn>
</td>
<td>
<dfn data-dfn-type="dfn" id="dfn-authorization">
authorization
</dfn>
</td>
<td>
The
user
that
the
client
is
making
requests
on
behalf
of.
This
<em class="rfc2119" title="MAY">
MAY
</em>
be
a
person
e.g.
driver
or
passenger,
it
<em class="rfc2119" title="MAY">
MAY
</em>
be
an
organisation
e.g.
Emergency
Services
or
<em class="rfc2119" title="MAY">
MAY
</em>
be
any
other
legal
entity.
</td>
</tr>
<tr>
<td>
<dfn data-dfn-type="dfn" id="dfn-device">
Device
</dfn>
</td>
<td>
<dfn data-dfn-type="dfn" id="dfn-www-vehicle-device">
www-vehicle-device
</dfn>
</td>
<td>
The
originating
device
that
is
making
the
request
to
the
server.
This
<em class="rfc2119" title="MAY">
MAY
</em>
be
an
ECU
in
the
vehicle
that
is
hosting
the
<del class="diff-old">WebSocket
</del>
<ins class="diff-chg">VIS
</ins>
Server
or
<em class="rfc2119" title="MAY">
MAY
</em>
be
a
device
that
is
connected
to
the
vehicle
via
a
WiFi
hotspot
or
<em class="rfc2119" title="MAY">
MAY
</em>
be
any
other
device.
</td>
</tr>
</tbody>
</table>
<p>
The
'tokens'
JSON
fragment
<em class="rfc2119" title="MAY">
MAY
</em>
contain
an
'authorization'
structure
that
contains
just
a
single
name/value
pair,
for
example,
to
pass
only
the
user
token.
Or
it
may
contain
only
the
'www-vehicle-device'
name/value
pair
to
pass
the
just
the
vehicle
token;
alternatively
it
<em class="rfc2119" title="MAY">
MAY
</em>
include
name/value
pairs
for
both
the
'authorization'
and
'www-vehicle-device'
tokens.
These
alternatives
are
illustrated
in
the
following
example:
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
<del class="diff-old">3
</del>
<ins class="diff-chg">4
</ins>
</span>
</div>
<del class="diff-old">(userTokenOnly){
  // Pass user token only
  vehicle.send('{ "action": "authorize",
    "tokens": { "authorization": "&lt;user_token_value&gt;" },
    "requestId": "&lt;some_unique_value&gt;" }');
</del>
<pre class="highlight hljs xml" aria-busy="false">
<ins class="diff-chg">if(userTokenOnly){
        // Pass user token only
        vehicle.send('{ "action": "authorize",
                "tokens": { "authorization": "<span class="hljs-tag">&lt;<span class="hljs-name">user_token_value</span>&gt;</span>" },
                "requestId": "<span class="hljs-tag">&lt;<span class="hljs-name">some_unique_value</span>&gt;</span>" }');
</ins>
<del class="diff-old">}  (deviceTokenOnly) {
  // Pass vehicle/device token only
  vehicle.send('{ "action": "authorize",
    "tokens": { "www-vehicle-device": "&lt;device_token_value&gt;" },
    "requestId": "&lt;some_unique_value&gt;" }');
</del>
<ins class="diff-chg">} else if (deviceTokenOnly) {
        // Pass vehicle/device token only
        vehicle.send('{ "action": "authorize",
                "tokens": { "www-vehicle-device": "<span class="hljs-tag">&lt;<span class="hljs-name">device_token_value</span>&gt;</span>" },
                "requestId": "<span class="hljs-tag">&lt;<span class="hljs-name">some_unique_value</span>&gt;</span>" }');
</ins>
<del class="diff-old">}  (userAndDeviceToken) {
  // Pass tokens for user and device
  vehicle.send('{ "action": "authorize",
    "tokens": { "authorization": "&lt;user_token_value&gt;",
      "www-vehicle-device": "&lt;device_token_value&gt;" },
    "requestId": "&lt;some_unique_value&gt;" }');
</del>
<ins class="diff-chg">} else if (userAndDeviceToken) {
        // Pass tokens for user and device
        vehicle.send('{ "action": "authorize",
                "tokens": { "authorization": "<span class="hljs-tag">&lt;<span class="hljs-name">user_token_value</span>&gt;</span>",
                        "www-vehicle-device": "<span class="hljs-tag">&lt;<span class="hljs-name">device_token_value</span>&gt;</span>" },
                "requestId": "<span class="hljs-tag">&lt;<span class="hljs-name">some_unique_value</span>&gt;</span>" }');
</ins>
}
</pre>
</div>
<p>
This
specification
purposely
does
not
define
the
token
structure
and
the
methods
to
<del class="diff-old">secure
tokens.
</del>
<ins class="diff-chg">obtain
token(s).
</ins>
Providers
of
the
server
<ins class="diff-new">implementation
</ins>
may
<del class="diff-old">choose
</del>
<ins class="diff-chg">select
</ins>
their
own
preferred
<del class="diff-old">formats
</del>
<ins class="diff-chg">token
format
</ins>
and
<del class="diff-old">security
methods.
</del>
<ins class="diff-chg">method
for
verifying
the
authenticity
of
token(s)
passed
to
the
server.
</ins>
The
server
may
also
treat
tokens
as
opaque
structures
and
pass
them
on
to
underlying
software
layers
for
evaluation.
</p>
<p>
<del class="diff-old">While
this
specification
does
not
mandate
the
token
format
and
structure
it
SHALL
at
least
contain
the
following
elements
to
provide
meaningful
authorization:
Element
Description
Path
The
signal
path
(defined
here
)
the
token
authorizes.
The
path
may
be
a
branch
name
or
contain
wildcards
to
authorize
entire
branches.
Actions
List
of
actions
that
the
token
authorizes
for
the
path.
The
list
contains
at
least
one
of
the
actions
getVSS
,
get
,
set
,
subscribe
and
unsubscribe
.
Valid
From
Timestamp
in
UTC
indicating
the
date
and
time
from
which
on
the
token
is
valid.
Valid
Until
Tmestamp
in
UTC
indicating
the
date
and
time
until
which
the
token
is
valid.
</del>
It
is
expected
that
client
and
server
use
the
same
token
format.
If
a
client
presents
a
token
using
a
format
that
is
not
understood
by
the
server,
<del class="diff-old">ther
</del>
<ins class="diff-chg">the
</ins>
server
rejects
the
token.
</p>
<del class="diff-old">VSS
</del>
<p>
<ins class="diff-chg">In
order
to
make
dictionary
attacks
more
difficult,
authentication
will
be
denied
after
a
number
of
failed
authentication
requests.
A
401
(Unauthorized)
too_many_requests
error
will
be
sent
by
the
server
in
response
to
any
subsequent
authentication
requests.
The
number
of
failed
requests
and
the
period
of
time
during
which
attempts
will
be
denied
is
to
be
determined
by
the
implementation.
</ins></p><h2 id="metadata-request"><ins class="diff-chg">
Metadata
</ins>
Request
</h2>
<p>
The
client
<em class="rfc2119" title="MAY">
MAY
</em>
use
the
<del class="diff-old">'getVSS'
</del>
<ins class="diff-chg">'getMetadata'
</ins>
action
to
request
metadata
describing
the
potentially
available
<ins class="diff-new">signal
schema,
for
example
the
</ins>
VSS
tree.
It
does
this
by
sending
a
<del class="diff-old">'vssRequest'
</del>
<ins class="diff-chg">'metadataRequest'
</ins>
message
to
the
server.
If
the
server
is
able
to
return
the
<del class="diff-old">VSS
</del>
metadata,
then
this
is
returned
using
a
<del class="diff-old">'vssSuccessResponse'
</del>
<ins class="diff-chg">'metadataSuccessResponse'
</ins>
message.
If
an
error
occurs,
the
server
returns
a
<del class="diff-old">'vssErrorResponse'
</del>
<ins class="diff-chg">'metadataErrorResponse'
</ins>
message
to
the
client.
</p>
<p>
The
client
is
able
to
request
<del class="diff-old">VSS
</del>
metadata
from
any
point
in
the
<del class="diff-old">VSS
</del>
<ins class="diff-chg">signal
</ins>
tree,
such
that
only
the
metadata
for
the
signals
within
the
given
branch
of
the
<del class="diff-old">tree
</del>
<ins class="diff-chg">schema's
hierachy
</ins>
is
returned.
For
example,
only
metadata
for
the
chassis
branch
of
the
<ins class="diff-new">VSS
</ins>
tree
is
returned
when
the
chassis
path
is
specified.
If
the
path
is
not
set,
the
response
contains
the
metadata
for
the
entire
<del class="diff-old">VSS
</del>
<ins class="diff-chg">signal
</ins>
tree.
</p>
<p>
If
more
than
one
<del class="diff-old">'getVSS'
</del>
<ins class="diff-chg">'getMetadata'
</ins>
call
is
made
with
the
same
<del class="diff-old">'vssRequest'
</del>
<ins class="diff-chg">'metadataRequest'
</ins>
message
content
but
at
different
times,
the
metadata
in
the
<del class="diff-old">'vssSuccessResponse'
</del>
<ins class="diff-chg">'metadataSuccessResponse'
</ins>
<em class="rfc2119" title="SHALL">
SHALL
</em>
be
the
same
provided
the
access-control
state
of
the
WebSocket
channel
has
not
changed.
</p>
<del class="diff-old"> {
};
</del>
<p>
<ins class="diff-chg">The
Vehicle
Signal
Server
(VSS)
specification
allows
branches
to
be
defined
as
either
public
or
private.
The
VIS
server
will
satisfy
a
request
for
metadata
in
a
public
branch
regardless
of
the
access
control
permissions
associated
with
the
client
making
the
request.
This
means
that
a
user
could
see
that
a
particular
signal
in
a
public
branch
is
available
but
they
may
not
be
currently
authorised
to
Get,
Set,
or
Subscribe
to
that
signal.
If
a
branch
is
defined
to
be
'private',
only
suitably
authorised
clients
will
be
able
to
retrieve
metadata
for
that
branch.
This
is
to
enable
vehicle
manufacturers
to
apply
access
controls
to
metadata
for
commercially
sensitive
signals
and
data.
</ins></p><p><ins class="diff-chg">
If
a
signal
is
requested
to
which
the
client
has
no
access
then
the
server
will
reject
the
request
as
detailed
by
the
Get,
Set,
and
Subscribe
sections
of
this
specification.
The
server
shall
only
return
metadata
for
the
branches
and
nodes
which
are
classified
as
"Private"
branch
unless
the
client
has
appropriate
access
permissions.
Other
data
models
may
also
operate
similar
mechanisms.
</ins></p><h4 data-idl="" id="idl-def-metadataRequest"><ins class="diff-chg">
Metadata
Request
Properties
</ins></h4><p><ins class="diff-chg">
The
properties
and
schema
for
a
metadataRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-metadatarequest">
<ins class="diff-chg">metadataRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-path"><ins class="diff-chg">
path
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Metadata Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Request metadata describing the potentially available signals"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"path"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"getMetadata"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the getMetadata request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"path"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/path"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<p>
The
<ins class="diff-new">properties
and
schema
for
a
metadataSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-metadatasuccessresponse"><ins class="diff-new">
metadataSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-metadata"><ins class="diff-new">
metadata
</ins></a></td><td><ins class="diff-new">
object
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Metadata Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful getMetadata request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"metadata"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"getMetadata"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the getMetadata request"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"metadata"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/metadata"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><p><ins class="diff-new">
The
properties
and
schema
for
a
metadataErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-metadataerrorresponse"><ins class="diff-new">
metadataErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-new">
error
</ins></a></td><td><a href="#errors"><ins class="diff-new">
Error
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Metadata Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful getMetadata request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"getMetadata"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the getMetadata request"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><h4 id="examples"><ins class="diff-new">
Examples
</ins></h4><p><ins class="diff-new">
The
</ins>
following
data
flow
example
shows
a
request
for
the
signal
structure
within
the
<del class="diff-old">Signal.Body
</del>
<ins class="diff-chg">Signal.Drivetrain.InternalCombustionEngine.RPM
</ins>
branch
containing
<del class="diff-old">signals
related
to
</del>
the
vehicle
<del class="diff-old">body.
</del>
<ins class="diff-chg">RPM
signal,
where
the
metadata
is
defined
using
a
VSS
tree.
A
leaf
node
has
been
chosen
in
this
example
for
brevity,
however
entire
VSS
branches
and
other
schemas
can
also
be
requested
using
the
getMetadata
interface.
</ins>
</p>
<pre class="highlight hljs javascript" aria-busy="false">
  client -&gt; {
<del class="diff-old">    ,
    ,
</del>
    <span class="hljs-string">"action"</span>: <span class="hljs-string">"getMetadata"</span>,
    <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Drivetrain.InternalCombustionEngine.RPM"</span>,
    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3874"</span>
  }
  receive &lt;- {
<del class="diff-old">    ,
    ,
    : { },
</del>
    <span class="hljs-string">"action"</span>: <span class="hljs-string">"getMetadata"</span>,
    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3874"</span>,
    <span class="hljs-string">"metadata"</span>: { <span class="hljs-string">"Signal"</span>: {
        <span class="hljs-string">"description"</span>: <span class="hljs-string">"All signals that can dynamically be updated by the vehicle"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"branch"</span>,
        <span class="hljs-string">"children"</span>: {
          <span class="hljs-string">"Drivetrain"</span>: {
            <span class="hljs-string">"description"</span>: <span class="hljs-string">"Drivetrain data for internal combustion engines, transmissions, electric motors, etc."</span>,
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"branch"</span>,
            <span class="hljs-string">"children"</span>: {
              <span class="hljs-string">"InternalCombustionEngine"</span>: {
                <span class="hljs-string">"description"</span>: <span class="hljs-string">"Engine-specific data, stopping at the bell housing."</span>,
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"branch"</span>,
                <span class="hljs-string">"children"</span>: {
                  <span class="hljs-string">"RPM"</span>: {
                    <span class="hljs-string">"description"</span>: <span class="hljs-string">"Engine speed measured as rotations per minute."</span>,
                    <span class="hljs-string">"min"</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-string">"max"</span>: <span class="hljs-number">20000</span>,
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"UInt16"</span>,
                    <span class="hljs-string">"id"</span>: <span class="hljs-number">54</span>,
                    <span class="hljs-string">"unit"</span>: <span class="hljs-string">"rpm"</span>
<ins class="diff-chg">                  }
                }
              }
            }
          }
        }
      }
    },
</ins>    <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1496087968995</span><ins class="diff-chg">
  }
  
</ins></pre><p><ins class="diff-chg">
The
following
data
flow
example
shows
a
request
for
the
VSS
structure
within
the
Attribute.Body
branch
of
the
VSS.
The
example
assumes
the
VSS
contains
two
leaf
nodes
within
the
Attribute.Body
branch.
</ins></p><pre class="highlight hljs javascript" aria-busy="false"><ins class="diff-chg">
  client -&gt; {
</ins>    <span class="hljs-string">"action"</span>: <span class="hljs-string">"getMetadata"</span>,    <span class="hljs-string">"path"</span>: <span class="hljs-string">"Attribute.Body"</span>,    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3875"</span><ins class="diff-chg">
  }
  receive &lt;- {
</ins>    <span class="hljs-string">"action"</span>: <span class="hljs-string">"getMetadata"</span>,    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3875"</span>,    <span class="hljs-string">"metadata"</span>: { <span class="hljs-string">"Attribute"</span>: {        <span class="hljs-string">"description"</span>: <span class="hljs-string">"Attribute signals that do not change during the power cycle of a vehicle."</span>,        <span class="hljs-string">"type"</span>: <span class="hljs-string">"branch"</span>,        <span class="hljs-string">"children"</span>: {          <span class="hljs-string">"Body"</span>: {            <span class="hljs-string">"description"</span>: <span class="hljs-string">"All body components"</span>,            <span class="hljs-string">"type"</span>: <span class="hljs-string">"branch"</span>,            <span class="hljs-string">"children"</span>: {              <span class="hljs-string">"BodyType"</span>: {                <span class="hljs-string">"description"</span>: <span class="hljs-string">"Body type code as defined by ISO 3779"</span>,                <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span><ins class="diff-chg">
              },
</ins>              <span class="hljs-string">"RefuelPosition"</span>: {                <span class="hljs-string">"description"</span>: <span class="hljs-string">"Location of the fuel cap or charge port"</span>,                <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,                <span class="hljs-string">"enum"</span>: [<span class="hljs-string">"front_left"</span>, <span class="hljs-string">"front_right"</span>, <span class="hljs-string">"middle_left"</span>, <span class="hljs-string">"middle_right"</span>, <span class="hljs-string">"rear_left"</span>, <span class="hljs-string">"rear_right"</span>]<ins class="diff-chg">
              }
            }
          }
        }
      }
    },
</ins>    <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span>
  }
  
</pre>
<h2 id="get">
Get
</h2>
<p>
The
client
<em class="rfc2119" title="MAY">
MAY
</em>
send
a
'getRequest'
message
to
the
server
to
get
the
value
of
one
or
more
vehicle
signals
and
data
attributes.
If
the
server
is
able
to
satisfy
the
request
it
<em class="rfc2119" title="SHALL">
SHALL
</em>
return
a
'getSuccessResponse'
message.
If
the
server
is
unable
to
fulfil
the
request,
e.g.
because
the
client
is
not
<del class="diff-old">authorised
</del>
<ins class="diff-chg">authorized
</ins>
to
retrieve
one
or
more
of
the
signals,
then
the
server
<em class="rfc2119" title="SHALL">
SHALL
</em>
return
a
'getErrorResponse'.
The
structure
of
these
message
objects
is
defined
below:
</p>
<del class="diff-old"> {
};
</del>
<h4 data-idl="" id="idl-def-getrequest">
<ins class="diff-chg">Get
Request
Properties
</ins></h4><p><ins class="diff-chg">
The
properties
and
schema
for
a
getRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-getrequest">
<ins class="diff-chg">getRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-path"><ins class="diff-chg">
path
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Get Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Get the value of one or more vehicle signals and data attributes"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"path"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"get"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the get request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"path"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/path"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<p>
<ins class="diff-new">The
properties
and
schema
for
a
getSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-getsuccessresponse"><ins class="diff-new">
getSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-value"><ins class="diff-new">
value
</ins></a></td><td><ins class="diff-new">
object
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Get Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful get request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"get"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the get request"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"value"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/value"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><p><ins class="diff-new">
The
properties
and
schema
for
a
getErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-geterrorresponse"><ins class="diff-new">
getErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-new">
error
</ins></a></td><td><a href="#errors"><ins class="diff-new">
Error
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Get Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful get request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"get"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the get request"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><h4 id="examples-0"><ins class="diff-new">
Examples
</ins></h4><p>
It
is
important
to
note
that
all
examples
involving
paths
are
illustrative.
Valid
path
values
and
the
signals
and
data
attributes
that
correspond
to
a
particular
path
are
defined
in
the
Vehicle
Signal
Specification.
</p>
<p>
The
example
below
shows
the
JSON
structure
for
a
'getRequest'
message
sent
by
the
client
to
obtain
the
engine
RPM
value
and
a
'getSuccessResponse'
returned
by
the
server.
</p>
<del class="diff-old">  client -&gt; {
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Drivetrain.InternalCombustionEngine.RPM"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"8756"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"8756"</span>,                <span class="hljs-string">"value"</span>: <span class="hljs-number">2372</span>,                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<p>
In
the
case
where
the
server
returns
a
value
that
is
a
<dfn data-dfn-type="dfn" id="dfn-complex-type">
complex
type
</dfn>,
i.e.
a
value
that
is
not
a
single
basic
JavaScript
type
(e.g.
<del class="diff-old">string,
number,
boolean),
</del>
<ins class="diff-chg">String,
Number,
Boolean),
</ins>
the
value
<em class="rfc2119" title="SHALL">
SHALL
</em>
be
returned
as
a
set
of
name/value
pairs
in
a
JSON
object
structure.
The
format
<em class="rfc2119" title="MUST">
MUST
</em>
be
as
defined
by
the
<ins class="diff-new">version
of
the
</ins>
Vehicle
Signal
<del class="diff-old">Specification.
</del>
<ins class="diff-chg">Specification
that
is
associated
with
the
WebSocket
sub-protocol
value
specified
when
the
WebSocket
is
created.
</ins>
</p>
<p>
</p>
<p>
The
following
shows
an
example
of
a
'getRequest'
that
results
in
the
server
returning
a
'getSuccessResponse'
with
a
value
that
is
a
complex
type:
</p>
<del class="diff-old">  client -&gt; {
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Body.Trunk"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"9078"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
       },
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"9078"</span>,                <span class="hljs-string">"value"</span>: { <span class="hljs-string">"Signal.Body.Trunk.IsLocked"</span>: <span class="hljs-literal">false</span>,                        <span class="hljs-string">"Signal.Body.Trunk.IsOpen"</span>: <span class="hljs-literal">true</span> },                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<p>
One
or
more
wildcards
(denoted
by
asterisk
'*')
<em class="rfc2119" title="MAY">
MAY
</em>
be
included
at
any
level
in
the
path
to
specify
that
all
nodes
at
that
level
are
to
be
included.
</p>
<p>
In
the
example
below,
the
path
in
the
'getRequest'
includes
a
wildcard
at
the
levels
above
the
leaf
(signal)
node,
in
order
to
request
just
the
'IsLocked'
state
for
all
doors.
</p>
<del class="diff-old">  client -&gt; {
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Cabin.Door.*.IsLocked"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"4523"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
     },
               { },
             { },
             { } ],
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"4523"</span>,                <span class="hljs-string">"value"</span>: [ {<span class="hljs-string">"Signal.Cabin.Door.Row1.Right.IsLocked"</span> : <span class="hljs-literal">true</span> },<ins class="diff-chg">
                           {<span class="hljs-string">"Signal.Cabin.Door.Row1.Left.IsLocked"</span> : <span class="hljs-literal">true</span> },
                               {<span class="hljs-string">"Signal.Cabin.Door.Row2.Right.IsLocked"</span> : <span class="hljs-literal">false</span> },
                               {<span class="hljs-string">"Signal.Cabin.Door.Row2.Left.IsLocked"</span> : <span class="hljs-literal">true</span> } ],
</ins>                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<p>
In
this
example,
a
complex
type
with
a
nested
array
is
returned
in
response
to
the
Path:
"Signal.Cabin.Door.*"
which
denotes:
'Return
all
signals
and
data
attributes
for
all
doors'.
For
simplicity,
the
example
assumes
that
the
VSS
definition
for
each
door
only
has
two
attributes
'IsLocked'
and
'Window.Position'.
</p>
<del class="diff-old">  client -&gt; {
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Cabin.Door.*"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"6745"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    },
               {},
               { },
               { } ],
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"6745"</span>,                <span class="hljs-string">"value"</span>: [ {<span class="hljs-string">"Signal.Cabin.Door.Row1.Right.IsLocked"</span> : <span class="hljs-literal">true</span>, <span class="hljs-string">"Signal.Cabin.Door.Row1.Right.Window.Position"</span>: <span class="hljs-number">50</span>},<ins class="diff-chg">
                           {<span class="hljs-string">"Signal.Cabin.Door.Row1.Left.IsLocked"</span> : <span class="hljs-literal">true</span>, <span class="hljs-string">"Signal.Cabin.Door.Row1.Left.Window.Position"</span>: <span class="hljs-number">23</span>},
                           {<span class="hljs-string">"Signal.Cabin.Door.Row2.Right.IsLocked"</span> : <span class="hljs-literal">false</span>, <span class="hljs-string">"Signal.Cabin.Door.Row2.Right.Window.Position"</span>: <span class="hljs-number">100</span> },
                           {<span class="hljs-string">"Signal.Cabin.Door.Row2.Left.IsLocked"</span>: <span class="hljs-literal">true</span>, <span class="hljs-string">"Signal.Cabin.Door.Row2.Left.Window.Position"</span>: <span class="hljs-number">0</span> } ],
</ins>                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<p>
The
following
shows
a
request
for
non-existent
data
</p>
<del class="diff-old">  client -&gt; {
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Body.Flux.Capacitor"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"1245"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
      ,
       },
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"get"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"1245"</span>,                <span class="hljs-string">"error"</span>: { <span class="hljs-string">"number"</span>:<span class="hljs-number">404</span>,                        <span class="hljs-string">"reason"</span>: <span class="hljs-string">"invalid_path"</span>,                        <span class="hljs-string">"message"</span>: <span class="hljs-string">"The specified data path does not exist."</span> },                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<h2 id="set">
Set
</h2>
<p>
The
client
may
request
that
the
server
sets
the
value
of
<del class="diff-old">a
signal
</del>
<ins class="diff-chg">one
or
more
signals
</ins>
e.g.
to
lock
<del class="diff-old">a
door
</del>
<ins class="diff-chg">one
or
more
doors
</ins>
or
open
a
window
by
sending
a
'setRequest'
message
to
the
server.
If
the
server
is
able
to
satisfy
the
request
it
<em class="rfc2119" title="SHALL">
SHALL
</em>
return
a
'setSuccessResponse'
message.
If
an
error
occurs
e.g.
because
the
client
is
not
<del class="diff-old">authorised
</del>
<ins class="diff-chg">authorized
</ins>
to
set
the
requested
value,
or
the
value
is
read-only,
the
server
<em class="rfc2119" title="SHALL">
SHALL
</em>
return
a
'setErrorResponse'
message.
</p>
<p>
</p>
<del class="diff-old"> {
};
</del>
<p>
<ins class="diff-chg">The
properties
and
schema
for
a
setRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-setrequest">
<ins class="diff-chg">setRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-path"><ins class="diff-chg">
path
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-value"><ins class="diff-chg">
value
</ins></a></td><td><ins class="diff-chg">
any
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Set Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Enables the client to set one or more values once."</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"path"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"set"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the set request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"path"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/path"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"value"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/value"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
a
setSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4"><dfn data-dfn-type="dfn" id="dfn-setsuccessresponse"><ins class="diff-chg">
setSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Set Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful set request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"set"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the set request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
        }
    }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
a
setErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-seterrorresponse"><ins class="diff-chg">
setErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-chg">
error
</ins></a></td><td><a href="#errors"><ins class="diff-chg">
Error
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Set Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful set request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"set"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the set request"</span>,<ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<h4 id="examples-1">
<ins class="diff-new">Examples
</ins></h4>
<p>
Successfully
set
a
signal.
</p>
<del class="diff-old">  client -&gt; {
    ,
    ,
     },
                { },
            { },
            { } ] }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">    client -&gt; {
</ins>      <span class="hljs-string">"action"</span>: <span class="hljs-string">"set"</span>,      <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Cabin.Door.*.IsLocked"</span>,      <span class="hljs-string">"value"</span>: [ {<span class="hljs-string">"Row1.Right.IsLocked"</span>: <span class="hljs-literal">true</span> },<ins class="diff-chg">
                 {<span class="hljs-string">"Row1.Left.IsLocked"</span>: <span class="hljs-literal">true</span> },
                 {<span class="hljs-string">"Row2.Right.IsLocked"</span>: <span class="hljs-literal">true</span> },
                 {<span class="hljs-string">"Row2.Left.IsLocked"</span>: <span class="hljs-literal">true</span> } ],
</ins>      <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"5689"</span>
    }
<del class="diff-old">  receive &lt;- {
    ,
    ,
     },
                { },
            { },
            { } ] },
    
  }
  
</del>
<ins class="diff-chg">    receive &lt;- {
</ins>        <span class="hljs-string">"action"</span>: <span class="hljs-string">"set"</span>,        <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"5689"</span>,        <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
    }
        
</ins>
</pre>
<p>
Unsuccessful
set.
The
value
cannot
be
set.
</p>
<del class="diff-old">  client -&gt; {
    ,
    ,
    
  }
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">    client -&gt; {
</ins>        <span class="hljs-string">"action"</span>: <span class="hljs-string">"set"</span>,        <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Drivetrain.InternalCombustionEngine.RPM"</span>,        <span class="hljs-string">"value"</span>: <span class="hljs-number">2000</span>,        <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"8912"</span><ins class="diff-chg">
    }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
      ,
      },
    
</del>
<ins class="diff-chg">    receive &lt;- {
</ins>        <span class="hljs-string">"action"</span>: <span class="hljs-string">"set"</span>,        <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"8912"</span>,        <span class="hljs-string">"error"</span>: { <span class="hljs-string">"number"</span>: <span class="hljs-number">401</span>,        <span class="hljs-string">"reason"</span>: <span class="hljs-string">"read_only"</span>,        <span class="hljs-string">"message"</span>: <span class="hljs-string">"The desired signal cannot be set since it is a read only signal"</span>},        <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span>
    }
<del class="diff-old">  
</del>
<ins class="diff-chg">        
</ins>
</pre>
<p>
Unsuccessful
set.
The
value
does
not
exist
in
the
specified
path.
</p>
<del class="diff-old">  client -&gt; {
    ,
    ,
     }
  }
  receive &lt;- {
    ,
    ,
    ,
       ,
      "The server is unable to fulfil the client
          request because the request is malformed."},
      
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">    client -&gt; {
    "action": "set",
    "path": "Signal.Drivetrain.InternalCombustionEngine.RPM",
    "value": { "locked" : true }
    "requestId": "2311"
</ins>
    }
<del class="diff-old">  
</del>
<ins class="diff-chg">    receive &lt;- {
        "action": "set",
        "requestId": "2311",
        "error": { "number": 400,
        "reason": "bad_request" ,
        "message": "The server is unable to fulfil the client
                    request because the request is malformed."},
        "timestamp": 1489985044000
     }
        
</ins>
</pre>
<h2 id="subscribe">
Subscribe
</h2>
<p>
Vehicle
data
subscriptions
provide
data
to
the
client
whenever
the
signal
changes
on
the
server,
unless
otherwise
specified
using
Server
Side
Filtering.
The
server
<em class="rfc2119" title="MAY">
MAY
</em>
reduce
the
number
of
notifications
sent
to
the
client
in
order
to
reduce
processing
demands,
particularly
when
the
client
has
subscribed
to
continuously
varying
signals.
</p>
<p>
When
the
client
makes
a
request
to
the
server
to
create
a
new
subscription,
a
JSON
data
object
is
returned.
This
object
contains
the
attributes
that
were
passed
to
the
server
to
make
the
subscription
and
a
'subscriptionId'
integer
handle
value
which
is
used
to
uniquely
identify
the
subscription.
</p>
<del class="diff-old"> {
};
</del>
<h4 data-idl="" id="idl-def-subscriberequest">
<ins class="diff-chg">Subscribe
Request
Properties
</ins></h4><p><ins class="diff-chg">
The
properties
and
schema
for
a
subscribeRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-subscriberequest">
<ins class="diff-chg">subscribeRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<del class="diff-old"> {
};
</del>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a>
<del class="diff-old"> {
};
</del>
</td>
<td>
<a href="#action">
<ins class="diff-chg">Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-path"><ins class="diff-chg">
path
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-filters"><ins class="diff-chg">
filters
</ins></a></td><td><ins class="diff-chg">
object
</ins></td><td><ins class="diff-chg">
No
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Subscribe Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Allows the client to subscribe to time-varying signal notifications on the server."</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"path"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"subscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"path"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/path"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"filters"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/filters"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<p>
<ins class="diff-new">The
properties
and
schema
for
a
subscribeSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-subscribesuccessresponse"><ins class="diff-new">
subscribeSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-new">
subscriptionId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Subscribe Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful subscription request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"subscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription request"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-new">
        },                
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><p><ins class="diff-new">
The
properties
and
schema
for
a
subscribeErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-subscribeerrorresponse"><ins class="diff-new">
subscribeErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-new">
requestId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-new">
error
</ins></a></td><td><a href="#errors"><ins class="diff-new">
Error
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Subscribe Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful subscribe request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"subscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription request"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><p><ins class="diff-new">
The
properties
and
schema
for
a
subscriptionNotification
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-subscriptionnotification"><ins class="diff-new">
subscriptionNotification
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-new">
subscriptionId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-value"><ins class="diff-new">
value
</ins></a></td><td><ins class="diff-new">
any
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Subscription Notification"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Notification sent from the server to provide the requested data to the client"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"value"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"subscription"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription notification"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"value"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/value"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><p><ins class="diff-new">
The
properties
and
schema
for
a
subscriptionNotificationError
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-new">
Object
Name
</ins></th><th><ins class="diff-new">
Attribute
</ins></th><th><ins class="diff-new">
Type
</ins></th><th><ins class="diff-new">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-subscriptionnotificationerror"><ins class="diff-new">
subscriptionNotificationError
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-new">
action
</ins></a></td><td><a href="#action"><ins class="diff-new">
Action
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-new">
subscriptionId
</ins></a></td><td><ins class="diff-new">
string
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-new">
error
</ins></a></td><td><a href="#errors"><ins class="diff-new">
Error
</ins></a></td><td><ins class="diff-new">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-new">
timestamp
</ins></a></td><td><ins class="diff-new">
integer
</ins></td><td><ins class="diff-new">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-new">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Subscription Notification Error"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Error message sent by the server when there is an error with an existing subscription"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"subscription"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription notification"</span>,<ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-new">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-new">
        }
    }
}
</ins></pre><h4 id="examples-2"><ins class="diff-new">
Examples
</ins></h4><p>
For
example
when
<ins class="diff-new">a
</ins>
client
<del class="diff-old">need
</del>
<ins class="diff-chg">wishes
to
subscribe
</ins>
to
<del class="diff-old">continuously
</del>
receive
"Signal.Drivetrain.Transmission.TripMeter"
information
from
the
server,
it
can
use
<ins class="diff-new">the
</ins>
"subscribe"
action
with
the
target
<ins class="diff-new">path
</ins>
property
<del class="diff-old">like
below.
  client -&gt; {
    ,
    ,
    
  }
</del>
<ins class="diff-chg">set
as
follows:
</ins></p><pre class="highlight hljs javascript" aria-busy="false"><ins class="diff-chg">
       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>,                <span class="hljs-string">"path"</span>: <span class="hljs-string">"Signal.Drivetrain.Transmission.TripMeter"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"1004"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>            <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>,            <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"1004"</span>,            <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"35472"</span>,            <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
  
</ins>
</pre>
<del class="diff-old">When
this
</del>
<p>
<ins class="diff-chg">This
example
is
for
illustrative
purposes
only,
it
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
or
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
NOT
be
the
case
that
the
version
of
the
Vehicle
Server
Specification
implemented
by
the
VIS
Server
includes
the
example
path
'Signal.Drivetrain.Transmission.TripMeter'.
</ins></p><p><ins class="diff-chg">
If
the
</ins>
"subscribe"
request
<del class="diff-old">has
been
successed,
client
</del>
<ins class="diff-chg">is
successful
the
server
</ins>
will
<del class="diff-old">receive
</del>
<ins class="diff-chg">return
</ins>
a
<del class="diff-old">notificaton
with
changing
value
continuously
</del>
<ins class="diff-chg">subscribeSuccessResponse
</ins>
as
<del class="diff-old">below
JSON
structure.
  receive &lt;- {
    ,
    ,
    ,
    
  }
  
The
client
can
use
</del>
<ins class="diff-chg">shown
in
</ins>
the
<del class="diff-old">'requestId'
value
to
associate
</del>
<ins class="diff-chg">example
above,
and
</ins>
the
<del class="diff-old">successful
</del>
<ins class="diff-chg">client
will
then
start
to
receive
</ins>
subscription
<del class="diff-old">response
with
</del>
<ins class="diff-chg">notifications
like
</ins>
the
<del class="diff-old">original
request.
</del>
<ins class="diff-chg">one
illustrated
in
the
following
JSON
structure:
</ins>
</p>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-new">      receive &lt;- {
</ins>          <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscription"</span>,          <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"35472"</span>,          <span class="hljs-string">"value"</span>: <span class="hljs-number">36912</span>,          <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-new">
      }
  
</ins></pre>
<p>
The
'subscriptionId'
value
is
a
unique
value,
created
by
the
server
and
which
<del class="diff-old">is
</del>
<ins class="diff-chg">may
be
</ins>
used
internally
by
the
server
to
manage
subscriptions
on
that
WebSocket
instance.
</p>
<p>
The
<del class="diff-old">subscription
id
</del>
<ins class="diff-chg">subscriptionId
</ins>
value
may
<ins class="diff-new">also
</ins>
be
used
by
the
client
to
unsubscribe
from
receiving
future
notifications,
by
passing
the
<del class="diff-old">handle
</del>
value
to
the
server
with
the
unsubscribe
action.
</p>
<p>
To
differentiate
subscription
response
from
responses
for
‘GET’
requests,
subscription
responses
shall
additionally
include
the
<del class="diff-old">subscription
id
</del>
<ins class="diff-chg">subscriptionId
</ins>
value
that
identifies
the
subscription
that
triggered
that
notification.
</p>
<p>
The
server
ensures
that
a
new
unique
<del class="diff-old">subscription
id
</del>
<ins class="diff-chg">subscriptionId
</ins>
value
is
returned
for
each
successful
subscription
request
on
a
particular
WebSocket
connection.
However
the
server
does
not
guarantee
that
subscription
handle
values
are
unique
between
different
WebSocket
instances.
</p>
<p>
Once
the
subscription
is
successfully
registered
with
the
server,
the
client
receives
subscription
notifications
containing
the
requested
data,
at
a
rate
defined
either
by
the
server
or
by
the
server
side
filter.
If
there
is
an
error
with
an
existing
subscription
a
subscriptionNotificationError
<del class="diff-old">is
received
by
</del>
<em class="rfc2119" title="SHALL">
<ins class="diff-chg">SHALL
</ins></em><ins class="diff-chg">
be
sent
to
</ins>
the
client.
This
allows
the
client
to
handle
the
error,
<del class="diff-old">such
as
</del>
<ins class="diff-chg">for
example
by
modifying
the
filter
condition
</ins>
to
reduce
the
<ins class="diff-new">requested
notification
frequency.
</ins></p><p><ins class="diff-new">
If
the
authentication
token
expires
whilst
a
</ins>
subscription
<del class="diff-old">frequency
if
</del>
<ins class="diff-chg">is
active,
</ins>
the
server
<ins class="diff-new">will
send
a
subscriptionNotificationError
for
each
subscription
that
can
no
longer
be
fulfilled.
The
client
</ins>
is
<del class="diff-old">unable
</del>
<ins class="diff-chg">then
responsible
for
communicating
with
the
relevant
Security
Authority
</ins>
to
<del class="diff-old">satisfy
</del>
<ins class="diff-chg">renew
</ins>
the
<del class="diff-old">initial
demands
</del>
<ins class="diff-chg">authentication
token.
</ins></p><p><ins class="diff-chg">
After
the
client
authentication
token
has
expired,
the
server
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
continue
to
send
notifications
for
data
that
is
not
subject
to
access
control
restrictions.
The
client
will
NOT
receive
notifications
for
subscriptions
that
require
a
valid
authentication
token
until
the
client
sends
a
renewed
authentication
token
to
the
server.
</ins></p><p><ins class="diff-chg">
If
a
new
authentication
token
is
presented
by
the
client
to
the
server
in
a
timely
manner,
all
existing
subscriptions
will
continue
to
cause
notifications
to
be
sent
from
the
server,
provided
the
security
principal(s)
have
not
changed.
The
time
window
during
which
the
client
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
re-authenticate
and
subscriptions
continue
WILL
be
implementation
dependent.
If
the
server
has
terminated
any
subscriptions,
it
is
the
responsibility
</ins>
of
the
<ins class="diff-new">client
to
renew
them.
</ins></p><p><ins class="diff-new">
At
any
time
the
server
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
only
send
subscription
notifications
for
data
that
the
client
is
authorized
to
access.
</ins></p><p><ins class="diff-new">
The
server
</ins><em class="rfc2119" title="MAY"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
close
the
WebSocket
connection
at
any
time
and
in
so
doing,
terminate
all
subscriptions
for
the
</ins>
client.
<ins class="diff-new">The
client
is
then
responsible
for
renewing
subscriptions.
The
client
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
close
the
WebSocket
connection
if
the
server
data
is
no
longer
required.
</ins>
</p>
<p>
An
example
of
a
subscription
can
be
found
<a href="#introduction">
here
</a>.
</p>
<h2 id="unsubscribe">
Unsubscribe
</h2>
<p>
To
unsubscribe
from
a
subscription,
the
client
<em class="rfc2119" title="SHALL">
SHALL
</em>
send
an
'unsubscribeRequest'
message
to
the
server.
This
is
comprised
of
a
JSON
structure
which
contains
an
action
property
set
to
'unsubscribe'
and
a
string
containing
the
'subscriptionId'.
If
the
server
is
able
to
satisfy
the
request
it
returns
an
'unsubscribeSuccessResponse'.
If
an
error
occurs,
for
example
because
an
invalid
subscriptionId
is
passed
to
the
server,
an
'unsubscribeErrorResponse'
is
returned.
</p>
<p>
<del class="diff-old">The
client
MAY
unsubscribe
from
all
of
its
subscriptions
by
sending
an
'unsubscribeRequest'
with
the
action
property
set
to
'unsubscribeAll'.
This
does
not
require
a
subscriptionId
value.
</del>
If
the
client
has
created
more
than
one
WebSocket
instance,
it
<em class="rfc2119" title="MUST">
MUST
</em>
always
unsubscribe
using
the
same
WebSocket
instance
that
was
originally
used
to
create
the
subscription.
</p>
<p>
<ins class="diff-new">It
is
not
possible
to
unsubscribe
from
a
subset
of
signals
within
a
subscription.
The
client
must
unsubscribe
and
set
up
a
new
subscription
to
receive
notifications
for
the
desired
signals.
For
example,
if
there
is
an
active
subscription
for
all
lights,
using
the
path
Signal.Body.Lights.*,
and
the
client
requires
information
for
only
Signal.Body.Lights.IsLowBeamOn,
the
client
will
have
to
unsubscribe
from
the
Signal.Body.Lights.*
subscription
and
re-subscribe
to
Signal.Body.Lights.IsLowBeamOn.
</ins></p><p>
The
client
should
always
unsubscribe
from
receiving
notifications
when
it
is
no
longer
using
the
data.
Over
a
long
vehicle
journey,
this
significantly
reduces
the
processing
load
on
the
server
and
allow
the
server
to
free
memory.
It
therefore
makes
it
more
likely
that
the
server
<del class="diff-old">remains
</del>
<ins class="diff-chg">will
remain
</ins>
responsive
to
future
requests
from
the
client.
</p>
<h4 data-idl="" id="idl-def-unsubscriberequest">
<ins class="diff-new">Unsubscribe
Request
Properties
</ins></h4>
<p>
The
<del class="diff-old">'unsubscribe'
message
structures
are
defined
below:
</del>
<ins class="diff-chg">properties
and
schema
for
a
unsubscribeRequest
is:
</ins>
</p>
<del class="diff-old"> {
};
</del>
<table class="simple">
<thead>
<tr>
<th>
<ins class="diff-chg">Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4">
<del class="diff-old"> {
};
</del>
<dfn data-dfn-type="dfn" id="dfn-unsubscriberequest">
<ins class="diff-chg">unsubscribeRequest
</ins></dfn>
<del class="diff-old"> {
};
</del>
</th>
</tr>
<tr>
<td>
<a href="#dfn-action">
<ins class="diff-chg">action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-chg">
subscriptionId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Unsubscribe Request"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Allows the client to unsubscribe to time-varying signal notifications on the server."</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"requestId"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the unsubscribe request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-chg">
        }, 
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<del class="diff-old">Unsubscribe
from
</del>
<p>
<ins class="diff-chg">The
properties
and
schema
for
</ins>
a
<del class="diff-old">single
subscription.
  client -&gt; {
    ,
    ,
    
  }
</del>
<ins class="diff-chg">unsubscribeSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5">
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
    
  }
  
</del>
<dfn data-dfn-type="dfn" id="dfn-unsubscribesuccessresponse">
<ins class="diff-chg">unsubscribeSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-chg">
subscriptionId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Unsubscribe Success Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful unsubscribe request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the unsubscribe request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-chg">
        }, 
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
        }
    }
}
</ins>
</pre>
<del class="diff-old">Unsubscribe
</del>
<p>
<ins class="diff-chg">The
properties
and
schema
for
a
unsubscribeErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="6"><dfn data-dfn-type="dfn" id="dfn-unsubscribeerrorresponse"><ins class="diff-chg">
unsubscribeErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-subscriptionid"><ins class="diff-chg">
subscriptionId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-chg">
error
</ins></a></td><td><a href="#errors"><ins class="diff-chg">
Error
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>    <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,    <span class="hljs-attr">"title"</span>: <span class="hljs-string">"Unsubscribe Error Response"</span>,    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful unsubscribe request"</span>,    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,    <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"subscriptionId"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],    <span class="hljs-attr">"properties"</span>: {        <span class="hljs-attr">"action"</span>: {            <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribe"</span> ],            <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the subscription request"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"subscriptionId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/subscriptionId"</span><ins class="diff-chg">
        }, 
</ins>        <span class="hljs-attr">"requestId"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"error"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-chg">
        },
</ins>        <span class="hljs-attr">"timestamp"</span>: {            <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
        }
    }
}
</ins></pre><h4 id="examples-3"><ins class="diff-chg">
Examples
</ins></h4><ins class="diff-chg">
The
example
below
shows
the
JSON
message
structure
for
a
'unsubscribeRequest'
and
'unsubscribeSuccessResponse'
to
unsubscribe
</ins>
from
<del class="diff-old">all
subscriptions.
  client -&gt; {
    ,
    
  }
</del>
<ins class="diff-chg">a
single
subscription.
</ins><pre class="highlight hljs javascript" aria-busy="false"><ins class="diff-chg">
       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribe"</span>,                <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"102"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"5264"</span><ins class="diff-chg">
        }
</ins>
<del class="diff-old">  receive &lt;- {
    ,
    ,
    ,
    
  }
  
</del>
<ins class="diff-chg">        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribe"</span>,                <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"102"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"5264"</span>,                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<del class="diff-old">Error
</del>
<ins class="diff-chg">The
following
shows
an
example
of
error
</ins>
case
<del class="diff-old">-
</del>
<ins class="diff-chg">with
</ins>
invalid
<del class="diff-old">ID
  client -&gt; {
    ,
    ,
    
  }
  receive &lt;- {
    ,
    ,
    ,
      ,
       },
    ,  
    
  }
  
</del>
<ins class="diff-chg">susbscriptionId.
</ins><pre class="highlight hljs javascript" aria-busy="false"><ins class="diff-chg">
       client -&gt; {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribe"</span>,                <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"3542"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"7846"</span><ins class="diff-chg">
        }
        receive &lt;- {
</ins>                <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribe"</span>,                <span class="hljs-string">"subscriptionId"</span>: <span class="hljs-string">"3542"</span>,                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"7846"</span>,                <span class="hljs-string">"error"</span>: { <span class="hljs-string">"number"</span>:<span class="hljs-number">404</span>,                        <span class="hljs-string">"reason"</span>: <span class="hljs-string">"invalid_subscriptionId"</span>,                        <span class="hljs-string">"message"</span>: <span class="hljs-string">"The specified subscription was not found."</span> },                <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
        }
        
</ins>
</pre>
<div class="example">
<div class="example-title marker">
<span>
Example
<del class="diff-old">4
</del>
<ins class="diff-chg">5
</ins>
</span>
</div>
<pre class="highlight hljs javascript" aria-busy="false">
<span class="hljs-comment">// send unsubscribe message</span>
<del class="diff-old">vehicle.send();
</del>
<ins class="diff-chg">vehicle.send(<span class="hljs-string">'{ "action": "unsubscribe", "subscriptionId": "102", "requestId": "5429" }'</span>);
</ins>
<span class="hljs-comment">// set handler</span>
vehicle.onmesssage(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>)</span>{
<del class="diff-old">  .parse(event.data);
  
  ){
     + msg.subscriptionId);
  
  } )) {
     + msg.error.message)
  }
</del>
        <span class="hljs-keyword">var</span> msg = <span class="hljs-built_in">JSON</span>.parse(event.data);
        <span class="hljs-comment">// success case</span>
        <span class="hljs-keyword">if</span>(msg.hasOwnProperty(<span class="hljs-string">"requestId"</span>) &amp;&amp; msg.requestId == <span class="hljs-string">"5429"</span>){
                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Successfully unsubscribed for id "</span> + msg.subscriptionId);
        <span class="hljs-comment">// error case</span>
<ins class="diff-chg">        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (msg.hasOwnProperty(<span class="hljs-string">"error"</span>)) {
</ins>                <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"Unsuccessful unsubscribe. "</span> + msg.error.message)<ins class="diff-chg">
        }
</ins>
});
</pre>
</div>
</section>
<h2 id="unsubscribe-all">
<ins class="diff-chg">Unsubscribe
All
</ins></h2><p><ins class="diff-chg">
To
unsubscribe
from
all
subscriptions,
the
client
</ins><em class="rfc2119" title="SHALL"><ins class="diff-chg">
SHALL
</ins></em><ins class="diff-chg">
send
an
'unsubscribeAllRequest'
message
to
the
server.
This
is
comprised
of
a
JSON
structure
which
contains
an
action
property
set
to
'unsubscribeAll'.
This
does
not
require
a
subscriptionId
value.
If
the
request
is
successful,
or
there
are
no
active
subscriptions
to
unsubscribe
from,
the
VIS
Server
will
return
an
'unsubscribeSuccessResponse'.
</ins></p><h4 data-idl="" id="idl-def-unsubscribeallrequest"><ins class="diff-chg">
Unsubscribe
All
Request
Properties
</ins></h4><p><ins class="diff-chg">
The
properties
and
schema
for
a
unsubscribeAllRequest
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="3">
<dfn data-dfn-type="dfn" id="dfn-unsubscribeallrequest">
<ins class="diff-chg">unsubscribeAllRequest
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"unsubscribeAll Request"</span>,  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"Allows the client to unsubscribe from all notifications on the server."</span>,  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,  <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>],  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"action"</span>: {      <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribeAll"</span> ],      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the unsubscribeAll request"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"requestId"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
    }
  }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
a
unsubscribeAllSuccessResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4"><dfn data-dfn-type="dfn" id="dfn-unsubscribeallsuccessresponse"><ins class="diff-chg">
unsubscribeAllSuccessResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"unsubscribeAll Success Response"</span>,  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon a successful unsubscribeAll request"</span>,  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,  <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"timestamp"</span>],  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"action"</span>: {      <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribeAll"</span> ],      <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the unsubscribeAll request"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"requestId"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"timestamp"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
    }
  }
}
</ins></pre><p><ins class="diff-chg">
The
properties
and
schema
for
a
unsubscribeAllErrorResponse
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="5"><dfn data-dfn-type="dfn" id="dfn-unsubscribeallerrorresponse"><ins class="diff-chg">
unsubscribeAllErrorResponse
</ins></dfn></th></tr><tr><td><a href="#dfn-action"><ins class="diff-chg">
action
</ins></a></td><td><a href="#action"><ins class="diff-chg">
Action
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-requestid"><ins class="diff-chg">
requestId
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-error"><ins class="diff-chg">
error
</ins></a></td><td><a href="#errors"><ins class="diff-chg">
Error
</ins></a></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#dfn-timestamp"><ins class="diff-chg">
timestamp
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>  <span class="hljs-attr">"$schema"</span>: <span class="hljs-string">"http://json-schema.org/draft-04/schema#"</span>,  <span class="hljs-attr">"title"</span>: <span class="hljs-string">"UnsubscribeAll Error Response"</span>,  <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The response sent from the server upon an unsuccessful unsubscribeAll request"</span>,  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"object"</span>,  <span class="hljs-attr">"required"</span>: [<span class="hljs-string">"action"</span>, <span class="hljs-string">"requestId"</span>, <span class="hljs-string">"error"</span>, <span class="hljs-string">"timestamp"</span>],  <span class="hljs-attr">"properties"</span>: {    <span class="hljs-attr">"action"</span>: {    <span class="hljs-attr">"enum"</span>: [ <span class="hljs-string">"unsubscribeAll"</span> ],    <span class="hljs-attr">"description"</span>: <span class="hljs-string">"The identifier for the unsubscribeAll request"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"requestId"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/requestId"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"error"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-chg">
    },
</ins>    <span class="hljs-attr">"timestamp"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/timestamp"</span><ins class="diff-chg">
    }
  }
}
</ins></pre><h4 id="examples-4"><ins class="diff-chg">
Examples
</ins></h4><ins class="diff-chg">
The
example
below
shows
an
example
of
a
'unsubscribeAllRequest'
and
'unsubscribeAllSuccessResponse'
for
unsubscribeAll
action,
in
order
to
unsubscribe
from
all
subscriptions.
</ins><pre class="highlight hljs javascript" aria-busy="false"><ins class="diff-chg">
client -&gt; {
</ins>    <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribeAll"</span>,    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3468"</span><ins class="diff-chg">
}
receive &lt;- {
</ins>    <span class="hljs-string">"action"</span>: <span class="hljs-string">"unsubscribeAll"</span>,    <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"3468"</span>,    <span class="hljs-string">"timestamp"</span>: <span class="hljs-number">1489985044000</span><ins class="diff-chg">
}
</ins></pre><section id="server-side-filtering"><h2 id="x9-server-side-filtering">
<span class="secno">
9.
</span>
Server
Side
Filtering
</h2>
<p>
'
<a href="#dfn-filters" class="internalDFN" data-link-type="dfn">
Filters
</a>
'
may
be
specified
to
enable
Server
side
filtering
to
be
used
<del class="diff-old">in
order
</del>
to
throttle
the
demands
of
subscriptions
on
the
server.
This
may
enable
the
reduction
of
traffic
if
the
developer
has
received
a
<del class="diff-old">429
</del>
<ins class="diff-chg">'429
</ins>
-
Too
Many
<del class="diff-old">Requests
</del>
<ins class="diff-chg">Requests'
</ins>
error
message.
<del class="diff-old">This
can
be
implementation
dependent
</del>
</p>
<p>
<ins class="diff-chg">Server
side
filters
are
extensible,
</ins>
allowing
<ins class="diff-new">for
additional
filtering
mechanisms
to
be
specified.
Support
is
currently
included
for
</ins>
a
<del class="diff-old">number
</del>
<ins class="diff-chg">specific
range
</ins>
of
<del class="diff-old">potential
filtering
mechanisms,
such
as
ranges,
</del>
<ins class="diff-chg">values,
time
</ins>
intervals
and
minimum
changes.
This
can
be
implemented
using
the
"filters"
<del class="diff-old">option.
</del>
<ins class="diff-chg">option
in
the
subscribeRequest
interface.
</ins>
</p>
<p>
Filters
can
only
be
applied
for
<ins class="diff-new">data
which
is
represented
by
a
primitive
type,
such
as
leaf
</ins>
nodes
in
the
VSS
tree,
not
entire
branches.
For
example,
a
filter
cannot
be
set
on
<del class="diff-old">engine.*,
</del>
<ins class="diff-chg">Signal.Drivetrain.InternalCombustionEngine.*,
</ins>
however
it
can
be
set
on
<del class="diff-old">engine.rpm.
</del>
<ins class="diff-chg">Signal.Drivetrain.InternalCombustionEngine.RPM.
</ins>
</p>
<p>
The
<ins class="diff-new">default
behaviour
for
a
</ins>
subscription
<del class="diff-old">currently
defaults
</del>
<ins class="diff-chg">is
</ins>
to
<del class="diff-old">sending
values
</del>
<ins class="diff-chg">request
that
the
server
sends
a
notification
</ins>
to
the
client
<del class="diff-old">only
onchange,
however
</del>
<ins class="diff-chg">'onchange'.
To
modify
</ins>
this
<del class="diff-old">may
cause
unnecessary
processing
demands
on
</del>
<ins class="diff-chg">behaviour
</ins>
the
<del class="diff-old">vehicle
server.
A
filter
object
</del>
<ins class="diff-chg">client
</ins>
can
<ins class="diff-new">use
filtering
options.
The
following
filter
options
</ins><em class="rfc2119" title="SHALL"><ins class="diff-new">
SHALL
</ins></em>
be
<del class="diff-old">included
in
the
subscription
request:
        { ,
                
                 }
      
Potential
tags
could
include:
</del>
<ins class="diff-chg">supported:
</ins>
</p>
<ul>
<li>
Interval
-
requests
that
the
server
provides
a
notification
every
'n'
milliseconds.
This
allows
the
client
to
reduce
the
load
on
the
server
if
the
client
does
not
need
the
data
more
frequently.
</li>
<li>
Range
-
<del class="diff-old">provide
</del>
<ins class="diff-chg">send
</ins>
a
<del class="diff-old">value
</del>
<ins class="diff-chg">notification
</ins>
only
when
<del class="diff-old">within
</del>
<ins class="diff-chg">the
value
is
in
</ins>
a
given
<del class="diff-old">range
</del>
<ins class="diff-chg">range.
</ins>
</li>
<li>
Minimum
change
-
<del class="diff-old">provide
data
</del>
<ins class="diff-chg">send
a
notification
</ins>
when
a
value
has
changed
by
a
specified
<del class="diff-old">amount
</del>
<ins class="diff-chg">amount.
</ins>
</li>
</ul>
<p>
<del class="diff-old">If
</del>
<ins class="diff-chg">The
client
can
use
filters
to
request
that
</ins>
the
<del class="diff-old">filter
</del>
<ins class="diff-chg">server
sends
notifications
based
on
various
criteria,
but
it
</ins>
is
<del class="diff-old">not
set,
or
</del>
<ins class="diff-chg">important
to
note
that
this
</ins>
is
<del class="diff-old">unsupported
by
the
server,
</del>
<ins class="diff-chg">just
a
request
and
</ins>
the
notification
frequency
<del class="diff-old">is
</del>
<ins class="diff-chg">will
ultimately
be
</ins>
determined
by
the
server.
</p>
<del class="diff-old">  
  { ,
</del>
<h2 id="generatedID-1">
</h2>
<h2 id="generatedID-2">
</h2>
<h4 id="json-schema">
<ins class="diff-chg">JSON
Schema
</ins></h4><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>  <span class="hljs-attr">"filters"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/filters"</span><ins class="diff-chg">
  }
}
</ins></pre><h4 id="examples-5"><ins class="diff-chg">
Examples
</ins></h4><p><ins class="diff-chg">
The
following
structures
are
examples
of
subscribeRequest
objects
which
are
requesting
server
side
filters
</ins></p><pre class="highlight hljs javascript" aria-busy="false"> <span class="hljs-comment">//client receives data every 100ms</span><ins class="diff-chg">
        { <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_path&gt;"</span>,
</ins>
                <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"interval"</span>: <span class="hljs-number">100</span> },
                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> }
<del class="diff-old">  
  { ,
</del>
        <span class="hljs-comment">//client receives data when the value is between 100 and 200 (inclusive)</span>
<ins class="diff-chg">        { <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_path&gt;"</span>,
</ins>
                <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"range"</span>: { <span class="hljs-string">"above"</span>: <span class="hljs-number">100</span>, <span class="hljs-string">"below"</span>: <span class="hljs-number">200</span> } },
                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> }
<del class="diff-old">  
  { ,
</del>
        <span class="hljs-comment">//client receives data when the value is below 100 (inclusive)</span>
<ins class="diff-chg">        { <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_path&gt;"</span>,
</ins>
                <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"range"</span>: { <span class="hljs-string">"below"</span>: <span class="hljs-number">100</span> } },
                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> }
<del class="diff-old">  
  { ,
                 },
                 }
  
  { ,
</del>
        <span class="hljs-comment">//client receives data when the value changes by 100 units</span>
<ins class="diff-chg">        { <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_path&gt;"</span>,
</ins>
                <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"minChange"</span>: <span class="hljs-number">100</span> },
                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> }
<del class="diff-old">  
  
  { ,
</del>
        <span class="hljs-comment">//client receives data when the value is above 200 (inclusive)</span>
        <span class="hljs-comment">//and the value changes by 20 units</span>
<ins class="diff-chg">        { <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>, <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_path&gt;"</span>,
</ins>
                <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"range"</span>: { <span class="hljs-string">"below"</span>: <span class="hljs-number">200</span> }, <span class="hljs-string">"minChange"</span>: <span class="hljs-number">20</span>},
                <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> }
      
</pre>
<p>
<del class="diff-old">When
the
range
filter
is
used
a
final
message
is
sent
when
the
value
returned
is
outside
of
the
specified
range.
For
example,
if
the
range
states
{
"below":
100
},
a
final
value
may
be
received
at
101
to
indicate
that
the
value
is
now
out
of
range.
</del>
The
client
should
not
specify
a
minimum
change
amount
that
is
smaller
than
it
needs
-
in
order
to
prevent
adding
unnecessary
load
on
the
server.
The
server
shall
return
a
'429
-
Too
Many
Request'
error
response
if
it
is
unable
to
fulfil
the
request
made
by
the
client.
</p>
<del class="diff-old">The
section
that
follows
defines
the
error
responses
that
shall
be
supported
by
the
server.
</del>
<section id="websocket-closure">
<h3 id="x9-1-websocket-closure">
<span class="secno">
<del class="diff-old">10.
</del>
<ins class="diff-chg">9.1
</ins>
</span>
<del class="diff-old">Web
Socket
</del>
<ins class="diff-chg">WebSocket
</ins>
Closure
</h3>
<p>
The
WebSocket
may
be
closed
by
either
the
client
or
the
server
by
invoking
the
‘close()’
method
on
the
WebSocket
instance.
</p>
<p>
The
following
example
shows
the
lifetime
of
a
WebSocket
on
the
client:
</p>
<div class="example">
<div class="example-title marker">
<span>
Example
<del class="diff-old">5
</del>
<ins class="diff-chg">6
</ins>
</span>
</div>
<pre class="highlight hljs javascript" aria-busy="false">
<span class="hljs-comment">// Open the WebSocket</span>
<span class="hljs-keyword">var</span> vehicle  = <span class="hljs-keyword">new</span> WebSocket(<span class="hljs-string">"wss://localhost:4343"</span>, <span class="hljs-string">"wvss1.0"</span>);
<span class="hljs-comment">// WebSocket is used to GET, SET, SUBSCRIBE and UNSUBSCRIBE</span>
…
<span class="hljs-comment">// Close the WebSocket</span>
vehicle.close();
</pre>
</div>
<p>
The
<del class="diff-old">WebSocket
server
</del>
<ins class="diff-chg">VIS
Server
</ins>
may
terminate
the
WebSocket
connection
if
it
has
not
received
a
request
for
a
period
determined
by
the
server.
It
is
the
client’s
responsibility
to
handle
this
gracefully
and
to
recover
and
request
new
subscriptions,
where
required.
</p>
<p>
<ins class="diff-new">The
section
that
follows
defines
the
error
responses
that
shall
be
supported
by
the
server.
</ins></p>
</section>
<section id="errors">
<h3 id="x9-2-errors">
<span class="secno">
<del class="diff-old">11.
</del>
<ins class="diff-chg">9.2
</ins>
</span>
Errors
</h3>
<p>
If
there
is
an
error
with
any
of
the
client’s
requests,
the
server
responds
with
an
error
number,
reason
and
message.
</p>
<del class="diff-old"> {
};
</del>
<p>
<ins class="diff-chg">The
properties
and
schema
for
an
Error
object
is:
</ins></p><table class="simple"><thead><tr><th><ins class="diff-chg">
Object
Name
</ins></th><th><ins class="diff-chg">
Attribute
</ins></th><th><ins class="diff-chg">
Type
</ins></th><th><ins class="diff-chg">
Required
</ins></th></tr></thead><tbody><tr><th rowspan="4"><dfn data-dfn-type="dfn" id="dfn-error-0"><ins class="diff-chg">
Error
</ins></dfn></th></tr><tr><td><a href="#errorDefs"><ins class="diff-chg">
number
</ins></a></td><td><ins class="diff-chg">
integer
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#errorDefs"><ins class="diff-chg">
reason
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr><tr><td><a href="#errorDefs"><ins class="diff-chg">
message
</ins></a></td><td><ins class="diff-chg">
string
</ins></td><td><ins class="diff-chg">
Yes
</ins></td></tr></tbody></table><pre aria-busy="false" class="hljs json"><ins class="diff-chg">
{
</ins>  <span class="hljs-attr">"error"</span>: {      <span class="hljs-attr">"$ref"</span>: <span class="hljs-string">"#/definitions/error"</span><ins class="diff-chg">
  }
}
</ins>
</pre>
<h3 id="examples-6">
<ins class="diff-new">Examples
</ins></h3>
<p>
For
some
error
codes,
for
example
'401
<del class="diff-old">(Unauthorised)'
</del>
<ins class="diff-chg">(Unauthorized)'
</ins>
there
can
be
more
than
one
cause.
The
error
number
that
is
returned
is
the
HTTP
Status
Code
Number
e.g.
401.
An
error
reason
is
also
returned,
this
contains
a
pre-defined
string
value
that
can
be
used
to
distinguish
between
errors
that
have
the
same
code
(e.g.
'401
Unauthorized)'
but
a
difference
cause.
The
error
message
is
used
to
provide
message
text
describing
the
cause
in
more
detail.
</p>
<del class="diff-old">  client -&gt; { ,
     },
    ,
     }
  receive on error &lt;- {
    ,
      ,
       },
    ,
     }
  
</del>
<pre class="highlight hljs javascript" aria-busy="false">
<ins class="diff-chg">      client -&gt; { 
</ins>        <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>,        <span class="hljs-string">"filters"</span>: { <span class="hljs-string">"&lt;filter_expression&gt;"</span> },        <span class="hljs-string">"path"</span>: <span class="hljs-string">"&lt;any_metadata_definition&gt;"</span>,        <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span> <ins class="diff-chg">
      }
      receive on error &lt;- {
</ins>          <span class="hljs-string">"action"</span>: <span class="hljs-string">"subscribe"</span>,          <span class="hljs-string">"requestId"</span>: <span class="hljs-string">"&lt;some_unique_value&gt;"</span>,          <span class="hljs-string">"error"</span>:{             <span class="hljs-string">"number"</span>: <span class="hljs-string">"&lt;error_num&gt;"</span>,            <span class="hljs-string">"reason"</span>: <span class="hljs-string">"&lt;error_reason&gt;"</span>,            <span class="hljs-string">"message"</span>: <span class="hljs-string">"&lt;error_message&gt;"</span> <ins class="diff-chg">
          },
</ins>          <span class="hljs-string">"timestamp"</span>: <span class="hljs-string">"1489985044000"</span> <ins class="diff-chg">
        }
        
</ins>
</pre>
<p>
The
server
implementation
supports
at
least
the
error
numbers
and
reasons
listed
in
the
table
below.
</p>
<table id="errorDefs" class="parameters">
<tbody>
<tr>
<th>
Error&#160;Number&#160;(Code)
</th>
<th>
Error
Reason
</th>
<th>
Error
Message
</th>
</tr>
<tr>
<td>
304
(Not
Modified)
</td>
<td>
not_modified
</td>
<td>
No
changes
have
been
made
by
the
server.
</td>
</tr>
<tr>
<td>
400
(Bad
Request)
</td>
<td>
bad_request
</td>
<td>
The
server
is
unable
to
fulfil
the
client
request
because
the
request
is
malformed.
</td>
</tr>
<tr>
<td>
<ins class="diff-new">400
(Bad
Request)
</ins></td><td><ins class="diff-new">
filter_invalid
</ins></td><td><ins class="diff-new">
Filter
requested
on
non-primitive
type.
</ins></td></tr><tr><td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
user_token_expired
</td>
<td>
User
token
has
expired.
</td>
</tr>
<tr>
<td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
user_token_invalid
</td>
<td>
User
token
is
invalid.
</td>
</tr>
<tr>
<td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
user_token_missing
</td>
<td>
User
token
is
missing.
</td>
</tr>
<tr>
<td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
device_token_expired
</td>
<td>
Device
token
has
expired.
</td>
</tr>
<tr>
<td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
device_token_invalid
</td>
<td>
Device
token
is
invalid.
</td>
</tr>
<tr>
<td>
401
<del class="diff-old">(Unauthorised)
</del>
<ins class="diff-chg">(Unauthorized)
</ins>
</td>
<td>
device_token_missing
</td>
<td>
Device
token
is
missing.
</td>
</tr>
<tr>
<td>
<ins class="diff-new">401
(Unauthorized)
</ins></td><td><ins class="diff-new">
too_many_attempts
</ins></td><td><ins class="diff-new">
The
client
has
failed
to
authenticate
too
many
times.
</ins></td></tr><tr><td><ins class="diff-new">
401
(Unauthorized)
</ins></td><td><ins class="diff-new">
read_only
</ins></td><td><ins class="diff-new">
The
desired
signal
cannot
be
set
since
it
is
a
read
only
signal.
</ins></td></tr><tr><td>
403
(Forbidden)
</td>
<td>
user_forbidden
</td>
<td>
The
user
is
not
permitted
to
access
the
requested
resource.
Retrying
does
not
help.
</td>
</tr>
<tr>
<td>
403
(Forbidden)
</td>
<td>
user_unknown
</td>
<td>
The
user
is
unknown.
Retrying
does
not
help.
</td>
</tr>
<tr>
<td>
403
(Forbidden)
</td>
<td>
device_forbidden
</td>
<td>
The
device
is
not
permitted
to
access
the
requested
resource.
Retrying
does
not
help.
</td>
</tr>
<tr>
<td>
403
(Forbidden)
</td>
<td>
device_unknown
</td>
<td>
The
device
is
unknown.
Retrying
does
not
help.
</td>
</tr>
<tr>
<td>
404
(Not
Found)
</td>
<td>
invalid_path
</td>
<td>
The
specified
data
path
does
not
exist.
</td>
</tr>
<tr>
<td>
404
(Not
Found)
</td>
<td>
private_path
</td>
<td>
The
specified
data
path
is
private
and
the
request
is
not
<del class="diff-old">authorised
</del>
<ins class="diff-chg">authorized
</ins>
to
access
signals
on
this
path.
</td>
</tr>
<tr>
<td>
404
(Not
Found)
</td>
<td>
invalid_subscriptionId
</td>
<td>
The
specified
subscription
was
not
found.
</td>
</tr>
<tr>
<td>
406
(Not
Acceptable)
</td>
<td>
not_acceptable
</td>
<td>
The
server
is
unable
to
generate
content
that
is
acceptable
to
the
client
</td>
</tr>
<tr>
<td>
429
(Too
Many
Requests)
</td>
<td>
too_many_requests
</td>
<td>
The
client
has
sent
the
server
too
many
requests
in
a
given
amount
of
time.
</td>
</tr>
<tr>
<td>
502
(Bad
Gateway)
</td>
<td>
bad_gateway
</td>
<td>
The
server
was
acting
as
a
gateway
or
proxy
and
received
an
invalid
response
from
an
upstream
server.
</td>
</tr>
<tr>
<td>
503
(Service
Unavailable)
</td>
<td>
service_unavailable
</td>
<td>
The
server
is
currently
unable
to
handle
the
request
due
to
a
temporary
overload
or
scheduled
maintenance
(which
may
be
alleviated
after
some
delay).
</td>
</tr>
<tr>
<td>
504
(Gateway
Timeout)
</td>
<td>
gateway_timeout
</td>
<td>
The
server
did
not
receive
a
timely
response
from
an
upstream
server
it
needed
to
access
in
order
to
complete
the
request.
</td>
</tr>
</tbody>
</table>
<p>
The
server
may
optionally
return
additional
error
codes.
It
is
expected
that
if
this
is
the
case,
they
are
defined
in
the
Server
Documentation.
Wherever
possible
the
Server
returns
a
standard
HTTP
error
code
where
one
has
been
defined
for
the
error
condition.
See
for
example
<a href="https://tools.ietf.org/html/rfc7231">
RFC7231
</a>,
<a href="https://tools.ietf.org/html/rfc7235">
RFC7235
</a>,
and
<a href="https://tools.ietf.org/html/rfc6585">
RFC6585
</a>.
</p>
</section>
</section>
<section id="references" class="appendix">
<h2 id="a-references">
<span class="secno">
A.
</span>
References
</h2>
<section id="normative-references">
<h3 id="a-1-normative-references">
<span class="secno">
A.1
</span>
Normative
references
</h3>
<dl class="bibliography">
<dt id="bib-RFC2119">
[RFC2119]
</dt>
<dd>
<del class="diff-old">S.
Bradner.
IETF.
</del>
<a href="https://tools.ietf.org/html/rfc2119">
<cite>
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</cite>
</a>.
<ins class="diff-new">S.
Bradner.
IETF.
</ins>
March
1997.
Best
Current
Practice.
URL:
<a href="https://tools.ietf.org/html/rfc2119">
https://tools.ietf.org/html/rfc2119
</a>
</dd>
<dt id="bib-VSS">
<ins class="diff-new">[VSS]
</ins></dt><dd><a href="https://github.com/GENIVI/vehicle_signal_specification"><cite><ins class="diff-new">
Vehicle
Signal
Specification
</ins></cite></a>.<ins class="diff-new">
GENIVI
Alliance.
March
2017.
1.0.
URL:
</ins><a href="https://github.com/GENIVI/vehicle_signal_specification"><ins class="diff-new">
https://github.com/GENIVI/vehicle_signal_specification
</ins>
</a>
</dd>
</dl>
</section>
</section>
<p role="navigation" id="back-to-top">
<a href="#toc">
<abbr title="Back to Top">
↑
</abbr>
</a>
</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js" type="text/javascript">
</script>
</body>
</html>

