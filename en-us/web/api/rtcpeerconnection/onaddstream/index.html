<p>{{APIRef(“WebRTC”)}}{{deprecated_header}}</p>
<p>The <strong><code>RTCPeerConnection.onaddstream</code></strong> event handler is a property containing the code to execute when the {{DOMxRef(“RTCPeerConnection/addstream_event”, “addstream”)}} event, of type {{domxref(“MediaStreamEvent”)}}, is received by this {{domxref(“RTCPeerConnection”)}}. Such an event is sent when a {{domxref(“MediaStream”)}} is added to this connection by the remote peer. The event is sent immediately after the call {{domxref(“RTCPeerConnection.setRemoteDescription”, “setRemoteDescription()”)}} and doesn’t wait for the result of the SDP negotiation.</p>
<blockquote>
<p><strong>Warning:</strong> This property has been <strong>removed</strong> from the specification; you should now use {{domxref(“RTCPeerConnection.ontrack”)}} to watch for {{DOMxRef(“RTCPeerConnection/track_event”, “track”)}} events instead. It is included here in order to help you adapt existing code and understand existing samples, which may not be up-to-date yet.</p>
</blockquote>
<h2 id="syntax">Syntax</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">rtcPeerConnection</span>.<span class="at">onaddstream</span> <span class="op">=</span> eventHandler<span class="op">;</span></a></code></pre></div>
<h3 id="value">Value</h3>
<p>A function which handles {{DOMxRef(“RTCPeerConnection/addstream_event”, “addstream”)}} events. These events, of type {{domxref(“MediaStreamEvent”)}}, are sent when streams are added to the connection by the remote peer. The first time an event occurs may be nearly immediately after the remote end of the connection is set using {{domxref(“RTCPeerConnection.setRemoteDescription()”)}}; it doesn’t wait for a particular stream to be accepted or rejected using {{Glossary(“SDP”)}} negotiation.</p>
<h2 id="example">Example</h2>
<p>This code, based on an older version of our <a href="/en-US/docs/Web/API/WebRTC_API/Signaling_and_video_calling">Signaling and video calling</a> sample, responds to {{DOMxRef(“RTCPeerConnection/addstream_event”, “addstream”)}} events by setting the video source for a {{HTMLElement(“video”)}} element to the stream specified in the event, and then enabling a “hang up” button in the app’s user interface.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">pc</span>.<span class="at">onaddstream</span> <span class="op">=</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;received_video&quot;</span>).<span class="at">srcObject</span> <span class="op">=</span> <span class="va">event</span>.<span class="at">stream</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&quot;hangup-button&quot;</span>).<span class="at">disabled</span> <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>You can also use {{domxref(“EventTarget.addEventListener”, “addEventListener()”)}} to add a handler for <code>addstream</code> events to an {{domxref(“RTCPeerConnection”)}}.</p>
<h2 id="browser-compatibility">Browser compatibility</h2>
<blockquote>
<p><strong>Warning:</strong> This property has been <strong>removed</strong> from the specification; you should now use {{domxref(“RTCPeerConnection.ontrack”)}} to watch for {{DOMxRef(“RTCPeerConnection/track_event”, “track”)}} events instead. It is included here in order to help you adapt existing code and understand existing samples, which may not be up-to-date yet.</p>
</blockquote>
<p>{{Compat}}</p>
<h2 id="see-also">See also</h2>
<ul>
<li>Use the newer {{DOMxRef(“RTCPeerConnection/track_event”, “track”)}} event, its type {{domxref(“RTCTrackEvent”)}}, and the {{domxref(“RTCPeerConnection.ontrack”)}} event handler property instead of this.</li>
<li>The {{DOMxRef(“RTCPeerConnection/addstream_event”, “addstream”)}} event and its type, {{domxref(“MediaStreamEvent”)}}.</li>
</ul>
