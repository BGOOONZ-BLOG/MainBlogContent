<p>{{securecontext_header}}{{APIRef(“Payment Request API”)}}{{Deprecated_header}}{{Non-standard_header}}</p>
<p>For payment requests that request shipping information, and for which shipping options are offered, the <strong><code>shippingoptionchange</code></strong> event is sent to the {{domxref(“PaymentRequest”)}} whenever the user chooses a shipping option from the list of available options.</p>
<p>The string identifying the currently-selected shipping option can be found in the {{domxref(“PaymentRequest.shippingOption”, “shippingOption”)}} property.</p>
<table class="properties">
<tbody>
<tr>
<th scope="row">
Bubbles
</th>
<td>
No
</td>
</tr>
<tr>
<th scope="row">
Cancelable
</th>
<td>
No
</td>
</tr>
<tr>
<th scope="row">
Interface
</th>
<td>
{{domxref(“PaymentRequestUpdateEvent”)}}
</td>
</tr>
<tr>
<th scope="row">
Event handler property
</th>
<td>
{{domxref(“PaymentRequest.onshippingoptionchange”, “onshippingoptionchange”)}}
</td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<p>This code snippet sets up a handler for the <code>shippingoptionchange</code> event. The code recalculates the total charge for the payment based on the selected shipping option. For example, if there are three options (such as “Free ground shipping”, “2-day air”, and “Next day”), each time the user chooses one of those options, this event handler is called to recalculate the total based on the changed shipping option.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">paymentRequest</span>.<span class="at">addEventListener</span>(<span class="st">&quot;shippingoptionchange&quot;</span><span class="op">,</span> event <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">const</span> value <span class="op">=</span> <span class="at">calculateNewTotal</span>(<span class="va">paymentRequest</span>.<span class="at">shippingOption</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3">  <span class="kw">const</span> total <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="dt">currency</span><span class="op">:</span> <span class="st">&quot;EUR&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="dt">label</span><span class="op">:</span> <span class="st">&quot;Total due&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb1-6" title="6">    value<span class="op">,</span></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="va">event</span>.<span class="at">updateWith</span>(<span class="op">{</span> total <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">},</span> <span class="kw">false</span>)<span class="op">;</span></a></code></pre></div>
<p>After caling a custom function, <code>calculateNewTotal()</code>, to compute the updated total based on the newly-selected shipping option as specified by the {{domxref(“PaymentRequest.shippingOption”, “shippingOption”)}}. The revised total is submitted back to the payment request by calling the event’s {{domxref(“PaymentRequestUpdateEvent.updateWith”, “updateWith()”)}} method.</p>
<p>You can also create an event handler for <code>shippingoptionchange</code> using its corresponding event handler property, {{domxref(“PaymentReques.onshippingoptionchange”, “onshippingoptionchange”)}}:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">paymentRequest</span>.<span class="at">onshippingoptionchange</span> <span class="op">=</span> event <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="kw">const</span> value <span class="op">=</span> <span class="at">calculateNewTotal</span>(<span class="va">paymentRequest</span>.<span class="at">shippingOption</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3">  <span class="kw">const</span> total <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="dt">currency</span><span class="op">:</span> <span class="st">&quot;EUR&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-5" title="5">    <span class="dt">label</span><span class="op">:</span> <span class="st">&quot;Total due&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">    value<span class="op">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="va">event</span>.<span class="at">updateWith</span>(<span class="op">{</span> total <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="op">};</span></a></code></pre></div>
<h2 id="browser-compatibility">Browser compatibility</h2>
<p>{{Compat}}</p>
<h2 id="see-also">See also</h2>
<ul>
<li>{{domxref(“PaymentRequest.onshippingoptionchange”, “onshippingoptionchange”)}} event handler property</li>
</ul>
