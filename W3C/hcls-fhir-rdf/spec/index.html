<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<!-- 
###############################################################
TO RENDER THIS DOCUMENT IN YOUR BROWSER, USE THIS URL:
http://w3c.github.io/hcls-fhir-rdf/spec/
###############################################################
-->
<html>
	<head>
		<title>FHIR RDF Specification</title>
		<meta charset="utf-8"/>
		<script src="https://www.w3.org/Tools/respec/respec-w3c-common" async class="remove"></script>
		<script class="remove">
			var respecConfig = {
				edDraftURI: "http://w3c.github.io/hcls-fhir-rdf/spec/",
				issueBase: "https://github.com/w3c/hcls-fhir-rdf/issues",
				specStatus: "ED",
				publishDate: "2016-10-11",
				shortName:  "fhir-rdf",
				editors: [
					{
						name:       "Harold Solbrig",
						url:        "http://www.mayo.edu/research/faculty/solbrig-harold-r-m-s/bio-20022700",
						company:    "Mayo Clinic",
						companyURL: "http://www.mayo.edu/",
            w3cid:      "36739"
					},
					{
						name:       "Eric Prud'hommeaux",
						url:        "http://www.w3.org/People/Eric/",
						company:    "W3C/MIT",
						companyURL: "http://www.w3.org/",
            w3cid:      "2112"
					}
				],
				wg:           "Semantic Web in Health Care and Life Sciences Interest Group",
				wgURI:        "//www.w3.org/wiki/HCLSIG",
				wgPublicList: "public-semweb-lifesci",
				wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/73865/status",
        otherLinks: [{
          key: "Source code for this document",
          data: [{
              value: "GitHub repository -- see spec/index.html",
              href: "https://github.com/w3c/hcls-fhir-rdf"
          }, {
              value: "Issues list",
              href: "https://github.com/w3c/hcls-fhir-rdf/issues"
          }]
          }],
         	localBiblio:  {
         	  "FHIR": {
         	  	title:    "Fast Healthcare Interoperability Resources",
         	  	href:     "http://hl7-fhir.github.io/",
         	  	"authors": [
         	  	  "Grahame Grieve",
                "Lloyd Mckenzie"
         	  	],
         	  	publisher: "HL7"
         	  },
         	  "FHIRStructureDefintion": {
         	  	title:    "FHIR StructureDefintion",
         	  	href:     "http://hl7-fhir.github.io/structuredefinition",
         	  	"authors": [
         	  	  "Grahame Grieve",
                "Lloyd Mckenzie"
         	  	],
         	  	publisher: "HL7"
         	  },
         	  "FHIRObservation": {
         	  	title:    "FHIR Observation",
         	  	href:     "http://hl7-fhir.github.io/structuredefinition",
         	  	"authors": [
         	  	  "Grahame Grieve",
                "Lloyd Mckenzie"
         	  	],
         	  	publisher: "HL7"
         	  },
         	  "ShExSpec": {
         	  	title:    "Shape Expressions Language Specification",
         	  	href:     "http://shexspec.github.io/semantics/",
         	  	"authors": [
         	  		"Iovka Boneva"
         	  	],
         	  	publisher: "independent"
         	  },
          }
			};
		</script>
		<!-- script src="https://www.w3.org/scripts/jquery/2.1/jquery.min.js"></script--> 
		<style type="text/css">
      .special { color: red; }
      .inferred { color: green; }
      pre.FHIRXML {
        font-size: 8pt;
        line-height: 100%;
        text-align: left ! important;
        font-family: Consolas;
        writing-mode: lr-tb;
        background-color: #f2f2f2;
        padding-left: 0.0555in;
        padding-right: 0.0555in;
        border-width: 0.018cm;
        border-style: solid;
        border-color: #00000a;
        color: #000000;
        padding-bottom: 0in;
        padding-top: 0in;
      border-top-style: none;    
      border-bottom-style: none; 
      }
      pre.FHIRRDF {
        font-size: 8pt;
        line-height: 100%;
        text-align: left ! important;
        font-family: Consolas;
        writing-mode: lr-tb;
        background-color: #e4fff2;
        padding-left: 0.0555in;
        padding-right: 0.0555in;
        border-width: 0.018cm;
        border-style: solid;
        border-color: #00000a;
        color: #000000;
        padding-bottom: 0in;
        padding-top: 0in;
      border-top-style: none;    
      border-bottom-style: none; 
      }
      .ul {
        text-decoration: underline;
      }
      span.code {
        background-color: #f2f2f2;
        border-style: solid;
        border-top-style: none;
        border-bottom-style: none;
        border-left-style: .1em;
        border-right-style: thin;
      }
      .Table1 td {
          padding-left: 0.075in;
          padding-right: 0.075in;
          padding-top: 0in;
          padding-bottom: 0in;
          border-style: none;
      }
.spec a.dict { color: purple; }
.spec a {
    color: darkgreen;
    text-decoration: none;
    border: 0;
}
.spec a:hover, a:focus {
    color: #2a6496;
    text-decoration: underline;
}
.description { color: navy; }
.description a { color: navy; }
.spec .description a { color: navy; } /* override .spec a */
.Table1 .spec {
    border-top-style: none;
    border-bottom-style: none;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 0;
    margin-bottom: 0;
}
.greyback { background-color: #C0C0C0; }
.scalar { color: #2A00FF; }
img.scaled {
    display: block;
    max-width:90%;
    max-height:90%;
    width: auto;
    height: auto;
}
.todo { color:red; border: thin solid red; }
.todo:before { content: "TODO" }
.contentious { color: red; }
div.panel { float:left; }
div.panel > div {
    border-style: solid;
    border-width: thick;
    margin: .5em; /* margin between panels */
}
div.structure {
    padding-bottom: 1ex;
    padding-top: 1ex;
}
div.structure h2 { margin: 0; }
div.structure { margin: 0; }
div.structure table td:nth-child(1) { /* name column */
    line-height: 1ex;
    vertical-align: top;
}
div.structure table td:nth-child(2) { /* type column */
    max-width: 15em
}

.heading { text-align: center; }
span.heading { font-size: 140%; color: #005A9C; } /* emulate h2 in pre */
/*td { line-height: 0 }*/
td img:first-child { padding-right: 0.2em; }

/* gray stuff */
.Patient       { background-color: #EEE; border-color: #BBB; }
.Practitioner  { background-color: #EEE; border-color: #BBB; }
a.Patient      { background-color: #DDD; border: thin solid #BBB; }
a.Practitioner { background-color: #DDD; border: thin solid #BBB; }

/* meds constellation */
.Medication  { background-color: #EFF; border-color: #BEE; }
.MedicationOrder       { background-color: #FEF; border-color: #EBE; }
.MedicationDispense    { background-color: #FFE; border-color: #EEB; }
.Timing      { background-color: #EEF; border-color: #BBE; }
.Ratio       { background-color: #EFE; border-color: #BEB; }
.Range       { background-color: #FEE; border-color: #EBB; }
a.Medication { background-color: #DFF; border: thin solid #BEE; }
a.MedicationOrder      { background-color: #FDF; border: thin solid #EBE; }
a.MedicationDispense   { background-color: #FFD; border: thin solid #EEB; }
a.Timing     { background-color: #DDF; border: thin solid #BBE; }
a.Ratio      { background-color: #DFD; border: thin solid #BEB; }
a.Range      { background-color: #FDD; border: thin solid #EBB; }

/* labs constellation */
.DiagnosticOrder       { background-color: #FEF; border-color: #EBE; }
.DiagnosticReport    { background-color: #FFE; border-color: #EEB; }
.Observation  { background-color: #EFF; border-color: #BEE; }
.Quantity      { background-color: #EEF; border-color: #BBE; }
.Specimen       { background-color: #EFE; border-color: #BEB; }
.Condition       { background-color: #FEE; border-color: #EBB; }
a.DiagnosticOrder      { background-color: #FDF; border: thin solid #EBE; }
a.DiagnosticReport   { background-color: #FFD; border: thin solid #EEB; }
a.Observation { background-color: #DFF; border: thin solid #BEE; }
a.Quantity     { background-color: #DDF; border: thin solid #BBE; }
a.Specimen      { background-color: #DFD; border: thin solid #BEB; }
a.Condition      { background-color: #FDD; border: thin solid #EBB; }


div.data {
    border-style: solid;
    border-width: thick;
}

div.data pre {
    margin-top: 0;
    margin-bottom: 0;
    margin-left: 1em;
}

pre h2 { display: inline;
    font: 120% fixed;
}
div pre { margin-left: 1em; }
.spec a { text-decoration: none; }
td:first-of-type a:first-of-type { color: purple; }
.shexc a:first-of-type { color: purple; }
.spec h2 a {
    color: #005A9C;
}
.comment { color: #C00; }
      td, th {
      padding-top: 0;
      padding-bottom: 0;
      }
      table {
      width: 100%;
      border-spacing:0;
      border-collapse:collapse;
      }
.highlight { border-top: thin solid #777; border-bottom: thin solid #777; background-color: #FFF; }

.post-collapsed::before { color: #733; content: "expand"; }
.collapsible::before { color: #733; content: "collapse"; }
.collapsible { color: #733; }
/*.shex { display: none; }*/

.outdent { margin-left: -1em; }

      .math{
      font-style: normal;
      font-family: monospace;
      }

      .abstrsynt{
      margin-left: 0;
      margin-right: 2ex;
      margin-top: 0.1ex;
      margin-bottom: 0.1ex;
      /* border: double 1px #888888; */
      border: thin solid #888888;
      padding: 1ex 2ex 0.5ex 2ex;
      page-break-inside: avoid;
      background-color: #F0F8F8;
      }

      .fhir {
      background-color: #F0F0F8;
      }
      .shex {
      background-color: #F0F8F0;
      }

		</style>
	</head>
	<body>

    <p class="note" style="border: thick solid red;">
      This document is obsolete.
      Please see instead the current FHIR/RDF specifications on <a href="http://build.fhir.org/">http://build.fhir.org/</a>, the <a href="http://build.fhir.org/rdf.html">FHIR/RDF page</a>, the <a href="http://build.fhir.org/fhir.shex">FHIR schema</a> (ShEx), the <a href="http://build.fhir.org/fhir.ttl">FHIR Metadata Vocabulary</a> (Turtle), and <a href="http://build.fhir.org/rim.ttl">HL7 RIM definitions</a> (Turtle).
    </p>

		<section id="abstract">
			<p>
        This document defines the RDF representation of FHIR Resources.
			</p>
		</section>

		<section id="sotd"><!-- filled in automagically --></section>

    <p class="note" style="border: thick solid red;">
      This document is obsolete.
      Please see instead the current FHIR/RDF specifications on <a href="http://build.fhir.org/">http://build.fhir.org/</a>, the <a href="http://build.fhir.org/rdf.html">FHIR/RDF page</a>, the <a href="http://build.fhir.org/fhir.shex">FHIR schema</a> (ShEx), the <a href="http://build.fhir.org/fhir.ttl">FHIR Metadata Vocabulary</a> (Turtle), and <a href="http://build.fhir.org/rim.ttl">HL7 RIM definitions</a> (Turtle).
    </p>

		<!-- section class='introductory'>
		  <h2>Revision History</h2>
			<p>
				The detailed list of changes and their diffs can be found in the <a href="https://github.com/w3c/hcls-fhir-rdf/commits/gh-pages/spec/index.html">Git repository</a>.
			</p>
			<ul>
				<li><b>2016-01-19</b>: transcribed from Word doc (ericP)</li>
			</ul>
		</section -->

	  <section id="notation">
	    <h2>Notation</h2>
      <p>
        This document uses an abstact syntax consisting of productions defining data structures and labeled members of those data structures.
        Each member had either a type or a union (choice) of types.
        Each type is either a reference to another production, RDF type, or SPARQL literal term (e.g. <a href="http://www.w3.org/TR/sparql11-query/#operandDataTypes"><code>numeric</code></a>), or the template type of <code>List</code> or <code>Set</code>, which signify <a href="https://en.wikipedia.org/wiki/List_(mathematics)">logical lists</a> or <a href="https://en.wikipedia.org/wiki/Set_(mathematics)">logical sets</a> of a type.
        Sets are unordered and duplicates members have no significance; the set <code>(1, 1, 2, 3, 5)</code> is the same as the set <code>(5, 1, 3, 2)</code>.
      </p>
      <p>
        For example, the text:
      </p>
      <div class="abstrsynt">
        <p><span class="math" id="dfn-StructureDefinition">StructureDefinition ::= name:string, type:FHIRResource|PrimativeType, declarations:List[<a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a>]</span></p>
      </div>
      <p>
        signifies that a <code>StructureDefinition</code> has three components called <code>name</code>, <code>type</code> and <code>declarations</code>.
        The <code>name</code> is a <code>string</code>,
        the <code>type</code> is either a <a href="#dfn-FHIRResource"><code>FHIRResource</code></a> or a <a href="#dfn-PrimativeType"><code>PrimativeType</code></a>,
        and the <code>declarations</code> are a list of <a href="#dfn-PropertyDeclaration"><code>PropertyDeclaration</code>s</a>.
        <a href="#FHIRResource"><code>FHIRResource</code></a>, <a href="#PrimativeType"><code>PrimativeType</code></a> and <a href="#PropertyDeclaration"><code>PropertyDeclaration</code></a> are productions within this document.
      </p>
	    <p>
        The following HTML tags and CSS classes are used to highlight the roles of text in this document:
	    </p>
	    <ul>
        <li>&lt;dfn&gt;<dfn id="dfn-shacl-defined-term">defined term</dfn>&lt;dfn&gt;</li>
        <li>&lt;a class="internalDFN"&gt;<a title="SHACL defined term" href="#dfn-shacl-defined-term" class="internalDFN">defined term</a>&lt;/a&gt;</li>
        <li><sup class="eval">eval</sup> &mdash; link to evaluation semantics</li>
	    </ul>
	  </section>

		<section id="intro" class="introductory">
      <h2>Introduction</h2>
      <p>
        HL7 Fast Healthcare Interoperability Resources (FHIR) is an emerging standard for the exchange of electronic healthcare information [[FHIR]].
        FHIR defines a collection of "resources" that "can easily be assembled into working systems that solve real world clinical and administrative problems at a fraction of the price of existing alternatives."
        This assembly process typically requires "profiling" -- the adaptation of the FHIR base resources for use in clinical data exchange.
        The core FHIR resources are described by FHIR-specific schema structures using the StructureDefinition resource. [[FHIRStructureDefintion]]
        FHIR is represented in XML, JSON and RDF.
      </p>
		</section>

		<section id="FHIRResources">
      <h2>FHIR Resources</h2>
      <p>
        The FHIR specification [[FHIR]] defines <code>resources</code>, which are stand-alone data structures capturing independent clinical statements about observations, diagnoses, allergies, medications, procedures, etc.
        This separation of concearns leverages a simple web architecture to enable a atomic creation and updates to these statements.
        (Contrast this with e.g. CCDA which defines a single document covering these different topics.)
        As of June 9, 2016, the development version of the FHIR core specification [[FHIR]] included 113 resources for the exchange of information about care plans, risk assessments, patients, organizations, appointments, observations, etc.  along with a number of “container” resources such as Composition, Bundle and MessageHeader .
      </p>
      <p>
        FHIR resources are defined using the FHIR StructureDefinition [[FHIRStructureDefintion]] resource, which provides the metamodel for all FHIR resources, including StructureDefinition itself.
        FHIR resource definitions are represented in a human readable form through a custom FHIR-specific representation on the FHIR web site.
        Alternative representations include customized XML and JSON templates and a Unified Modeling Language (UML)-like graphic format.
        A combination of XML Schema and Schematron provides a formal definition of the representation of FHIR data in XML.
      </p>

		  <section id="StrucDefn">
        <h2>Structure Definition</h2>
        <p>
          Structure Definitions enumerate sets of properties for abstract, hierarchical data structures.
          This captures structural constraints, such as the name and cardinality of properties, as well as definitions and meta data about properties.
          Structure Definitions can be textually represented in JSON or XML or graphically in HTML, as in this sample from FHIR Observation: [[FHIRObservation]]
        </p>
        <table class="fhir">
          <tbody>
            <tr><th class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/formats.html#table" title="The logical name of the element">Name</a></th><th class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/formats.html#table" title="Reference to the type of the element">Type</a></th><th class="hierarchy">ₙ</th></tr><tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_resource.png" alt="✉" title="Resource" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation" title="Observation : Measurements and simple assertions made about a patient, device or other subject.">Observation</a><a id="Observation"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/domainresource.html">DomainResource</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.identifier" title="Observation.identifier : A unique identifier for the simple observation instance.">identifier</a><a id="Observation.identifier"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#Identifier">Identifier</a></td><td class="hierarchy">*</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_primitive.png" alt="▭" title="Primitive Data Type" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.status" title="Observation.status : The status of the result value.">status</a><a id="Observation.status"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#code">code</a></td><td class="hierarchy">1</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.code" title="Observation.code : Describes what was observed. Sometimes this is called the observation &quot;name&quot;.">code</a><a id="Observation.code"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#CodeableConcept">CodeableConcept</a></td><td class="hierarchy">1</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_reference.png" alt="☞" title="Reference to another Resource" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.subject" title="Observation.subject : The patient, or group of patients, location, or device whose characteristics (direct or indirect) are described by the observation and into whose record the observation is placed.  Comments: Indirect characteristics may be those of a specimen, fetus, donor,  other observer (for example a relative or EMT), or any observation made about the subject.">subject</a><a id="Observation.subject"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/references.html">Reference</a>(<a href="file:/home/eric/WWW/2016/FHIR-tutorial/patient.html">Patient</a> | <a href="file:/home/eric/WWW/2016/FHIR-tutorial/group.html">Group</a> | <a href="file:/home/eric/WWW/2016/FHIR-tutorial/device.html">Device</a> | <a href="file:/home/eric/WWW/2016/FHIR-tutorial/location.html">Location</a>)</td><td class="hierarchy">?</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_choice.gif" alt="?" title="Choice of Types" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.effective_x_" title="Observation.effective[x] : The time or time-period the observed value is asserted as being true. For biological subjects - e.g. human patients - this is usually called the &quot;physiologically relevant time&quot;. This is usually either the time of the procedure or of specimen collection, but very often the source of the date/time is not known, only the date/time itself.">effective[x]</a><a id="Observation.effective_x_"> </a></td><td class="hierarchy"></td><td class="hierarchy">?</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vline.png" alt="│" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_primitive.png" alt="▭" title="Primitive Data Type" class="hierarchy"/> <span title="A date, date-time or partial date (e.g. just year or year + month).  If hours and minutes are specified, a time zone SHALL be populated. The format is a union of the schema types gYear, gYearMonth, date and dateTime. Seconds must be provided due to schema type constraints but may be zero-filled and may be ignored.                 Dates SHALL be valid dates.">effectiveDateTime</span></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#dateTime">dateTime</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vline.png" alt="│" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin_end.png" alt="└" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <span title="A time period defined by a start and end date and optionally time.">effectivePeriod</span></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#Period">Period</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin_end.png" alt="└" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_element.gif" alt="⧇" title="Element" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.component" title="Observation.component : Some observations have multiple component observations.  These component observations are expressed as separate code value pairs that share the same attributes.  Examples include systolic and diastolic component observations for blood pressure measurement and multiple component observations for genetics observations.">component</a><a id="Observation.component"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/backboneelement.html">BackboneElement</a></td><td class="hierarchy">*</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.component.code" title="Observation.component.code : Describes what was observed. Sometimes this is called the observation &quot;code&quot;.">code</a><a id="Observation.component.code"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#CodeableConcept">CodeableConcept</a></td><td class="hierarchy">1</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_choice.gif" alt="?" title="Choice of Types" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.component.value_x_" title="Observation.component.value[x] : The information determined as a result of making the observation, if the information has a simple value.">value[x]</a><a id="Observation.component.value_x_"> </a></td><td class="hierarchy"></td><td class="hierarchy">?</td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vline.png" alt="│" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <span title="A measured amount (or an amount that can potentially be measured). Note that measured amounts include amounts that are not precisely quantified, including amounts involving arbitrary units and floating currencies.">valueQuantity</span></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#Quantity">Quantity</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vline.png" alt="│" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <span title="A concept that may be defined by a formal reference to a terminology or ontology or may be provided by text.">valueCodeableConcept</span></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#CodeableConcept">CodeableConcept</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vline.png" alt="│" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin_end.png" alt="└" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <span title="A time period defined by a start and end date and optionally time.">valuePeriod</span></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#Period">Period</a></td><td class="hierarchy"></td></tr>
            <tr><td class="hierarchy"><img src="http://hl7-fhir.github.io/tbl_spacer.png" alt="" class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_blank.png" alt=" " class="hierarchy"/><img src="http://hl7-fhir.github.io/tbl_vjoin_end.png" alt="└" class="hierarchy"/><img src="http://hl7-fhir.github.io/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="file:/home/eric/WWW/2016/FHIR-tutorial/observation-definitions.html#Observation.component.dataAbsentReason" title="Observation.component.dataAbsentReason : Provides a reason why the expected value in the element Observation.value[x] is missing.">dataAbsentReason</a><a id="Observation.component.dataAbsentReason"> </a></td><td class="hierarchy"><a href="file:/home/eric/WWW/2016/FHIR-tutorial/datatypes.html#CodeableConcept">CodeableConcept</a></td><td class="hierarchy">?</td></tr>
          </tbody>
        </table>
        <p>
          This can be read as a narrative:
        </p>
        <ul>
          <li>This StructureDefinition defines the structure of the FHIR <code>Observation</code> resource, which is an extension of the <code>DomainResource</code> resource.</li>
          <li>It has an arbitrary number ('*') <code>identifier</code> properties with values of type <code>Identifier</code> (defined elsewhere).</li>
          <li>It has exactly one <code>status</code> with a value of type <code>code</code>. Status codes are typically constrained to a specific value set.</li>
          <li>It has exactly one <code>code</code> with a value of type <code>CodeableConcept</code>. CodeableConcept are a FHIR representation of the <a href="http://www.hl7.org/documentcenter/public_temp_B17B2B88-1C23-BA17-0C4C9F6052CBAFB4/standards/v3/iso_datatypes/iso-21090-datatypes.xsd#CD">ISO 21090 CD datatype</a>.</li>
          <li>It has an optional <code>subject</code> which is a FHIR Reference to a resource of type <code>Patient</code>, <code>Group</code>, <code>Device</code>, or <code>Location</code>).</li>
          <li>It has an optional <code>effective</code> period which is reallized as either an <code>effectiveDateTime</code> property with a value type of <code>dateTime</code> or an <code>effectivePeriod</code> property with a value type of <code>Period</code>.</li>
          <li>It has any number of <code>components</code> which are nested structures consisting of:
          <ul>
            <li>exactly one <code>code</code> with a value of type <code>CodeableConcept</code>.</li>
            <li>an optional <code>value</code> which is reallized as one of:
            <ul>
              <li>an <code>valueQuantity</code> property with a value type of <code>Quantity</code>.</li>
              <li>an <code>valueCodeableConcept</code> property with a value type of <code>CodeableConcept</code>.</li>
              <li>an <code>valuePeriod</code> property with a value type of <code>Period</code>.</li>
            </ul></li>
            <li>an optional <code>dataAbsentReason</code> with a value of type <code>CodeableConcept</code>.</li>
          </ul>
          </li>
        </ul>
        <p>
          Note also that clinical data statements include semantics which require rigorous examination during interpretation.
          In particular, properties like <code>dataAbsentReason</code> can change the interpretation of the data.
          This is monotonic, but requires that such fields <em>always</em> be checked when examining data.
        </p>
        <p>
          The FHIR documentation includes RDF examples in [[Turtle]] and structural schemas in [[ShExSpec]].
          The following is an example RDF graph which complies with the above excerpt of a FHIR StructureDefinition:
        </p>
        <pre class="shex">@prefix fhir: &lt;http://hl7.org/fhir/&gt; .
@prefix loinc: &lt;http://loinc.org/owl#&gt; .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt; .
@prefix sct: &lt;http://snomed.info/id/&gt; .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .

# - resource -------------------------------------------------------------------

&lt;http://hl7.org/fhir/Observationblood-pressure&gt; a fhir:Observation;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "blood-pressure"];
  fhir:Resource.meta [
     fhir:Meta.lastUpdated [ fhir:value "2014-01-30T22:35:23+11:00"^^xsd:dateTime ]
  ];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;p&gt;…&lt;/p&gt;&lt;/div&gt;"
  ];
  fhir:Observation.identifier [
     fhir:index 0;
     fhir:Identifier.system [ fhir:value "urn:ietf:rfc:3986" ];
     fhir:Identifier.value [ fhir:value "urn:uuid:187e0c12-8dd2-67e2-99b2-bf273c878281" ]
  ];
  fhir:Observation.status [ fhir:value "final"];
  fhir:Observation.code [
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:concept loinc:55284-4;
       fhir:Coding.system [ fhir:value "http://loinc.org" ];
       fhir:Coding.code [ fhir:value "55284-4" ];
       fhir:Coding.display [ fhir:value "Blood pressure systolic &amp; diastolic" ]
     ]
  ];
  fhir:Observation.subject [
     fhir:link &lt;http://hl7.org/fhir/Patient/example&gt;;
     fhir:Reference.reference [ fhir:value "Patient/example" ]
  ];
  fhir:Observation.effectiveDateTime [ fhir:value "2012-09-17"^^xsd:date];
  fhir:Observation.component [
     fhir:index 0;
     fhir:Observation.component.code [
       fhir:CodeableConcept.coding [
         fhir:index 0;
         fhir:concept loinc:8480-6;
         fhir:Coding.system [ fhir:value "http://loinc.org" ];
         fhir:Coding.code [ fhir:value "8480-6" ];
         fhir:Coding.display [ fhir:value "Systolic blood pressure" ]
       ], [
         fhir:index 1;
         fhir:concept sct:271649006;
         fhir:Coding.system [ fhir:value "http://snomed.info/sct" ];
         fhir:Coding.code [ fhir:value "271649006" ];
         fhir:Coding.display [ fhir:value "Systolic blood pressure" ]
       ]
     ];
     fhir:Observation.component.valueQuantity [
       fhir:Quantity.value [ fhir:value "107"^^xsd:decimal ];
       fhir:Quantity.unit [ fhir:value "mmHg" ];
       fhir:Quantity.system [ fhir:value "http://unitsofmeasure.org" ];
       fhir:Quantity.code [ fhir:value "mm[Hg]" ]
     ]
  ] .

&lt;http://hl7.org/fhir/Patient/example&gt; a fhir:Patient .</pre>
        <p>
          Note that this is an almost "maximal" example.
          An minimal example would include only the properties with a minimum cardinality of 1, e.g.
        </p>
        <pre class="shex">
# - resource -------------------------------------------------------------------

&lt;http://hl7.org/fhir/Observationblood-pressure&gt; a fhir:Observation;
  fhir:nodeRole fhir:treeRoot;
  fhir:Observation.status [ fhir:value "final"];
  fhir:Observation.code [
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:concept loinc:55284-4;
       fhir:Coding.system [ fhir:value "http://loinc.org" ];
       fhir:Coding.code [ fhir:value "55284-4" ];
       fhir:Coding.display [ fhir:value "Blood pressure systolic &amp; diastolic" ]
     ]
  ] .</pre>

        <p>
          The ShEx for the above StructureDefinition is:
        </p>
        <pre class="shex">PREFIX fhir: &lt;http://hl7.org/fhir/&gt; 
PREFIX fhirvs: &lt;http://hl7.org/fhir/ValueSet/&gt;
PREFIX xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; 
BASE &lt;http://hl7.org/fhir/shape/&gt;
start=&lt;Observation&gt; AND {fhir:nodeRole [fhir:treeRoot]}

# Measurements and simple assertions
&lt;Observation&gt; CLOSED {
    a [fhir:Observation];
    fhir:nodeRole [fhir:treeRoot]?;
    fhir:Resource.id @&lt;id&gt;?;                # Logical id of this artifact
    fhir:Resource.meta @&lt;Meta&gt;?;            # Metadata about the resource
    fhir:DomainResource.text @&lt;Narrative&gt;?;  # Text summary of the resource, for 
                                            # human interpretation 
    fhir:Observation.identifier @&lt;Identifier&gt;*;  # Unique Id for this particular 
                                            # observation 
    fhir:Observation.status @&lt;code&gt; AND
    	{fhir:value @fhirvs:observation-status};  # registered | preliminary | final | 
                                            # amended + 
    fhir:Observation.code @&lt;CodeableConcept&gt;;  # Type of observation (code / type)
    fhir:Observation.subject                # Who and/or what this is about
    (   @&lt;PatientReference&gt; OR
        @&lt;GroupReference&gt; OR
        @&lt;DeviceReference&gt; OR
        @&lt;LocationReference&gt;
    )?;
    (                                       # Clinically relevant 
                                            # time/time-period for observation 
        fhir:Observation.effectiveDateTime @&lt;dateTime&gt;  |
        fhir:Observation.effectivePeriod @&lt;Period&gt; 
    )?;
    fhir:Observation.component @&lt;Observation.component&gt;*;  # Component results
    fhir:index xsd:integer?                 # Relative position in a list
}</pre>

        <p>
          Note that this ShEx depends on other ShEx declarations such as Identifier, code, CodeableConcept.
        </p>
      </section>

		  <section id="MappingStrategy">
        <h2>Schema Mapping Strategy</h2>
        <p>
          StructureDefinitions are a domain-specific schema language in that they fully define the structural requirements of the abstract data model.
          The structural schema for the RDF representation is expressed in Shape Expressions.
          <span class="fhir">StructureDefinitions</span> are mapped to <span class="shex">Shape Expressions</span> by defining a default interpretation of the constraints in StructureDefinitions as ShEx supplemented by specific mappings for all leaf nodes, CodeableConcepts, and Resource References.
        </p>
      </section>

		  <section id="FHIRAS">
        <h2>FHIR Abstract Syntax</h2>
        <p>
          The structural components of StructureDefinitions can be represented with an abstract syntax:
        </p>
        <pre class="abstrsynt fhir">
<span class="math" id="dfn-StructureDefinition">StructureDefinition ::= name:string, type:FHIRResource|PrimativeType, declarations:List[<a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a>]</span>
<span class="math" id="dfn-PropertyDeclaration">PropertyDeclaration ::= expr:<a href="#dfdn-PropertyExpression">PropertyExpression</a>, cardinality:<a href="#dfdn-Cardinality">Cardinality</a></span>
<span class="math" id="dfn-PropertyExpression" >PropertyExpression  ::= <a href="#dfdn-PropertyChoice">PropertyChoice</a> | <a href="#dfdn-BackboneElement">BackboneElement</a> | <a href="#dfdn-Property">Property</a></span>
<span class="math" id="dfn-PropertyChoice"     >PropertyChoice      ::= List[<a href="#dfdn-Property">Property</a>]</span>
<span class="math" id="dfn-BackboneElement"    >BackboneElement     ::= List[<a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a>]</span>
<span class="math" id="dfn-Property"           >Property            ::= name:string, type:<a href="#dfdn-FHIRResource">FHIRResource</a>|<a href="#dfdn-ResourceReference">ResourceReference</a></span>
<span class="math" id="dfn-ResourceReference"  >ResourceReference   ::= reference:<a href="#dfdn-FHIRResource">FHIRResource</a></span>
<span class="math" id="dfn-Cardinality"        >Cardinality         ::= '?' | '1' | '+' | '*'</span>
<span class="math" id="dfn-FHIRResource"       >FHIRResource        ::= string</span>
<span class="math" id="dfn-PrimativeType"      >PrimativeType       ::= string</span></pre>
      </section>

		  <section id="SHEXAS">
        <h2>ShEx Abstract Syntax</h2>
        <p>
          The semantics of Shape Expressions is defined in terms of this abstract syntax, the relevent subset is exerpted here:
        </p>
        <pre class="abstrsynt shex">
<span class="math" id="dfn-ShapeDefinition" > ShapeDefinition  ::= label:string, shapeExpr:ShapeExpression</span>
<span class="math" id="dfn-ShapeExpression" > ShapeExpression  ::= ShapeAnd | ShapeOr | Shape</span>
<span class="math" id="dfn-ShapeAnd"        > ShapeAnd         ::= shapeExprs:List[ShapeExpression]</span>
<span class="math" id="dfn-ShapeOr"         > ShapeOr          ::= shapeExprs:List[ShapeExpression]</span>
<span class="math" id="dfn-Shape"           > Shape            ::= label:string, nodeConstraint:NodeConstraint*, expression:TripleExpression?</span>
<span class="math" id="dfn-TripleExpression"> TripleExpression ::= SomeOf | AllOf | TripleConstraint</span>
<span class="math" id="dfn-AllOf"           > AllOf            ::= expressions:List[tripleExpression]</span>
<span class="math" id="dfn-SomeOf"          > SomeOf           ::= expressions:List[tripleExpression]</span>
<span class="math" id="dfn-TripleConstraint"> TripleConstraint ::= predicate:URI, valueExpr:ShapeExpression</span>
<span class="math" id="dfn-NodeConstraint"  > NodeConstraint   ::= NodeKind|Datatype|Shape|XSDFacet</span></pre>
      </section>

    </section>

		<section id="DefaultMapping">
      <h2>Default Mapping</h2>
      <p>
        Unless a more specific rule below applies, the <code>DefaultMapping</code> interpretation of a StructureDefinition as an RDF Schema is defined as follows:
      </p>
      <ul>
        <li>A <a href="#dfn-StructureDefinition" class="fhir">StructureDefinition(name:string, type:FHIRResource, declarations:List[<a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a>])</a> entails a <a href="#dfn-ShapeDefinition" class="shex">ShapeDefinition(label:concat("http://hl7.org/fhir/", name), DefaultMapping(declarations))</a></li>
        <li>declarations:List[<a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a>] entails a <a href="#dfn-AllOf" class="shex">of DefaultMapping(d)</a> for each <a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a> d in declarations.</li>
        <li>A <a href="#dfdn-PropertyDeclaration">PropertyDeclaration</a> entails </li>
      </ul>
		  <section id="InstanceMapping">
        <h2>Instance Mapping</h2>
        <p>
          ...
        </p>
		    <section id="Element">
          <h2>Element</h2>
          <p>
            ...
          </p>
		    </section>
		  </section>
      <section id="CodeableConcept">
        <h2>CodeableConcept</h2>
		  </section>
		</section>

		<section>
      <h2>Resource Identity</h2>
		</section>

		<section>
      <h2>Containment</h2>
		</section>

		<section>
      <h2>Ordering</h2>
		</section>

		<section>
      <h2>Profiles</h2>
		</section>

		<section>
      <h2>Slicing</h2>
		</section>

		<section>
      <h2>Invariants</h2>
		</section>

		<section>
      <h2>Extensions</h2>
		  <section>
        <h2>Extension Definition</h2>
		  </section>
		  <section>
        <h2>Extension Structural Definition</h2>
		  </section>
		</section>

		<section id="todo">
      <h2>TODO</h2>
      <ul>
        <li>add this text about importing FHIR/RDF:
        <blockquote>
          The type is provided by the import mechanism.
          The importer will make a best effort to accurately type references, noting that non-FHIR-server resources may erroneously typable FHIR resources.
        </blockquote>
        </li>
      </ul>
		</section>

  </body>
</html>
