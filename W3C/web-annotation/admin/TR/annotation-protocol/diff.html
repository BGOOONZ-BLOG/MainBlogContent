<!DOCTYPE html> <span class="tagDelete">delete: <tt>&lt;html dir=&quot;ltr&quot; typeof=&quot;bibo:Document w3p:PR&quot; prefix=&quot;bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#&quot; lang=&quot;en&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;html dir=&quot;ltr&quot; typeof=&quot;bibo:Document w3p:REC&quot; prefix=&quot;bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#&quot; lang=&quot;en&quot;&gt;</tt></span> <html dir="ltr" typeof="bibo:Document w3p:REC" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#" lang="en"> <head><style type="text/css"><!--

.insert { background-color: #aaffaa }
.delete { background-color: #ff8888; text-decoration: line-through }
.tagInsert { display:none }
.tagDelete { display:none }

--></style> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta property="dc:language" content="en" lang=""> <style> /* github.com style (c) Vasily Polovnyov <vast@whiteants.net> */ .hljs { display: block; overflow-x: auto; padding: 0.5em; color: #333; background: #f8f8f8; } .hljs-comment, .hljs-quote { color: #998; font-style: italic; } .hljs-keyword, .hljs-selector-tag, .hljs-subst { color: #333; font-weight: bold; } .hljs-number, .hljs-literal, .hljs-variable, .hljs-template-variable, .hljs-tag .hljs-attr { color: #008080; } .hljs-string, .hljs-doctag { color: #d14; } .hljs-title, .hljs-section, .hljs-selector-id { color: #900; font-weight: bold; } .hljs-subst { font-weight: normal; } .hljs-type, .hljs-class .hljs-title { color: #458; font-weight: bold; } .hljs-tag, .hljs-name, .hljs-attribute { color: #000080; font-weight: normal; } .hljs-regexp, .hljs-link { color: #009926; } .hljs-symbol, .hljs-bullet { color: #990073; } .hljs-built_in, .hljs-builtin-name { color: #0086b3; } .hljs-meta { color: #999; font-weight: bold; } .hljs-deletion { background: #fdd; } .hljs-addition { background: #dfd; } .hljs-emphasis { font-style: italic; } .hljs-strong { font-weight: bold; } </style> <style> /* --- EXAMPLES --- */ div.example-title { min-width: 7.5em; color: #b9ab2d; } div.example-title span { text-transform: uppercase; } aside.example, div.example, div.illegal-example { padding: 0.5em; margin: 1em 0; position: relative; clear: both; } div.illegal-example { color: red } div.illegal-example p { color: black } aside.example, div.example { padding: .5em; border-left-width: .5em; border-left-style: solid; border-color: #e0cb52; background: #fcfaee; } aside.example div.example { border-left-width: .1em; border-color: #999; background: #fff; } aside.example div.example div.example-title { color: #999; } </style> <style id="respec-mainstyle"> /***************************************************************** * ReSpec 3 CSS * Robin Berjon - http://berjon.com/ *****************************************************************/ /* Override code highlighter background */ .hljs { background: transparent !important; } /* --- INLINES --- */ em.rfc2119 { text-transform: lowercase; <span class="delete">font-variant: small-caps; </span> font-style: normal; color: #900; } h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym, h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr { border: none; } dfn { font-weight: bold; } a.internalDFN { color: inherit; border-bottom: 1px solid #99c; text-decoration: none; } a.externalDFN { color: inherit; border-bottom: 1px dotted #ccc; text-decoration: none; } a.bibref { text-decoration: none; } cite .bibref { font-style: normal; } code { color: #C83500; } th code { color: inherit; } /* --- TOC --- */ .toc a, .tof a { text-decoration: none; } a .secno, a .figno { color: #000; } ul.tof, ol.tof { list-style: none outside none; } .caption { margin-top: 0.5em; font-style: italic; } /* --- TABLE --- */ table.simple { border-spacing: 0; border-collapse: collapse; border-bottom: 3px solid #005a9c; } .simple th { background: #005a9c; color: #fff; padding: 3px 5px; text-align: left; } .simple th[scope="row"] { background: inherit; color: inherit; border-top: 1px solid #ddd; } .simple td { padding: 3px 10px; border-top: 1px solid #ddd; } .simple tr:nth-child(even) { background: #f0f6ff; } /* --- DL --- */ .section dd>p:first-child { margin-top: 0; } .section dd>p:last-child { margin-bottom: 0; } .section dd { margin-bottom: 1em; } .section dl.attrs dd, .section dl.eldef dd { margin-bottom: 0; } .respec-hidden { display: none; } #respec-ui { position: fixed; <span class="insert">display: flex; flex-direction: row-reverse; </span> top: 20px; right: 20px; width: 202px; text-align: right; } #respec-pill, .respec-info-button { background: #fff; height: 2.5em; color: rgb(120, 120, 120); border: 1px solid #ccc; box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5); } .respec-info-button { border: none; <span class="insert">opacity: .5; </span> border-radius: 2em; margin-right: 1em; min-width: 3.5em; } <span class="insert">.respec-info-button:focus { opacity: 1; transition: opacity .2s; } </span> #respec-pill:disabled { <span class="delete">margin: 10px auto; </span> font-size: 2.8px; <span class="delete">position: relative; </span> text-indent: -9999em; border-top: 1.1em solid rgba(40, 40, 40, 0.2); border-right: 1.1em solid rgba(40, 40, 40, 0.2); border-bottom: 1.1em solid rgba(40, 40, 40, 0.2); border-left: 1.1em solid #ffffff; transform: translateZ(0); animation: respec-spin <span class="delete">1.1s </span> <span class="insert">.5s </span> infinite linear; box-shadow: none; } #respec-pill:disabled, #respec-pill:disabled:after { border-radius: 50%; width: 10em; height: 10em; } @keyframes respec-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } } #respec-pill:hover, #respec-pill:focus { color: rgb(0, 0, 0); <span class="insert">background-color: rgb(245, 245, 245); </span> transition: color <span class="delete">.2s </span> <span class="insert">.2s; </span> } #respec-menu { <span class="insert">position: absolute; margin: 0; padding: 0; </span> font-family: sans-serif; background: #fff; box-shadow: 1px 1px 8px 0 rgba(100, 100, 100, .5); width: 200px; display: none; text-align: left; margin-top: <span class="delete">5px; </span> <span class="insert">32px; </span> font-size: .8em; <span class="insert">} #respec-menu li { list-style-type: none; margin: 0; padding: 0; </span> } .respec-save-button { background: #fff; border: 1px solid #000; border-radius: 5px; padding: 5px; margin: 5px; display: block; width: 100%; color: #000; text-decoration: none; text-align: center; font-size: inherit; } #respec-ui button:focus, #respec-pill:focus, .respec-option:focus { outline: 0; outline-style: none; } <span class="delete">#respec-ui button.respec-pill-error </span> <span class="insert">#respec-pill-error </span> { background-color: red; color: white; } <span class="delete">#respec-ui button.respec-pill-warning </span> <span class="insert">#respec-pill-warning </span> { background-color: orange; color: white; } <span class="insert">.respec-warning-list, .respec-error-list { margin: 0; padding: 0; list-style: none; font-family: sans-serif; background-color: rgb(255, 251, 230); font-size: .9em; } .respec-warning-list li, .respec-error-list li { padding: 0.4em 0.7em; } .respec-warning-list li::before { content: "‚ö†Ô∏è"; padding-right: .5em; } .respec-warning-list li { color: rgb(92, 59, 0); border-bottom: thin solid rgb(255, 245, 194); } .respec-error-list, .respec-error-list li { background-color: rgb(255, 240, 240); } .respec-error-list li::before { content: "üí•"; padding-right: .5em; } .respec-error-list li { padding: 0.4em 0.7em; color: rgb(92, 59, 0); border-bottom: thin solid rgb(255, 215, 215); } #respec-overlay { display: block; opacity: 0; position: fixed; z-index: 10000; top: 0px; left: 0px; height: 100%; width: 100%; background: #000; } .respec-modal { display: block; position: fixed; opacity: 0; z-index: 11000; margin: auto; top: 10%; background: #fff; border: 5px solid #666; min-width: 20%; width: 85%; padding: 0; max-height: 80%; overflow-y: auto; margin: 0 -.5cm } @media screen and (min-width: 78em) { .respec-modal { width: 64%; } } .respec-modal h3 { margin: 0; padding: .2em; text-align: center; color: black; background: linear-gradient(to bottom, rgba(238, 238, 238, 1) 0%, rgba(238, 238, 238, 1) 50%, rgba(204, 204, 204, 1) 100%); font-size: 1em; } .respec-modal .inside p { padding-left: 1cm; } </span> #respec-menu button.respec-option { background: white; <span class="insert">padding: 0 .2cm; </span> border: none; width: 100%; text-align: left; font-size: inherit; padding: 1.2em 1.2em; } #respec-menu <span class="delete">button.respec-option:hover </span> <span class="insert">button.respec-option:hover, #respec-menu button:focus </span> { background-color: #eeeeee; } .respec-cmd-icon { padding-right: .5em; } #respec-ui button.respec-option:last-child { border: none; border-radius: inherit; } .respec-offending-element { display: inline-block; position: relative; background: url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x; <span class="insert">} .respec-dfn-list { column-count: 2; } .respec-dfn-list li { list-style: none; </span> } @media print { .removeOnSave { display: none; } } </style> <title> Web Annotation Protocol </title> <style> .model { empty-cells: show; border-collapse: collapse; margin-bottom: .5ex; border: 1px solid black; } .model th { padding: 3px; border: 1px solid #404040; text-align: center; font-weight: bold; font-family: sans-serif; } .model td { padding: 5px; border: 1px solid #404040; text-align: left; font-family: sans-serif; } </style> <span class="tagInsert">insert: <tt>&lt;link rel=&quot;stylesheet&quot; href=&quot;https://www.w3.org/StyleSheets/TR/2016/W3C-REC&quot;&gt;</tt></span> <link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-REC"> <span class="tagInsert">insert: <tt>&lt;link rel=&quot;canonical&quot; href=&quot;https://www.w3.org/TR/annotation-protocol/&quot;&gt;</tt></span> <link rel="canonical" href="https://www.w3.org/TR/annotation-protocol/"> <span class="tagInsert">insert: <tt>&lt;meta name=&quot;generator&quot; content=&quot;ReSpec 10.5.1&quot;&gt;</tt></span> <meta name="generator" content="ReSpec 10.5.1"> <script id="initialUserConfig" type="application/json"> { "specStatus": <span class="delete">"PR", </span> <span class="insert">"REC", </span> "errata": "https://www.w3.org/annotation/errata/", "shortName": "annotation-protocol", "editors": [ { "name": "Robert Sanderson", "company": "J Paul Getty Trust", "companyURL": "http://getty.edu/", "mailto": <span class="delete">"rsanderson@getty.edu" </span> <span class="insert">"rsanderson@getty.edu", "extras": [ { "name": " </span> <span class="tagInsert">insert: <tt>&lt;img width='14' height='14' src='orcid_logo.png' alt='orcid logo' /&gt;</tt></span> <img width='14' height='14' src='orcid_logo.png' alt='orcid logo' /> <span class="insert">", "href": "http://orcid.org/0000-0003-0782-2704", "class": "orcid" }] </span> }], "implementationReportURI": " https://w3c.github.io/test-results/annotation-protocol/all.html", "crEnd": "2016-09-30", "prEnd": "2017-02-14", "previousMaturity": <span class="delete">"CR", </span> <span class="insert">"PR", </span> "previousPublishDate": <span class="delete">"2016-09-06", </span> <span class="insert">"2017-01-17", </span> "previousURI": <span class="delete">"http://www.w3.org/TR/2016/CR-annotation-protocol-20160906/", </span> <span class="insert">"https://www.w3.org/TR/2016/PR-annotation-protocol-20170117/", </span> "publishDate": <span class="delete">"2017-01-17", </span> <span class="insert">"2017-02-23", </span> "edDraftURI": <span class="delete">"http://w3c.github.io/web-annotation/protocol/wd/", </span> <span class="insert">"https://w3c.github.io/web-annotation/protocol/wd/", </span> "wg": "Web Annotation Working Group", "wgURI": <span class="delete">"http://www.w3.org/annotation/", </span> <span class="insert">"https://www.w3.org/annotation/", </span> "wgPublicList": "public-annotation", "wgPatentURI": "https://www.w3.org/2004/01/pp-impl/73180/status", "noRecTrack": false, "localBiblio": { "annotation-vocab": { "authors": [ "Robert Sanderson", "Paolo Ciccarese", "Benjamin Young" ], "title": "Web Annotation Vocabulary", "href": <span class="delete">"http://www.w3.org/TR/2017/PR-annotation-vocab-20170117/", </span> <span class="insert">"https://www.w3.org/TR/annotation-vocab/", </span> "publisher": "W3C", "rawDate": <span class="delete">"2017-01-17", </span> <span class="insert">"2017-02-23", </span> "status": <span class="delete">"PR" </span> <span class="insert">"REC" </span> }, "annotation-model": { "authors": [ "Robert Sanderson", "Paolo Ciccarese", "Benjamin Young" ], "title": "Web Annotation Data Model", "href": <span class="delete">"http://www.w3.org/TR/2017/PR-annotation-model-20170117/", </span> <span class="insert">"https://www.w3.org/TR/annotation-model/", </span> "publisher": "W3C", "rawDate": <span class="delete">"2017-01-17", </span> <span class="insert">"2017-02-23", </span> "status": <span class="delete">"PR" </span> <span class="insert">"REC" </span> } }, "otherLinks": [ { "key": "Repository", "data": [ { "value": "Github Repository", "href": "https://github.com/w3c/web-annotation" }] }, { "key": "Changes", "data": [ { "value": "Diff to previous version", "href": "diff.html" }, { "value": "Commit history", "href": "https://github.com/w3c/web-annotation/commits/gh-pages" }] <span class="insert">}], "alternateFormats": [ { "uri": "annotation-protocol.epub", "label": "ePub" </span> }] } </script> <span class="tagDelete">delete: <tt>&lt;link rel=&quot;stylesheet&quot; href=&quot;https://www.w3.org/StyleSheets/TR/2016/W3C-PR&quot;&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;meta name=&quot;generator&quot; content=&quot;ReSpec 8.4.1&quot;&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;link rel=&quot;canonical&quot; href=&quot;https://www.w3.org/TR/annotation-protocol/&quot;&gt;</tt></span> </head> <span class="tagDelete">delete: <tt>&lt;body class=&quot;h-entry&quot; role=&quot;document&quot; id=&quot;respecDocument&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;body aria-busy=&quot;false&quot; class=&quot;h-entry&quot; role=&quot;document&quot; id=&quot;respecDocument&quot;&gt;</tt></span> <body aria-busy="false" class="h-entry" role="document" id="respecDocument"> <div class="head" role="contentinfo" id="respecHeader"> <p> <a class="logo" href="https://www.w3.org/"> <img src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" width="72" height="48"> </a> </p> <h1 class="title p-name" id="title" property="dcterms:title"> Web Annotation Protocol </h1> <span class="tagDelete">delete: <tt>&lt;h2 id=&quot;w3c-proposed-recommendation-17-january-2017&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;h2 id=&quot;w3c-recommendation-23-february-2017&quot;&gt;</tt></span> <h2 id="w3c-recommendation-23-february-2017"> <abbr title="World Wide Web Consortium"> W3C </abbr> <span class="delete">Proposed </span> Recommendation <span class="tagDelete">delete: <tt>&lt;time property=&quot;dcterms:issued&quot; class=&quot;dt-published&quot; datetime=&quot;2017-01-17&quot;&gt;</tt></span> <span class="delete">17 January </span> <span class="tagInsert">insert: <tt>&lt;time property=&quot;dcterms:issued&quot; class=&quot;dt-published&quot; datetime=&quot;2017-02-23&quot;&gt;</tt></span> <time property="dcterms:issued" class="dt-published" datetime="2017-02-23"> <span class="insert">23 February </span> 2017 </time> </h2> <dl> <dt> This version: </dt> <dd> <span class="tagDelete">delete: <tt>&lt;a class=&quot;u-url&quot; href=&quot;https://www.w3.org/TR/2017/PR-annotation-protocol-20170117/&quot;&gt;</tt></span> <span class="delete">https://www.w3.org/TR/2017/PR-annotation-protocol-20170117/ </span> <span class="tagInsert">insert: <tt>&lt;a class=&quot;u-url&quot; href=&quot;https://www.w3.org/TR/2017/REC-annotation-protocol-20170223/&quot;&gt;</tt></span> <a class="u-url" href="https://www.w3.org/TR/2017/REC-annotation-protocol-20170223/"> <span class="insert">https://www.w3.org/TR/2017/REC-annotation-protocol-20170223/ </span> </a> </dd> <dt> Latest published version: </dt> <dd> <a href="https://www.w3.org/TR/annotation-protocol/"> https://www.w3.org/TR/annotation-protocol/ </a> </dd> <dt> Latest editor's draft: </dt> <dd> <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://w3c.github.io/web-annotation/protocol/wd/&quot;&gt;</tt></span> <span class="delete">http://w3c.github.io/web-annotation/protocol/wd/ </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://w3c.github.io/web-annotation/protocol/wd/&quot;&gt;</tt></span> <a href="https://w3c.github.io/web-annotation/protocol/wd/"> <span class="insert">https://w3c.github.io/web-annotation/protocol/wd/ </span> </a> </dd> <dt> Implementation report: </dt> <dd> <a href=" https://w3c.github.io/test-results/annotation-protocol/all.html"> https://w3c.github.io/test-results/annotation-protocol/all.html </a> </dd> <dt> Previous version: </dt> <dd> <span class="tagDelete">delete: <tt>&lt;a rel=&quot;dcterms:replaces&quot; href=&quot;https://www.w3.org/TR/2016/CR-annotation-protocol-20160906/&quot;&gt;</tt></span> <span class="delete">https://www.w3.org/TR/2016/CR-annotation-protocol-20160906/ </span> <span class="tagInsert">insert: <tt>&lt;a rel=&quot;dcterms:replaces&quot; href=&quot;https://www.w3.org/TR/2017/PR-annotation-protocol-20170117/&quot;&gt;</tt></span> <a rel="dcterms:replaces" href="https://www.w3.org/TR/2017/PR-annotation-protocol-20170117/"> <span class="insert">https://www.w3.org/TR/2017/PR-annotation-protocol-20170117/ </span> </a> </dd> <dt> Editor: </dt> <dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0"> <span property="rdf:first" typeof="foaf:Person"> <span property="foaf:name" class="p-name fn"> Robert Sanderson </span> , <a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://getty.edu/"> J Paul Getty Trust </a> , <span class="ed_mailto"> <a class="u-email email" property="foaf:mbox" href="mailto:rsanderson@getty.edu"> rsanderson@getty.edu </a> </span> <span class="insert">, </span> <span class="tagInsert">insert: <tt>&lt;span class=&quot;orcid&quot;&gt;</tt></span> <span class="orcid"> <span class="tagInsert">insert: <tt>&lt;a href=&quot;http://orcid.org/0000-0003-0782-2704&quot; property=&quot;rdfs:seeAlso&quot;&gt;</tt></span> <a href="http://orcid.org/0000-0003-0782-2704" property="rdfs:seeAlso"> <span class="tagInsert">insert: <tt>&lt;img src=&quot;orcid_logo.png&quot; alt=&quot;orcid logo&quot; width=&quot;14&quot; height=&quot;14&quot;&gt;</tt></span> <img src="orcid_logo.png" alt="orcid logo" width="14" height="14"> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/span&gt;</tt></span> </span> </span> <span property="rdf:rest" resource="rdf:nil"> </span> </dd> <dt> Repository: </dt> <dd> <a href="https://github.com/w3c/web-annotation"> Github Repository </a> </dd> <dt> Changes: </dt> <dd> <a href="diff.html"> Diff to previous version </a> </dd> <dd> <a href="https://github.com/w3c/web-annotation/commits/gh-pages"> Commit history </a> </dd> </dl> <p> Please check the <a href="https://www.w3.org/annotation/errata/"> <strong> errata </strong> </a> for any errors or issues reported since publication. <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> <span class="insert">This document is also available in this non-normative format: </span> <span class="tagInsert">insert: <tt>&lt;a rel=&quot;alternate&quot; href=&quot;annotation-protocol.epub&quot;&gt;</tt></span> <a rel="alternate" href="annotation-protocol.epub"> <span class="insert">ePub </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> <span class="insert">The English version of this specification is the only normative version. Non-normative </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/2003/03/Translations/byTechnology?technology=https://www.w3.org/TR/annotation-protocol/&quot;&gt;</tt></span> <a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=https://www.w3.org/TR/annotation-protocol/"> <span class="insert">translations </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">may also be available. </span> </p> <p class="copyright"> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright"> Copyright </a> ¬© 2017 <a href="https://www.w3.org/"> <abbr title="World Wide Web Consortium"> W3C </abbr> </a> <sup> ¬Æ </sup> ( <a href="https://www.csail.mit.edu/"> <abbr title="Massachusetts Institute of Technology"> MIT </abbr> </a> , <a href="https://www.ercim.eu/"> <abbr title="European Research Consortium for Informatics and Mathematics"> ERCIM </abbr> </a> , <a href="https://www.keio.ac.jp/"> Keio </a> , <a href="http://ev.buaa.edu.cn/"> Beihang </a> ). <abbr title="World Wide Web Consortium"> W3C </abbr> <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer"> liability </a> , <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks"> trademark </a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/copyright-documents"> document use </a> rules apply. </p> <hr title="Separator for header"> </div> <section id="abstract" class="introductory" property="dc:abstract"> <h2 id="h-abstract" resource="#h-abstract"> <span property="xhv:role" resource="xhv:heading"> Abstract </span> </h2> <p> Annotations are typically used to convey information about a resource or associations between resources. Simple examples include a comment or tag on a single web page or image, or a blog post about a news article. </p> <p> The Web Annotation Protocol describes the transport mechanisms for creating and managing annotations in a method that is consistent with the Web Architecture and REST best practices. </p> </section> <section id="sotd" class="introductory"> <h2 id="h-sotd" resource="#h-sotd"> <span property="xhv:role" resource="xhv:heading"> Status of This Document </span> </h2> <p> <em> This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium"> W3C </abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"> <abbr title="World Wide Web Consortium"> W3C </abbr> technical reports index </a> at https://www.w3.org/TR/. </em> </p> <p> <span class="insert">By publishing this Recommendation, </span> <span class="tagInsert">insert: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <abbr title="World Wide Web Consortium"> <span class="insert">W3C </span> <span class="tagInsert">insert: <tt>&lt;/abbr&gt;</tt></span> </abbr> <span class="insert">expects that the functionality specified in this Recommendation will not be affected by changes to the Activity Streams 2.0&nbsp;[ </span> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="tagInsert">insert: <tt>&lt;a class=&quot;bibref&quot; href=&quot;#bib-activitystreams-core&quot;&gt;</tt></span> <a class="bibref" href="#bib-activitystreams-core"> <span class="insert">activitystreams-core </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="insert">] and Activity Vocabulary&nbsp;[ </span> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="tagInsert">insert: <tt>&lt;a class=&quot;bibref&quot; href=&quot;#bib-activitystreams-vocabulary&quot;&gt;</tt></span> <a class="bibref" href="#bib-activitystreams-vocabulary"> <span class="insert">activitystreams-vocabulary </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="insert">] as those specifications proceed to Recommendation. </span> <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> This document was published by the <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://www.w3.org/annotation/&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/annotation/&quot;&gt;</tt></span> <a href="https://www.w3.org/annotation/"> Web Annotation Working Group </a> as a <span class="delete">Proposed </span> Recommendation. <span class="insert">If you wish to make comments regarding this document, please send them to </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;mailto:public-annotation@w3.org&quot;&gt;</tt></span> <a href="mailto:public-annotation@w3.org"> <span class="insert">public-annotation@w3.org </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">( </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;mailto:public-annotation-request@w3.org?subject=subscribe&quot;&gt;</tt></span> <a href="mailto:public-annotation-request@w3.org?subject=subscribe"> <span class="insert">subscribe </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">, </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://lists.w3.org/Archives/Public/public-annotation/&quot;&gt;</tt></span> <a href="https://lists.w3.org/Archives/Public/public-annotation/"> <span class="insert">archives </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">). All comments are welcome. </span> <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> <span class="insert">Please see the Working Group's </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot; https://w3c.github.io/test-results/annotation-protocol/all.html&quot;&gt;</tt></span> <a href=" https://w3c.github.io/test-results/annotation-protocol/all.html"> <span class="insert">implementation report </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">. </span> <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> This document <span class="insert">has been reviewed by </span> <span class="tagInsert">insert: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <abbr title="World Wide Web Consortium"> <span class="insert">W3C </span> <span class="tagInsert">insert: <tt>&lt;/abbr&gt;</tt></span> </abbr> <span class="insert">Members, by software developers, and by other </span> <span class="tagInsert">insert: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <abbr title="World Wide Web Consortium"> <span class="insert">W3C </span> <span class="tagInsert">insert: <tt>&lt;/abbr&gt;</tt></span> </abbr> <span class="insert">groups and interested parties, and </span> is <span class="delete">intended to become </span> <span class="insert">endorsed by the Director as </span> a <abbr title="World Wide Web Consortium"> W3C </abbr> Recommendation. <span class="delete">The </span> <span class="tagDelete">delete: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <span class="delete">W3C </span> <span class="tagDelete">delete: <tt>&lt;/abbr&gt;</tt></span> <span class="delete">Membership and other interested parties are invited to review the document and send comments to </span> <span class="tagDelete">delete: <tt>&lt;a rel=&quot;discussion&quot; href=&quot;mailto:public-annotation@w3.org&quot;&gt;</tt></span> <span class="delete">public-annotation@w3.org </span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">( </span> <span class="tagDelete">delete: <tt>&lt;a href=&quot;mailto:public-annotation-request@w3.org?subject=subscribe&quot;&gt;</tt></span> <span class="delete">subscribe </span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">, </span> <span class="tagDelete">delete: <tt>&lt;a href=&quot;https://lists.w3.org/Archives/Public/public-annotation/&quot;&gt;</tt></span> <span class="delete">archives </span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">) through 14 February 2017. Advisory Committee Representatives should consult their </span> <span class="tagDelete">delete: <tt>&lt;a href=&quot;https://www.w3.org/2002/09/wbs/myQuestionnaires&quot;&gt;</tt></span> <span class="delete">WBS questionnaires </span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">. Note that substantive technical comments were expected during the Candidate Recommendation review period that ended 30 September 2016. </span> <span class="tagDelete">delete: <tt>&lt;/p&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;p&gt;</tt></span> <span class="delete">Please see the Working Group's </span> <span class="tagDelete">delete: <tt>&lt;a href=&quot; https://w3c.github.io/test-results/annotation-protocol/all.html&quot;&gt;</tt></span> <span class="delete">implementation report </span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">. </span> <span class="tagDelete">delete: <tt>&lt;/p&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;p&gt;</tt></span> <span class="delete">Publication as a Proposed Recommendation does not imply endorsement by the </span> <span class="tagDelete">delete: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <span class="delete">W3C </span> <span class="tagDelete">delete: <tt>&lt;/abbr&gt;</tt></span> <span class="delete">Membership. This </span> <span class="insert">It </span> is a <span class="delete">draft </span> <span class="insert">stable </span> document and may be <span class="delete">updated, replaced </span> <span class="insert">used as reference material </span> or <span class="delete">obsoleted by other documents at any time. It </span> <span class="insert">cited from another document. </span> <span class="tagInsert">insert: <tt>&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;</tt></span> <abbr title="World Wide Web Consortium"> <span class="insert">W3C </span> <span class="tagInsert">insert: <tt>&lt;/abbr&gt;</tt></span> </abbr> <span class="insert">'s role in making the Recommendation </span> is <span class="delete">inappropriate to cite this document as other than work in progress. </span> <span class="insert">to draw attention to the specification and to promote its widespread deployment. This enhances the functionality and interoperability of the Web. </span> </p> <p> This document was produced by a group operating under the <a id="sotd_patent" property="w3p:patentRules" href="https://www.w3.org/Consortium/Patent-Policy-20040205/"> 5 February 2004 <abbr title="World Wide Web Consortium"> W3C </abbr> Patent Policy </a> . <abbr title="World Wide Web Consortium"> W3C </abbr> maintains a <a href="https://www.w3.org/2004/01/pp-impl/73180/status" rel="disclosure"> public list of any patent disclosures </a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential"> Essential Claim(s) </a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure"> section 6 of the <abbr title="World Wide Web Consortium"> W3C </abbr> Patent Policy </a> . </p> <p> This document is governed by the <a id="w3c_process_revision" href="https://www.w3.org/2015/Process-20150901/"> 1 September 2015 <abbr title="World Wide Web Consortium"> W3C </abbr> Process Document </a> . </p> </section> <nav id="toc"> <h2 class="introductory" id="table-of-contents" resource="#table-of-contents"> <span property="xhv:role" resource="xhv:heading"> Table of Contents </span> </h2> <ol class="toc" role="directory"> <li class="tocline"> <a href="#introduction" class="tocxref"> <span class="secno"> 1. </span> Introduction </a> <ol class="toc"> <li class="tocline"> <a href="#aims-of-the-protocol" class="tocxref"> <span class="secno"> 1.1 </span> Aims of the Protocol </a> </li> <li class="tocline"> <a href="#summary" class="tocxref"> <span class="secno"> 1.2 </span> Summary </a> </li> <li class="tocline"> <a href="#conformance" class="tocxref"> <span class="secno"> 1.3 </span> Conformance </a> </li> <li class="tocline"> <a href="#terminology" class="tocxref"> <span class="secno"> 1.4 </span> Terminology </a> </li> </ol> </li> <li class="tocline"> <a href="#web-annotation-protocol-principles" class="tocxref"> <span class="secno"> 2. </span> Web Annotation Protocol Principles </a> </li> <li class="tocline"> <a href="#annotation-retrieval" class="tocxref"> <span class="secno"> 3. </span> Annotation Retrieval </a> </li> <li class="tocline"> <a href="#annotation-containers" class="tocxref"> <span class="secno"> 4. </span> Annotation Containers </a> <ol class="toc"> <li class="tocline"> <a href="#container-retrieval" class="tocxref"> <span class="secno"> 4.1 </span> Container Retrieval </a> </li> <li class="tocline"> <a href="#container-representations" class="tocxref"> <span class="secno"> 4.2 </span> Container Representations </a> <ol class="toc"> <li class="tocline"> <a href="#container-representation-preferences" class="tocxref"> <span class="secno"> 4.2.1 </span> Container Representation Preferences </a> </li> <li class="tocline"> <a href="#representations-without-annotations" class="tocxref"> <span class="secno"> 4.2.2 </span> Representations without Annotations </a> </li> <li class="tocline"> <a href="#representations-with-annotation-iris" class="tocxref"> <span class="secno"> 4.2.3 </span> Representations with Annotation IRIs </a> </li> <li class="tocline"> <a href="#representations-with-annotation-descriptions" class="tocxref"> <span class="secno"> 4.2.4 </span> Representations with Annotation Descriptions </a> </li> </ol> </li> <li class="tocline"> <a href="#annotation-pages" class="tocxref"> <span class="secno"> 4.3 </span> Annotation Pages </a> </li> <li class="tocline"> <a href="#discovery-of-annotation-containers" class="tocxref"> <span class="secno"> 4.4 </span> Discovery of Annotation Containers </a> </li> </ol> </li> <li class="tocline"> <a href="#creation-updating-and-deletion-of-annotations" class="tocxref"> <span class="secno"> 5. </span> Creation, Updating and Deletion of Annotations </a> <ol class="toc"> <li class="tocline"> <a href="#create-a-new-annotation" class="tocxref"> <span class="secno"> 5.1 </span> Create a New Annotation </a> </li> <li class="tocline"> <a href="#suggesting-an-iri-for-an-annotation" class="tocxref"> <span class="secno"> 5.2 </span> Suggesting an IRI for an Annotation </a> </li> <li class="tocline"> <a href="#update-an-existing-annotation" class="tocxref"> <span class="secno"> 5.3 </span> Update an Existing Annotation </a> </li> <li class="tocline"> <a href="#delete-an-existing-annotation" class="tocxref"> <span class="secno"> 5.4 </span> Delete an Existing Annotation </a> </li> </ol> </li> <li class="tocline"> <a href="#error-conditions" class="tocxref"> <span class="secno"> 6. </span> Error Conditions </a> </li> <li class="tocline"> <a href="#containers-for-related-resources" class="tocxref"> <span class="secno"> 7. </span> Containers for Related Resources </a> </li> <li class="tocline"> <a href="#candidate-recommendation-exit-criteria" class="tocxref"> <span class="secno"> A. </span> Candidate Recommendation Exit Criteria </a> </li> <li class="tocline"> <a href="#changes-from-previous-versions" class="tocxref"> <span class="secno"> B. </span> Changes from Previous Versions </a> <ol class="toc"> <li class="tocline"> <span class="tagInsert">insert: <tt>&lt;a href=&quot;#changes-from-the-proposed-recommendation-of-2017-01-17&quot; class=&quot;tocxref&quot;&gt;</tt></span> <a href="#changes-from-the-proposed-recommendation-of-2017-01-17" class="tocxref"> <span class="tagInsert">insert: <tt>&lt;span class=&quot;secno&quot;&gt;</tt></span> <span class="secno"> <span class="insert">B.1 </span> <span class="tagInsert">insert: <tt>&lt;/span&gt;</tt></span> </span> <span class="insert">Changes from the Proposed Recommendation of 2017-01-17 </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/li&gt;</tt></span> </li> <span class="tagInsert">insert: <tt>&lt;li class=&quot;tocline&quot;&gt;</tt></span> <li class="tocline"> <a href="#changes-from-the-candidate-recommendation-of-2016-09-06" class="tocxref"> <span class="secno"> <span class="delete">B.1 </span> <span class="insert">B.2 </span> </span> Changes from the Candidate Recommendation of 2016-09-06 </a> </li> <li class="tocline"> <a href="#changes-from-the-candidate-recommendation-of-2016-07-12" class="tocxref"> <span class="secno"> <span class="delete">B.2 </span> <span class="insert">B.3 </span> </span> Changes from the Candidate Recommendation of 2016-07-12 </a> </li> <li class="tocline"> <a href="#changes-from-the-working-draft-of-2016-03-31" class="tocxref"> <span class="secno"> <span class="delete">B.3 </span> <span class="insert">B.4 </span> </span> Changes from the Working Draft of 2016-03-31 </a> </li> </ol> </li> <li class="tocline"> <a href="#acknowledgments" class="tocxref"> <span class="secno"> C. </span> Acknowledgments </a> </li> <li class="tocline"> <a href="#references" class="tocxref"> <span class="secno"> D. </span> References </a> <ol class="toc"> <li class="tocline"> <a href="#normative-references" class="tocxref"> <span class="secno"> D.1 </span> Normative references </a> </li> </ol> </li> </ol> </nav> <section class="informative" id="introduction" typeof="bibo:Chapter" resource="#introduction" property="bibo:hasPart"> <h2 id="h-introduction" resource="#h-introduction"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 1. </span> Introduction </span> </h2> <p> <em> This section is non-normative. </em> </p> <p> Interoperability between systems has two basic aspects: the syntax and semantics of the data that is moved between the systems, and the transport mechanism for that movement. The HTTP protocol and the Web architecture provides us with a great starting point for a standardized transport layer, and can be used to move content between systems easily and effectively. Building upon these foundations allows us to make use of existing technology and patterns to ensure consistency and ease of development. </p> <p> The Web Annotation Protocol describes a transport mechanism for creating, managing, and retrieving Annotations. Annotations in this specification are assumed to follow the requirements of the Web Annotation Data Model [ <cite> <a class="bibref" href="#bib-annotation-model"> annotation-model </a> </cite> ] and Web Annotation Vocabulary [ <cite> <a class="bibref" href="#bib-annotation-vocab"> annotation-vocab </a> </cite> ]. This specification builds upon REST principles and the Linked Data Platform [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ] recommendation, and familiarity with it is recommended. </p> <section id="aims-of-the-protocol" typeof="bibo:Chapter" resource="#aims-of-the-protocol" property="bibo:hasPart"> <h3 id="h-aims-of-the-protocol" resource="#h-aims-of-the-protocol"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 1.1 </span> Aims of the Protocol </span> </h3> <p> The primary aim of the Web Annotation Protocol is to provide a standard set of interactions that allow annotation clients and servers to interoperate seamlessly. By being able to discover annotation protocol end-points and how to interact with them, clients can be configured either automatically or by the user to store annotations in any compatible remote system, rather than being locked in to a single client and server pair. </p> </section> <section id="summary" typeof="bibo:Chapter" resource="#summary" property="bibo:hasPart"> <h3 id="h-summary" resource="#h-summary"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 1.2 </span> Summary </span> </h3> <p> For those familiar with the Web Annotation model, LDP, and REST, much of the Annotation Protocol will be very obvious. The following aspects are the most important new requirements. </p> <ul> <li> The media type to use for Annotations is: <code> application/ld+json;profile="http://www.w3.org/ns/anno.jsonld" </code> </li> <li> Annotation Containers are constrained by the set of constraints described in this specification, and thus the <code> ldp:constrainedBy </code> URL is <code> http://www.w3.org/TR/annotation-protocol/ </code> </li> <li> The link header can refer from any resource to an Annotation Container using a <code> rel </code> type of: <code> http://www.w3.org/ns/oa#annotationService </code> </li> <li> The response from a Container after creating an Annotation <em class="rfc2119" title="SHOULD"> SHOULD </em> include a representation of the Annotation, after any changes have been made to it, in the JSON-LD serialization. </li> <li> Annotation Containers <em class="rfc2119" title="SHOULD"> SHOULD </em> only contain Annotations, and not other resources. </li> <li> Activity Streams Collection [ <cite> <a class="bibref" href="#bib-activitystreams-core"> activitystreams-core </a> </cite> ] model is used for paging, as in-page ordering is an important requirement. </li> </ul> </section> <section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart"> <h3 id="h-conformance" resource="#h-conformance"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 1.3 </span> Conformance </span> </h3> <p> As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative. </p> <p id="respecRFC2119"> The key words <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> MAY </em> , <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> MUST </em> , <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;MUST NOT&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> MUST NOT </em> , <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;RECOMMENDED&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> RECOMMENDED </em> , <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> SHOULD </em> , and <span class="tagDelete">delete: <tt>&lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD NOT&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;em class=&quot;rfc2119&quot;&gt;</tt></span> <em class="rfc2119"> SHOULD NOT </em> are to be interpreted as described in [ <cite> <a class="bibref" href="#bib-RFC2119"> RFC2119 </a> </cite> ]. </p> </section> <section id="terminology" typeof="bibo:Chapter" resource="#terminology" property="bibo:hasPart"> <h3 id="h-terminology" resource="#h-terminology"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 1.4 </span> Terminology </span> </h3> <p> </p> <dl> <dt> <dfn data-dfn-type="dfn" id="dfn-iri"> IRI </dfn> </dt> <dd> An <a href="#dfn-iri" class="internalDFN" data-link-type="dfn"> IRI </a> , or Internationalized Resource Identifier, is an extension to the URI specification to allow characters from Unicode, whereas URIs must be made up of a subset of ASCII characters. There is a mapping algorithm for translating between IRIs and the equivalent encoded URI form. IRIs are defined by [ <cite> <a class="bibref" href="#bib-rfc3987"> rfc3987 </a> </cite> ]. </dd> <dt> <dfn data-dfn-type="dfn" id="dfn-resource"> Resource </dfn> </dt> <dd> An item of interest that <em class="rfc2119" title="MAY"> MAY </em> be identified by an <a href="#dfn-iri" class="internalDFN" data-link-type="dfn"> IRI </a> . </dd> <dt> Web Server </dt> <dd> A program that accepts connections in order to service HTTP requests by sending HTTP responses. </dd> <dt> Annotation </dt> <dd> A web resource that follows the Web Annotation Data Model [ <cite> <a class="bibref" href="#bib-annotation-model"> annotation-model </a> </cite> ]. </dd> <dt> Annotation Server </dt> <dd> A Web Server that also makes available and allows the management of Annotations via the protocol described in this document. </dd> <dt> Annotation Client </dt> <dd> A program that establishes connections to Annotation Servers for the purpose of retrieving and managing Annotations via the protocol described in this document. </dd> <dt> Annotation Container </dt> <dd> An LDP Container [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ] used to manage Annotations. </dd> </dl> <p> </p> </section> </section> <section id="web-annotation-protocol-principles" typeof="bibo:Chapter" resource="#web-annotation-protocol-principles" property="bibo:hasPart"> <h2 id="h-web-annotation-protocol-principles" resource="#h-web-annotation-protocol-principles"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 2. </span> Web Annotation Protocol Principles </span> </h2> <p> The Web Annotation Protocol is defined using the following basic principles: </p> <ul> <li> The protocol is developed within the framework laid out by the Web Architecture. </li> <li> Interactions will follow the REST best practice guidelines when there is a resource being acted upon. </li> <li> Interactions are designed to take place over HTTP. </li> <li> Existing specifications and systems will be re-used whenever possible, constrained further when necessary, with invention of new specifications only as a last resort. </li> <li> Simplicity and ease of implementation are important design criteria, but ultimately subjective and less important than the above principles. </li> </ul> <p> </p> </section> <section id="annotation-retrieval" typeof="bibo:Chapter" resource="#annotation-retrieval" property="bibo:hasPart"> <h2 id="h-annotation-retrieval" resource="#h-annotation-retrieval"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 3. </span> Annotation Retrieval </span> </h2> <p> The Annotation Server <em class="rfc2119" title="MUST"> MUST </em> support the following HTTP methods on the Annotation's IRI: </p> <ul> <li> <code> GET </code> (retrieve the description of the Annotation), </li> <li> <code> HEAD </code> (retrieve the headers of the Annotation without an entity-body), </li> <li> <code> OPTIONS </code> (enable CORS pre-flight requests [ <cite> <a class="bibref" href="#bib-cors"> cors </a> </cite> ]). </li> </ul> <p> Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> use HTTPS rather than HTTP for all interactions, including retrieval of Annotations. </p> <p> Servers <em class="rfc2119" title="MUST"> MUST </em> support the JSON-LD representation using the Web Annotation profile. These responses <em class="rfc2119" title="MUST"> MUST </em> have a <code> Content-Type </code> header with the <code> application/ld+json </code> media type, and it <em class="rfc2119" title="SHOULD"> SHOULD </em> have the Web Annotation profile IRI of <code> http://www.w3.org/ns/anno.jsonld </code> in the <code> profile </code> parameter. </p> <p> Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> support a Turtle representation, and <em class="rfc2119" title="MAY"> MAY </em> support other formats. If more than one representation of the Annotation is available, then the server <em class="rfc2119" title="SHOULD"> SHOULD </em> support content negotiation. Content negotiation for different serializations is performed by including the desired media type in the HTTP <code> Accept </code> header of the request, however clients cannot assume that the server will honor their preferences [ <cite> <a class="bibref" href="#bib-rfc7231"> rfc7231 </a> </cite> ]. </p> <p> Servers <em class="rfc2119" title="MAY"> MAY </em> support different JSON-LD profiles. Content negotiation for different JSON-LD profiles is performed by adding a <code> profile </code> parameter to the JSON-LD media type in a space separated, quoted list as part of the <code> Accept </code> header. </p> <p> Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> use the 200 HTTP status code when no errors occurred while processing the request to retrieve an Annotation, and <em class="rfc2119" title="MAY"> MAY </em> use 3XX HTTP status codes to redirect to a new location. </p> <p> The response from the Annotation Server <em class="rfc2119" title="MUST"> MUST </em> have a <code> Link </code> header entry where the target IRI is <code> http://www.w3.org/ns/ldp#Resource </code> and the <code> rel </code> parameter value is <code> type </code> . The Annotation type of <code> http://www.w3.org/ns/oa#Annotation </code> <em class="rfc2119" title="MAY"> MAY </em> also be added with the same <code> rel </code> type. This is to let client systems know that the retrieved representation is a Resource and an Annotation, even if the client cannot process the representation's format. </p> <p> For HEAD and GET requests, the response <em class="rfc2119" title="MUST"> MUST </em> have an <code> ETag </code> header with an entity reference value that implements the notion of entity tags from HTTP [ <cite> <a class="bibref" href="#bib-rfc7232"> rfc7232 </a> </cite> ]. This value will be used by the client when sending <a href="#update-an-existing-annotation"> update </a> or <a href="#delete-an-existing-annotation"> delete </a> requests. </p> <p> The response <em class="rfc2119" title="MUST"> MUST </em> have an <code> Allow </code> header that lists the HTTP methods available for interacting with the Annotation [ <cite> <a class="bibref" href="#bib-rfc7231"> rfc7231 </a> </cite> ]. </p> <p> For HEAD and GET requests, if the server supports content negotiation by format or JSON-LD profile, the response <em class="rfc2119" title="MUST"> MUST </em> have a <code> Vary </code> header with <code> Accept </code> in the value [ <cite> <a class="bibref" href="#bib-rfc7231"> rfc7231 </a> </cite> ]. This is to ensure that caches understand that the representation changes based on the value of that request header. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 1 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/anno1 </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 2 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type" <span class="hljs-attribute"> ETag </span> : "_87e52ce126126" <span class="hljs-attribute"> Allow </span> : PUT,GET,OPTIONS,HEAD,DELETE,PATCH <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Content-Length </span> : 287 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "created" </span> : <span class="hljs-string"> "2015-01-31T12:03:45Z" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> </div> </section> <section id="annotation-containers" typeof="bibo:Chapter" resource="#annotation-containers" property="bibo:hasPart"> <h2 id="h-annotation-containers" resource="#h-annotation-containers"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4. </span> Annotation Containers </span> </h2> <p> If the Annotation Server supports the management of Annotations, including one or more of creating, updating, and deleting them, then the following section's requirements apply. The Annotation Protocol is a use of the Linked Data Platform [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ] specification, with some additional constraints derived from the Web Annotation Data Model [ <cite> <a class="bibref" href="#bib-annotation-model"> annotation-model </a> </cite> ]. </p> <p> An Annotation Server <em class="rfc2119" title="MUST"> MUST </em> provide one or more Containers within which Annotations can be managed: an Annotation Container. An Annotation Container is at the same time both a Container [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ] (a service for managing Annotations) and an OrderedCollection [ <cite> <a class="bibref" href="#bib-activitystreams-core"> activitystreams-core </a> </cite> ] (an ordered list of Annotations). It can have descriptive and technical information associated with it to allow clients to present it to a user in order to allow her to decide if it should be used or not. The classes, properties and representations for the Collection model are described in the Web Annotation Data Model, and the mappings to Activity Streams provided in the Web Annotation Vocabulary [ <cite> <a class="bibref" href="#bib-annotation-vocab"> annotation-vocab </a> </cite> ]. </p> <p> </p> <p> Annotation Containers <em class="rfc2119" title="SHOULD"> SHOULD </em> implement the LDP Basic Container specification, but <em class="rfc2119" title="MAY"> MAY </em> instead implement another type of Container, such as a Direct or Indirect Container, to fulfill business needs. The URI of an Annotation Container <em class="rfc2119" title="MUST NOT"> MUST NOT </em> have a query or fragment component, and the path component <em class="rfc2119" title="MUST"> MUST </em> end in a <code> "/" </code> character. </p> <p> Implementations <em class="rfc2119" title="SHOULD"> SHOULD </em> use HTTPS rather than HTTP for all interactions with Annotation Containers. </p> <p> The creation, management, and structure of Annotation Containers are beyond the scope of this specification. Please see the Linked Data Platform specification [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ] for additional information. </p> <section id="container-retrieval" typeof="bibo:Chapter" resource="#container-retrieval" property="bibo:hasPart"> <h3 id="h-container-retrieval" resource="#h-container-retrieval"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.1 </span> Container Retrieval </span> </h3> <p> The Annotation Server <em class="rfc2119" title="MUST"> MUST </em> support the following HTTP methods on the Annotation Container's IRI: </p> <ul> <li> <code> GET </code> (retrieve the description of the Container and the list of its contents, described below), </li> <li> <code> HEAD </code> (retrieve the headers of the Container without an entity-body), </li> <li> <code> OPTIONS </code> (enable CORS pre-flight requests [ <cite> <a class="bibref" href="#bib-cors"> cors </a> </cite> ]). </li> </ul> <p> When an HTTP GET request is issued against the Annotation Container, the server <em class="rfc2119" title="MUST"> MUST </em> return a description of the container. That description <em class="rfc2119" title="MUST"> MUST </em> be available in JSON-LD, <em class="rfc2119" title="SHOULD"> SHOULD </em> be available in Turtle, and <em class="rfc2119" title="MAY"> MAY </em> be available in other formats. The JSON-LD serialization of the Container's description <em class="rfc2119" title="SHOULD"> SHOULD </em> use both the LDP context ( <code> http://www.w3c.org/ns/ldp.jsonld </code> ), and the Web Annotation's profile and context [ <cite> <a class="bibref" href="#bib-annotation-model"> annotation-model </a> </cite> ], unless the request would determine otherwise. </p> <p> Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> use the 200 HTTP status code if the request is successfully completed without errors and does not require redirection based on the client's preferences. </p> <p> All supported methods for interacting with the Annotation Container <em class="rfc2119" title="SHOULD"> SHOULD </em> be advertised in the <code> Allow </code> header of the <code> GET </code> , <code> HEAD </code> and <code> OPTIONS </code> responses from the container's IRI . The <code> Allow </code> header <em class="rfc2119" title="MAY"> MAY </em> also be included on any other responses. </p> <p> Annotation Containers <em class="rfc2119" title="MUST"> MUST </em> return a <code> Link </code> header [ <cite> <a class="bibref" href="#bib-rfc5988"> rfc5988 </a> </cite> ] on all responses with the following components: </p> <ul> <li> It <em class="rfc2119" title="MUST"> MUST </em> advertise its type by including a link where the <code> rel </code> parameter value is <code> type </code> and the target IRI is the appropriate Container Type, such as <code> http://www.w3.org/ns/ldp#BasicContainer </code> for Basic Containers. </li> <li> It <em class="rfc2119" title="MUST"> MUST </em> advertise that it imposes Annotation protocol specific constraints by including a link where the target IRI is <code> http://www.w3.org/TR/annotation-protocol/ </code> , and the <code> rel </code> parameter value is the IRI <code> http://www.w3.org/ns/ldp#constrainedBy </code> . </li> </ul> <p> </p> <p> For HEAD and GET requests, responses from Annotation Containers <em class="rfc2119" title="MUST"> MUST </em> include an <code> ETag </code> header that implements the notion of entity tags from HTTP [ <cite> <a class="bibref" href="#bib-rfc7232"> rfc7232 </a> </cite> ]. This value <em class="rfc2119" title="SHOULD"> SHOULD </em> be used by administrative clients when updating the container by including it in an <code> If-Match </code> request header in the same way as clients wanting to update an Annotation. </p> <p> If the <code> Accept </code> header is absent from a GET request, then Annotation Servers <em class="rfc2119" title="MUST"> MUST </em> respond with a JSON-LD representation of the Annotation Container, however clients with a preference for JSON-LD <em class="rfc2119" title="SHOULD"> SHOULD </em> explicitly request it using an <code> Accept </code> request header. </p> <p> If the server supports content negotiation by format or JSON-LD profile, the response to a HEAD or GET request from the Annotation Container <em class="rfc2119" title="MUST"> MUST </em> have a <code> Vary </code> header that includes <code> Accept </code> in the value to ensure that caches can determine that the representation will change based on the value of this header in requests. </p> <p> Responses from Annotation Containers that support the use of the POST method to create Annotations <em class="rfc2119" title="SHOULD"> SHOULD </em> include an <code> Accept-Post </code> header on responses to GET, HEAD and OPTIONS requests. The value is a comma separated list of media-types that are acceptable for the client to send via POST [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ]. </p> <div> <div class="example"> <div class="example-title marker"> <span> Example 3 </span> <span style="text-transform: none"> : Example Annotation Container Headers </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/TR/annotation-protocol/&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy" <span class="hljs-attribute"> ETag </span> : "0f6b5cd8dc1f754a1738a53b1da34f6b" <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Allow </span> : POST, GET, OPTIONS, HEAD <span class="hljs-attribute"> Accept-Post </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld", text/turtle </pre> </div> </div> </section> <section id="container-representations" typeof="bibo:Chapter" resource="#container-representations" property="bibo:hasPart"> <h3 id="h-container-representations" resource="#h-container-representations"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.2 </span> Container Representations </span> </h3> <p> As there are likely to be many Annotations in a single Container, the Annotation Protocol adopts the ActivityStreams collection <a href="https://www.w3.org/TR/activitystreams-core/#collections"> paging mechanism </a> for returning the contents of the Container. Each Collection Page contains an ordered list with a subset of the managed Annotations, such that if every page is traversed, a client can reconstruct the complete, ordered contents of the container/collection. The number of IRIs or Annotation descriptions included on each page is at the server's discretion, and may be inconsistent between pages. The feature or features by which the Annotations are sorted are not explicit in the response. </p> <p> The requirements for JSON-LD representation of Annotation Collections are defined in the Web Annotation Data Model, and are summarized here. </p> <p> The Collection <em class="rfc2119" title="MUST"> MUST </em> have an IRI that identifies it, and <em class="rfc2119" title="MUST"> MUST </em> have at least the <code> AnnotationCollection </code> <span class="delete">code&gt; </span> class (the name associated with OrderedCollection in the JSON-LD context) but <em class="rfc2119" title="MAY"> MAY </em> have other types as well, including the type of LDP Container used. It <em class="rfc2119" title="SHOULD"> SHOULD </em> have a human readable <code> label </code> , and <em class="rfc2119" title="MAY"> MAY </em> have other properties such as <code> creator </code> and <code> created </code> . </p> <p> If there are greater than zero Annotations in the Container, the representation <em class="rfc2119" title="MUST"> MUST </em> either include a link to the first page of Annotations as the value of the <code> first </code> property, or include the representation of the first page embedded within the response. If there is more than one page of Annotations, then the representation <em class="rfc2119" title="SHOULD"> SHOULD </em> have a link to the last page using the <code> last </code> property. </p> <p> The representation of the Container <em class="rfc2119" title="SHOULD"> SHOULD </em> include the <code> total </code> property with the total number of annotations in the Container. The Container <em class="rfc2119" title="SHOULD"> SHOULD </em> include the <code> modified </code> property with the most recent timestamp of when any of the annotations in the Container. This timestamp allows clients to detect when to re-cache data, even if there are the same number of annotations as the same number may have been added and deleted. </p> <p> The IRI of the Container provided in the response <em class="rfc2119" title="SHOULD"> SHOULD </em> differentiate between whether the pages contain just the IRIs, or the full descriptions of the Annotations. It is <em class="rfc2119" title="RECOMMENDED"> RECOMMENDED </em> that this be done with a query parameter. The server <em class="rfc2119" title="MAY"> MAY </em> redirect the client to this IRI and deliver the response there, otherwise it <em class="rfc2119" title="MUST"> MUST </em> include a <code> Content-Location </code> header with the IRI as its value. </p> <section id="container-representation-preferences" typeof="bibo:Chapter" resource="#container-representation-preferences" property="bibo:hasPart"> <h4 id="h-container-representation-preferences" resource="#h-container-representation-preferences"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.2.1 </span> Container Representation Preferences </span> </h4> <p> There are three preferences for Container requests that will govern the representation of the server's responses: </p> <ol> <li> If the client prefers to only receive the Container description and no Annotations (either URI or full descriptions) embedded in the Container response, then it <em class="rfc2119" title="MUST"> MUST </em> include a <code> Prefer </code> request header with the value <code> return=representation;include="http://www.w3.org/ns/ldp#PreferMinimalContainer" </code> . </li> <li> If the client prefers to receive the Annotations only as IRI references, either embedded in the current Container response or future paged responses, then it <em class="rfc2119" title="MUST"> MUST </em> include a <code> Prefer </code> request header with the value <code> return=representation;include="http://www.w3.org/ns/oa#PreferContainedIRIs" </code> . </li> <li> If the client prefers to receive complete Annotation descriptions, either in the current Container response or future paged responses, then it <em class="rfc2119" title="MUST"> MUST </em> include a <code> Prefer </code> request header with the value <code> return=representation;include="http://www.w3.org/ns/oa#PreferContainedDescriptions" </code> . </li> </ol> <p> The client <em class="rfc2119" title="MAY"> MAY </em> send multiple preferences as the value of the <code> include </code> parameter as defined by the Linked Data Platform [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ]. However, the client <em class="rfc2119" title="MUST NOT"> MUST NOT </em> include both the <code> PreferContainedIRIs </code> and <code> PreferContainedDescriptions </code> preferences on the same request, as the server cannot honor both at the same time. If the <code> PreferMinimalContainer </code> preference is given, then the server <em class="rfc2119" title="SHOULD NOT"> SHOULD NOT </em> embed the Annotations or references to them, but <em class="rfc2119" title="SHOULD"> SHOULD </em> include a reference to the first and last Annotation Pages. Whether the pages are of IRI references or complete descriptions is governed by the use of <code> PreferContainedIRIs </code> and <code> PreferContainedDescriptions </code> respectively. If no preference is given by the client, the server <em class="rfc2119" title="SHOULD"> SHOULD </em> default to the <code> PreferContainedDescriptions </code> behavior. The server <em class="rfc2119" title="MAY"> MAY </em> ignore the client's preferences. </p> </section> <section id="representations-without-annotations" typeof="bibo:Chapter" resource="#representations-without-annotations" property="bibo:hasPart"> <h4 id="h-representations-without-annotations" resource="#h-representations-without-annotations"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.2.2 </span> Representations without Annotations </span> </h4> <p> If the client requests the minimal representation of an Annotation Container, the response <em class="rfc2119" title="MUST NOT"> MUST NOT </em> include either the <code> ldp:contains </code> predicate nor embed the first page of Annotations within the response. </p> <p> The linked pages <em class="rfc2119" title="SHOULD"> SHOULD </em> follow any <code> PreferContainedDescriptions </code> or <code> PreferContainedIRIs </code> preferences. </p> <p> The server <em class="rfc2119" title="MAY"> MAY </em> return a representation without embedded Annotations, even if the <code> PreferMinimalContainer </code> preference is not supplied. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 4 </span> <span style="text-transform: none"> : Container Request without Annotations </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/ </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Prefer </span> : return=representation;include="http://www.w3.org/ns/ldp#PreferMinimalContainer http://www.w3.org/ns/oa#PreferContainedIRIs" </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 5 </span> <span style="text-transform: none"> : Container Response without Annotations </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> ETag </span> : "_87e52ce123123" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/TR/annotation-protocol/&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy" <span class="hljs-attribute"> Allow </span> : POST,GET,OPTIONS,HEAD <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Content-Length </span> : 368 <span class="json"> { <span class="hljs-attr"> "@context" </span> : [ <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-string"> "http://www.w3.org/ns/ldp.jsonld" </span> ], <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1" </span> , <span class="hljs-attr"> "type" </span> : [ <span class="hljs-string"> "BasicContainer" </span> , <span class="hljs-string"> "AnnotationCollection" </span> ], <span class="hljs-attr"> "total" </span> : <span class="hljs-number"> 42023 </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2016-07-20T12:00:00Z" </span> , <span class="hljs-attr"> "label" </span> : <span class="hljs-string"> "A Container for Web Annotations" </span> , <span class="hljs-attr"> "first" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=0" </span> , <span class="hljs-attr"> "last" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=42" </span> } </span> </pre> </div> </div> </section> <section id="representations-with-annotation-iris" typeof="bibo:Chapter" resource="#representations-with-annotation-iris" property="bibo:hasPart"> <h4 id="h-representations-with-annotation-iris" resource="#h-representations-with-annotation-iris"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.2.3 </span> Representations with Annotation IRIs </span> </h4> <p> If the Server supports Container preferences, it <em class="rfc2119" title="MUST"> MUST </em> respond to <code> PreferContainedIRIs </code> with a response containing an <code> AnnotationPage </code> as the value of <code> first </code> with its <code> items </code> containing only the IRIs of the contained Annotations. </p> <p> The linked pages <em class="rfc2119" title="SHOULD"> SHOULD </em> follow the <code> PreferContainedIRIs </code> preference. </p> <p> The <code> PreferContainedIRIs </code> and the <code> PreferContainedDescriptions </code> preferences are mutually exclusive. </p> <div> Request for embedded IRIs: <div class="example"> <div class="example-title marker"> <span> Example 6 </span> <span style="text-transform: none"> : Container Request (Embedded IRIs) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/ </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Prefer </span> : return=representation;include="http://www.w3.org/ns/oa#PreferContainedIRIs" </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 7 </span> <span style="text-transform: none"> : Container Response (Embedded IRIs) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Location </span> : http://example.org/annotations/?iris=1 <span class="hljs-attribute"> ETag </span> : "_87e52ce123123" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/TR/annotation-protocol/&gt;; rel="http://www.w3.org/ns/ldp#constrainedBy" <span class="hljs-attribute"> Allow </span> : POST,GET,OPTIONS,HEAD <span class="hljs-attribute"> Vary </span> : Accept, Prefer <span class="hljs-attribute"> Content-Length </span> : 397 <span class="json"> { <span class="hljs-attr"> "@context" </span> : [ <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-string"> "http://www.w3.org/ns/ldp.jsonld" </span> ], <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1" </span> , <span class="hljs-attr"> "type" </span> : [ <span class="hljs-string"> "BasicContainer" </span> , <span class="hljs-string"> "AnnotationCollection" </span> ], <span class="hljs-attr"> "total" </span> : <span class="hljs-number"> 42023 </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2016-07-20T12:00:00Z" </span> , <span class="hljs-attr"> "label" </span> : <span class="hljs-string"> "A Container for Web Annotations" </span> , <span class="hljs-attr"> "first" </span> : { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=0" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "AnnotationPage" </span> , <span class="hljs-attr"> "next" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=1" </span> , <span class="hljs-attr"> "items" </span> : [ <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-string"> "http://example.org/annotations/anno2" </span> , <span class="hljs-string"> "http://example.org/annotations/anno3" </span> , <span class="hljs-string"> "http://example.org/annotations/anno4" </span> , <span class="hljs-string"> "http://example.org/annotations/anno5" </span> , <span class="hljs-string"> "http://example.org/annotations/anno6" </span> , ... <span class="hljs-string"> "http://example.org/annotations/anno999" </span> , ] }, <span class="hljs-attr"> "last" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=42" </span> } </span> </pre> </div> </div> </section> <section id="representations-with-annotation-descriptions" typeof="bibo:Chapter" resource="#representations-with-annotation-descriptions" property="bibo:hasPart"> <h4 id="h-representations-with-annotation-descriptions" resource="#h-representations-with-annotation-descriptions"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.2.4 </span> Representations with Annotation Descriptions </span> </h4> <p> If the Server supports Container preferences, it <em class="rfc2119" title="MUST"> MUST </em> respond to <code> PreferContainedDescriptions </code> with a response containing an <code> AnnotationPage </code> as the value of <code> first </code> with its <code> items </code> containing complete, inline Annotations. </p> <p> The linked pages <em class="rfc2119" title="SHOULD"> SHOULD </em> follow the <code> PreferContainedDescriptions </code> preference. </p> <p> The <code> PreferContainedIRIs </code> and the <code> PreferContainedDescriptions </code> preferences are mutually exclusive. </p> Request for embedded descriptions: <div class="example"> <div class="example-title marker"> <span> Example 8 </span> <span style="text-transform: none"> : Container Request (Embedded Descriptions) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/ </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Prefer </span> : return=representation;include="http://www.w3.org/ns/oa#PreferContainedDescriptions" </pre> </div> <div class="example"> <div class="example-title marker"> <span> Example 9 </span> <span style="text-transform: none"> : Container Response (Embedded Descriptions) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Allow </span> : GET,OPTIONS,HEAD <span class="hljs-attribute"> Vary </span> : Accept, Prefer <span class="hljs-attribute"> Content-Length </span> : 924 <span class="json"> { <span class="hljs-attr"> "@context" </span> : [ <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-string"> "http://www.w3.org/ns/ldp.jsonld" </span> ], <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0" </span> , <span class="hljs-attr"> "type" </span> : [ <span class="hljs-string"> "BasicContainer" </span> , <span class="hljs-string"> "AnnotationCollection" </span> ], <span class="hljs-attr"> "total" </span> : <span class="hljs-number"> 42023 </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2016-07-20T12:00:00Z" </span> , <span class="hljs-attr"> "label" </span> : <span class="hljs-string"> "A Container for Web Annotations" </span> , <span class="hljs-attr"> "first" </span> : { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0&amp;page=0" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "AnnotationPage" </span> , <span class="hljs-attr"> "next" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0&amp;page=1" </span> , <span class="hljs-attr"> "items" </span> : [ { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : <span class="hljs-string"> "http://example.net/body1" </span> , <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/page1" </span> }, { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno2" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/book1" </span> <span class="delete">} // </span> <span class="insert">}, </span> ... { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno50" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : <span class="hljs-string"> "http://example.org/texts/description1" </span> , <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/images/image1" </span> } ] }, <span class="hljs-attr"> "last" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0&amp;page=840" </span> } </span> </pre> </div> </section> </section> <section id="annotation-pages" typeof="bibo:Chapter" resource="#annotation-pages" property="bibo:hasPart"> <h3 id="h-annotation-pages" resource="#h-annotation-pages"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.3 </span> Annotation Pages </span> </h3> <p> Individual pages are instances of the Activity Streams <code> OrderedCollectionPage </code> class, which is refered to as <code> AnnotationPage </code> in the Web Annotation JSON-LD context. The page contains the Annotations, either via their IRIs or full descriptions, in the <code> items </code> property. </p> <p> The requirements for JSON-LD representation of Annotation Collections Pages are defined in the Web Annotation Data Model, and are summarized here. </p> <p> The Annotation Page <em class="rfc2119" title="MUST"> MUST </em> have an IRI that identifies it, and <em class="rfc2119" title="MUST"> MUST </em> have at least the <code> AnnotationPage </code> class but <em class="rfc2119" title="MAY"> MAY </em> have other types as well. If the Page is not the last Page in the Collection, then it <em class="rfc2119" title="MUST"> MUST </em> have a reference to the Page which follows it using the <code> next </code> property. If the Page is not the first Page in the Collection, it <em class="rfc2119" title="SHOULD"> SHOULD </em> have a reference ot the previous Page using the <code> prev </code> property. Pages <em class="rfc2119" title="SHOULD"> SHOULD </em> give the position of the first Annotation in the <code> items </code> list relative to the order of the Collection using the zero-based <code> startIndex </code> property. </p> <p> Each page <em class="rfc2119" title="MUST"> MUST </em> have a link to the Collection that it is part of, using the <code> partOf </code> property. The description of the Collection <em class="rfc2119" title="SHOULD"> SHOULD </em> include both the <code> total </code> and <code> modified </code> properties. The response <em class="rfc2119" title="MAY"> MAY </em> include other properties of the Collection in the response, such as the <code> label </code> or <code> first </code> and <code> last </code> links. </p> <p> The client <em class="rfc2119" title="SHOULD NOT"> SHOULD NOT </em> send the <code> Prefer </code> header when requesting the Page, as it has already been taken into account when requesting the Collection. </p> <p> This specification does not require any particular functionality when a client makes requests other than GET, HEAD or OPTIONS to a page. </p> <p> As the Page is not an LDP Container, it does not have the requirement to include a <code> Link </code> header with a type. That the URLs could be constructed with query parameters added to the Container's IRI is an implementation convenience, and does not imply the type of the resource. </p> <p> <b> Embedded IRIs Interaction Example </b> </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 10 </span> <span style="text-transform: none"> : Page Request </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/?iris=1&amp;page=0 </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 11 </span> <span style="text-transform: none"> : Page Response (Embedded IRIs) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Allow </span> : GET,OPTIONS,HEAD <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Content-Length </span> : 630 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=0" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "AnnotationPage" </span> , <span class="hljs-attr"> "partOf" </span> : { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1" </span> , <span class="hljs-attr"> "total" </span> : <span class="hljs-number"> 42023 </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2016-07-20T12:00:00Z" </span> , }, <span class="hljs-attr"> "startIndex" </span> : <span class="hljs-number"> 0 </span> , <span class="hljs-attr"> "next" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=1&amp;page=1" </span> , <span class="hljs-attr"> "items" </span> : [ <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-string"> "http://example.org/annotations/anno2" </span> , <span class="hljs-string"> "http://example.org/annotations/anno3" </span> , <span class="hljs-string"> "http://example.org/annotations/anno4" </span> , <span class="hljs-string"> "http://example.org/annotations/anno5" </span> , <span class="hljs-string"> "http://example.org/annotations/anno6" </span> , ... <span class="hljs-string"> "http://example.org/annotations/anno999" </span> , ] } </span> </pre> </div> </div> <p> <b> Embedded Descriptions Interaction Example </b> </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 12 </span> <span style="text-transform: none"> : Page Request (Embedded Descriptions) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /annotations/?iris=0&amp;page=0 </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" </pre> </div> <div class="example"> <div class="example-title marker"> <span> Example 13 </span> <span style="text-transform: none"> : Page Response (Embedded Descriptions) </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Allow </span> : GET,OPTIONS,HEAD <span class="hljs-attribute"> Vary </span> : Accept, Prefer <span class="hljs-attribute"> Content-Length </span> : 924 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0&amp;page=0" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "AnnotationPage" </span> , <span class="hljs-attr"> "partOf" </span> : { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0" </span> , <span class="hljs-attr"> "total" </span> : <span class="hljs-number"> 42023 </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2016-07-20T12:00:00Z" </span> , }, <span class="hljs-attr"> "startIndex" </span> : <span class="hljs-number"> 0 </span> , <span class="hljs-attr"> "next" </span> : <span class="hljs-string"> "http://example.org/annotations/?iris=0&amp;page=1" </span> , <span class="hljs-attr"> "items" </span> : [ { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : <span class="hljs-string"> "http://example.net/body1" </span> , <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/page1" </span> }, { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno2" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/book1" </span> <span class="delete">} // </span> <span class="insert">}, </span> ... { <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno50" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : <span class="hljs-string"> "http://example.org/texts/description1" </span> , <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://example.com/images/image1" </span> } ] } </span> </pre> </div> </div> </section> <section id="discovery-of-annotation-containers" typeof="bibo:Chapter" resource="#discovery-of-annotation-containers" property="bibo:hasPart"> <h3 id="h-discovery-of-annotation-containers" resource="#h-discovery-of-annotation-containers"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 4.4 </span> Discovery of Annotation Containers </span> </h3> <p> As the IRI for Annotation Containers <em class="rfc2119" title="MAY"> MAY </em> be any IRI, and it is unlikely that every Web Server will support the functionality, it is important to be able to discover the availability of these services. </p> <p> Any resource <em class="rfc2119" title="MAY"> MAY </em> link to an Annotation Container when Annotations on the resource <em class="rfc2119" title="SHOULD"> SHOULD </em> be created within the referenced Container. This link is carried in an HTTP <code> Link </code> header and the value of the <code> rel </code> parameter <em class="rfc2119" title="MUST"> MUST </em> be <code> http://www.w3.org/ns/oa#annotationService </code> . </p> <p> For HTML representations of resources, the equivalent <code> link </code> tag in the header of the document <em class="rfc2119" title="MAY"> MAY </em> also be used. </p> <div> <p> For an example image resource, a GET request and response with a link to the above Annotation Container might look like: </p> Request: <div class="example"> <div class="example-title marker"> <span> Example 14 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> GET </span> <span class="hljs-string"> /images/logo.jpg </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.com </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 15 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : image/jpeg <span class="hljs-attribute"> Link </span> : &lt;http://example.org/annotations/&gt;; rel="http://www.w3.org/ns/oa#annotationService" <span class="hljs-attribute"> Allow </span> : GET <span class="hljs-attribute"> Content-Length </span> : 76983 <span class="json"> [...] </span> </pre> </div> </div> </section> </section> <section id="creation-updating-and-deletion-of-annotations" typeof="bibo:Chapter" resource="#creation-updating-and-deletion-of-annotations" property="bibo:hasPart"> <h2 id="h-creation-updating-and-deletion-of-annotations" resource="#h-creation-updating-and-deletion-of-annotations"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 5. </span> Creation, Updating and Deletion of Annotations </span> </h2> <section id="create-a-new-annotation" typeof="bibo:Chapter" resource="#create-a-new-annotation" property="bibo:hasPart"> <h3 id="h-create-a-new-annotation" resource="#h-create-a-new-annotation"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 5.1 </span> Create a New Annotation </span> </h3> <p> New Annotations are created via a POST request to an Annotation Container. The Annotation, serialized as JSON-LD, is sent in the body of the request. All of the known information about the Annotation <em class="rfc2119" title="SHOULD"> SHOULD </em> be sent, and if there are already IRIs associated with the resources, they <em class="rfc2119" title="SHOULD"> SHOULD </em> be included. The serialization <em class="rfc2119" title="SHOULD"> SHOULD </em> use the Web Annotation JSON-LD profile, and servers <em class="rfc2119" title="MAY"> MAY </em> reject other contexts even if they would otherwise produce the same model. The server <em class="rfc2119" title="MAY"> MAY </em> reject content that is not considered an Annotation according to the Web Annotation specification [ <cite> <a class="bibref" href="#bib-annotation-model"> annotation-model </a> </cite> ]. </p> <p> Upon receipt of an Annotation, the server <em class="rfc2119" title="MAY"> MAY </em> assign IRIs to any resource or blank node in the Annotation, and <em class="rfc2119" title="MUST"> MUST </em> assign an IRI to the Annotation resource in the <code> id </code> property, even if it already has one provided. The server <em class="rfc2119" title="SHOULD"> SHOULD </em> use HTTPS IRIs when those resources are able to be retrieved individually. The IRI for the Annotation <em class="rfc2119" title="MUST"> MUST </em> be the IRI of the Container with an additional component added to the end. </p> <p> The server <em class="rfc2119" title="MAY"> MAY </em> add information to the Annotation. Possible additional information includes the agent that created it, the time of the Annotation's creation, or additional types and formats of the constituent resources. </p> <p> If the Annotation contains a <code> canonical </code> property, then that reference <em class="rfc2119" title="MUST"> MUST </em> be maintained without change. If the Annotation has an IRI in the <code> id </code> property, then it <em class="rfc2119" title="SHOULD"> SHOULD </em> be copied to the <code> via </code> property, and the IRI assigned by the server at which the Annotation will be available <em class="rfc2119" title="MUST"> MUST </em> be put in the <code> id </code> field to replace it. </p> <p> The server <em class="rfc2119" title="MUST"> MUST </em> respond with a <code> 201 </code> Created response if the creation is successful, and an appropriate error code otherwise. The response <em class="rfc2119" title="MUST"> MUST </em> have a <code> Location </code> header with the Annotation's new IRI. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 16 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> POST </span> <span class="hljs-string"> /annotations/ </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Length </span> : 202 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 17 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 201 </span> CREATED <span class="hljs-attribute"> Allow </span> : PUT,GET,OPTIONS,HEAD,DELETE,PATCH <span class="hljs-attribute"> Location </span> : http://example.org/annotations/anno1 <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Length </span> : 287 <span class="hljs-attribute"> ETag </span> : "_87e52ce126126" <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "created" </span> : <span class="hljs-string"> "2015-01-31T12:03:45Z" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> </div> </section> <section id="suggesting-an-iri-for-an-annotation" typeof="bibo:Chapter" resource="#suggesting-an-iri-for-an-annotation" property="bibo:hasPart"> <h3 id="h-suggesting-an-iri-for-an-annotation" resource="#h-suggesting-an-iri-for-an-annotation"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 5.2 </span> Suggesting an IRI for an Annotation </span> </h3> <p> The IRI path segment that is appended to the Container IRI for a resource <em class="rfc2119" title="MAY"> MAY </em> be suggested by the Annotation Client by using the <code> Slug </code> HTTP header on the request when the resource is created. The server <em class="rfc2119" title="SHOULD"> SHOULD </em> use this name, so long as it does not already identify an existing resource, but <em class="rfc2119" title="MAY"> MAY </em> ignore it and use an automatically assigned name. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 18 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> POST </span> <span class="hljs-string"> /annotations/ </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Length </span> : 202 <span class="hljs-attribute"> Slug </span> : "my_first_annotation" <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 19 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 201 </span> CREATED <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#BasicContainer&gt;; rel="type" <span class="hljs-attribute"> Allow </span> : PUT,GET,OPTIONS,HEAD,DELETE,PATCH <span class="hljs-attribute"> Location </span> : http://example.org/annotations/my_first_annotation <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> ETag </span> : "_87e52ce126126" <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Content-Length </span> : 301 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/my_first_annotation" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "created" </span> : <span class="hljs-string"> "2015-01-31T12:03:45Z" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> </div> </section> <section id="update-an-existing-annotation" typeof="bibo:Chapter" resource="#update-an-existing-annotation" property="bibo:hasPart"> <h3 id="h-update-an-existing-annotation" resource="#h-update-an-existing-annotation"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 5.3 </span> Update an Existing Annotation </span> </h3> <p> Annotations can be updated by using a PUT request to replace the entire state of the Annotation. Annotation Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> support this method. Servers <em class="rfc2119" title="MAY"> MAY </em> also support using a PATCH request to update only the aspects of the Annotation that have changed, but that functionality is not specified in this document. </p> <p> Replacing the Annotation with a new state <em class="rfc2119" title="MUST"> MUST </em> be done with the PUT method, where the body of the request is the intended new state of the Annotation. The client <em class="rfc2119" title="SHOULD"> SHOULD </em> use the <code> If-Match </code> header with a value of the ETag it received from the server before the editing process began, to avoid collisions of multiple users modifying the same Annotation at the same time. This feature is not mandatory to support, as not every system will have multiple users with the potential to change a single Annotation, or use cases might dictate <span class="delete">situatins </span> <span class="insert">situations </span> in which overwriting is the desired behavior. </p> <p> Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> reject update requests that modify the values of the <code> canonical </code> or <code> via </code> properties, if they have been already set, unless business logic allows the request to be trusted as authoritatively correctly a previous error. </p> <p> If successful, the server <em class="rfc2119" title="MUST"> MUST </em> return a 200 OK status with the Annotation as the body according to the content-type requested. As with creation, the server <em class="rfc2119" title="MUST"> MUST </em> return the new state of the Annotation in the response. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 20 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> PUT </span> <span class="hljs-string"> /annotations/anno1 </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> Accept </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> Content-Length </span> : 294 <span class="hljs-attribute"> If-Match </span> : "_87e52ce126126" <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "created" </span> : <span class="hljs-string"> "2015-02-01T10:13:40Z" </span> , <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I REALLY like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 21 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 200 </span> OK <span class="hljs-attribute"> Content-Type </span> : application/ld+json; profile="http://www.w3.org/ns/anno.jsonld" <span class="hljs-attribute"> ETag </span> : "_87e52ce234234" <span class="hljs-attribute"> Link </span> : &lt;http://www.w3.org/ns/ldp#Resource&gt;; rel="type" <span class="hljs-attribute"> Allow </span> : PUT,GET,OPTIONS,HEAD,DELETE,PATCH <span class="hljs-attribute"> Vary </span> : Accept <span class="hljs-attribute"> Content-Length </span> : 331 <span class="json"> { <span class="hljs-attr"> "@context" </span> : <span class="hljs-string"> "http://www.w3.org/ns/anno.jsonld" </span> , <span class="hljs-attr"> "id" </span> : <span class="hljs-string"> "http://example.org/annotations/anno1" </span> , <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "Annotation" </span> , <span class="hljs-attr"> "created" </span> : <span class="hljs-string"> "2015-02-01T10:13:40Z" </span> , <span class="hljs-attr"> "modified" </span> : <span class="hljs-string"> "2015-02-02T20:43:19Z" </span> <span class="tagDelete">delete: <tt>&lt;span class=&quot;hljs-string&quot;&gt;</tt></span> <span class="insert">, </span> <span class="tagInsert">insert: <tt>&lt;span class=&quot;hljs-attr&quot;&gt;</tt></span> <span class="hljs-attr"> "body" </span> : { <span class="hljs-attr"> "type" </span> : <span class="hljs-string"> "TextualBody" </span> , <span class="hljs-attr"> "value" </span> : <span class="hljs-string"> "I REALLY like this page!" </span> }, <span class="hljs-attr"> "target" </span> : <span class="hljs-string"> "http://www.example.com/index.html" </span> } </span> </pre> </div> </div> </section> <section id="delete-an-existing-annotation" typeof="bibo:Chapter" resource="#delete-an-existing-annotation" property="bibo:hasPart"> <h3 id="h-delete-an-existing-annotation" resource="#h-delete-an-existing-annotation"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 5.4 </span> Delete an Existing Annotation </span> </h3> <p> Clients <em class="rfc2119" title="MUST"> MUST </em> use the DELETE HTTP method to request that an Annotation be deleted by the server. Annotation Servers <em class="rfc2119" title="SHOULD"> SHOULD </em> support this method. Clients <em class="rfc2119" title="SHOULD"> SHOULD </em> send the ETag of the Annotation in the <code> If-Match </code> header to ensure that it is operating against the most recent version of the Annotation. </p> <p> If the DELETE request is successfully processed, then the server <em class="rfc2119" title="MUST"> MUST </em> return a 204 status response. The IRIs of deleted Annotations <em class="rfc2119" title="SHOULD NOT"> SHOULD NOT </em> be re-used for subsequent Annotations. The IRI of the deleted Annotation <em class="rfc2119" title="MUST"> MUST </em> be removed from the Annotation Container it was created in. There are no requirements made on the body of the response, and it <em class="rfc2119" title="MAY"> MAY </em> be empty. </p> <div> Request: <div class="example"> <div class="example-title marker"> <span> Example 22 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> <span class="hljs-keyword"> DELETE </span> <span class="hljs-string"> /annotations/anno1 </span> HTTP/1.1 <span class="hljs-attribute"> Host </span> : example.org <span class="hljs-attribute"> If-Match </span> : "_87e52ce126126" </pre> </div> Response: <div class="example"> <div class="example-title marker"> <span> Example 23 </span> </div> <span class="tagDelete">delete: <tt>&lt;pre class=&quot;highlight hljs http&quot;&gt;</tt></span> <span class="tagInsert">insert: <tt>&lt;pre class=&quot;highlight hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;</tt></span> <pre class="highlight hljs http" aria-busy="false" aria-live="polite"> HTTP/1.1 <span class="hljs-number"> 204 </span> NO CONTENT <span class="hljs-attribute"> Content-Length </span> : 0 </pre> </div> </div> </section> </section> <section class="informative" id="error-conditions" typeof="bibo:Chapter" resource="#error-conditions" property="bibo:hasPart"> <h2 id="h-error-conditions" resource="#h-error-conditions"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 6. </span> Error Conditions </span> </h2> <p> <em> This section is non-normative. </em> </p> <p> There are inevitably situations where errors occur when retrieving or managing Annotations. The use of the HTTP status codes below provides a method for clients to understand the reason why a request has failed. Some of the situations that might occur, and the preferred HTTP status code are given below. This list is intended to be informative and explanatory, rather than imposing additional requirements beyond those already established by HTTP. </p> <table class="model"> <tbody> <tr> <th> Code </th> <th> Example Situation </th> </tr> <tr> <td> 400 </td> <td> The Annotation Client sent a request which the Annotation Server cannot process due to the request not following the appropriate specifications. </td> </tr> <tr> <td> 401 </td> <td> The Annotation Client is not authorized to perform the requested operation, such as creating or deleting an Annotation, as it did not supply authentication credentials. </td> </tr> <tr> <td> 403 </td> <td> The Annotation Client is not authorized to perform the requested operation, as the authentication credentials supplied did not meet the requirements of a particular access control policy for the Annotation or Annotation Container. </td> </tr> <tr> <td> 404 </td> <td> The Annotation or Annotation Container requested does not exist. </td> </tr> <tr> <td> 405 </td> <td> The requested HTTP method is not allowed for the resource, such as trying to POST to an Annotation Container page, or trying to PATCH an Annotation when that functionality is not supported. </td> </tr> <tr> <td> 406 </td> <td> The requested format for the Annotation or Annotation Container's representation is not available, for example if a client requested RDF/XML and the server does not support that (optional) transformation. </td> </tr> <tr> <td> 409 </td> <td> The Annotation Client tried to set or change a value that the server does not allow Clients to modify, such as the containment list of an Annotation Container or server set modification timestamps. </td> </tr> <tr> <td> 410 </td> <td> The Annotation is known to have existed in the past and was deleted. </td> </tr> <tr> <td> 412 </td> <td> The Annotation Client supplied an If-Match header that did not match the ETag of the Annotation being modified. </td> </tr> <tr> <td> 415 </td> <td> The Annotation Client sent an entity-body that is not able to be processed by the Server, such as non-Annotation or in a context that is unrecognized. </td> </tr> </tbody> </table> </section> <section id="containers-for-related-resources" typeof="bibo:Chapter" resource="#containers-for-related-resources" property="bibo:hasPart"> <h2 id="h-containers-for-related-resources" resource="#h-containers-for-related-resources"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> 7. </span> Containers for Related Resources </span> </h2> <p> Annotations may have related resources that are required for their correct interpretation and rendering, such as content resources used in or as the Body, CSS stylesheets that determine the rendering of the annotation, SVG documents describing a non-rectangular region of a resource, and so forth. If these resources do not already have IRIs, then they need to be made available somewhere so that they can be referred to. </p> <p> Annotation Servers <em class="rfc2119" title="MAY"> MAY </em> support the management of related resources independently from the Annotations. If a server supports the management of these resources, it <em class="rfc2119" title="SHOULD"> SHOULD </em> do this with one or more separate Containers. Resources that are not Annotations <em class="rfc2119" title="SHOULD NOT"> SHOULD NOT </em> be included in an Annotation Container, as Annotation Clients would not expect to find arbitrary content when dereferencing the IRIs. Containers for related resources <em class="rfc2119" title="MAY"> MAY </em> contain both RDF Sources and Non-RDF Sources. No restrictions are placed on the type or configuration of the Container beyond those of the Linked Data Platform [ <cite> <a class="bibref" href="#bib-ldp"> ldp </a> </cite> ]. </p> <p> Containers for related resources <em class="rfc2119" title="MUST"> MUST </em> support the same HTTP methods as described above for the Annotation Container, and <em class="rfc2119" title="MUST"> MUST </em> support identifying their type with a <code> Link </code> header. The <code> constrainedBy </code> link header on the response when dereferencing the Container <em class="rfc2119" title="SHOULD"> SHOULD </em> refer to a server specific set of constraints listing the types of content that are acceptable. </p> </section> <section class="appendix informative" id="candidate-recommendation-exit-criteria" typeof="bibo:Chapter" resource="#candidate-recommendation-exit-criteria" property="bibo:hasPart"> <h2 id="h-candidate-recommendation-exit-criteria" resource="#h-candidate-recommendation-exit-criteria"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> A. </span> Candidate Recommendation Exit Criteria </span> </h2> <p> <em> This section is non-normative. </em> </p> <p> For this specification to be advanced to Proposed Recommendation, there must be at least two independent implementations of each feature described below. Each feature may be implemented by a different set of products, and there is no requirement that any single product implement every feature. </p> <b> Features </b> <p> For the purposes of evaluating exit criteria, the following operations are considered as features: </p> <ul> <li> HTTP GET of an Annotation </li> <li> HTTP GET of an Annotation Collection </li> <li> HTTP GET of an Annotation Collection Page, with embedded Annotations </li> <li> HTTP GET of an Annotation Collection Page, without embedded Annotations </li> <li> POST of an Annotation to an Annotation Collection </li> <li> POST of an Annotation to an Annotation Collection, with a Slug to suggest the IRI </li> <li> PUT of an Annotation to update an existing Annotation in an Annotation Collection </li> <li> DELETE of an Annotation </li> </ul> <p> Each feature must be implemented according to the requirements given in the specification, regarding the HTTP headers, status codes, and entity body. Software that does not alter its behavior in the presence or lack of a given feature is not deemed to implement that feature for the purposes of exiting the Candidate recommendation phase. </p> </section> <section class="appendix informative changelog" id="changes-from-previous-versions" typeof="bibo:Chapter" resource="#changes-from-previous-versions" property="bibo:hasPart"> <h2 id="h-changes-from-previous-versions" resource="#h-changes-from-previous-versions"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> B. </span> Changes from Previous Versions </span> </h2> <p> <em> This section is non-normative. </em> </p> <span class="tagInsert">insert: <tt>&lt;section id=&quot;changes-from-the-proposed-recommendation-of-2017-01-17&quot; typeof=&quot;bibo:Chapter&quot; resource=&quot;#changes-from-the-proposed-recommendation-of-2017-01-17&quot; property=&quot;bibo:hasPart&quot;&gt;</tt></span> <section id="changes-from-the-proposed-recommendation-of-2017-01-17" typeof="bibo:Chapter" resource="#changes-from-the-proposed-recommendation-of-2017-01-17" property="bibo:hasPart"> <span class="tagInsert">insert: <tt>&lt;h3 id=&quot;h-changes-from-the-proposed-recommendation-of-2017-01-17&quot; resource=&quot;#h-changes-from-the-proposed-recommendation-of-2017-01-17&quot;&gt;</tt></span> <h3 id="h-changes-from-the-proposed-recommendation-of-2017-01-17" resource="#h-changes-from-the-proposed-recommendation-of-2017-01-17"> <span class="tagInsert">insert: <tt>&lt;span property=&quot;xhv:role&quot; resource=&quot;xhv:heading&quot;&gt;</tt></span> <span property="xhv:role" resource="xhv:heading"> <span class="tagInsert">insert: <tt>&lt;span class=&quot;secno&quot;&gt;</tt></span> <span class="secno"> <span class="insert">B.1 </span> <span class="tagInsert">insert: <tt>&lt;/span&gt;</tt></span> </span> <span class="insert">Changes from the Proposed Recommendation of 2017-01-17 </span> <span class="tagInsert">insert: <tt>&lt;/span&gt;</tt></span> </span> <span class="tagInsert">insert: <tt>&lt;/h3&gt;</tt></span> </h3> <span class="tagInsert">insert: <tt>&lt;p&gt;</tt></span> <p> <span class="insert">No significant changes. </span> <span class="tagInsert">insert: <tt>&lt;/p&gt;</tt></span> </p> <span class="tagInsert">insert: <tt>&lt;/section&gt;</tt></span> </section> <section id="changes-from-the-candidate-recommendation-of-2016-09-06" typeof="bibo:Chapter" resource="#changes-from-the-candidate-recommendation-of-2016-09-06" property="bibo:hasPart"> <h3 id="h-changes-from-the-candidate-recommendation-of-2016-09-06" resource="#h-changes-from-the-candidate-recommendation-of-2016-09-06"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> <span class="delete">B.1 </span> <span class="insert">B.2 </span> </span> Changes from the Candidate Recommendation of 2016-09-06 </span> </h3> <p> Editorial changes in this specification from the <a href="http://www.w3.org/TR/2016/CR-annotation-protocol-20160906/"> Candidate Recommendation of 2016-09-06 </a> are: </p> <ul> <li> Clarified which header requirements are appropriate for HEAD/GET, rather than OPTIONS. </li> <li> Clarified interaction of multiple preferences in a single request. </li> <li> Removed incorrect Prefer from the Vary header from the pages example. </li> <li> Summarized requirements from the Web Annotation Data Model for Collections and Pages </li> <li> Clarified text regarding URI requirements for Containers. </li> <li> Clarified use of modified with respect to Containers and Pages. </li> <li> Clarified use of canonical with update operations. </li> <li> Fixed RFC 7230 / RFC 7232 typo. </li> <li> Clarified use of ETag and If-Match. </li> </ul> </section> <section id="changes-from-the-candidate-recommendation-of-2016-07-12" typeof="bibo:Chapter" resource="#changes-from-the-candidate-recommendation-of-2016-07-12" property="bibo:hasPart"> <h3 id="h-changes-from-the-candidate-recommendation-of-2016-07-12" resource="#h-changes-from-the-candidate-recommendation-of-2016-07-12"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> <span class="delete">B.2 </span> <span class="insert">B.3 </span> </span> Changes from the Candidate Recommendation of 2016-07-12 </span> </h3> <p> Editorial changes in this specification from the <a href="http://www.w3.org/TR/2016/CR-annotation-protocol-20160712/"> Candidate Recommendation of 2016-07-12 </a> are: </p> <ul> <li> Added CR Exit Criteria </li> <li> Editorial restructuring of the Pagination content. </li> <li> Clarified requirements for Annotation Server's representation preference handling. </li> <li> Explained the proper use of the <code> Prefer </code> header when the client has multiple preferences. </li> </ul> </section> <section id="changes-from-the-working-draft-of-2016-03-31" typeof="bibo:Chapter" resource="#changes-from-the-working-draft-of-2016-03-31" property="bibo:hasPart"> <h3 id="h-changes-from-the-working-draft-of-2016-03-31" resource="#h-changes-from-the-working-draft-of-2016-03-31"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> <span class="delete">B.3 </span> <span class="insert">B.4 </span> </span> Changes from the Working Draft of 2016-03-31 </span> </h3> <p> Significant technical changes in this specification from the <a href="https://www.w3.org/TR/2016/WD-annotation-protocol-20160331/"> Working Draft Published of 2016-03-31 </a> are: </p> <ul> <li> Use ActivityStreams based Paging mechanism to replace LDP Paging, to allow for in-page order. </li> <li> Recommend the use of HTTPS over HTTP. </li> <li> Rename PreferContainedURIs to PreferContainedIRIs. </li> <li> Add recommendation for Accept-Post, with example. </li> <li> Clarify expected status codes for successful interactions. </li> <li> Restructure Container Retrieval section and promote Container Representations and Annotation Pages sections. </li> </ul> </section> </section> <section class="appendix" id="acknowledgments" typeof="bibo:Chapter" resource="#acknowledgments" property="bibo:hasPart"> <h2 id="h-acknowledgments" resource="#h-acknowledgments"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> C. </span> Acknowledgments </span> </h2> <p> The Web Annotation Working Group gratefully acknowledges the contributions of the <a href="http://www.w3.org/community/openannotation/"> Open Annotation Community Group </a> . The <a href="http://www.openannotation.org/spec/core"> output </a> of the Community Group was fundamental to the current data model and protocol. </p> <p> The following people have been instrumental in providing thoughts, feedback, reviews, content, criticism and input in the creation of this specification: </p> <div style="margin-left: 3em"> Vladimir Alexiev, Art Barstow, Tim Berners-Lee, Chris Birk, Dan Brickley, Sarven Capadisli, Paolo Ciccarese, Tim Cole, Ray Denenberg, TB Dinesh, Sergiu Gordea, Benjamin Goering, Amy Guy, Ivan Herman, Frederick Hirsch, Antoine Isaac, Jacob Jett, Takeshi Kanai, Gregg Kellogg, Andreas Kuckartz, Randall Leeds, Hugo Manguinhas, Shane McCarron, Ben De Meester, Luc Moreau, Mark Nottingham, Addison Phillips, Davis Salisbury, Robert Sanderson, Felix Sasaki, Doug Schepers, Tzviya Siegman, Stian Soiland-Reyes, Manu Sporny, Nick Stenning, Jon Stroop, Lutz Suhrbier, Kyrce Swenson, Rapha√´l Troncy, Simeon Warner, Erik Wilde, Dan Whaley, Benjamin Young </div> <p> </p> </section> <section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart"> <h2 id="h-references" resource="#h-references"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> D. </span> References </span> </h2> <section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart"> <h3 id="h-normative-references" resource="#h-normative-references"> <span property="xhv:role" resource="xhv:heading"> <span class="secno"> D.1 </span> Normative references </span> </h3> <dl class="bibliography" resource=""> <dt id="bib-RFC2119"> [RFC2119] </dt> <dd> <span class="delete">S. Bradner. IETF. </span> <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"> <cite> Key words for use in RFCs to Indicate Requirement Levels </cite> </a> . <span class="insert">S. Bradner. IETF. </span> March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119" property="dc:requires"> https://tools.ietf.org/html/rfc2119 </a> </dd> <dt id="bib-activitystreams-core"> [activitystreams-core] </dt> <dd> <span class="delete">James Snell; Evan Prodromou. W3C. </span> <a href="https://www.w3.org/TR/activitystreams-core/" property="dc:requires"> <cite> Activity Streams 2.0 </cite> </a> . <span class="insert">James Snell; Evan Prodromou. W3C. </span> 15 December 2016. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/activitystreams-core/" property="dc:requires"> https://www.w3.org/TR/activitystreams-core/ </a> </dd> <span class="tagInsert">insert: <tt>&lt;dt id=&quot;bib-activitystreams-vocabulary&quot;&gt;</tt></span> <dt id="bib-activitystreams-vocabulary"> <span class="insert">[activitystreams-vocabulary] </span> <span class="tagInsert">insert: <tt>&lt;/dt&gt;</tt></span> </dt> <span class="tagInsert">insert: <tt>&lt;dd&gt;</tt></span> <dd> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/activitystreams-vocabulary/" property="dc:requires"> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="insert">Activity Vocabulary </span> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">. James Snell; Evan Prodromou. W3C. 15 December 2016. W3C Candidate Recommendation. URL: </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/activitystreams-vocabulary/" property="dc:requires"> <span class="insert">https://www.w3.org/TR/activitystreams-vocabulary/ </span> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="tagInsert">insert: <tt>&lt;/dd&gt;</tt></span> </dd> <dt id="bib-annotation-model"> [annotation-model] </dt> <dd> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/annotation-model/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/annotation-model/" property="dc:requires"> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="insert">Web Annotation Data Model </span> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">. </span> Robert Sanderson; Paolo Ciccarese; Benjamin Young. W3C. <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://www.w3.org/TR/2017/PR-annotation-model-20170117/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;cite&gt;</tt></span> <span class="delete">Web Annotation Data Model </span> <span class="tagDelete">delete: <tt>&lt;/cite&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">. </span> W3C <span class="delete">Proposed </span> Recommendation. URL: <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://www.w3.org/TR/2017/PR-annotation-model-20170117/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <span class="delete">http://www.w3.org/TR/2017/PR-annotation-model-20170117/ </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/annotation-model/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/annotation-model/" property="dc:requires"> <span class="insert">https://www.w3.org/TR/annotation-model/ </span> </a> </dd> <dt id="bib-annotation-vocab"> [annotation-vocab] </dt> <dd> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/annotation-vocab/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/annotation-vocab/" property="dc:requires"> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="insert">Web Annotation Vocabulary </span> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">. </span> Robert Sanderson; Paolo Ciccarese; Benjamin Young. W3C. <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://www.w3.org/TR/2017/PR-annotation-vocab-20170117/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;cite&gt;</tt></span> <span class="delete">Web Annotation Vocabulary </span> <span class="tagDelete">delete: <tt>&lt;/cite&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">. </span> W3C <span class="delete">Proposed </span> Recommendation. URL: <span class="tagDelete">delete: <tt>&lt;a href=&quot;http://www.w3.org/TR/2017/PR-annotation-vocab-20170117/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <span class="delete">http://www.w3.org/TR/2017/PR-annotation-vocab-20170117/ </span> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/annotation-vocab/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/annotation-vocab/" property="dc:requires"> <span class="insert">https://www.w3.org/TR/annotation-vocab/ </span> </a> </dd> <dt id="bib-cors"> [cors] </dt> <dd> <span class="delete">Anne van Kesteren. W3C. </span> <a href="https://www.w3.org/TR/cors/" property="dc:requires"> <cite> Cross-Origin Resource Sharing </cite> </a> . <span class="insert">Anne van Kesteren. W3C. </span> 16 January 2014. W3C Recommendation. URL: <a href="https://www.w3.org/TR/cors/" property="dc:requires"> https://www.w3.org/TR/cors/ </a> </dd> <dt id="bib-ldp"> [ldp] </dt> <dd> <span class="tagInsert">insert: <tt>&lt;a href=&quot;https://www.w3.org/TR/ldp/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <a href="https://www.w3.org/TR/ldp/" property="dc:requires"> <span class="tagInsert">insert: <tt>&lt;cite&gt;</tt></span> <cite> <span class="insert">Linked Data Platform 1.0 </span> <span class="tagInsert">insert: <tt>&lt;/cite&gt;</tt></span> </cite> <span class="tagInsert">insert: <tt>&lt;/a&gt;</tt></span> </a> <span class="insert">. </span> Steve Speicher; John Arwe; Ashok Malhotra. W3C. <span class="tagDelete">delete: <tt>&lt;a href=&quot;https://www.w3.org/TR/ldp/&quot; property=&quot;dc:requires&quot;&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;cite&gt;</tt></span> <span class="delete">Linked Data Platform 1.0 </span> <span class="tagDelete">delete: <tt>&lt;/cite&gt;</tt></span> <span class="tagDelete">delete: <tt>&lt;/a&gt;</tt></span> <span class="delete">. </span> 26 February 2015. W3C Recommendation. URL: <a href="https://www.w3.org/TR/ldp/" property="dc:requires"> https://www.w3.org/TR/ldp/ </a> </dd> <dt id="bib-rfc3987"> [rfc3987] </dt> <dd> <span class="delete">M. Duerst; M. Suignard. IETF. </span> <a href="https://tools.ietf.org/html/rfc3987" property="dc:requires"> <cite> Internationalized Resource Identifiers (IRIs) </cite> </a> . <span class="insert">M. Duerst; M. Suignard. IETF. </span> January 2005. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc3987" property="dc:requires"> https://tools.ietf.org/html/rfc3987 </a> </dd> <dt id="bib-rfc5988"> [rfc5988] </dt> <dd> <span class="delete">M. Nottingham. IETF. </span> <a href="https://tools.ietf.org/html/rfc5988" property="dc:requires"> <cite> Web Linking </cite> </a> . <span class="insert">M. Nottingham. IETF. </span> October 2010. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc5988" property="dc:requires"> https://tools.ietf.org/html/rfc5988 </a> </dd> <dt id="bib-rfc7231"> [rfc7231] </dt> <dd> <span class="delete">R. Fielding, Ed.; J. Reschke, Ed.. IETF. </span> <a href="https://tools.ietf.org/html/rfc7231" property="dc:requires"> <cite> Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content </cite> </a> . <span class="insert">R. Fielding, Ed.; J. Reschke, Ed.. IETF. </span> June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7231" property="dc:requires"> https://tools.ietf.org/html/rfc7231 </a> </dd> <dt id="bib-rfc7232"> [rfc7232] </dt> <dd> <span class="delete">R. Fielding, Ed.; J. Reschke, Ed.. IETF. </span> <a href="https://tools.ietf.org/html/rfc7232" property="dc:requires"> <cite> Hypertext Transfer Protocol (HTTP/1.1): Conditional Requests </cite> </a> . <span class="insert">R. Fielding, Ed.; J. Reschke, Ed.. IETF. </span> June 2014. Proposed Standard. URL: <a href="https://tools.ietf.org/html/rfc7232" property="dc:requires"> https://tools.ietf.org/html/rfc7232 </a> </dd> </dl> </section> </section> <p role="navigation" id="back-to-top"> <a href="#toc"> <abbr title="Back to Top"> ‚Üë </abbr> </a> </p> <script src="https://www.w3.org/scripts/TR/2016/fixup.js"> </script> </body> </html> 
