<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN"
      "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="content-type"
  content="application/xhtml+xml; charset=UTF-8" />
  <title>Editing mathematics in Amaya</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body xml:lang="en">

<div class="PageHead">
Amaya<img alt="logo" src="../../resources/icons/22x22/logo.png" class="logo" /> 

<p class="nav"><a href="ImageMaps.html" accesskey="p"><img alt="previous"
src="../../resources/icons/misc/left.png" /></a> <a href="Manual.html"
accesskey="t"><img alt="top" src="../../resources/icons/misc/up.png" /></a> <a
href="SVG.html" accesskey="n"><img alt="next"
src="../../resources/icons/misc/right.png" /></a></p>
</div>

<div id="page_body" class="PageBody">
<h2 id="Editing">Editing mathematics</h2>

<p>Amaya proposes a Wysiwyg interface where <a
href="http://www.w3.org/TR/MathML2/">MathML</a> mathematical expressions are
handled as structured components, in the same way as (X)HTML elements.
Therefore, you can manipulate math expressions in the same way you manipulate
other parts of (X)HTML documents. All editing commands provided by Amaya for
handling text are also available for math, but there are some additional
controls for entering mathematical constructs. Note that the different browsers
don't behave in the same way with MathML: see the <a href="#Compatib">browsers
compatibility</a> section for more informations.</p>

<h3 id="Creating">Creating mathematical formulae</h3>

<h4 id="New">New formula</h4>

<p>Generally, mathematical formulae are not alone but included in a document
with text, table, images... to do this, you have to create a XHTML document.
Otherwise, you can create a MathML document (mml) for instance to use the
formulae in other software tools. To do so, use command <strong>File / New /
New formula</strong> or type <kbd>Ctrl-n Ctrl-m</kbd>.</p>

<p>To create a new mathematical expression in a document, move the <a
href="Selecting.html#Selecting">insertion point</a> to the position where you
want to insert an expression, and then click the <strong>Math</strong> button
(the first) from the Math palette, or choose <strong>Insert a formula</strong>
from the <strong>Insert/Math</strong> submenu. Here are examples with a formula
inserted directly in the XHTML document or inside an SVG image :</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow>
    <mi>Γ</mi>
    <mo>⁡</mo>
    <mrow>
      <mo>(</mo>
      <mi>x</mi>
      <mo>)</mo>
    </mrow>
  </mrow>
  <mo>=</mo>
  <mrow>
    <msubsup>
      <mo>∫</mo>
      <mn>0</mn>
      <mrow>
        <mo>+</mo>
        <mi>∞</mi>
      </mrow>
    </msubsup>
    <msup>
      <mi>t</mi>
      <mrow>
        <mi>x</mi>
        <mo>−</mo>
        <mn>1</mn>
      </mrow>
    </msup>
    <msup>
      <mi>ⅇ</mi>
      <mrow>
        <mo>−</mo>
        <mi>t</mi>
      </mrow>
    </msup>
    <mrow>
      <mo>ⅆ</mo>
      <mi>t</mi>
    </mrow>
  </mrow>
</math></p>

<p><svg:svg xmlns:svg="http://www.w3.org/2000/svg" height="234" width="250">
  <svg:g transform="matrix(0.707107,-0.707107,0.707107,0.707107,0,150)">
    <svg:rect style="stroke:#50ff50;stroke-width:3px;fill:#aaffaa;" width="200"
          height="100"/>
    <svg:path
          d="M 44.727272,21.090909 L 36.359858,29.587325 L 40.292606,40.845041 L 28.432844,39.600562 L 22.083235,49.69438 L 15.661767,39.646124 L 3.8111859,40.975193 L 7.6635087,29.689702 L -0.76431515,21.253205 L 10.460921,17.228684 L 11.802177,5.3794762 L 21.947495,11.646471 L 32.047838,5.3072476 L 33.473606,17.146584 L 44.727272,21.090909 z "
          transform="translate(150,40)"
          style="stroke:#ffaa00;stroke-width:1px;fill:#ffff00;"/>
    <svg:path
          d="M 50.363636,43.81818 C 50.090154,43.025081 51.297791,43.058245 51.681818,43.363636 C 52.722508,44.191224 52.181922,45.777285 51.272725,46.454544 C 49.646384,47.666002 47.379434,46.796331 46.40909,45.181813 C 44.98507,42.812444 46.220462,39.785248 48.545459,38.545452 C 51.644314,36.892997 55.454153,38.507192 56.954547,41.545458 C 58.842639,45.368806 56.844001,49.970617 53.090902,51.727273 C 48.545397,53.854818 43.146815,51.468849 41.136361,46.999991 C 38.767111,41.733596 41.542078,35.535434 46.727281,33.272723 C 52.713804,30.660333 59.713334,33.825342 62.227275,39.727281 C 65.083776,46.433439 61.528027,54.235551 54.909079,57.000002 C 47.483621,60.101298 38.878068,56.15432 35.863632,48.818168 C 32.517038,40.673649 36.8556,31.26402 44.909104,27.999994"
          transform="translate(-5,30)"
          style="fill:none;stroke:#000000;stroke-width:1px;"/>
    <svg:circle cx="40" cy="30" r="16"
            style="stroke:#ff0000;stroke-width:3px;fill:#ffaaaa;"
            transform="translate(60,40)"/>
    <svg:switch>
      <svg:foreignObject width="200" height="100">
        <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mstyle mathcolor="#000080;">
            <mrow>
              <mi>Γ</mi>
              <mo>⁡</mo>
              <mrow>
                <mo>(</mo>
                <mi>x</mi>
                <mo>)</mo>
              </mrow>
            </mrow>
            <mo>=</mo>
            <mrow>
              <msubsup>
                <mo>∫</mo>
                <mn>0</mn>
                <mrow>
                  <mo>+</mo>
                  <mi>∞</mi>
                </mrow>
              </msubsup>
              <msup>
                <mi>t</mi>
                <mrow>
                  <mi>x</mi>
                  <mo>−</mo>
                  <mn>1</mn>
                </mrow>
              </msup>
              <msup>
                <mi>ⅇ</mi>
                <mrow>
                  <mo>−</mo>
                  <mi>t</mi>
                </mrow>
              </msup>
              <mrow>
                <mo>ⅆ</mo>
                <mi>t</mi>
              </mrow>
            </mrow>
          </mstyle>
        </math> </svg:foreignObject>
    </svg:switch>
  </svg:g>
</svg:svg>
 </p>

<h4 id="XMLMenu">The Math submenu</h4>

<p>The <strong>Insert/Math</strong> submenu includes presentation MathML
elements.</p>
<ul>
  <li>The first items create new elements of a given type in a mathematical
    expression : <strong>Plain text (mtext)</strong>, <strong>Identifier
    (mi)</strong>, <strong>Number (mn)</strong>, <strong>Operator
    (mo)</strong>. These commands can also change the type of a single element
    or a sequence of elements.</li>
  <li>The next command, <strong>Space (mspace)</strong>, allows you to add
    space in a formula. To change its size, you have to modify its
    <code>width</code> attribute. See <a href="#Spacing">spacing</a>.</li>
  <li>The next item, <strong>Character (&amp;xxx;)</strong>, enables you to
    enter a character that is not available on the keyboard. It displays a
    dialog where you have to enter the character name (for instance
    <code>alpha</code> for the Greek character α).<br />
    Note that you can also use the Special characters tool (command
    <strong>Views / Show/hide toolbars / Special characters</strong>).</li>
  <li>The two next commands <strong>InvisibleTimes</strong> and
    <strong>ApplyFunction</strong> are used to enter the corresponding
    invisible characters. See the <a href="#Special">special characters</a>
    section.</li>
</ul>

<p>Following entries of the <strong>Insert/Math</strong> submenu enable you to
create new constructs within a formula. If the insertion point is not in a
formula, Amaya first creates a <code>math</code> element to accept the new
construct. The available constructs are:</p>
<ul>
  <li>Root with index, <code>mroot</code> in MathML:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mroot>
        <mrow>
          <mi>x</mi>
          <mspace width=".2em"/>
          <mo>+</mo>
          <mn>1</mn>
        </mrow>
        <mn>3</mn>
      </mroot>
    </math></li>
  <li>Square root, <code>msqrt</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <msqrt>
        <mrow>
          <mi>x</mi>
          <mo>+</mo>
          <mn>1</mn>
        </mrow>
      </msqrt>
    </math></li>
  <li>Enclose, <code>menclose</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <menclose>
        <mn>1234</mn>
      </menclose>
    </math></li>
  <li>Fraction, <code>mfrac</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mfrac>
        <mn>1</mn>
        <mrow>
          <mi>x</mi>
          <mo>+</mo>
          <mn>1</mn>
        </mrow>
      </mfrac>
    </math></li>
  <li>Expression with subscript and superscript, <code>msubsup</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <msubsup>
        <mi>x</mi>
        <mrow>
          <mi>i</mi>
          <mo>+</mo>
          <mn>1</mn>
        </mrow>
        <mi>n</mi>
      </msubsup>
    </math>or <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mrow>
        <msubsup>
          <mo largeop="true">∫</mo>
          <mn>0</mn>
          <mo>∞</mo>
        </msubsup>
        <mo>&nbsp;</mo>
      </mrow>
    </math></li>
  <li>Expression with a subscript, <code>msub</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <msub>
        <mi>x</mi>
        <mi>i</mi>
      </msub>
    </math></li>
  <li>Expression with a superscript, <code>msup</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <msup>
        <mi>x</mi>
        <mi>n</mi>
      </msup>
    </math></li>
  <li>Expression with under- and overscript, <code>munderover</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <munderover>
        <mo movablelimits="false">∑</mo>
        <mrow>
          <mi>i</mi>
          <mo>=</mo>
          <mn>1</mn>
        </mrow>
        <mi>n</mi>
      </munderover>
    </math></li>
  <li>Expression with underscript, <code>munder</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <munder>
        <mi>x</mi>
        <mo>-</mo>
      </munder>
    </math></li>
  <li>Expression with overscript, <code>mover</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mrow>
        <mi>x</mi>
        <mover>
          <mo>→</mo>
          <mtext>maps to</mtext>
        </mover>
        <mi>y</mi>
      </mrow>
    </math></li>
  <li>Expression within parentheses, <code>mrow</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mrow>
        <mo>(</mo>
        <mrow>
          <mi>a</mi>
          <mo>+</mo>
          <mi>b</mi>
        </mrow>
        <mo>)</mo>
      </mrow>
    </math></li>
  <li>Expression with prescripts and tensor indices,
    <code>mmultiscripts</code>:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mmultiscripts>
        <mi>X</mi>
        <mi>i</mi>
        <mi>j</mi>
        <mprescripts/>
        <mi>k</mi>
        <mi>l</mi>
      </mmultiscripts>
    </math></li>
  <li>Finally, the <strong>New matrice (mtable)</strong> entry allows you to
    create and edit MathML tables:
    <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mtable>
        <mtr>
          <mtd>
            <mi>a</mi>
          </mtd>
          <mtd>
            <mi>b</mi>
          </mtd>
        </mtr>
        <mtr>
          <mtd>
            <mi>c</mi>
          </mtd>
          <mtd>
            <mi>d</mi>
          </mtd>
        </mtr>
      </mtable>
    </math> 
    <p>You must then choose the number of lines and columns in the new table
    through a dialog that pops up. You can manipulate it like a <a
    href="Tables.html">HTML table</a> through the commands available from the
    <strong>Tools/Edit table</strong> submenu.</p>
  </li>
</ul>

<h4 id="Palette">The Math palette</h4>

<p>Clicking on a button in the Math palette inserts the mathematical construct
represented on its icon. Parts in black are really inserted, parts in red
represent placeholder, parts in blue are asked through to a specific dialog.
Green parts are simply additional information that are not inserted.</p>

<p>The palette contains all constructs described in Content MathML (but the
produced code is an equivalent in Presentation MathML, see the <a
href="#Known">known issues</a> section) and even more. You can also save your
own constructs in a mml file in order to use them latter. The 6 tabs are :</p>
<ol>
  <li><ul>
      <li>Various constructs 
        <ul>
          <li>new formula</li>
          <li><code>mrow</code>: used to group elements. See the section about
            the <a href="#Row">row construct</a></li>
          <li><code>mphantom</code>: used to hide a piece of formula, can be
            used for alignment. The hidden parts can be viewed if you select
            the formula : 
            <p><math xmlns="http://www.w3.org/1998/Math/MathML">
              <mrow>
                <mo>{</mo>
                <mrow>
                  <mtable>
                    <mtr>
                      <mtd>
                        <mphantom>
                          <mo>−</mo>
                        </mphantom>
                        <mn>5</mn>
                        <mi>x</mi>
                        <mo>+</mo>
                        <mn>3</mn>
                        <mi>y</mi>
                        <mphantom>
                          <mo>−</mo>
                          <mn>0</mn>
                          <mi>z</mi>
                        </mphantom>
                        <mo>=</mo>
                        <mphantom>
                          <mo>−</mo>
                          <mn>11</mn>
                        </mphantom>
                      </mtd>
                    </mtr>
                    <mtr>
                      <mtd>
                        <mo>−</mo>
                        <mn>2</mn>
                        <mi>x</mi>
                        <mo>+</mo>
                        <mphantom>
                          <mn>0</mn>
                          <mi>y</mi>
                          <mo>−</mo>
                        </mphantom>
                        <mn>7</mn>
                        <mi>z</mi>
                        <mo>=</mo>
                        <mphantom>
                          <mo>−</mo>
                        </mphantom>
                        <mn>11</mn>
                      </mtd>
                    </mtr>
                    <mtr>
                      <mtd>
                        <mo>−</mo>
                        <mn>3</mn>
                        <mi>x</mi>
                        <mo>+</mo>
                        <mn>2</mn>
                        <mi>y</mi>
                        <mo>−</mo>
                        <mn>6</mn>
                        <mi>z</mi>
                        <mo>=</mo>
                        <mo>−</mo>
                        <mn>7</mn>
                        <mphantom>
                          <mn>0</mn>
                        </mphantom>
                      </mtd>
                    </mtr>
                  </mtable>
                </mrow>
              </mrow>
            </math></p>
          </li>
          <li>parenthesis: <math xmlns="http://www.w3.org/1998/Math/MathML">
              <mrow>
                <mo>(</mo>
                <mi>x</mi>
                <mo>)</mo>
              </mrow>
            </math></li>
          <li>interval: The open, separator and close symbols are asked.
            <math xmlns="http://www.w3.org/1998/Math/MathML">
              <mrow>
                <mo>[</mo>
                <mi>a</mi>
                <mo>;</mo>
                <mi>b</mi>
                <mo>]</mo>
              </mrow>
            </math></li>
          <li>fence: Same, but the number of element is asked.
            <math xmlns="http://www.w3.org/1998/Math/MathML">
              <mrow>
                <mo>[</mo>
                <mn>1</mn>
                <mo>,</mo>
                <mi>c</mi>
                <mo>,</mo>
                <mi>Y</mi>
                <mo>,</mo>
                <mi>ⅇ</mi>
                <mo>,</mo>
                <mo>∏</mo>
                <mo>}</mo>
              </mrow>
            </math></li>
          <li><code>mtable</code>:
            <math xmlns="http://www.w3.org/1998/Math/MathML">
              <mtable>
                <mtr>
                  <mtd>
                    <mi>a</mi>
                  </mtd>
                  <mtd>
                    <mi>b</mi>
                  </mtd>
                </mtr>
                <mtr>
                  <mtd>
                    <mi>c</mi>
                  </mtd>
                  <mtd>
                    <mi>d</mi>
                  </mtd>
                </mtr>
              </mtable>
            </math></li>
          <li><code>menclose</code>:
            <math xmlns="http://www.w3.org/1998/Math/MathML">
              <menclose>
                <mi>a</mi>
              </menclose>
            </math> or <math xmlns="http://www.w3.org/1998/Math/MathML">
              <menclose  notation="actuarial">
                <mi>b</mi>
              </menclose>
            </math></li>
          <li>selector: The number of coordonnates is asked.
            <math xmlns="http://www.w3.org/1998/Math/MathML">
              <msub>
                <mi>a</mi>
                <mrow>
                  <mi>i</mi>
                  <mo>⁣</mo>
                  <mi>j</mi>
                </mrow>
              </msub>
            </math></li>
          <li>piecewise or vertical brace
            :<math xmlns="http://www.w3.org/1998/Math/MathML">
              <mrow>
                <mo>∣</mo>
                <mi>x</mi>
                <mo>∣</mo>
              </mrow>
              <mo>=</mo>
              <mrow>
                <mo>{</mo>
                <mrow>
                  <mtable>
                    <mtr>
                      <mtd>
                        <mi>x</mi>
                        <mtext>&nbsp;if&nbsp;</mtext>
                        <mrow>
                          <mi>x</mi>
                          <mo>≥</mo>
                          <mn>0</mn>
                        </mrow>
                      </mtd>
                    </mtr>
                    <mtr>
                      <mtd>
                        <mrow>
                          <mo>−</mo>
                          <mi>x</mi>
                          <mtext>&nbsp;otherwise</mtext>
                        </mrow>
                      </mtd>
                    </mtr>
                  </mtable>
                </mrow>
              </mrow>
            </math> </li>
        </ul>
      </li>
      <li>Presentation MathML constructs: msup, msub, msubsup, mover, munder,
        munderover, multiscripts.</li>
      <li>Sets of numbers: naturals, integers, rationals, reals, complexes,
        quaternions, primes.</li>
      <li>Accents and underscript</li>
    </ul>
  </li>
  <li><ul>
      <li>relations of equivalence and orders 
        <ul>
          <li>equalities, approx, congru, isomorphic</li>
          <li>inequalities</li>
          <li>inf, sup, max and min</li>
        </ul>
      </li>
      <li>logic 
        <ul>
          <li>True and False</li>
          <li>equivalence</li>
          <li>universal and existential quantifiers</li>
          <li>not, and, or, xor, implies, equivalent to</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><ul>
      <li>set theory 
        <ul>
          <li>set/list built by extension/separation, nuple</li>
          <li>element, subset</li>
          <li>empty set, powerset</li>
          <li>complement, difference, symetric difference</li>
          <li>intersection, union, cartesian product</li>
          <li>cardinal, omega, aleph, diagonal intersection</li>
        </ul>
      </li>
      <li>functions and maps 
        <ul>
          <li>lambda construct</li>
          <li>map definition,
            arrows<math xmlns="http://www.w3.org/1998/Math/MathML">
            </math></li>
          <li>domain, image (range), codomain</li>
          <li>identity, compose, inverse</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><ul>
      <li>arithmetic 
        <ul>
          <li>sum, prod</li>
          <li>factorial, combination, cardinal</li>
          <li>factor of</li>
          <li>lcm, gcd</li>
          <li>reminder, quotient</li>
        </ul>
      </li>
      <li>operations 
        <ul>
          <li>elementary operations: plus, minus, times, divide, fraction</li>
          <li>power, root</li>
          <li>floor, ceiling</li>
        </ul>
      </li>
      <li>complexes 
        <ul>
          <li>abs, arg, conjugate</li>
          <li>cartesian, polar</li>
          <li>real and imaginary part</li>
        </ul>
      </li>
      <li>constants: <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi>ⅇ</mi>
        </math>, <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi>ⅈ</mi>
        </math>, <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi>π</mi>
        </math>, <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi>γ</mi>
        </math>, <math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi>NaN</mi>
        </math> (not a number)</li>
    </ul>
  </li>
  <li><ul>
      <li>analysis 
        <ul>
          <li>differential, partial differential</li>
          <li>integrals: simple/double/triple, normal/contour, msub/msupsub</li>
          <li>equivalence</li>
          <li>limit, tends to</li>
          <li>supminus (<math xmlns="http://www.w3.org/1998/Math/MathML">
              <msup>
                <mn>1</mn>
                <mi>-</mi>
              </msup>
            </math>) or supplus
            (<math xmlns="http://www.w3.org/1998/Math/MathML">
              <msup>
                <mn>0</mn>
                <mi>+</mi>
              </msup>
            </math>)</li>
          <li>infinity</li>
          <li>o and O</li>
        </ul>
      </li>
      <li>linear algebra 
        <ul>
          <li>direct sum</li>
          <li>vectorrow, vectorcolumn, matrix</li>
          <li>transpose, determinant</li>
          <li>curl, div, grad, laplacian</li>
          <li>vector product, scalar product, outerproduct</li>
          <li>orthogonal, parallel, orthogonal complement, norm</li>
        </ul>
      </li>
      <li>statistic : mean, sdev, variance, median, mode, moment</li>
    </ul>
  </li>
  <li>classical elementary functions (trigonometric, inverse...)</li>
</ol>

<h4 id="Keyboard">Entering Math constructs using the keyboard</h4>

<p>You are not required to use the <strong>Math</strong> submenu or the
<strong>Math palette</strong> to create and edit mathematical expressions. You
can enter mathematical constructs directly from the keyboard because each entry
of the <strong>Math</strong> submenu has a keyboard equivalent. These shortcuts
are listed on the menu. See the list of current Linux, Mac OS X, and Windows <a
href="ShortCuts.html">shortcuts</a>.</p>

<p>You can also use the keyboard arrow keys to move the insertion point from
one math construct to another. The right and left arrows move the insertion
point according to the structure of the mathematical expression. For example,
in a fraction when the insertion point is at the end of a numerator, the right
arrow key moves the insertion point to the beginning of the denominator.
Moreover if you use the right arrow to a construct that is not already
completed, the insertion point is directly moved to the nearest placeholder.</p>

<h3 id="Advanced">Advanced editing features</h3>

<h4 id="Characters">Entering Math characters</h4>

<p>When you type a character string in a MathML element, Amaya parses the
string and automatically generates the elements <code>mo</code> (operator),
<code>mn</code> (number), <code>mi</code> (identifier), and
<code>mtext</code>.</p>

<p>For example, to enter the formula
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <mn>2</mn>
    <mi>a</mi>
    <mo>+</mo>
    <mi>b</mi>
  </mrow>
</math></p>
<ol>
  <li>If you are not in a mathematical expression, choose
    <strong><strong>Insert a formula</strong> from the
    <strong>Insert/Math</strong></strong> submenu.</li>
  <li>Type this sequence of 6 characters: <kbd>x=2a+b</kbd></li>
</ol>

<p>Use the Structure or Source view to display the following structure
generated by Amaya:</p>

<p><code>&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;</code></p>

<p>If the result is not exactly what you want, select the characters that were
misinterpreted and change their type with one of the commands such as
<strong>Plain text (mtext)</strong>, <strong>Identifier (mi)</strong>,
<strong>Number (mn)</strong>, <strong>Operator (mo)</strong> or <strong>Space
(mspace)</strong>. </p>

<h4 id="Row">The row construct</h4>

<p>The <code>row</code> construct from the palette is the equivalent of the
braces in LaTeX: it allows you to give informations about how the different
part of a formula are grouped together. It does not appear on the screen but
have an indirect effect on the rendering.</p>

<p>For instance, when entering brackets as in the following expression:</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>f</mi>
  <mrow>
    <mo>⁡</mo>
    <mo>(</mo>
    <mi>x</mi>
    <mo>)</mo>
  </mrow>
  <mo>=</mo>
  <mfrac>
    <mn>1</mn>
    <mi>x</mi>
  </mfrac>
</math></p>

<p>typing the sequence <code>f(x)= ...</code> would lead to:</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>f</mi>
  <mo>⁡</mo>
  <mo>(</mo>
  <mi>x</mi>
  <mo>)</mo>
  <mo>=</mo>
  <mfrac>
    <mn>1</mn>
    <mi>x</mi>
  </mfrac>
</math></p>

<p>Here, the <code>(x)</code> must be contained in a <code>mrow</code> element.
You can correct the problem by selecting this part of the formula and then
clicking on the row construct. You can also directly get the expected
<code>mrow</code> if you choose <strong>Parentheses</strong> from the
<strong>Insert/Math</strong> submenu or select the button in the <strong>Math
palette</strong>.</p>

<h4 id="Spacing">Spacing</h4>

<p>Amaya takes care of spacing within math expressions, but in some cases you
may need to add some additional space. Move the cursor to the position where
you want to insert space and choose <strong>Space (mspace)</strong> from the
<strong>Insert/Math</strong> submenu. This creates a default horizontal space.
You can then change its <code>width</code> attribute to adjust its size or you
can add other attributes (<code>height</code>, <code>depth</code>,
<code>linebreak</code>) to change vertical spacing. Refer to the <a
href="http://www.w3.org/TR/MathML2/chapter3.html#N9197">MathML
specification</a> for more details.</p>

<h4 id="Special">Special characters</h4>

<p>You can use the <strong><a href="#Characters">Character</a></strong> command
from the <strong>Insert/Math</strong> submenu to enter mathematical characters
and symbols that are not available on the keyboard. Type in the name of the
character, as defined in the <a
href="http://www.w3.org/TR/2003/REC-MathML2-20031021/byalpha.html">MathML
specification</a>. You may choose to type the Unicode value of the character
instead. For entering this value in decimal, start with a '#'. For entering the
value in hexadecimal, start with '#x'. To type faster, you can also enter the
hexadecimal value without any leading '#x', but note that this may be ambiguous
(like 'af', for instance). In case of ambiguity, the string is interpreted as a
character name.</p>

<p>You can also use the <strong>Special characters</strong> tool. In this tool,
the pull-down menu allows you to choose a group of characters, which are then
available in the table below. Click a character in this table to insert it in
the formula or anywhere else in the document.</p>

<p>Also, the MathML specification recommends to add invisible characters in
order to make it easier for a speech synthesizer to read a formula. These
characters are automatically inserted from the palette, but sometimes you have
to do it by yourself. You can then use the <strong>Insert/Math</strong> submenu
or <a href="ShortCuts.html">shortcuts</a>. The three invisible characters
are:</p>
<ol>
  <li>invisible times: <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mi>a</mi>
      <mo>⁢</mo>
      <mi>b</mi>
    </math></li>
  <li>apply function: <math xmlns="http://www.w3.org/1998/Math/MathML">
      <mi>f</mi>
      <mo>⁡</mo>
      <mrow>
        <mo>(</mo>
        <mi>x</mi>
        <mo>)</mo>
      </mrow>
    </math></li>
  <li>invisible comma: <math xmlns="http://www.w3.org/1998/Math/MathML">
      <msub>
        <mi>a</mi>
        <mrow>
          <mi>i</mi>
          <mo>⁣</mo>
          <mi>j</mi>
        </mrow>
      </msub>
    </math></li>
</ol>

<h4 id="Structure">Changing the structure</h4>

<p>You may want to change the structure of an existing expression, such as
appending a superscript, putting parentheses around an expression, or turning
an expression into the numerator of a fraction. To do that, select the
expression and enter the new construct with the <strong>Math</strong> palette,
the <strong>Insert/Math</strong> submenu or the keyboard. </p>

<p>You can also use <strong>Transform</strong> from the <strong>Tools</strong>
menu. Select the expression you want to transform and
<strong>Transform</strong> will display a menu with all possible changes. For
constructs that are not part of the Presentation MathML markup - i.e. only
available from the palette - clicking on the button will put the selected
expression in the most natural placeholder.</p>

<p>Changing an expression is useful to keep a recursive structure even when you
enter a formula linearly. For instance to enter
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow>
    <mrow>
      <mrow>
        <msup>
          <mi>x</mi>
          <mn>2</mn>
        </msup>
        <mo>≤</mo>
        <mfrac>
          <mn>9</mn>
          <mn>25</mn>
        </mfrac>
      </mrow>
    </mrow>
    <mo>⇒</mo>
    <mrow>
      <mi>x</mi>
      <mo>≤</mo>
      <mfrac>
        <mn>3</mn>
        <mn>5</mn>
      </mfrac>
    </mrow>
  </mrow>
</math> you can,</p>
<ul>
  <li>either enter "recursively" (faster but less natural for long expression)
    : 
    <ul>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <mi></mi>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <mrow>
                <mi></mi>
              </mrow>
              <mo>≤</mo>
              <mrow>
                <mi></mi>
              </mrow>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <msup>
                <mi></mi>
                <mi></mi>
              </msup>
              <mo>≤</mo>
              <mrow>
                <mi></mi>
              </mrow>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <msup>
                <mi>x</mi>
                <mi></mi>
              </msup>
              <mo>≤</mo>
              <mrow>
                <mi></mi>
              </mrow>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
              <mo>≤</mo>
              <mrow>
                <mi></mi>
              </mrow>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow xmlns="http://www.w3.org/1998/Math/MathML">
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
              <mo>≤</mo>
              <mfrac>
                <mi></mi>
                <mi></mi>
              </mfrac>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow xmlns="http://www.w3.org/1998/Math/MathML">
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
              <mo>≤</mo>
              <mfrac>
                <mn>9</mn>
                <mi></mi>
              </mfrac>
            </mrow>
            <mo>⇒</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li>...</li>
    </ul>
  </li>
  <li>or enter "linearly" (you write as you read, but you need to select
    several times) : 
    <ul>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mi xmlns="http://www.w3.org/1998/Math/MathML">x</mi>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <msup>
            <mi>x</mi>
            <mi></mi>
          </msup>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <msup>
            <mi>x</mi>
            <mn>2</mn>
          </msup>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
            </mrow>
            <mo>≤</mo>
            <mrow>
              <mi></mi>
            </mrow>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow>
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
            </mrow>
            <mo>≤</mo>
            <mn>9</mn>
          </mrow>
        </math></li>
      <li><math xmlns="http://www.w3.org/1998/Math/MathML">
          <mrow>
            <mrow xmlns="http://www.w3.org/1998/Math/MathML">
              <msup>
                <mi>x</mi>
                <mn>2</mn>
              </msup>
            </mrow>
            <mo>≤</mo>
            <mfrac>
              <mn>9</mn>
              <mi></mi>
            </mfrac>
          </mrow>
        </math></li>
      <li>...</li>
    </ul>
  </li>
</ul>

<p>Generally, you will use both methods.</p>

<h4 id="Viewing">Viewing structure in MathML</h4>

<p>A MathML structure in a document can be viewed by choosing <strong>Show
Structure</strong> from the <strong>Views</strong> menu. Choosing this option
opens up the Structure view, which reveals the main structure of the document,
the math elements, and their contents.</p>

<p>Math expressions can be edited in the main view or in the structure view.</p>

<p>The structure view is especially helpful to avoid ambiguity. For example, in
the equation below, placing the cursor after character
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>b</mi>
</math>, it is not clear whether you wish to add something within the square
root or after it.</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML">
  <mi>x</mi>
  <mo>=</mo>
  <msqrt>
    <mi>a</mi>
    <mo>+</mo>
    <mi>b</mi>
  </msqrt>
  <mo>+</mo>
  <mn>1</mn>
</math></p>

<p>Selecting (or checking) in the Structure view avoids any misselections. You
can also check the status line at the bottom of the window.</p>

<h4 id="Linking">Linking in MathML</h4>

<p>You can create and use links in mathematical expressions. These links are
represented using the <a href="http://www.w3.org/TR/WD-xlink">XML Linking
Language (XLink)</a>. Only simple unidirectional hyperlinks are available in
Amaya, but you can associate a link with any part of a formula. For example,
the fraction in the formula below is a link to the W3C home page:</p>

<p><math xmlns="http://www.w3.org/1998/Math/MathML">
  <mrow>
    <mi>y</mi>
    <mo>=</mo>
    <mfrac xmlns:xlink="http://www.w3.org/1999/xlink"
    xlink:href="http://www.w3.org/">
      <mn>1</mn>
      <msqrt>
        <mrow>
          <msup>
            <mi>x</mi>
            <mn>2</mn>
          </msup>
          <mo>+</mo>
          <mn>1</mn>
        </mrow>
      </msqrt>
    </mfrac>
  </mrow>
</math></p>

<p>Double-clicking or right-clicking any character within the fraction loads
the W3C home page.</p>

<p>To create such a link, select a math expression (the fraction in the above
example, for instance by clicking on the fraction bar), click the <img
alt="Link" src="../../resources/icons/16x16/XHTML_Link.png" width="16"
height="16" /> button from the <strong>Elements</strong> tool, or choose
<strong>Create or change link</strong> from the <strong>Links</strong> menu,
and click the desired target.</p>

<p>If the target is an expression in a formula, you must first turn the
expression into a target. Select the expression and choose <strong>Create
target</strong> from the <strong>Links</strong> menu to create an
<code>id</code> attribute for the target expression.</p>

<h3 id="More">More about MathML</h3>

<h4 id="Compatib">Browsers compatibility</h4>

<p>Several browsers support MathML:</p>
<ul>
  <li>Internet Explorer with the MathPlayer plugin</li>
  <li>Firefox and other Gecko-based browsers</li>
  <li>Opera since version 9.5</li>
</ul>

<p>It is necessary to use the <code>.xml</code> suffix to be sure that XHTML
documents are managed as XML. Without this suffix some browsers do not display
correctly documents that include mathematical expressions. It is also
recommended to use the <strong>utf-8</strong> charset for all XML documents.</p>

<p>By default Amaya adds the XHTML 1.1 plus MathML 2.0 doctype at the beginning
of the document. This doctype is not mandatory but it is useful:</p>
<ul>
  <li>to validate the document,</li>
  <li>to generate alphanumerical entities (like &amp;int;) for mathematical
    symbols in the source code. Otherwise mathematical symbols are coded like
    any other unicode character.</li>
</ul>

<p>Unfortunately, this doctype is not supported by many browsers. So it could
be necessary to remove this doctype with the Amaya command:
<strong>Tools/Change doctype/Remove the doctype</strong>.</p>

<p>IE uses the <code>pmathml.xsl</code> transformation style sheet and a plugin
to display the MathML code included in XHTML documents. Amaya adds
automatically a link to that transformation style sheet, but the author must
store a copy of this style sheet (<a
href="http://www.w3.org/Math/XSL/pmathml.xsl">pmathml.xsl</a>) in the local
directory of the document.</p>

<h4 id="Known">Known issues</h4>
<ul>
  <li>Amaya implements only the Presentation part of MathML 2.0, not the
    Content Markup part.</li>
  <li>A few Presentation tags are not entirely available: <code>mglyph</code>,
    <code>maction</code></li>
  <li>All presentation elements and attributes are available, but only the
    following attributes are rendered on the screen: <code>display, alttext,
    mathvariant, mathsize, mathcolor, mathbackground, fontsize, fontweight,
    fontstyle, fontfamily, color, linethickness, numalign, denomalign,
    bevelled, notation, lquote, rquote, lspace, rspace, largeop, movablelimits,
    subscriptshift, superscriptshift, form, width</code> (mspace only),
    <code>height</code> (mspace only), <code>depth</code> (mspace only),
    <code>align, rowalign, columnalign, frame, framespacing, displaystyle,
    side, rowspan, columnspan, rowspacing, columnspacing, rowlines,
    columnlines</code>.</li>
  <li><span><span>The <code>class</code>, <code>id</code>, and
    <code>style</code> attributes are available, with the same semantics as in
    (X)HTML: you can associate CSS styles with MathML elements
    (<code>class</code> and <code>style</code> attributes) and a MathML element
    can be the target of a link (<code>id</code> attribute).</span></span></li>
  <li>Amaya uses the STIX fonts to render mathematical symbols, but currently
    not all symbols are supported.</li>
</ul>
</div>
</body>
</html>
