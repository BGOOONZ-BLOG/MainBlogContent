<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Data Storage</title>
  </head>
  <body>
    <header>
      <h1>Data Storage</h1>
      <p>A critical component of many applications is the ability to save state, export content, as well as integrate data from other files and services on the system.</p>
    </header>
    <main>
      <section class="featureset well-deployed">
        <h2>Well-deployed technologies</h2>
        <p data-feature="Simple data storage">For simple data storage, the <a data-featureid="webstorage">Web Storage</a> specification offers two basic mechanisms, <code>localStorage</code> and <code>sessionStorage</code>, that can preserve data respectively indefinitely, or on a browser-session basis.</p>

        <p data-feature="Database query/update">On top of this file-based access, the <a data-featureid="indexeddb">Indexed Database API</a> (IndexedDB) defines a database of values and hierarchical objects that integrates naturally with JavaScript, and can be queried and updated very efficiently - a <a href="https://w3c.github.io/IndexedDB/">third edition of the specification</a> is under development.</p>

        <p data-feature="Encrypted storage">Some of this data need to be encrypted, the <a data-featureid="crypto">Web Cryptography API</a> from the <a href="https://www.w3.org/2012/webcrypto/">Web Cryptography Working Group</a> exposes strong cryptography primitives to Web applications, and can be bound to pre-provisioned keys via the <a data-featureid="cryptokey">WebCrypto Key Discovery</a> API.</p>

        <p data-feature="File download">The <a data-featureid="html5-download">HTML5 <code>download</code> attribute</a> provides a simple mechanism to trigger a file download (rather than a page navigation), with the possibility of setting a user-friendly filename.</p>
      </section>
      <section class="featureset in-progress">
        <h2>Technologies in progress</h2>

        <p data-feature="Storage management">As more and more data need to be stored by the browser (e.g. for offline usage), it becomes critical for developers to get reliable storage space. The <a data-featureid="storage">Storage</a> specification allows Web applications to get quota estimate for storage as well as to request that the data stored by the application be treated as persistent and cannot be evicted without the user’s explicit consent.</p>

        <div data-feature="File operations">
          <p>Although the notion is less prevalent on mobile, there is generally at least some sort of concept of a file system. The <a data-featureid="fileapi">File API</a> provides an API for representing file objects in web applications, as well as programmatically selecting them and accessing their data. The API is read-only. Discussions on a read-write API have now resumed, see <a href="#file-system-access">File System Access</a> below.</p>
        </div>
      </section>

      <section class="featureset exploratory-work">
        <h2>Exploratory work</h2>

        <div data-feature="File operations">
          <p>The <a data-featureid="file-system-access">File System Access</a> specification is an early API proposal that lets Websites gain write access to the local file system. It builds on top of the <a href="#fileapi">File API</a>.</p>
        </div>

        <div data-feature="Simple data storage">
          <p>The <code>localStorage</code> mechanism is a simple data storage mechanism but has one problem: the API is synchronous. This leads to performance and cross-window synchronization issues. IndexedDB is asynchronous but is hard to use for simple get/set operations. The <a data-featureid="kv-storage">KV Storage</a> specification describes a simple asynchronous key/value storage API, proposed as a successor to <code>localStorage</code>. The API is modeled on top of IndexedDB, allowing applications to transition to IndexedDB should the application need to use advanced features (such as transactions, indices, or cursors). Plan is to integrate this API in IndexedDB after incubation.</p>
        </div>

        <div data-feature="State management">
          <p>HTTP cookies provide a valuable state-management mechanism for the Web. However, the synchronous nature of the <code>document.cookie</code> interface has been a source of performance issue, especially now that browsers use multiple processes and threads to improve perceived performances and responsiveness where ever possible, including on mobile platforms where processing powers may be more limited. Cookies are also unavailable to workers, which do not have access to the DOM. The <a data-featureid="cookie-store">Cookie Store API</a> defines an asynchronous cookies API for documents and workers.</p>
        </div>

        <div data-feature="Storage management">
          <p>Web applications need to store different types of data locally, with different eviction strategies when running out of storage. For instance, an application may want to evict images first as they can be retrieved from the network, but may want to preserve application state as much as possible. The <a data-featureid="storage-buckets">Storage buckets</a> proposal grants applications the ability to create multiple storage buckets, where the user agent may choose to delete each bucket independently of other buckets.</p>

          <p>The <a data-featureid="storage-access">Storage Access API</a> enables content inside <code>&lt;iframe&gt;</code> elements to request and be granted access to their client-side storage, provided user agrees to it, so that embedded content which relies on having access to client-side storage can work in browsers that would otherwise prevent this behavior, e.g. to preserve the user's privacy.</p>
        </div>

        <div data-feature="Shared resources">
          <p>The <a data-featureid="web-locks">Web Locks API</a> allows applications to acquire a lock on storage, to coordinate read/write operations across instances of an app that may be running concurrently in different tabs.</p>
        </div>
      </section>

      <section>
        <h2>Discontinued features</h2>
        <dl>
          <dt>Quota management API</dt>
          <dd>Work on the <a data-featureid="quota">Quota Management API</a>, started in the Web Platform Working Group to expose an API to manage usage and availability of local storage resources, was discontinued in favor of the newer <a data-featureid="storage">Storage</a> proposal.</dd>

          <dt>Client-side SQL-based database</dt>
          <dd>The work around a <a data-featureid="websql">client-side SQL-based database</a>, which had been started in 2009, has been abandoned in favor of the work on IndexedDB.</dd>

          <dt>Address book data</dt>
          <dd>Communication applications can benefit from integrating with their users’ existing data records; on mobile devices, the address book is a particularly useful source of information. For Web apps outside of the browser, a purely programmatic approach was part of the <a href="https://www.w3.org/2012/05/sysapps-wg-charter.html">System Applications Working Group</a>; since this group has now closed, no further work on the <a data-featureid="contacts-sys">Contacts Manager API</a> is expected for the time being. Within the browser, HTML provides <a data-featureid="autocomplete">autocompleted fields for contacts information</a> that would let browsers re-use data from address books.</dd>
        </dl>
      </section>
    </main>
    <script src="../js/generate.js"></script>
  </body>
</html>
