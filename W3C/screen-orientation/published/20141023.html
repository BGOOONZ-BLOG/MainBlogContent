<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document w3p:WD" about="" property="dcterms:language" content="en">
<head>
    <title>
      The Screen Orientation API
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">


  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 {
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #2b2; }
div.issue-title span, div.note-title span {
    text-transform: uppercase;
}
div.note, div.issue {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child { margin-top: 0 }
.issue, .note {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}


</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><style>/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
    background: #dfffff;
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/W3C-WD"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>
  <body class="h-entry" role="document" id="respecDocument"><div class="head" role="contentinfo" id="respecHeader">
  <p>


            <a href="http://www.w3.org/"><img width="72" height="48" src="https://www.w3.org/Icons/w3c_home" alt="W3C"></a>


  </p>
  <h1 class="title p-name" id="title" property="dcterms:title">The Screen Orientation API</h1>

  <h2 property="dcterms:issued" datatype="xsd:dateTime" content="2014-10-22T22:00:00.000Z" id="w3c-working-draft-23-october-2014"><abbr title="World Wide Web Consortium">W3C</abbr> Working Draft <time class="dt-published" datetime="2014-10-23">23 October 2014</time></h2>
  <dl>

      <dt>This version:</dt>
      <dd><a class="u-url" href="http://www.w3.org/TR/2014/WD-screen-orientation-20141023/">http://www.w3.org/TR/2014/WD-screen-orientation-20141023/</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/screen-orientation/">http://www.w3.org/TR/screen-orientation/</a></dd>


      <dt>Latest editor's draft:</dt>
      <dd><a href="https://w3c.github.io/screen-orientation/">https://w3c.github.io/screen-orientation/</a></dd>






      <dt>Previous version:</dt>
      <dd><a rel="dcterms:replaces" href="http://www.w3.org/TR/2014/WD-screen-orientation-20140220/">http://www.w3.org/TR/2014/WD-screen-orientation-20140220/</a></dd>


    <dt>Editors:</dt>
    <dd class="p-author h-card vcard" rel="bibo:editor" inlist=""><span typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Mounir Lamouri</span>, <a rel="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.google.com/">Google Inc.</a></span>
</dd>
<dd class="p-author h-card vcard" rel="bibo:editor" inlist=""><span typeof="foaf:Person"><span property="foaf:name" class="p-name fn">Marcos Cáceres</span>, <a rel="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://mozilla.com/">Mozilla</a></span>
</dd>





          <dt>Participate:</dt>



                  <dd>
                    <a href="https://github.com/w3c/screen-orientation">
                      We are on Github.
                    </a>
                  </dd>



                  <dd>
                    <a href="https://github.com/w3c/screen-orientation/issues">
                      File a bug.
                    </a>
                  </dd>



                  <dd>
                    <a href="https://github.com/w3c/screen-orientation/commits/gh-pages">
                      Commit history.
                    </a>
                  </dd>



                  <dd>
                    <a href="http://lists.w3.org/Archives/Public/public-webapps/">
                      Mailing list.
                    </a>
                  </dd>






  </dl>





      <p class="copyright">
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> ©
        2014

        <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup>
        (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
        <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>,
        <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>),

        All Rights Reserved.

        <abbr title="World Wide Web Consortium">W3C</abbr> <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
        <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and

          <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a>

        rules apply.
      </p>


  <hr>
</div>
    <section id="abstract" class="introductory" property="dcterms:abstract" datatype="" typeof="bibo:Chapter" resource="#abstract" rel="bibo:Chapter"><h2 role="heading" id="h2_abstract">Abstract</h2>
      <p>
        The <cite>Screen Orientation API</cite> provides the ability to read
        the screen orientation type and angle, to be informed when the screen
        orientation state changes, and be able to lock the screen orientation
        to a specific state.
      </p>
    </section><section id="sotd" class="introductory" typeof="bibo:Chapter" resource="#sotd" rel="bibo:Chapter"><h2 role="heading" id="h2_sotd">Status of This Document</h2>



        <p>
          <em>This section describes the status of this document at the time of its publication.
          Other documents may supersede this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the
          latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
          http://www.w3.org/TR/.</em>
        </p>

      <p>
        This document is still in a work in progress state. You can have a look
        at the <a href="https://github.com/w3c/screen-orientation/issues">opened issues</a>.
        If you see any problem that is not in that list, feel free to discuss
        it in the <a href="http://lists.w3.org/Archives/Public/public-webapps/">mailing list</a>
        or <a href="https://github.com/w3c/screen-orientation/issues/new">file
        an issue</a> .
      </p>

        <p>
          This document was published by the <a href="http://www.w3.org/2008/webapps/">Web Applications Working Group</a> as a Working Draft.

            This document is intended to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.


            If you wish to make comments regarding this document, please send them to
            <a href="mailto:public-webapps@w3.org">public-webapps@w3.org</a>
            (<a href="mailto:public-webapps-request@w3.org?subject=subscribe">subscribe</a>,
            <a href="http://lists.w3.org/Archives/Public/public-webapps/">archives</a>).




            All comments are welcome.

        </p>


          <p>
            Publication as a Working Draft does not imply endorsement by the <abbr title="World Wide Web Consortium">W3C</abbr>
            Membership. This is a draft document and may be updated, replaced or obsoleted by other
            documents at any time. It is inappropriate to cite this document as other than work in
            progress.
          </p>



        <p>

            This document was produced by a group operating under the
            <a id="sotd_patent" about="" rel="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
            Policy</a>.




              <abbr title="World Wide Web Consortium">W3C</abbr> maintains a <a href="http://www.w3.org/2004/01/pp-impl/42538/status" rel="disclosure">public list of any patent
              disclosures</a>

            made in connection with the deliverables of the group; that page also includes
            instructions for disclosing a patent. An individual who has actual knowledge of a patent
            which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
            Claim(s)</a> must disclose the information in accordance with
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.


        </p>

          <p>This document is governed by the <a id="w3c_process_revision" href="http://www.w3.org/2005/10/Process-20051014">14 October 2005 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
          </p>





</section><section id="toc"><h2 class="introductory" role="heading" id="h2_toc">Table of Contents</h2><ul class="toc" role="directory" id="respecContents"><li class="tocline"><a href="#conformance" class="tocxref"><span class="secno">1. </span>Conformance</a></li><li class="tocline"><a href="#dependencies" class="tocxref"><span class="secno">2. </span>
        Dependencies
      </a></li><li class="tocline"><a href="#interface-definitions" class="tocxref"><span class="secno">3. </span>
        Interface definitions
      </a><ul class="toc"><li class="tocline"><a href="#extensions-to-the-screen-interface" class="tocxref"><span class="secno">3.1 </span>
          Extensions to the <span class="formerLink"><code>Screen</code></span> interface
        </a></li><li class="tocline"><a href="#screenorientation-interface" class="tocxref"><span class="secno">3.2 </span>
          <code>ScreenOrientation</code> interface
        </a></li><li class="tocline"><a href="#orientationtype-enum" class="tocxref"><span class="secno">3.3 </span>
          <code>OrientationType</code> enum
        </a></li><li class="tocline"><a href="#orientationlocktype-enum" class="tocxref"><span class="secno">3.4 </span>
          <code>OrientationLockType</code> enum
        </a></li></ul></li><li class="tocline"><a href="#concepts" class="tocxref"><span class="secno">4. </span>
        Concepts
      </a><ul class="toc"><li class="tocline"><a href="#reading-the-screen-orientation" class="tocxref"><span class="secno">4.1 </span>
          Reading the screen orientation
        </a></li><li class="tocline"><a href="#locking-the-screen-orientation" class="tocxref"><span class="secno">4.2 </span>
          Locking the screen orientation
        </a></li><li class="tocline"><a href="#screen-orientation-lock-lifetime" class="tocxref"><span class="secno">4.3 </span>
          Screen orientation lock lifetime
        </a></li><li class="tocline"><a href="#handling-screen-orientation-changes" class="tocxref"><span class="secno">4.4 </span>
          Handling screen orientation changes
        </a></li><li class="tocline"><a href="#default-orientation" class="tocxref"><span class="secno">4.5 </span>
          Default orientation
        </a></li></ul></li><li class="tocline"><a href="#extension-to-the-html-sandboxing-model" class="tocxref"><span class="secno">5. </span>
        Extension to the HTML sandboxing model
      </a></li><li class="tocline"><a href="#interactions-with-other-specifications" class="tocxref"><span class="secno">6. </span>
        Interactions with other specifications
      </a><ul class="toc"><li class="tocline"><a href="#interaction-with-fullscreen-api" class="tocxref"><span class="secno">6.1 </span>
          Interaction with FullScreen API
        </a></li><li class="tocline"><a href="#interaction-with-deviceorientation" class="tocxref"><span class="secno">6.2 </span>
          Interaction with DeviceOrientation
        </a></li><li class="tocline"><a href="#interaction-with-web-application-manifest" class="tocxref"><span class="secno">6.3 </span>
          Interaction with Web Application Manifest
        </a></li><li class="tocline"><a href="#interaction-with-css-device-adaptation" class="tocxref"><span class="secno">6.4 </span>
          Interaction with CSS Device Adaptation
        </a></li></ul></li><li class="tocline"><a href="#examples" class="tocxref"><span class="secno">7. </span>
        Examples
      </a></li><li class="tocline"><a href="#acknowledgments" class="tocxref"><span class="secno">A. </span>
        Acknowledgments
      </a></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">B. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">B.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">B.2 </span>Informative references</a></li></ul></li></ul></section>

    <section id="conformance" typeof="bibo:Chapter" resource="#conformance" rel="bibo:Chapter"><!--OddPage--><h2 role="heading" id="h2_conformance"><span class="secno">1. </span>Conformance</h2>
<p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p>
<p id="respecRFC2119">The key words <em class="rfc2119" title="MAY">MAY</em>, <em class="rfc2119" title="MUST">MUST</em>, and <em class="rfc2119" title="SHOULD">SHOULD</em> are
  to be interpreted as described in [<cite><a class="bibref" href="#bib-RFC2119">RFC2119</a></cite>].
</p>

      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn id="dfn-user-agent">user agent</dfn> that implements the interfaces that
        it contains.
      </p>
      <p>
        Implementations that use ECMAScript to expose the APIs defined in this
        specification <em class="rfc2119" title="MUST">MUST</em> implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" href="#bib-WEBIDL">WEBIDL</a></cite>].
      </p>
    </section>
    <section id="dependencies">
      <!--OddPage--><h2 role="heading" id="h2_dependencies"><span class="secno">2. </span>
        Dependencies
      </h2>
      <p>
        The following concepts and interfaces are defined in [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>]:
      </p>
      <ul>
        <li>
          <dfn id="dfn-queue-a-task"><a href="http://www.w3.org/TR/html5/webappapis.html#queue-a-task">queue a
          task</a></dfn>
        </li>
        <li>
          <dfn id="dfn-fire-a-simple-event"><a href="http://www.w3.org/TR/html5/webappapis.html#fire-a-simple-event">fire
          a simple event</a></dfn>
        </li>
        <li>
          <dfn id="dfn-event-handler"><a href="http://www.w3.org/TR/html5/webappapis.html#event-handlers">event
          handler</a></dfn>
        </li>
        <li>
          <dfn id="dfn-event-handler-event-type"><a href="http://www.w3.org/TR/html5/webappapis.html#event-handler-event-type">event
          handler event type</a></dfn>
        </li>
        <li>
          <code><dfn id="dfn-window"><a href="http://www.w3.org/TR/html5/browsers.html#window">Window</a></dfn></code>
        </li>
        <li>
          <code><dfn id="dfn-document"><a href="http://www.w3.org/TR/html5/dom.html#document">Document</a></dfn></code>
        </li>
        <li>
          <dfn id="dfn-browsing-context"><a href="http://www.w3.org/TR/html5/browsers.html#browsing-context">browsing
          context</a></dfn>
        </li>
        <li>
          <dfn id="dfn-top-level-browsing-context"><a href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">
          top-level browsing context</a></dfn>
        </li>
        <li>browsing context's <dfn id="dfn-active-document"><a href="http://www.w3.org/TR/html5/browsers.html#active-document">active
        document</a></dfn>
        </li>
        <li>
          <dfn id="dfn-navigated"><a href="http://www.w3.org/TR/html5/browsers.html#navigate">navigated</a></dfn>
          browsing context
        </li>
        <li>
          <dfn id="dfn-active-sandboxing-flag-set"><a href="http://www.w3.org/TR/html5/browsers.html#active-sandboxing-flag-set">
          active sandboxing flag set</a></dfn>
        </li>
        <li>
          <dfn id="dfn-responsible-document"><a href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible
          document</a></dfn>
        </li>
        <li>
          <dfn id="dfn-list-of-the-descendant-browsing-contexts"><a href="http://www.w3.org/TR/html5/browsers.html#list-of-the-descendant-browsing-contexts">
          list of the descendant browsing contexts</a></dfn>
        </li>
      </ul>
      <p>
        <a href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-promise-objects">
        <dfn id="dfn-promise">Promise</dfn> objects</a> are defined in [<cite><a class="bibref" href="#bib-ECMASCRIPT">ECMASCRIPT</a></cite>].
      </p>
      <p>
        <dfn id="dfn-fullscreen-element-stack"><a href="https://fullscreen.spec.whatwg.org/#fullscreen-element-stack">fullscreen
        element stack</a></dfn> is defined in [<cite><a class="bibref" href="#bib-FULLSCREEN">FULLSCREEN</a></cite>].
      </p>
      <p>
        <dfn id="dfn-now-visible-algorithm"><a href="http://www.w3.org/TR/page-visibility/#now-visible-algorithm">now
        visible algorithm</a></dfn> is defined in [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>].
      </p>
    </section>
    <section id="interface-definitions">
      <!--OddPage--><h2 role="heading" id="h2_interface-definitions"><span class="secno">3. </span>
        Interface definitions
      </h2>
      <section id="extensions-to-the-screen-interface">
        <h3 role="heading" id="h3_extensions-to-the-screen-interface"><span class="secno">3.1 </span>
          Extensions to the <a href="#idl-def-Screen" class="idlType"><code>Screen</code></a> interface
        </h3>The CSSOM View specification defines a <code>Screen</code>
        interface [<cite><a class="bibref" href="#bib-CSSOM-VIEW">CSSOM-VIEW</a></cite>], which this specification extends:
        <pre class="idl"><span class="idlInterface" id="idl-def-Screen">partial interface <span class="idlInterfaceID">Screen</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a href="#idl-def-ScreenOrientation" class="idlType"><code>ScreenOrientation</code></a></span> <span class="idlAttrName"><a href="#widl-Screen-orientation">orientation</a></span>;</span>
};</span></pre>
        <p>
          The <code><dfn id="widl-Screen-orientation">orientation</dfn></code>
          object is an instance of <a href="#idl-def-ScreenOrientation" class="idlType"><code>ScreenOrientation</code></a>, which is described
          below.
        </p>
      </section>
      <section id="screenorientation-interface">
        <h3 role="heading" id="h3_screenorientation-interface"><span class="secno">3.2 </span>
          <code>ScreenOrientation</code> interface
        </h3>
        <pre class="idl"><span class="idlInterface" id="idl-def-ScreenOrientation">interface <span class="idlInterfaceID">ScreenOrientation</span> : <span class="idlSuperclass">EventTarget</span> {
<span class="idlMethod">    <span class="idlMethType">Promise&lt;void&gt;</span> <span class="idlMethName"><a href="#widl-ScreenOrientation-lock-Promise-void--OrientationLockType-orientation">lock</a></span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-OrientationLockType" class="idlType"><code>OrientationLockType</code></a></span> <span class="idlParamName">orientation</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType">void</span>          <span class="idlMethName"><a href="#widl-ScreenOrientation-unlock-void">unlock</a></span> ();</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a href="#idl-def-OrientationType" class="idlType"><code>OrientationType</code></a></span> <span class="idlAttrName"><a href="#widl-ScreenOrientation-type">type</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType">unsigned short</span>  <span class="idlAttrName"><a href="#widl-ScreenOrientation-angle">angle</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType">EventHandler</span>    <span class="idlAttrName"><a href="#widl-ScreenOrientation-onchange">onchange</a></span>;</span>
};</span></pre>
        <p>
          When the <code><dfn id="widl-ScreenOrientation-lock-Promise-void--OrientationLockType-orientation">
          lock()</dfn></code> method is invoked, the <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> run
          the <a href="#dfn-apply-an-orientation-lock" class="internalDFN">apply an orientation lock</a> steps to the <a href="#dfn-responsible-document" class="internalDFN">responsible
          document</a> using <var>orientation</var>.
        </p>
        <p>
          When the <code><dfn id="widl-ScreenOrientation-unlock-void">unlock()</dfn></code> method is
          invoked, the <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> run the steps to <a href="#dfn-lock-the-orientation" class="internalDFN">lock the
          orientation</a> of the <a href="#dfn-responsible-document" class="internalDFN">responsible document</a> to the
          <a href="#dfn-responsible-document" class="internalDFN">responsible document</a>'s <a href="#dfn-default-orientation" class="internalDFN">default orientation</a>.
        </p>
        <div class="note"><div class="note-title" aria-level="2" role="heading" id="h_note_1"><span>Note</span></div><p class="">
          <a href="#widl-ScreenOrientation-unlock-void" class="internalDFN">unlock()</a> does not return a Promise because it is equivalent to
          locking to the <a href="#dfn-default-orientation" class="internalDFN">default orientation</a> which might or might not be
          known by the <a href="#dfn-user-agent" class="internalDFN">user agent</a>. Hence, the <a href="#dfn-user-agent" class="internalDFN">user agent</a> can not
          predict what the new orientation is going to be and even if it is
          going to change at all.
        </p></div>
        <p>
          When getting the <code><dfn id="widl-ScreenOrientation-type">type</dfn></code> attribute, the
          <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-responsible-document" class="internalDFN">responsible document</a>'s
          <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a>.
        </p>
        <p>
          When getting the <code><dfn id="widl-ScreenOrientation-angle">angle</dfn></code> attribute, the
          <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> return the <a href="#dfn-responsible-document" class="internalDFN">responsible document</a>'s
          <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a>.
        </p>
        <p>
          The <code><dfn id="widl-ScreenOrientation-onchange">onchange</dfn></code> attribute is
          an <a href="#dfn-event-handler" class="internalDFN">event handler</a> whose corresponding <a href="#dfn-event-handler-event-type" class="internalDFN">event handler event
          type</a> is <code>change</code>.
        </p>
      </section>
      <section id="orientationtype-enum">
        <h3 role="heading" id="h3_orientationtype-enum"><span class="secno">3.3 </span>
          <code>OrientationType</code> enum
        </h3>
        <pre class="idl"><span class="idlEnum" id="idl-def-OrientationType">enum <span class="idlEnumID">OrientationType</span> {
    "<a href="#idl-def-OrientationType.portrait-primary" class="idlEnumItem">portrait-primary</a>",
    "<a href="#idl-def-OrientationType.portrait-secondary" class="idlEnumItem">portrait-secondary</a>",
    "<a href="#idl-def-OrientationType.landscape-primary" class="idlEnumItem">landscape-primary</a>",
    "<a href="#idl-def-OrientationType.landscape-secondary" class="idlEnumItem">landscape-secondary</a>"
};</span></pre>
      </section>
      <section id="orientationlocktype-enum">
        <h3 role="heading" id="h3_orientationlocktype-enum"><span class="secno">3.4 </span>
          <code>OrientationLockType</code> enum
        </h3>
        <pre class="idl"><span class="idlEnum" id="idl-def-OrientationLockType">enum <span class="idlEnumID">OrientationLockType</span> {
    "<a href="#idl-def-OrientationLockType.any" class="idlEnumItem">any</a>",
    "<a href="#idl-def-OrientationLockType.natural" class="idlEnumItem">natural</a>",
    "<a href="#idl-def-OrientationLockType.landscape" class="idlEnumItem">landscape</a>",
    "<a href="#idl-def-OrientationLockType.portrait" class="idlEnumItem">portrait</a>",
    "<a href="#idl-def-OrientationLockType.portrait-primary" class="idlEnumItem">portrait-primary</a>",
    "<a href="#idl-def-OrientationLockType.portrait-secondary" class="idlEnumItem">portrait-secondary</a>",
    "<a href="#idl-def-OrientationLockType.landscape-primary" class="idlEnumItem">landscape-primary</a>",
    "<a href="#idl-def-OrientationLockType.landscape-secondary" class="idlEnumItem">landscape-secondary</a>"
};</span></pre>
      </section>
    </section>
    <section id="concepts">
      <!--OddPage--><h2 role="heading" id="h2_concepts"><span class="secno">4. </span>
        Concepts
      </h2>
      <p>
        The term <dfn id="dfn-screen">screen</dfn> is equivalent to the screen of the output
        device associated to the <a href="#dfn-window" class="internalDFN">Window</a>, as per [<cite><a class="bibref" href="#bib-CSSOM-VIEW">CSSOM-VIEW</a></cite>].
      </p>
      <p>
        Algorithms defined in this specification assume that for each
        <a href="#dfn-document" class="internalDFN">document</a> there is a <dfn id="dfn-pending-promise">pending promise</dfn>, which is
        initially set to <code>null</code>, which is a <a href="#dfn-promise" class="internalDFN">Promise</a> object
        whose associated operation is to lock the screen orientation.
      </p>
      <p>
        When <a title="queue a task" href="#dfn-queue-a-task" class="internalDFN">queuing a task</a>, the <dfn id="dfn-screen-orientation-task-source">screen
        orientation task source</dfn> is used.
      </p>
      <section id="reading-the-screen-orientation">
        <h3 role="heading" id="h3_reading-the-screen-orientation"><span class="secno">4.1 </span>
          Reading the screen orientation
        </h3>
        <p>
          All <a title="document" href="#dfn-document" class="internalDFN">documents</a> have a <dfn id="dfn-current-orientation-type">current orientation
          type</dfn> and a <dfn id="dfn-current-orientation-angle">current orientation angle</dfn>. Both of them
          <em class="rfc2119" title="SHOULD">SHOULD</em> be initialized when the <a href="#dfn-document" class="internalDFN">document</a> is created, otherwise
          they <em class="rfc2119" title="MUST">MUST</em> be initialized the first time they are accessed and before
          their value is read. The <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> <a href="#dfn-update-the-orientation-information" class="internalDFN">update the
          orientation information</a> of the <a href="#dfn-document" class="internalDFN">document</a> to initialize
          them.
        </p>
        <p>
          For a given <a href="#dfn-document" class="internalDFN">document</a>, the <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> and
          the <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a> are strongly linked in the sense
          that for any given type, there will be a specific angle associated.
          However, the <a href="#dfn-user-agent" class="internalDFN">user agent</a> can associate <code>*-primary</code>
          and <code>*-secondary</code> values at will. For example, if
          <code>90</code> is associated with <code>landscape-primary</code> and
          <code>270</code> with <code>landscape-secondary</code> for one
          <a href="#dfn-document" class="internalDFN">document</a> , another one <em class="rfc2119" title="MAY">MAY</em> get the opposite relationship.
        </p>
        <div class="practice">
          <span class="practicelab" id="bp-orientation.angle-and-orientation.type-relationship">Best Practice 1: orientation.angle and orientation.type
          relationship</span>
          <p class="practicedesc">
            Never assume any cross-devices relationship between the screen
            orientation type and the screen orientation angle. Any assumption
            would be wrong given that a device might have <code>90</code> and
            <code>270</code> as the angles for <code>landscape</code> types but
            another device will have <code>0</code> and <code>180</code>,
            depending on its natural orientation. Instead, it is recommended to
            check during runtime the relationship between angle and type.
          </p>
        </div>
        <p>
          The steps to <dfn id="dfn-update-the-orientation-information">update the orientation information</dfn> of a
          <a href="#dfn-document" class="internalDFN">document</a> are as follows:
        </p>
        <ol>
          <li>If the screen width is greater than the screen height, set the
          <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> to <code><dfn id="idl-def-OrientationType.landscape-primary">landscape-primary</dfn></code>
          or <code><dfn id="idl-def-OrientationType.landscape-secondary">landscape-secondary</dfn></code>.
          </li>
          <li>Otherwise, if the screen width is less than or equal to the
          screen height, set the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation
          type</a> to <code><dfn id="idl-def-OrientationType.portrait-primary">
            portrait-primary</dfn></code> or <code><dfn id="idl-def-OrientationType.portrait-secondary">portrait-secondary</dfn></code>.
          </li>
          <li>Set the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a> to the
          clockwise angle in degrees between the orientation of the viewport as
          it is drawn and the natural orientation of the device (i.e., the top
          of the physical screen). This is the opposite of the physical
          rotation. In other words, if you turn a device 90 degrees on the
          right, screen orientation angle would be 270 degrees.
          </li>
        </ol>
        <p>
          The decision whether the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation
          type</a> should be set to <code>*-primary</code> or
          <code>*-secondary</code> is up to the <a href="#dfn-user-agent" class="internalDFN">user agent</a>. For example,
          it can be based on the device preferred angles, the user's preferred
          orientations or the current orientation when the application starts.
          However, a <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> keep the screen orientation types
          and the screen orientation angles relation consistent for any given
          <a href="#dfn-document" class="internalDFN">document</a>.
        </p>
      </section>
      <section id="locking-the-screen-orientation">
        <h3 role="heading" id="h3_locking-the-screen-orientation"><span class="secno">4.2 </span>
          Locking the screen orientation
        </h3>
        <p>
          The <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MAY">MAY</em> require a <a href="#dfn-document" class="internalDFN">document</a> and its
          associated <a href="#dfn-browsing-context" class="internalDFN">browsing context</a> to meet one or more <dfn id="dfn-security-conditions">security
          conditions</dfn> in order to be able to lock the screen orientation.
          For example, a <a href="#dfn-user-agent" class="internalDFN">user agent</a> might require a <a href="#dfn-document" class="internalDFN">document</a>'s
          <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a> to be fullscreen (see <a href="#interaction-with-fullscreen-api">Interaction with FullScreen
          API</a>) in order to allow an orientation lock.
        </p>
        <p>
          The <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MAY">MAY</em> reject all attempts to lock the screen
          orientation if the platform conventions do not expect applications to
          be able to change the screen orientation. For example, on most
          desktop platforms, applications can not change the screen
          orientation.
        </p>
        <p>
          If the <a href="#dfn-user-agent" class="internalDFN">user agent</a> supports locking the screen orientation, it
          <em class="rfc2119" title="MUST">MUST</em> allow the screen to be locked to all of the states of the
          <a href="#idl-def-OrientationLockType" class="idlType"><code>OrientationLockType</code></a> enum.
        </p>
        <p>
          A <a href="#dfn-document" class="internalDFN">document</a>'s <dfn id="dfn-orientation-lock">orientation lock</dfn> is the orientation
          lock that applies on its <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a>. An
          orientation lock is an unordered set of <a href="#idl-def-OrientationType" class="idlType"><code>OrientationType</code></a>.
        </p>
        <p>
          The steps to <dfn id="dfn-apply-an-orientation-lock">apply an orientation lock</dfn> to a
          <a href="#dfn-document" class="internalDFN">document</a> using <var>orientation</var> are as follows:
        </p>
        <ol>
          <li>If the <a href="#dfn-user-agent" class="internalDFN">user agent</a> does not support locking the screen
          orientation, return a <a href="#dfn-promise" class="internalDFN">Promise</a> rejected with a
          <code>DOMException</code> whose name is
          <code>NotSupportedError</code> and abort these steps.
          </li>
          <li>The following sub-steps <em class="rfc2119" title="MAY">MAY</em> be run asynchronously for performance
          reasons, for example, if the <a href="#dfn-user-agent" class="internalDFN">user agent</a> has <a title="browsing context" href="#dfn-browsing-context" class="internalDFN">browsing contexts</a> living in different
          processes:
            <ol>
              <li>Let <var>browsing contexts</var> be the <a href="#dfn-list-of-the-descendant-browsing-contexts" class="internalDFN">list of the
              descendant browsing contexts</a> of the <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing
              context</a>'s <a href="#dfn-document" class="internalDFN">document</a>.
              </li>
              <li>If one of the <var>browsing contexts</var>'s
              <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> is not
              <code>null</code>:
                <ol>
                  <li>Let <var>doc</var> be the <a href="#dfn-document" class="internalDFN">document</a> which has a not
                  <code>null</code> <a href="#dfn-pending-promise" class="internalDFN">pending promise</a>.
                  </li>
                  <li>Reject <var>doc</var>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> with
                  <code>DOMException</code> whose name is
                  <code>AbortError</code>.
                  </li>
                  <li>Set <var>doc</var>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> to
                  <code>null</code> .
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>If the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-active-sandboxing-flag-set" class="internalDFN">active sandboxing flag set</a> has
          the <a href="#dfn-sandboxed-orientation-lock-browsing-context-flag" class="internalDFN">sandboxed orientation lock browsing context flag</a> set, or
          <a href="#dfn-user-agent" class="internalDFN">user agent</a> doesn't meet the <a href="#dfn-security-conditions" class="internalDFN">security conditions</a> to
          perform an orientation change, return a <a href="#dfn-promise" class="internalDFN">Promise</a> rejected with
          a <code>DOMException</code> whose name is <code>SecurityError</code>
          and abort these steps.
          </li>
          <li>Let <var>orientations</var> be an empty list.
          </li>
          <li>Depending on <var>orientation</var> value, do the following:
            <dl>
              <dt>
                <code><dfn id="idl-def-OrientationLockType.portrait-primary">portrait-primary</dfn></code>
                or <code><dfn id="idl-def-OrientationLockType.portrait-secondary">portrait-secondary</dfn></code>
                or <code><dfn id="idl-def-OrientationLockType.landscape-primary">landscape-primary</dfn></code>
                or <code><dfn id="idl-def-OrientationLockType.landscape-secondary">landscape-secondary</dfn></code>
              </dt>
              <dd>
                Append <var>orientation</var> to <var>orientations</var>.
              </dd>
              <dt>
                <code><dfn id="idl-def-OrientationLockType.landscape">landscape</dfn></code>
              </dt>
              <dd>
                Depending on platform convention, append
                <code>landscape-primary</code>, or
                <code>landscape-secondary</code>, or both to
                <var>orientations</var>.
              </dd>
              <dt>
                <code><dfn id="idl-def-OrientationLockType.portrait">portrait</dfn></code>
              </dt>
              <dd>
                Depending on platform convention, append
                <code>portrait-primary</code>, or
                <code>portrait-secondary</code>, or both to
                <var>orientations</var>.
              </dd>
              <dt>
                <code><dfn id="idl-def-OrientationLockType.natural">natural</dfn></code>
              </dt>
              <dd>
                Append <code>portrait-primary</code>,
                <code>portrait-secondary</code>, <code>landscape-primary</code>
                or <code>landscape-secondary</code> to <var>orientations</var>
                such as the associated screen orientation angle is 0.
              </dd>
              <dt>
                <code><dfn id="idl-def-OrientationLockType.any">any</dfn></code>
              </dt>
              <dd>
                Append <code>portrait-primary</code>,
                <code>portrait-secondary</code>, <code>landscape-primary</code>
                and <code>landscape-secondary</code> to
                <var>orientations</var>.
              </dd>
            </dl>
          </li>
          <li>Set <var>pending-promise</var> to be a newly-created
          <a href="#dfn-promise" class="internalDFN">Promise</a>.
          </li>
          <li>Return <var>pending-promise</var> and continue asynchronously.
          </li>
          <li>
            <a href="#dfn-lock-the-orientation" class="internalDFN">Lock the orientation</a> of the <a href="#dfn-document" class="internalDFN">document</a> to
            <var>orientations</var>.
          </li>
          <li>If locking the orientation did not result in a change of
          orientation, <a href="#dfn-queue-a-task" class="internalDFN">queue a task</a> to resolve
          <var>pending-promise</var> with <code>undefined</code> and set <var>
            pending-promise</var> to <code>null</code>.
          </li>
        </ol>
        <div class="note"><div class="note-title" aria-level="2" role="heading" id="h_note_2"><span>Note</span></div><div class="">
          If locking the orientation results in an orientation change, the
          promise will be resolved when the orientation will change as
          described in the <a href="#handling-screen-orientation-changes">Handling screen orientation
          changes</a> section.
        </div></div>
        <p>
          When the <a href="#dfn-user-agent" class="internalDFN">user agent</a> has to <dfn id="dfn-lock-the-orientation">lock the orientation</dfn> of
          a <a href="#dfn-document" class="internalDFN">document</a> to <var>orientations</var>, it <em class="rfc2119" title="MUST">MUST</em> run the
          following steps:
        </p>
        <ol>
          <li>Set the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a> to
          <var>orientations</var>.
          </li>
          <li>If the <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> is not the
          <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a>, abort these steps.
          </li>
          <li>If the <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> value is equal to
          <var>orientations</var> value, abort these steps.
          </li>
          <li>If <var>orientations</var> contains only one value, run the
          following sub-steps:
            <ol>
              <li>Let <var>orientation</var> be the value contained in
              <var>orientations</var>.
              </li>
              <li>Change how the viewport is drawn so that the
              <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> will be equal
              to <var>orientation</var>.
              </li>
              <li>After the change has happened, prevent the <a href="#dfn-document" class="internalDFN">document</a>'s
              <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a>'s screen orientation from
              changing until those steps are run again.
              </li>
              <li>Abort these steps.
              </li>
            </ol>
          </li>
          <li>If the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> is not
          part of <var>orientations</var>, change how the viewport is drawn
          such as the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> will be
          equal to one of <var>orientations</var>' values.
          </li>
          <li>Otherwise, depending on platform conventions, change how the
          viewport is drawn in order to make it match another screen
          orientation type. However, it has to be part of
          <var>orientations</var>.
          </li>
          <li>Allow the user to change the screen orientation to any value part
          of <var>orientations</var> and only those values until those steps
          are run again. The method to define the current screen orientation
          has to match the platform conventions.
          </li>
        </ol>
      </section>
      <section id="screen-orientation-lock-lifetime">
        <h3 role="heading" id="h3_screen-orientation-lock-lifetime"><span class="secno">4.3 </span>
          Screen orientation lock lifetime
        </h3>
        <p>
          To determine the <dfn id="dfn-active-orientation-lock">active orientation lock</dfn>, the <a href="#dfn-user-agent" class="internalDFN">user
          agent</a> <em class="rfc2119" title="MUST">MUST</em> run the following steps:
        </p>
        <ol>
          <li>If there is only one <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a> with a <a href="#dfn-document" class="internalDFN">
            document</a> that is visible per [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>], the
            <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> is the <a href="#dfn-document" class="internalDFN">document</a>'s
            <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a>.
          </li>
          <li>Otherwise, if there are more than one <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing
          context</a> with a <a href="#dfn-document" class="internalDFN">document</a> that is visible per
          [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>] but only one of those <a href="#dfn-document" class="internalDFN">document</a>s is
          focused, the <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> is the focused
          <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a>.
          </li>
          <li>Otherwise, the <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> <em class="rfc2119" title="SHOULD">SHOULD</em> be the
          latest focused <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a>, unless
          stated otherwise by the platform conventions.
          </li>
        </ol>
        <p>
          Whenever the <a href="#dfn-active-orientation-lock" class="internalDFN">active orientation lock</a> changes, the <a href="#dfn-user-agent" class="internalDFN">user
          agent</a> <em class="rfc2119" title="MUST">MUST</em> run the steps to <a href="#dfn-lock-the-orientation" class="internalDFN">lock the orientation</a> of the
          <a href="#dfn-document" class="internalDFN">document</a> to the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-orientation-lock" class="internalDFN">orientation lock</a>.
        </p>
        <p>
          Whenever a <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a> is <a href="#dfn-navigated" class="internalDFN">navigated</a>, the
          <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> <a href="#dfn-lock-the-orientation" class="internalDFN">lock the orientation</a> of the
          <a href="#dfn-document" class="internalDFN">document</a> to the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-default-orientation" class="internalDFN">default orientation</a>.
        </p>
      </section>
      <section id="handling-screen-orientation-changes">
        <h3 role="heading" id="h3_handling-screen-orientation-changes"><span class="secno">4.4 </span>
          Handling screen orientation changes
        </h3>
        <p>
          Whenever the viewport is drawn at a different angle compared to the
          device's natural orientation, the <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em>
          asynchronously run the following steps:
        </p>
        <ol>
          <li>Let <var>browsing contexts</var> be the <a href="#dfn-list-of-the-descendant-browsing-contexts" class="internalDFN">list of the descendant
          browsing contexts</a> of the <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a>'s <a href="#dfn-document" class="internalDFN">
            document</a>.
          </li>
          <li>For each <a href="#dfn-browsing-context" class="internalDFN">browsing context</a> in <var>browsing contexts</var>,
          run the following sub-steps:
            <ol>
              <li>Let <var>doc</var> be the <a href="#dfn-browsing-context" class="internalDFN">browsing context</a>'s <a href="#dfn-active-document" class="internalDFN">active
              document</a>.
              </li>
              <li>If <var>doc</var> is not visible per [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>],
              abort these steps.
              </li>
              <li>
                <a href="#dfn-update-the-orientation-information" class="internalDFN">Update the orientation information</a> of <var>doc</var>.
              </li>
              <li>If <var>doc</var>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> is not
              <code>null</code>:
                <ol>
                  <li>Resolve <var>doc</var>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> with
                  <code>undefined</code>.
                  </li>
                  <li>Set <var>doc</var>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> to
                  <code>null</code> .
                  </li>
                </ol>
              </li>
              <li>
                <a href="#dfn-queue-a-task" class="internalDFN">Queue a task</a> to <a href="#dfn-fire-a-simple-event" class="internalDFN">fire a simple event</a> named
                <code>change</code> at <var>doc</var> 's <a href="#widl-Screen-orientation"><code>screen.orientation</code></a>
                object.
              </li>
            </ol>
          </li>
        </ol>
        <p>
          Whenever a <a href="#dfn-document" class="internalDFN">document</a> becomes visible per [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>],
          in other words after the <a href="#dfn-now-visible-algorithm" class="internalDFN">now visible algorithm</a> is run, the
          <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> asynchronously run the following steps:
        </p>
        <ol>
          <li>Let <var>type</var> and <var>angle</var> be respectively the <a href="#dfn-document" class="internalDFN">
            document</a>'s <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> and <a href="#dfn-current-orientation-angle" class="internalDFN">current
            orientation angle</a>.
          </li>
          <li>
            <a href="#dfn-update-the-orientation-information" class="internalDFN">Update the orientation information</a> of the <a href="#dfn-document" class="internalDFN">document</a>.
          </li>
          <li>If <var>type</var> is different from the <a href="#dfn-document" class="internalDFN">document</a>'s
          <a href="#dfn-current-orientation-type" class="internalDFN">current orientation type</a> or <var>angle</var> from the
          <a href="#dfn-document" class="internalDFN">document</a> 's <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a>, run the
          following sub-steps:
            <ol>
              <li>If the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> is not <code>
                null</code>:
                <ol>
                  <li>Resolve the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> with
                  <code>undefined</code>.
                  </li>
                  <li>Set the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-pending-promise" class="internalDFN">pending promise</a> to
                  <code>null</code>.
                  </li>
                </ol>
              </li>
              <li>
                <a href="#dfn-queue-a-task" class="internalDFN">Queue a task</a> to <a href="#dfn-fire-a-simple-event" class="internalDFN">fire a simple event</a> named
                <code>change</code> at the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#widl-Screen-orientation"><code>screen.orientation</code></a>
                object.
              </li>
            </ol>
          </li>
        </ol>
        <div class="note"><div class="note-title" aria-level="2" role="heading" id="h_note_3"><span>Note</span></div><div class="">
          <p>
            Developers need to be aware that a <a href="#widl-Screen-orientation"><code>screen.orientation</code></a>
            object from a <a href="#dfn-document" class="internalDFN">document</a> that is not visible, as per
            [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>], will not receive an orientation change event.
            This is to prevent unnecessary changes to layout, etc. in the
            non-visible web application.
          </p>
        </div></div>
        <div class="issue"><div class="issue-title" aria-level="2" role="heading" id="h_issue_1"><span>Issue 1</span></div><div class="">
          This section could be improved if the [<cite><a class="bibref" href="#bib-PAGE-VISIBILITY">PAGE-VISIBILITY</a></cite>]
          specification had a hook for when the document becomes visible and
          hidden. <a href="https://github.com/w3c/screen-orientation/issues/77">issue 77</a>.
        </div></div>
        <div class="issue"><div class="issue-title" aria-level="2" role="heading" id="h_issue_2"><span>Issue 2</span></div><div class="">
          This section could use the <a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26440">animation
          frame task</a>a if and when it is ready. <a href="https://github.com/w3c/screen-orientation/issues/40">issue 40</a>.
        </div></div>
      </section>
      <section id="default-orientation">
        <h3 role="heading" id="h3_default-orientation"><span class="secno">4.5 </span>
          Default orientation
        </h3>
        <p>
          A <a href="#dfn-document" class="internalDFN">document</a>'s <dfn id="dfn-default-orientation">default orientation</dfn> is the set of
          orientations to which the screen orientation is locked when it is not
          explicitly locked by this API or any other means.
        </p>
        <p>
          For the perspective of a <a href="#dfn-document" class="internalDFN">document</a>, locking to the <a href="#dfn-default-orientation" class="internalDFN">default
          orientation</a> is equivalent to unlocking because it means that it
          no longer has a lock applied. However, it does not mean that the
          <a href="#dfn-default-orientation" class="internalDFN">default orientation</a> has to be <code>any</code>.
        </p>
      </section>
    </section>
    <section id="extension-to-the-html-sandboxing-model">
      <!--OddPage--><h2 role="heading" id="h2_extension-to-the-html-sandboxing-model"><span class="secno">5. </span>
        Extension to the HTML sandboxing model
      </h2>
      <div class="issue"><div class="issue-title" aria-level="1" role="heading" id="h_issue_3"><span>Issue 3</span></div><div class="">
        This section is monkey patching the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] specification. It is
        meant to be merged into the [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] specification as soon as this
        document is stable enough. See <a href="https://github.com/w3c/screen-orientation/issues/69">issue 69</a>.
      </div></div>
      <p>
        The [<cite><a class="bibref" href="#bib-HTML">HTML</a></cite>] specification defines a <a href="http://www.w3.org/TR/html5/browsers.html#sandboxing-flag-set">sandboxing
        flag set</a> which is extended with this value:
      </p>
      <dl>
        <dt>
          The <dfn id="dfn-sandboxed-orientation-lock-browsing-context-flag">sandboxed orientation lock browsing context flag</dfn>
        </dt>
        <dd>
          This flag disables the ability to lock the screen orientation.
        </dd>
      </dl>
      <p>
        The algorithm to <a href="http://www.w3.org/TR/html5/browsers.html#parse-a-sandboxing-directive">
        parse a sandboxing directive</a> is also extended in step 3 such that:
      </p>
      <ul>
        <li>The <a href="#dfn-sandboxed-orientation-lock-browsing-context-flag" class="internalDFN">sandboxed orientation lock browsing context flag</a>, unless
        <var>tokens</var> contains the <code>allow-orientation-lock</code>
        keyword.
        </li>
      </ul>
      <p>
        Finally, the <a href="http://www.w3.org/TR/html5/embedded-content-0.html#the-iframe-element">
        iframe</a>'s <a href="http://www.w3.org/TR/html5/embedded-content-0.html#attr-iframe-sandbox">
        sandbox</a> attribute <em class="rfc2119" title="MUST">MUST</em> add <code>allow-orientation-lock</code>
        amongst its allowed values.
      </p>
    </section>
    <section id="interactions-with-other-specifications">
      <!--OddPage--><h2 role="heading" id="h2_interactions-with-other-specifications"><span class="secno">6. </span>
        Interactions with other specifications
      </h2>
      <p>
        This section explains how this specification interacts with other
        related specifications of the platform.
      </p>
      <section id="interaction-with-fullscreen-api">
        <h3 role="heading" id="h3_interaction-with-fullscreen-api"><span class="secno">6.1 </span>
          Interaction with FullScreen API
        </h3>
        <p>
          As a <a title="security conditions" href="#dfn-security-conditions" class="internalDFN">security condition</a>, a user
          agent <em class="rfc2119" title="MAY">MAY</em> restrict locking the screen orientation exclusively to when
          the <a href="#dfn-top-level-browsing-context" class="internalDFN">top-level browsing context</a>'s <a href="#dfn-document" class="internalDFN">document</a>'s
          <a href="#dfn-fullscreen-element-stack" class="internalDFN">fullscreen element stack</a> is not empty. When that security
          condition applies, whenever the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-fullscreen-element-stack" class="internalDFN">fullscreen
          element stack</a> is empty and a screen orientation lock is applied,
          the <a href="#dfn-user-agent" class="internalDFN">user agent</a> <em class="rfc2119" title="MUST">MUST</em> <a href="#dfn-lock-the-orientation" class="internalDFN">lock the orientation</a> of the
          <a href="#dfn-document" class="internalDFN">document</a> to the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-default-orientation" class="internalDFN">default orientation</a>.
        </p>
        <div class="issue"><div class="issue-title" aria-level="2" role="heading" id="h_issue_4"><span>Issue 4</span></div><div class="">
          This section could be improved if the [<cite><a class="bibref" href="#bib-FULLSCREEN">FULLSCREEN</a></cite>] specification
          had a hook for when the document is no longer fullscreen. See
          <a href="https://github.com/w3c/screen-orientation/issues/62">issue
          62</a> .
        </div></div>
      </section>
      <section class="informative" id="interaction-with-deviceorientation">
        <h3 role="heading" id="h3_interaction-with-deviceorientation"><span class="secno">6.2 </span>
          Interaction with DeviceOrientation
        </h3><p><em>This section is non-normative.</em></p>
        <p>
          The DeviceOrientation specification [<cite><a class="bibref" href="#bib-DEVICE-ORIENTATION">DEVICE-ORIENTATION</a></cite>] defines a
          <code>deviceorientation</code> event that can be used to discover the
          physical orientation of the device. Such event can be used to draw
          things on the screen that could point to a specific direction. A
          basic example being a compass application. Another example would be
          an application giving direction to the user or an augmented reality
          game pointing to an objective.
        </p>
        <p>
          Drawing on the screen in order to point to a physical location
          requires to know the device orientation and the orientation of the
          screen in the device coordinates. Without the APIs defined in this
          specification, a developer has to assume that the <a href="#dfn-document" class="internalDFN">document</a>'s
          <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a> is <code>0</code>. With the help of
          the APIs described in this specification, the developer can <a href="#dfn-apply-an-orientation-lock" class="internalDFN">apply
          an orientation lock</a> to a <a href="#dfn-document" class="internalDFN">document</a> using
          <code>natural</code> to make that assumption a certitude. Otherwise,
          reading the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-current-orientation-angle" class="internalDFN">current orientation angle</a> via
          <code>screen.orientation.angle</code> and listening to the
          <code>change</code> event can help the developer to compensate the
          screen orientation angle.
        </p>
      </section>
      <section class="informative" id="interaction-with-web-application-manifest">
        <h3 role="heading" id="h3_interaction-with-web-application-manifest"><span class="secno">6.3 </span>
          Interaction with Web Application Manifest
        </h3><p><em>This section is non-normative.</em></p>
        <p>
          The Web Application Manifest specification [<cite><a class="bibref" href="#bib-appmanifest">appmanifest</a></cite>] allows web
          applications to set the <a href="#dfn-document" class="internalDFN">document</a>'s <a href="#dfn-default-orientation" class="internalDFN">default orientation</a>.
        </p>
      </section>
      <section class="informative" id="interaction-with-css-device-adaptation">
        <h3 role="heading" id="h3_interaction-with-css-device-adaptation"><span class="secno">6.4 </span>
          Interaction with CSS Device Adaptation
        </h3><p><em>This section is non-normative.</em></p>
        <p>
          The CSS Device Adaptation specification [<cite><a class="bibref" href="#bib-CSS-ADAPTATION">CSS-ADAPTATION</a></cite>] defines,
          independently of this document, a way to lock the screen orientation
          for a web page using CSS.
        </p>
      </section>
    </section>
    <section class="informative" id="examples">
      <!--OddPage--><h2 role="heading" id="h2_examples"><span class="secno">7. </span>
        Examples
      </h2><p><em>This section is non-normative.</em></p>
      <p>
        This example shows the current screen orientation to the console every
        time the screen orientation state changes.
      </p>
      <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example highlight prettyprint prettyprinted"><span class="tag">&lt;script&gt;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> show </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Orientation type is "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">type</span><span class="pun">);</span><span class="pln">
     console</span><span class="pun">.</span><span class="pln">log</span><span class="pun">(</span><span class="str">"Orientation angle is "</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">angle</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">

  screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">"change"</span><span class="pun">,</span><span class="pln"> show</span><span class="pun">);</span><span class="pln">
  window</span><span class="pun">.</span><span class="pln">onload </span><span class="pun">=</span><span class="pln"> show</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span><span class="pln">

</span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">'</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">unlock</span><span class="pun">()</span><span class="atv">'</span><span class="tag">&gt;</span><span class="pln">
  Unlock
</span><span class="tag">&lt;/button&gt;</span><span class="pln">
</span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">"</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">lock</span><span class="pun">(</span><span class="str">'portrait'</span><span class="pun">)</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
  Lock to portrait
</span><span class="tag">&lt;/button&gt;</span><span class="pln">
</span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">"</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">lock</span><span class="pun">(</span><span class="str">'landscape'</span><span class="pun">)</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
  Lock to landscape
</span><span class="tag">&lt;/button&gt;</span></pre></div>
      <p>
        This example waits to be fullscreen before locking the screen
        orientation and starting.
      </p>
      <div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example highlight prettyprint prettyprinted"><span class="tag">&lt;script&gt;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    document</span><span class="pun">.</span><span class="pln">onfullscreenchange </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">lock</span><span class="pun">(</span><span class="str">'natural'</span><span class="pun">).</span><span class="pln">then</span><span class="pun">(</span><span class="pln">startInternal</span><span class="pun">);</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    document</span><span class="pun">.</span><span class="pln">documentElement</span><span class="pun">.</span><span class="pln">requestFullscreen</span><span class="pun">();</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span><span class="pln">
</span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">'</span><span class="pln">start</span><span class="pun">();</span><span class="atv">'</span><span class="tag">&gt;</span><span class="pln">
  Start
</span><span class="tag">&lt;/button&gt;</span></pre></div>
      <p>
        This example asks the user to manually rotate the device if the Screen
        Orientation API is not available.
      </p>
      <div class="example"><div class="example-title"><span>Example 3</span></div><pre class="example highlight prettyprint prettyprinted"><span class="tag">&lt;script&gt;</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> start </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">lock</span><span class="pun">(</span><span class="str">'landscape-primary'</span><span class="pun">).</span><span class="pln">then</span><span class="pun">(</span><span class="pln">
      startInternal</span><span class="pun">,</span><span class="pln">
      </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        alert</span><span class="pun">(</span><span class="str">'To start, rotate your screen to landscape.'</span><span class="pun">);</span><span class="pln">

        </span><span class="kwd">var</span><span class="pln"> orientationChangeHandler </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
          </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(!</span><span class="pln">screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">type</span><span class="pun">.</span><span class="pln">startsWith</span><span class="pun">(</span><span class="str">'landscape'</span><span class="pun">))</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
          </span><span class="pun">}</span><span class="pln">
          screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">removeEventListener</span><span class="pun">(</span><span class="str">'change'</span><span class="pun">,</span><span class="pln"> orientationChangeHandler</span><span class="pun">);</span><span class="pln">
          startInternal</span><span class="pun">();</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">

        screen</span><span class="pun">.</span><span class="pln">orientation</span><span class="pun">.</span><span class="pln">addEventListener</span><span class="pun">(</span><span class="str">'change'</span><span class="pun">,</span><span class="pln"> orientationChangeHandler</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">});</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  window</span><span class="pun">.</span><span class="pln">onload </span><span class="pun">=</span><span class="pln"> start</span><span class="pun">;</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span></pre></div>
    </section>
    <section class="appendix" id="acknowledgments">
      <!--OddPage--><h2 role="heading" id="h2_acknowledgments"><span class="secno">A. </span>
        Acknowledgments
      </h2>
      <p>
        Thanks to Marcos Cáceres, Christophe Dumez, Anne van Kesteren and
        Chundong Wang for their useful comments.
      </p>
      <p>
        Special thanks to Chris Jones and Jonas Sicking for their contributions
        to the initial design of this API.
      </p>
    </section>


<section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" rel="bibo:Chapter"><!--OddPage--><h2 role="heading" id="h2_references"><span class="secno">B. </span>References</h2><section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" rel="bibo:Chapter"><h3 role="heading" id="h3_normative-references"><span class="secno">B.1 </span>Normative references</h3><dl class="bibliography" about=""><dt id="bib-CSSOM-VIEW">[CSSOM-VIEW]</dt><dd rel="dcterms:requires">Simon Pieters; Glenn Adams. <a href="http://www.w3.org/TR/cssom-view/"><cite>CSSOM View Module</cite></a>. 17 December 2013. W3C Working Draft. URL: <a href="http://www.w3.org/TR/cssom-view/">http://www.w3.org/TR/cssom-view/</a>
</dd><dt id="bib-ECMASCRIPT">[ECMASCRIPT]</dt><dd rel="dcterms:requires">Allen Wirfs-Brock. <a href="http://people.mozilla.org/~jorendorff/es6-draft.html"><cite>ECMA-262 ECMAScript Language Specification, Edition 6</cite></a>. Draft. URL: <a href="http://people.mozilla.org/~jorendorff/es6-draft.html">http://people.mozilla.org/~jorendorff/es6-draft.html</a>
</dd><dt id="bib-FULLSCREEN">[FULLSCREEN]</dt><dd rel="dcterms:requires">Anne van Kesteren; Tantek Çelik. <a href="http://www.w3.org/TR/fullscreen/"><cite>Fullscreen</cite></a>. 3 July 2012. W3C Working Draft. URL: <a href="http://www.w3.org/TR/fullscreen/">http://www.w3.org/TR/fullscreen/</a>
</dd><dt id="bib-HTML">[HTML]</dt><dd rel="dcterms:requires">Ian Hickson. <a href="https://html.spec.whatwg.org/"><cite>HTML</cite></a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/">https://html.spec.whatwg.org/</a>
</dd><dt id="bib-PAGE-VISIBILITY">[PAGE-VISIBILITY]</dt><dd rel="dcterms:requires">Jatinder Mann; Arvind Jain. <a href="http://www.w3.org/TR/page-visibility/"><cite>Page Visibility (Second Edition)</cite></a>. 29 October 2013. W3C Recommendation. URL: <a href="http://www.w3.org/TR/page-visibility/">http://www.w3.org/TR/page-visibility/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd rel="dcterms:requires">S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd rel="dcterms:requires">Cameron McCormack. <a href="http://www.w3.org/TR/WebIDL/"><cite>Web IDL</cite></a>. 19 April 2012. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/WebIDL/">http://www.w3.org/TR/WebIDL/</a>
</dd></dl></section><section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" rel="bibo:Chapter"><h3 role="heading" id="h3_informative-references"><span class="secno">B.2 </span>Informative references</h3><dl class="bibliography" about=""><dt id="bib-CSS-ADAPTATION">[CSS-ADAPTATION]</dt><dd rel="dcterms:references">Rune Lillesveen. <a href="http://www.w3.org/TR/css-device-adapt/"><cite>CSS Device Adaptation</cite></a>. 15 September 2011. W3C Working Draft. URL: <a href="http://www.w3.org/TR/css-device-adapt/">http://www.w3.org/TR/css-device-adapt/</a>
</dd><dt id="bib-DEVICE-ORIENTATION">[DEVICE-ORIENTATION]</dt><dd rel="dcterms:references">Stephen Block; Andrei Popescu. <a href="http://www.w3.org/TR/orientation-event/"><cite>DeviceOrientation Event Specification</cite></a>. 1 December 2011. W3C Last Call Working Draft. URL: <a href="http://www.w3.org/TR/orientation-event/">http://www.w3.org/TR/orientation-event/</a>
</dd><dt id="bib-appmanifest">[appmanifest]</dt><dd rel="dcterms:references">Marcos Caceres; Anssi Kostiainen; Kenneth Christiansen. <a href="http://www.w3.org/TR/appmanifest/"><cite>Manifest for web apps and bookmarks</cite></a>. 17 December 2013. W3C Working Draft. URL: <a href="http://www.w3.org/TR/appmanifest/">http://www.w3.org/TR/appmanifest/</a>
</dd></dl></section></section></body></html>
