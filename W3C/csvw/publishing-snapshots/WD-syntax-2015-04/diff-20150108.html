<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document w3p:WD" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta property="dc:language" content="en" lang="">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Model for Tabular Data and Metadata on the Web</title>
    
    
    
    
    
    <style type="text/css">
      .grammar td { font-family: monospace; vertical-align: top; }
      .grammar-literal { color: gray;}
      ol.algorithm {
        counter-reset: numsection;
        list-style-type: none;
      }
      ol.algorithm > li {
        margin: 1em -1em;
        padding-right: 1em;
        text-indent: -1em;
      }
      ol.algorithm > li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") " ";
      }
      ol.algorithm>li p, ol.algorithm>li ul {text-indent: 0em}
      ol.algorithm>li>p:first-child {position: relative; display: inline;}
      pre {overflow: auto;}
      dd a.externalDFN, p a.externalDFN {border-bottom:  1px solid #99c; font-style: italic;}

      dl.typography dt { font-weight: normal}
      dl.typography dd { margin-bottom: 0.3em; margin-top: 0.2em;}
      dl.typography a.externalDFN { border-bottom:  1px solid #99c; font-style: italic; }
   </style>
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><link href="https://www.w3.org/StyleSheets/TR/W3C-WD" rel="stylesheet"><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>

<body id="respecDocument" role="document" class="h-entry">
<div id="respecHeader" role="contentinfo" class="head">
<p>
<a href="http://www.w3.org/">
<img src="https://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width="72">
</a>
</p>
<h1 class="title p-name" id="title" property="dcterms:title">
Model
for
Tabular
Data
and
Metadata
on
the
Web
</h1>
<h2 id="w3c-working-draft-16-april-2015">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Working
Draft
<del class="diff-old">08
January
</del>
<time property="dcterms:issued" class="dt-published" datetime="2015-04-16">
<ins class="diff-chg">16
April
</ins>
2015
</time>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/2015/WD-tabular-data-model-20150108/
</del>
<a class="u-url" href="http://www.w3.org/TR/2015/WD-tabular-data-model-20150416/">
<ins class="diff-chg">http://www.w3.org/TR/2015/WD-tabular-data-model-20150416/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href="http://www.w3.org/TR/tabular-data-model/">
http://www.w3.org/TR/tabular-data-model/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href="http://w3c.github.io/csvw/syntax/">
http://w3c.github.io/csvw/syntax/
</a>
</dd>
<dt>
Previous
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/2014/WD-tabular-data-model-20140710/
</del>
<a rel="dcterms:replaces" href="http://www.w3.org/TR/2015/WD-tabular-data-model-20150108/">
<ins class="diff-chg">http://www.w3.org/TR/2015/WD-tabular-data-model-20150108/
</ins>
</a>
</dd>
<dt>
Editors:
</dt>
<dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="33715">
<span property="rdf:first" typeof="foaf:Person">
<span property="foaf:name" class="p-name fn">
Jeni
Tennison
</span>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://theodi.org/">
Open
Data
Institute
</a>
</span>
<span property="rdf:rest" resource="_:editor1">
</span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="44770">
<span property="rdf:first" typeof="foaf:Person">
<meta property="foaf:name" content="Gregg Kellogg">
<a class="u-url url p-name fn" property="foaf:homepage" href="http://greggkellogg.net/">
Gregg
Kellogg
</a>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://kellogg-assoc.com/">
Kellogg
Associates
</a>
</span>
<span property="rdf:rest" resource="rdf:nil">
</span>
</dd>
<dt>
<ins class="diff-new">Authors:
</ins></dt><dd class="p-author h-card vcard" data-editor-id="33715"><span property="dc:contributor" typeof="foaf:Person"><span property="foaf:name" class="p-name fn"><ins class="diff-new">
Jeni
Tennison
</ins></span>,<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://theodi.org/"><ins class="diff-new">
Open
Data
Institute
</ins></a></span></dd><dd class="p-author h-card vcard" data-editor-id="44770"><span property="dc:contributor" typeof="foaf:Person"><meta property="foaf:name" content="Gregg Kellogg"><a class="u-url url p-name fn" property="foaf:homepage" href="http://greggkellogg.net/"><ins class="diff-new">
Gregg
Kellogg
</ins></a>,<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://kellogg-assoc.com/"><ins class="diff-new">
Kellogg
Associates
</ins></a></span></dd><dd class="p-author h-card vcard" data-editor-id="7382"><span property="dc:contributor" typeof="foaf:Person"><meta property="foaf:name" content="Ivan Herman"><a class="u-url url p-name fn" property="foaf:homepage" href="http://www.w3.org/People/Ivan"><ins class="diff-new">
Ivan
Herman
</ins></a>,<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.w3.org"><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr></a></span></dd><dt>
Repository:
</dt>
<dd>
<a href="https://github.com/w3c/csvw">
We
are
on
Github
</a>
</dd>
<dd>
<a href="https://github.com/w3c/csvw">
File
a
bug
</a>
</dd>
<dt>
Changes:
</dt>
<dd>
<a href="diff-20150108.html">
Diff
to
previous
version
</a>
</dd>
<dd>
<a href="https://github.com/w3c/csvw/commits/gh-pages">
Commit
history
</a>
</dd>
</dl>
<p class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
©
2015
<a href="http://www.w3.org/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
®
</sup>
(
<a href="http://www.csail.mit.edu/">
<abbr title="Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href="http://www.ercim.eu/">
<abbr title="European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="http://www.keio.ac.jp/">
Keio
</a>,
<a href="http://ev.buaa.edu.cn/">
Beihang
</a>
<del class="diff-old">),
All
Rights
Reserved.
</del>
<ins class="diff-chg">).
</ins>
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a href="http://www.w3.org/Consortium/Legal/copyright-documents">
document
use
</a>
rules
apply.
</p>
<hr>
</div>
<section property="dc:abstract" class="introductory" id="abstract">
<h2 resource="#h-abstract" id="h-abstract">
<span property="xhv:role" resource="xhv:heading">
Abstract
</span>
</h2>
<p>
Tabular
data
is
routinely
transferred
on
the
web
<del class="diff-old">as
"CSV",
but
the
definition
of
"CSV"
</del>
in
<del class="diff-old">practice
is
very
loose.
</del>
<ins class="diff-chg">a
variety
of
formats,
including
variants
on
CSV,
tab-delimited
files,
fixed
field
formats,
spreadsheets,
HTML
tables,
and
SQL
dumps.
</ins>
This
document
outlines
a
<del class="diff-old">basic
</del>
data
<del class="diff-old">model
</del>
<ins class="diff-chg">model,
</ins>
or
<del class="diff-old">infoset
</del>
<ins class="diff-chg">infoset,
</ins>
for
tabular
data
and
metadata
about
that
tabular
<del class="diff-old">data.
</del>
<ins class="diff-chg">data
that
can
be
used
as
a
basis
for
validation,
display,
or
creating
other
formats.
</ins>
It
also
contains
some
non-normative
<del class="diff-old">information
about
a
best
practice
syntax
</del>
<ins class="diff-chg">guidance
</ins>
for
<ins class="diff-new">publishing
</ins>
tabular
<del class="diff-old">data,
for
mapping
into
that
</del>
data
<del class="diff-old">model,
to
contribute
to
</del>
<ins class="diff-chg">as
CSV
and
how
that
maps
into
</ins>
the
<del class="diff-old">standardisation
</del>
<ins class="diff-chg">tabular
data
model.
</ins></p><p><ins class="diff-chg">
An
annotated
model
</ins>
of
<del class="diff-old">CSV
syntax
</del>
<ins class="diff-chg">tabular
data
can
be
supplemented
</ins>
by
<del class="diff-old">IETF.
Various
methods
of
locating
</del>
<ins class="diff-chg">separate
</ins>
metadata
<del class="diff-old">are
also
provided.
</del>
<ins class="diff-chg">about
the
table.
This
specification
defines
how
implementations
should
locate
that
metadata,
given
a
file
containing
tabular
data.
The
standard
syntax
for
that
metadata
is
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
Note,
however,
that
applications
may
have
other
means
to
create
annotated
tables,
e.g.,
through
some
application
specific
API-s;
this
model
does
not
depend
on
the
specificities
described
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins>
</p>
</section>
<section id="sotd" class="introductory">
<h2 resource="#h-sotd" id="h-sotd">
<span property="xhv:role" resource="xhv:heading">
Status
of
This
Document
</span>
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
<abbr title="World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href="http://www.w3.org/TR/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
http://www.w3.org/TR/.
</em>
</p>
<p>
The
CSV
on
the
Web
Working
Group
was
chartered
to
produce
a
Recommendation
"Access
methods
for
CSV
Metadata"
as
well
as
Recommendations
for
"Metadata
vocabulary
for
CSV
data"
and
"Mapping
mechanism
to
transforming
CSV
into
various
Formats
(e.g.,
RDF,
JSON,
or
XML)".
This
document
aims
to
primarily
satisfy
the
first
of
those
Recommendations
(see
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.
</del>
<ins class="diff-chg">5.
</ins>
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>
),
though
it
also
specifies
an
underlying
model
<ins class="diff-new">for
tabular
data
</ins>
and
<ins class="diff-new">is
</ins>
therefore
<del class="diff-old">starting
point
</del>
<ins class="diff-chg">a
basis
</ins>
for
the
other
chartered
Recommendations.
</p>
<p>
This
<ins class="diff-new">definition
of
CSV
used
in
this
</ins>
document
is
based
on
IETF's
[
<cite>
<a href="#bib-RFC4180" class="bibref">
RFC4180
</a>
</cite>
]
which
is
an
Informational
RFC.
The
working
group's
expectation
is
that
future
suggestions
to
refine
RFC
4180
will
be
relayed
to
the
IETF
(e.g.
around
<del class="diff-old">I18N
</del>
<ins class="diff-chg">encoding
</ins>
and
<del class="diff-old">multi-part
packaging)
</del>
<ins class="diff-chg">line
endings)
</ins>
and
contribute
to
its
discussions
about
moving
CSV
to
the
Standards
track.
</p>
<p>
Many
<del class="diff-old">"CSV"
</del>
files
<ins class="diff-new">containing
tabular
data
</ins>
embed
metadata,
for
example
in
lines
before
the
header
row
of
<del class="diff-old">the
</del>
<ins class="diff-chg">an
otherwise
standard
</ins>
CSV
document.
This
specification
does
not
define
any
formats
for
embedding
metadata
within
CSV
files,
aside
from
the
<del class="diff-old">names
</del>
<ins class="diff-chg">titles
</ins>
of
columns
in
the
header
<del class="diff-old">row.
</del>
<ins class="diff-chg">row
which
is
defined
in
CSV.
We
would
encourage
groups
that
define
tabular
data
formats
to
also
define
a
mapping
into
the
annotated
tabular
data
model
defined
in
this
document.
</ins>
</p>
<p>
This
document
was
published
by
the
<a href="http://www.w3.org/2013/csvw/">
CSV
on
the
Web
Working
Group
</a>
as
a
Working
Draft.
This
document
is
intended
to
become
a
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Recommendation.
If
you
wish
to
make
comments
regarding
this
document,
please
send
them
to
<a href="mailto:public-csv-wg@w3.org">
public-csv-wg@w3.org
</a>
(
<a href="mailto:public-csv-wg-request@w3.org?subject=subscribe">
subscribe
</a>,
<a href="http://lists.w3.org/Archives/Public/public-csv-wg/">
archives
</a>
).
All
comments
are
welcome.
</p>
<p>
Publication
as
a
Working
Draft
does
not
imply
endorsement
by
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p>
This
document
was
produced
by
a
group
operating
under
the
<a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">
5
February
2004
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
<abbr title="World Wide Web Consortium">
W3C
</abbr>
maintains
a
<a href="http://www.w3.org/2004/01/pp-impl/68238/status" rel="disclosure">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
section
6
of
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="http://www.w3.org/2014/Process-20140801/">
1
August
2014
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<section id="toc">
<h2 resource="#h-toc" id="h-toc" class="introductory">
<span property="xhv:role" resource="xhv:heading">
Table
of
Contents
</span>
</h2>
<ul id="respecContents" role="directory" class="toc">
<li class="tocline">
<a class="tocxref" href="#intro">
<span class="secno">
1.
</span>
Introduction
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#conformance">
<span class="secno">
2.
</span>
<ins class="diff-new">Conformance
</ins></a></li><li class="tocline"><a class="tocxref" href="#typographical-conventions"><span class="secno"><ins class="diff-new">
3.
</ins></span><ins class="diff-new">
Typographical
conventions
</ins></a></li><li class="tocline"><a class="tocxref" href="#model"><span class="secno"><ins class="diff-new">
4.
</ins></span>
Tabular
Data
Models
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#table-groups">
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">4.1
</ins>
</span>
<del class="diff-old">Core
Tabular
Data
Model
</del>
<ins class="diff-chg">Table
groups
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#tables">
<span class="secno">
<del class="diff-old">2.2
</del>
<ins class="diff-chg">4.2
</ins>
</span>
<del class="diff-old">Annotated
Tabular
Data
Model
</del>
<ins class="diff-chg">Tables
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#columns">
<span class="secno">
<del class="diff-old">2.3
</del>
<ins class="diff-chg">4.3
</ins>
</span>
<del class="diff-old">Grouped
Tabular
Data
Model
</del>
<ins class="diff-chg">Columns
</ins></a></li><li class="tocline"><a class="tocxref" href="#rows"><span class="secno"><ins class="diff-chg">
4.4
</ins></span><ins class="diff-chg">
Rows
</ins></a></li><li class="tocline"><a class="tocxref" href="#cells"><span class="secno"><ins class="diff-chg">
4.5
</ins></span><ins class="diff-chg">
Cells
</ins>
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#datatypes">
<span class="secno">
<ins class="diff-new">4.6
</ins></span><ins class="diff-new">
Datatypes
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#length-constraints"><span class="secno"><ins class="diff-new">
4.6.1
</ins></span><ins class="diff-new">
Length
Constraints
</ins></a></li><li class="tocline"><a class="tocxref" href="#value-constraints"><span class="secno"><ins class="diff-new">
4.6.2
</ins></span><ins class="diff-new">
Value
Constraints
</ins></a></li></ul></li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#locating-metadata">
<span class="secno">
<del class="diff-old">3.
</del>
<ins class="diff-chg">5.
</ins>
</span>
Locating
Metadata
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#overriding-metadata">
<span class="secno">
<del class="diff-old">3.1
</del>
<ins class="diff-chg">5.1
</ins>
</span>
Overriding
Metadata
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#embedded-metadata">
<span class="secno">
<del class="diff-old">3.2
</del>
<ins class="diff-chg">5.2
</ins>
</span>
Embedded
Metadata
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#link-header">
<span class="secno">
<del class="diff-old">3.3
</del>
<ins class="diff-chg">5.3
</ins>
</span>
Link
Header
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#standard-file-metadata">
<span class="secno">
<del class="diff-old">3.4
</del>
<ins class="diff-chg">5.4
</ins>
</span>
Standard
File
Metadata
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#standard-directory-metadata">
<span class="secno">
<del class="diff-old">3.5
</del>
<ins class="diff-chg">5.5
</ins>
</span>
Standard
Directory
Metadata
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#processing-tables">
<span class="secno">
<del class="diff-old">4.
</del>
<ins class="diff-chg">6.
</ins>
</span>
<del class="diff-old">CSV+
Syntax
</del>
<ins class="diff-chg">Processing
Tables
</ins>
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#creating-annotated-tables">
<span class="secno">
<del class="diff-old">4.1
</del>
<ins class="diff-chg">6.1
</ins></span><ins class="diff-chg">
Creating
Annotated
Tables
</ins></a></li><li class="tocline"><a class="tocxref" href="#parsing-cells"><span class="secno"><ins class="diff-chg">
6.2
</ins></span><ins class="diff-chg">
Parsing
Cells
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#parsing-examples"><span class="secno"><ins class="diff-chg">
6.2.1
</ins></span><ins class="diff-chg">
Parsing
examples
</ins></a></li><li class="tocline"><a class="tocxref" href="#formats-for-numeric-types"><span class="secno"><ins class="diff-chg">
6.2.2
</ins></span><ins class="diff-chg">
Formats
for
numeric
types
</ins></a></li><li class="tocline"><a class="tocxref" href="#formats-for-booleans"><span class="secno"><ins class="diff-chg">
6.2.3
</ins></span><ins class="diff-chg">
Formats
for
booleans
</ins></a></li><li class="tocline"><a class="tocxref" href="#formats-for-dates-and-times"><span class="secno"><ins class="diff-chg">
6.2.4
</ins></span><ins class="diff-chg">
Formats
for
dates
and
times
</ins></a></li><li class="tocline"><a class="tocxref" href="#formats-for-durations"><span class="secno"><ins class="diff-chg">
6.2.5
</ins></span><ins class="diff-chg">
Formats
for
durations
</ins></a></li><li class="tocline"><a class="tocxref" href="#formats-for-other-types"><span class="secno"><ins class="diff-chg">
6.2.6
</ins></span><ins class="diff-chg">
Formats
for
other
types
</ins></a></li></ul></li><li class="tocline"><a class="tocxref" href="#displaying-tables"><span class="secno"><ins class="diff-chg">
6.3
</ins></span><ins class="diff-chg">
Displaying
Tables
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#bidirectional-tables"><span class="secno"><ins class="diff-chg">
6.3.1
</ins></span><ins class="diff-chg">
Bidirectional
Tables
</ins></a></li></ul></li><li class="tocline"><a class="tocxref" href="#validating-tables"><span class="secno"><ins class="diff-chg">
6.4
</ins></span><ins class="diff-chg">
Validating
Tables
</ins></a></li><li class="tocline"><a class="tocxref" href="#converting-tables"><span class="secno"><ins class="diff-chg">
6.5
</ins></span><ins class="diff-chg">
Converting
Tables
</ins></a></li></ul></li><li class="tocline"><a class="tocxref" href="#syntax"><span class="secno"><ins class="diff-chg">
7.
</ins></span><ins class="diff-chg">
Best
Practice
CSV
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#content-type"><span class="secno"><ins class="diff-chg">
7.1
</ins>
</span>
Content
Type
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#encoding">
<span class="secno">
<del class="diff-old">4.2
</del>
<ins class="diff-chg">7.2
</ins>
</span>
Encoding
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#line-endings">
<span class="secno">
<del class="diff-old">4.3
</del>
<ins class="diff-chg">7.3
</ins>
</span>
Line
Endings
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#lines">
<span class="secno">
<del class="diff-old">4.4
</del>
<ins class="diff-chg">7.4
</ins>
</span>
Lines
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#headers">
<span class="secno">
<del class="diff-old">4.4.1
</del>
<ins class="diff-chg">7.4.1
</ins>
</span>
Headers
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#ebnf">
<span class="secno">
<del class="diff-old">4.4.2
</del>
<ins class="diff-chg">7.5
</ins></span><ins class="diff-chg">
Grammar
</ins></a></li></ul></li><li class="tocline"><a class="tocxref" href="#parsing"><span class="secno"><ins class="diff-chg">
8.
</ins></span><ins class="diff-chg">
Parsing
Tabular
Data
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#bidirectionality-in-csv-files"><span class="secno"><ins class="diff-chg">
8.1
</ins>
</span>
Bidirectionality
in
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
Files
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#examples">
<span class="secno">
<ins class="diff-chg">8.2
</ins></span><ins class="diff-chg">
Examples
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#simple-example"><span class="secno"><ins class="diff-chg">
8.2.1
</ins></span><ins class="diff-chg">
Simple
Example
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#using-overriding-metadata"><span class="secno"><ins class="diff-chg">
8.2.1.1
</ins></span><ins class="diff-chg">
Using
Overriding
Metadata
</ins></a>
</li>
<li class="tocline">
<a class="tocxref" href="#using-a-metadata-file">
<span class="secno">
<del class="diff-old">4.5
</del>
<ins class="diff-chg">8.2.1.2
</ins>
</span>
<del class="diff-old">Grammar
</del>
<ins class="diff-chg">Using
a
Metadata
File
</ins>
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#empty-and-quoted-cells">
<span class="secno">
<del class="diff-old">5.
</del>
<ins class="diff-chg">8.2.2
</ins>
</span>
<ins class="diff-new">Empty
and
Quoted
Cells
</ins></a></li><li class="tocline"><a class="tocxref" href="#tabular-data-embedding-annotations"><span class="secno"><ins class="diff-new">
8.2.3
</ins></span><ins class="diff-new">
Tabular
Data
Embedding
Annotations
</ins></a><ul class="toc"><li class="tocline"><a class="tocxref" href="#naive-parsing"><span class="secno"><ins class="diff-new">
8.2.3.1
</ins></span><ins class="diff-new">
Naive
</ins>
Parsing
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#parsing-with-flags">
<span class="secno">
<ins class="diff-new">8.2.3.2
</ins></span><ins class="diff-new">
Parsing
with
Flags
</ins></a></li><li class="tocline"><a class="tocxref" href="#recognising-tabular-data-formats"><span class="secno"><ins class="diff-new">
8.2.3.3
</ins></span><ins class="diff-new">
Recognising
</ins>
Tabular
Data
<ins class="diff-new">Formats
</ins>
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#parsing-multiple-header-lines">
<span class="secno">
<ins class="diff-chg">8.2.4
</ins></span><ins class="diff-chg">
Parsing
Multiple
Header
Lines
</ins></a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#standards">
<span class="secno">
A.
</span>
Existing
Standards
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#rfc">
<span class="secno">
A.1
</span>
RFC
4180
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#excel">
<span class="secno">
A.2
</span>
Excel
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#saved-csv">
<span class="secno">
A.2.1
</span>
Saved
CSV
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#opened-csv">
<span class="secno">
A.2.2
</span>
Opened
CSV
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#imported-csv">
<span class="secno">
A.2.3
</span>
Imported
CSV
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#copied-tabular-data">
<span class="secno">
A.2.4
</span>
Copied
Tabular
Data
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#google">
<span class="secno">
A.3
</span>
Google
Spreadsheets
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#downloading-csv">
<span class="secno">
A.3.1
</span>
Downloading
CSV
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#importing-csv">
<span class="secno">
A.3.2
</span>
Importing
CSV
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#csv-files-in-a-tabular-data-package">
<span class="secno">
A.4
</span>
CSV
Files
in
a
Tabular
Data
Package
</a>
</li>
</ul>
</li>
<li class="tocline">
<a class="tocxref" href="#acknowledgements">
<span class="secno">
B.
</span>
<ins class="diff-new">Acknowledgements
</ins></a></li><li class="tocline"><a class="tocxref" href="#changes"><span class="secno"><ins class="diff-new">
C.
</ins></span><ins class="diff-new">
Changes
since
the
working
draft
of
08
January
2015
</ins></a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno"><ins class="diff-new">
D.
</ins></span>
References
</a>
<ul class="toc">
<li class="tocline">
<a class="tocxref" href="#normative-references">
<span class="secno">
<del class="diff-old">B.1
</del>
<ins class="diff-chg">D.1
</ins>
</span>
Normative
references
</a>
</li>
<li class="tocline">
<a class="tocxref" href="#informative-references">
<span class="secno">
<del class="diff-old">B.2
</del>
<ins class="diff-chg">D.2
</ins>
</span>
Informative
references
</a>
</li>
</ul>
</li>
</ul>
</section>
<section property="bibo:hasPart" resource="#intro" typeof="bibo:Chapter" id="intro">
<h2 resource="#h-intro" id="h-intro">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
1.
</span>
Introduction
</span>
</h2>
<p>
<dfn id="dfn-tabular-data" title="tabular data">
Tabular
data
</dfn>
is
data
that
is
structured
into
rows,
each
of
which
contains
information
about
some
thing.
Each
row
contains
the
same
number
of
cells
(although
some
of
these
cells
may
be
empty),
which
provide
values
of
properties
of
the
thing
described
by
the
row.
In
tabular
data,
cells
within
the
same
column
provide
values
for
the
same
property
of
the
<del class="diff-old">thing
</del>
<ins class="diff-chg">things
</ins>
described
by
<del class="diff-old">the
particular
</del>
<ins class="diff-chg">each
</ins>
row.
This
is
what
differentiates
tabular
data
from
other
line-oriented
formats.
</p>
<p>
Tabular
data
is
routinely
transferred
on
the
web
in
a
textual
format
called
<del class="diff-old">"CSV",
</del>
<ins class="diff-chg">CSV,
</ins>
but
the
definition
of
<del class="diff-old">"CSV"
</del>
<ins class="diff-chg">CSV
</ins>
in
practice
is
very
loose.
Some
people
use
the
term
to
mean
any
delimited
text
file.
Others
stick
more
closely
to
the
most
standard
definition
of
CSV
that
there
is,
[
<cite>
<a href="#bib-RFC4180" class="bibref">
RFC4180
</a>
</cite>
].
<a href="#standards" class="sectionRef">
Appendix
A
</a>
describes
the
various
ways
in
which
CSV
is
defined.
<ins class="diff-new">This
specification
refers
to
such
files,
as
well
as
tab-delimited
files,
fixed
field
formats,
spreadsheets,
HTML
tables,
and
SQL
dumps
as
</ins><dfn id="dfn-tabular-data-file" title="tabular data file"><ins class="diff-new">
tabular
data
files
</ins></dfn>.
</p>
<p>
<ins class="diff-chg">In
</ins><a href="#model" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins>
<span class="secno">
<del class="diff-old">2.
</del>
<ins class="diff-chg">4.
</ins>
</span>
<span class="sec-title">
Tabular
Data
Models
</span>
<del class="diff-old">There
are
different
levels
of
</del>
</a>,
<ins class="diff-chg">this
document
defines
a
model
for
tabular
</ins>
data
<del class="diff-old">models
</del>
<ins class="diff-chg">that
abstracts
away
from
the
varying
syntaxes
that
are
used
</ins>
for
<ins class="diff-new">when
exchanging
</ins>
tabular
<del class="diff-old">data:
</del>
<ins class="diff-chg">data.
</ins>
The
<del class="diff-old">core
tabular
data
</del>
model
<del class="diff-old">described
in
</del>
<ins class="diff-chg">includes
annotations,
or
metadata,
about
collections
of
individual
tables,
rows,
columns,
and
cells.
These
annotations
are
typically
supplied
through
separate
metadata
files;
</ins><a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">5.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Core
Tabular
Data
Model
</del>
<ins class="diff-chg">Locating
Metadata
</ins>
</span>
</a>
defines
<del class="diff-old">the
core
model
for
a
single
</del>
<ins class="diff-chg">how
these
metadata
files
can
be
located,
while
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
]
defines
what
they
contain.
</ins></p><p><ins class="diff-chg">
Once
an
</ins><a class="internalDFN" href="#dfn-annotated-table"><ins class="diff-chg">
annotated
</ins>
table
<del class="diff-old">of
basic
</del>
</a>
<ins class="diff-chg">has
been
created,
it
can
be
processed
in
various
ways,
such
as
display,
validation,
or
conversion
into
other
formats.
This
processing
is
described
in
</ins><a href="#processing-tables" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.
</ins></span><span class="sec-title"><ins class="diff-chg">
Processing
Tables
</ins></span></a>.</p><p><ins class="diff-chg">
This
specification
does
not
normatively
define
a
format
for
exchanging
tabular
</ins>
data.
<del class="diff-old">The
annotated
</del>
<ins class="diff-chg">However,
it
does
provide
some
best
practice
guidelines
for
publishing
</ins>
tabular
data
<del class="diff-old">model
described
</del>
<ins class="diff-chg">as
CSV,
</ins>
in
<ins class="diff-chg">section
</ins><a href="#syntax" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.2
</del>
<ins class="diff-chg">7.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Annotated
</del>
<ins class="diff-chg">Best
Practice
CSV
</ins></span></a>,<ins class="diff-chg">
and
for
parsing
both
this
syntax
and
those
similar
to
it,
in
</ins><a href="#parsing" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
8.
</ins></span><span class="sec-title"><ins class="diff-chg">
Parsing
</ins>
Tabular
Data
<del class="diff-old">Model
</del>
</span>
</a>.
</p>
</section>
<section property="bibo:hasPart" resource="#conformance" typeof="bibo:Chapter" id="conformance">
<h2 resource="#h-conformance" id="h-conformance">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-new">2.
</ins></span><ins class="diff-new">
Conformance
</ins></span></h2><p><ins class="diff-new">
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</ins></p><p id="respecRFC2119"><ins class="diff-new">
The
key
words
</ins><em class="rfc2119" title="MAY"><ins class="diff-new">
MAY
</ins></em>,<em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em>,<em class="rfc2119" title="MUST NOT"><ins class="diff-new">
MUST
NOT
</ins></em>,<em class="rfc2119" title="SHOULD"><ins class="diff-new">
SHOULD
</ins></em>,<ins class="diff-new">
and
</ins><em class="rfc2119" title="SHOULD NOT"><ins class="diff-new">
SHOULD
NOT
</ins></em><ins class="diff-new">
are
to
be
interpreted
as
described
in
[
</ins><cite><a href="#bib-RFC2119" class="bibref"><ins class="diff-new">
RFC2119
</ins>
</a>
<del class="diff-old">defines
</del>
</cite>
<ins class="diff-chg">].
</ins></p><p><ins class="diff-chg">
This
specification
makes
use
of
the
</ins><dfn id="dfn-compact-iri" title="compact IRI"><ins class="diff-chg">
compact
IRI
Syntax
</ins></dfn><ins class="diff-chg">
;
please
refer
to
the
</ins><a href="http://www.w3.org/TR/json-ld/#compact-iris"><ins class="diff-chg">
Compact
IRIs
</ins></a><ins class="diff-chg">
from
[
</ins><cite><a href="#bib-JSON-LD" class="bibref"><ins class="diff-chg">
JSON-LD
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
Within
examples,
this
specification
makes
use
of
the
following
namespaces:
</ins></p><dl><dt><code><ins class="diff-chg">
dc
</ins></code>:</dt><dd><code><ins class="diff-chg">
http://purl.org/dc/terms/
</ins></code></dd><dt><code><ins class="diff-chg">
rdfs
</ins></code>:</dt><dd><code><ins class="diff-chg">
http://www.w3.org/2000/01/rdf-schema#
</ins></code></dd><dt><code><ins class="diff-chg">
schema
</ins></code>:</dt><dd><code><ins class="diff-chg">
http://schema.org/
</ins></code></dd><dt><code><ins class="diff-chg">
xsd
</ins></code>:</dt><dd><code><ins class="diff-chg">
http://www.w3.org/2001/XMLSchema#
</ins></code></dd></dl></section><section property="bibo:hasPart" resource="#typographical-conventions" typeof="bibo:Chapter" id="typographical-conventions"><h2 resource="#h-typographical-conventions" id="h-typographical-conventions"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
3.
</ins></span><ins class="diff-chg">
Typographical
conventions
</ins></span></h2><div><p><ins class="diff-chg">
The
following
typographic
conventions
are
used
in
this
specification:
</ins></p><dl class="typography"><dt><code><ins class="diff-chg">
markup
</ins></code></dt><dd><ins class="diff-chg">
Markup
(elements,
attributes,
properties),
machine
processable
values
(string,
characters,
media
types),
property
name,
or
</ins>
a
<del class="diff-old">model
for
tables
that
</del>
<ins class="diff-chg">file
name
is
in
red-orange
monospace
font.
</ins></dd><dt><var><ins class="diff-chg">
variable
</ins></var></dt><dd><ins class="diff-chg">
A
variable
in
pseudo-code
or
in
an
algorithm
description
is
in
italics.
</ins></dd><dt><dfn id="dfn-definition"><ins class="diff-chg">
definition
</ins></dfn></dt><dd><ins class="diff-chg">
A
definition
of
a
term,
to
be
used
elsewhere
in
this
or
other
specifications,
is
in
bold
and
italics.
</ins></dd><dt><a class="internalDFN" href="#dfn-definition" title="definition"><ins class="diff-chg">
definition
reference
</ins></a></dt><dd><ins class="diff-chg">
A
reference
to
a
definition
</ins><em><ins class="diff-chg">
in
this
document
</ins></em><ins class="diff-chg">
is
underlined
and
is
also
an
active
link
to
the
definition
itself.
</ins></dd><dt><a class="internalDFN" href="#dfn-definition" title="definition"><code><ins class="diff-chg">
markup
definition
reference
</ins></code></a></dt><dd><ins class="diff-chg">
A
references
to
a
definition
</ins><em><ins class="diff-chg">
in
this
document
</ins></em>,<ins class="diff-chg">
when
the
reference
itself
is
also
a
markup,
is
underlined,
red-orange
monospace
font,
and
is
also
an
active
link
to
the
definition
itself.
</ins></dd><dt><a class="externalDFN"><ins class="diff-chg">
external
definition
reference
</ins></a></dt><dd><ins class="diff-chg">
A
reference
to
a
definition
</ins><em><ins class="diff-chg">
in
another
document
</ins></em><ins class="diff-chg">
is
underlined,
in
italics,
and
is
also
an
active
link
to
the
definition
itself.
</ins></dd><dt><a class="externalDFN"><code><ins class="diff-chg">
markup
external
definition
reference
</ins></code></a></dt><dd><ins class="diff-chg">
A
reference
to
a
definition
</ins><em><ins class="diff-chg">
in
another
document
</ins></em>,<ins class="diff-chg">
when
the
reference
itself
is
also
a
markup,
is
underlined,
in
italics
red-orange
monospace
font,
and
is
also
an
active
link
to
the
definition
itself.
</ins></dd><dt><a href="."><ins class="diff-chg">
hyperlink
</ins></a></dt><dd><ins class="diff-chg">
A
hyperlink
is
underlined
and
in
blue.
</ins></dd><dt><a href="."><ins class="diff-chg">
[reference]
</ins></a></dt><dd><ins class="diff-chg">
A
document
reference
(normative
or
informative)
is
enclosed
in
square
brackets
and
links
to
the
references
section.
</ins></dd></dl><div class="note"><div id="h-note1" role="heading" aria-level="3" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Notes
</ins>
are
<del class="diff-old">annotated
</del>
<ins class="diff-chg">in
light
green
boxes
</ins>
with
<del class="diff-old">metadata.
</del>
<ins class="diff-chg">a
green
left
border
and
with
a
"Note"
header
in
green.
Notes
are
normative
or
informative
depending
on
the
whether
they
are
in
a
normative
or
informative
section,
respectively.
</ins></p></div>      <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example">Examples are in light khaki boxes, with khaki left border, and with a <ins class="diff-chg">
numbered "Example" header in khaki. Examples are always informative. 
</ins>
The
<del class="diff-old">grouped
tabular
data
model
described
</del>
<ins class="diff-chg">content
of
the
example
is
</ins>
in
<del class="diff-old">section
</del>
<ins class="diff-chg">monospace
font
and
may
be
syntax
colored.
</ins></pre></div></div></section><section property="bibo:hasPart" resource="#model" typeof="bibo:Chapter" id="model"><h2 resource="#h-model" id="h-model"><span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">2.3
</del>
<ins class="diff-chg">4.
</ins>
</span>
<del class="diff-old">Grouped
</del>
Tabular
Data
<del class="diff-old">Model
</del>
<ins class="diff-chg">Models
</ins>
</span>
</h2>
<p>
<ins class="diff-chg">This
section
</ins>
defines
<ins class="diff-new">an
</ins><dfn id="dfn-annotated-tabular-data-model"><ins class="diff-new">
annotated
tabular
data
model
</ins></dfn>:
a
model
for
tables
that
are
<del class="diff-old">related
to
each
</del>
<ins class="diff-chg">annotated
with
metadata.
</ins><dfn id="dfn-annotation" title="annotation"><ins class="diff-chg">
Annotations
</ins></dfn><ins class="diff-chg">
provide
information
about
the
cells,
rows,
columns,
tables,
and
groups
of
tables
with
which
they
are
associated.
The
</ins><dfn id="dfn-annotation-value" title="annotation value"><ins class="diff-chg">
values
</ins></dfn><ins class="diff-chg">
of
these
annotations
may
be
lists,
structured
objects,
or
atomic
values.
</ins><dfn id="dfn-core-annotations"><ins class="diff-chg">
Core
annotations
</ins></dfn><ins class="diff-chg">
are
those
that
affect
the
behavior
of
processors
defined
in
this
specification,
but
</ins>
other
<ins class="diff-new">annotations
may
also
be
present
on
any
of
the
components
of
the
model.
</ins></p><p><ins class="diff-new">
Annotations
may
be
described
directly
</ins>
in
<del class="diff-old">some
way.
</del>
<ins class="diff-chg">[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
],
be
embedded
in
a
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a>,<ins class="diff-chg">
or
created
during
the
process
of
generating
an
</ins><a class="internalDFN" href="#dfn-annotated-table"><ins class="diff-chg">
annotated
table
</ins></a>.</p><div class="note"><div id="h-note2" role="heading" aria-level="3" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
In
this
document,
the
term
</ins><a class="internalDFN" href="#dfn-annotation"><ins class="diff-chg">
annotation
</ins></a><ins class="diff-chg">
refers
to
any
metadata
associated
with
an
object
in
the
annotated
tabular
data
model.
These
are
not
necessarily
web
annotations
in
the
sense
of
[
</ins><cite><a href="#bib-annotation-model" class="bibref"><ins class="diff-chg">
annotation-model
</ins></a></cite><ins class="diff-chg">
].
</ins></p></div><section property="bibo:hasPart" resource="#table-groups" typeof="bibo:Chapter" id="table-groups"><h3 resource="#h-table-groups" id="h-table-groups">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">4.1
</ins>
</span>
<del class="diff-old">Core
Tabular
Data
Model
</del>
<ins class="diff-chg">Table
groups
</ins>
</span>
</h3>
<p>
<ins class="diff-new">A
</ins><dfn id="dfn-group-of-tables"><ins class="diff-new">
group
of
tables
</ins></dfn><ins class="diff-new">
comprises
a
set
of
</ins><a class="internalDFN" href="#dfn-annotated-table" title="annotated table"><ins class="diff-new">
annotated
tables
</ins></a><ins class="diff-new">
and
a
set
of
annotations
that
relate
to
that
group
of
tables.
</ins>
The
<a class="internalDFN" href="#dfn-core-annotations">
core
<del class="diff-old">tabular
data
model
can
be
used
to
describe
</del>
<ins class="diff-chg">annotations
</ins></a><ins class="diff-chg">
of
</ins>
a
<del class="diff-old">table
that
lacks
</del>
<ins class="diff-chg">group
of
tables
are:
</ins></p><ul><li><dfn id="dfn-table-group-id" title="table group id"><ins class="diff-chg">
id
</ins></dfn><ins class="diff-chg">
—
an
identifier
for
this
group
of
tables,
or
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
if
this
is
undefined.
</ins></li><li><dfn id="dfn-table-group-notes" title="table group notes"><ins class="diff-chg">
notes
</ins></dfn><ins class="diff-chg">
—
</ins>
any
<del class="diff-old">annotations,
whether
those
</del>
<ins class="diff-chg">number
of
additional
</ins>
annotations
<del class="diff-old">are
embedded
within
</del>
<ins class="diff-chg">on
the
group
of
tables.
This
annotation
may
be
empty.
</ins></li><li><dfn id="dfn-table-group-tables" title="table group tables"><ins class="diff-chg">
tables
</ins></dfn><ins class="diff-chg">
—
the
list
of
</ins><a class="internalDFN" href="#dfn-table" title="table"><ins class="diff-chg">
tables
</ins></a><ins class="diff-chg">
in
the
group
of
tables.
A
group
of
tables
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
have
one
or
more
tables.
</ins></li></ul><p><ins class="diff-chg">
Groups
of
tables
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
in
addition
have
any
number
of
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-chg">
annotations
</ins></a><ins class="diff-chg">
which
provide
information
about
the
group
of
tables.
Annotations
on
</ins>
a
<del class="diff-old">CSV
file
</del>
<ins class="diff-chg">group
of
tables
may
include:
</ins></p><ul><li><ins class="diff-chg">
titles
</ins>
or
<del class="diff-old">arise
</del>
<ins class="diff-chg">descriptions
of
the
group
of
tables.
</ins></li><li><ins class="diff-chg">
information
about
the
source
or
provenance
of
the
group
of
tables.
</ins></li><li><ins class="diff-chg">
links
to
other
groups
of
tables
(eg
to
those
that
provide
similar
data
</ins>
from
a
<del class="diff-old">separate
</del>
<ins class="diff-chg">different
time
period).
</ins></li></ul><p><ins class="diff-chg">
When
originating
from
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
],
these
annotations
arise
from
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-common-property" class="externalDFN"><ins class="diff-chg">
common
properties
</ins></a><ins class="diff-chg">
defined
on
table
group
descriptions
within
</ins>
metadata
<del class="diff-old">document.
</del>
<ins class="diff-chg">documents.
</ins>
</p>
</section>
<section property="bibo:hasPart" resource="#tables" typeof="bibo:Chapter" id="tables">
<h3 resource="#h-tables" id="h-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-new">4.2
</ins></span><ins class="diff-new">
Tables
</ins></span></h3>
<p>
<del class="diff-old">Data
</del>
<ins class="diff-chg">An
</ins><dfn id="dfn-annotated-table"><ins class="diff-chg">
annotated
table
</ins></dfn>
is
<del class="diff-old">held
in
</del>
a
<dfn id="dfn-table">
table
<del class="diff-old">.
</del>
</dfn>
<ins class="diff-chg">that
is
annotated
with
additional
metadata.
</ins>
The
<del class="diff-old">properties
</del>
<a class="internalDFN" href="#dfn-core-annotations">
<ins class="diff-chg">core
annotations
</ins></a>
of
a
table
are:
</p>
<ul>
<li>
<dfn id="dfn-table-columns" title="table columns">
columns
</dfn>
—
the
list
of
<a class="internalDFN" href="#dfn-column" title="column">
columns
</a>
in
the
table.
A
table
<em title="MUST" class="rfc2119">
MUST
</em>
have
one
or
more
columns
and
the
order
of
the
columns
within
the
list
is
significant
and
<em title="MUST" class="rfc2119">
MUST
</em>
be
preserved
by
<del class="diff-old">applications
</del>
<ins class="diff-chg">applications.
</ins>
</li>
<li>
<dfn id="dfn-table-direction" title="table direction">
<ins class="diff-chg">direction
</ins></dfn><ins class="diff-chg">
—
the
direction
in
which
the
columns
in
the
table
should
be
displayed,
as
described
in
</ins><a href="#bidirectional-tables" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.3.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Bidirectional
Tables
</ins></span></a>.</li><li><dfn id="dfn-table-foreign-keys" title="table foreign keys"><ins class="diff-chg">
foreign
keys
</ins></dfn><ins class="diff-chg">
—
a
list
of
foreign
keys
on
the
table,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
],
which
may
be
an
empty
list.
</ins></li><li><dfn id="dfn-table-id" title="table id"><ins class="diff-chg">
id
</ins></dfn><ins class="diff-chg">
—
an
identifier
for
this
table,
or
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
if
this
is
undefined.
</ins></li><li><dfn id="dfn-table-notes" title="table notes"><ins class="diff-chg">
notes
</ins></dfn><ins class="diff-chg">
—
any
number
of
additional
annotations
on
the
table.
This
annotation
may
be
empty.
</ins></li><li><dfn id="dfn-table-rows" title="table rows">
rows
</dfn>
—
the
list
of
<a class="internalDFN" href="#dfn-row" title="row">
rows
</a>
<ins class="diff-new">in
the
table.
A
table
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
have
one
or
more
rows
and
the
order
of
the
rows
within
the
list
is
significant
and
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
preserved
by
applications.
</ins></li><li><dfn id="dfn-table-schema" title="table schema"><ins class="diff-new">
schema
</ins></dfn><ins class="diff-new">
—
a
URL
referencing
a
schema
applied
to
this
table,
or
</ins><code><ins class="diff-new">
null
</ins></code>.</li><li><dfn id="dfn-table-suppress-output" title="table suppress output"><ins class="diff-new">
suppress
output
</ins></dfn><ins class="diff-new">
—
a
boolean
that
indicates
whether
or
not
this
table
should
be
suppressed
</ins>
in
<ins class="diff-new">any
output
generated
from
the
converting
</ins>
the
<a class="internalDFN" href="#dfn-group-of-tables">
<ins class="diff-new">group
of
tables
</ins></a><ins class="diff-new">
that
this
</ins>
table
<ins class="diff-new">belongs
to
into
another
format,
as
described
in
</ins><a href="#converting-tables" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
6.5
</ins></span><span class="sec-title"><ins class="diff-new">
Converting
Tables
</ins></span></a>.</li><li><dfn id="dfn-table-transformations" title="table transformations"><ins class="diff-new">
transformations
</ins></dfn><ins class="diff-new">
—
a
(possibly
empty)
list
of
specifications
for
converting
this
table
into
other
formats,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></li><li><dfn id="dfn-table-url" title="table url"><ins class="diff-new">
url
</ins></dfn><ins class="diff-new">
—
the
URL
of
the
source
of
the
data
in
the
table,
or
</ins><code><ins class="diff-new">
null
</ins></code><ins class="diff-new">
if
this
is
undefined.
</ins>
</li>
</ul>
<p>
<ins class="diff-new">The
table
</ins><em title="MAY" class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
in
addition
have
any
number
of
other
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-new">
annotations
</ins></a>.<ins class="diff-new">
Annotations
on
a
table
may
include:
</ins></p><ul><li><ins class="diff-new">
titles
or
descriptions
of
the
table,
</ins></li><li><ins class="diff-new">
information
about
the
source
or
provenance
of
the
data
in
the
table,
or
</ins></li><li><ins class="diff-new">
links
to
other
tables
(eg
to
indicate
tables
that
include
related
information).
</ins></li></ul><p><ins class="diff-new">
When
originating
from
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
],
these
annotations
arise
from
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-common-property" class="externalDFN"><ins class="diff-new">
common
properties
</ins></a><ins class="diff-new">
defined
on
table
group
descriptions
within
metadata
documents.
</ins></p></section><section property="bibo:hasPart" resource="#columns" typeof="bibo:Chapter" id="columns"><h3 resource="#h-columns" id="h-columns"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
4.3
</ins></span><ins class="diff-new">
Columns
</ins></span></h3><p>
A
<dfn id="dfn-column">
column
</dfn>
represents
a
vertical
arrangement
of
<a class="internalDFN" href="#dfn-cell" title="cell">
cells
</a>
within
a
<a class="internalDFN" href="#dfn-table">
table
</a>.
The
<del class="diff-old">properties
</del>
<a class="internalDFN" href="#dfn-core-annotations">
<ins class="diff-chg">core
annotations
</ins></a>
of
a
column
are:
</p>
<ul>
<li>
<del class="diff-old">table
</del>
<dfn id="dfn-column-about-url" title="column about URL">
<ins class="diff-chg">about
URL
</ins>
</dfn>
—
the
<del class="diff-old">table
</del>
<a class="internalDFN" href="#dfn-cell-about-url" title="cell about URL">
<ins class="diff-chg">about
URL
</ins></a><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-uri-template-property" class="externalDFN"><ins class="diff-chg">
URI
template
</ins></a><ins class="diff-chg">
used
to
create
a
URL
identifier
for
each
</ins><a class="internalDFN" href="#dfn-annotation-value" title="annotation value"><ins class="diff-chg">
value
</ins>
</a>
<del class="diff-old">that
the
column
appears
in
number
—
the
position
</del>
of
<del class="diff-old">the
</del>
<a class="internalDFN" href="#dfn-cell">
<ins class="diff-chg">cell
</ins></a><ins class="diff-chg">
in
this
</ins>
column
<del class="diff-old">amongst
</del>
<ins class="diff-chg">relative
to
</ins>
the
<del class="diff-old">columns
</del>
<a class="internalDFN" href="#dfn-row">
<ins class="diff-chg">row
</ins>
</a>
<del class="diff-old">for
the
associated
table
,
starting
from
1
</del>
<ins class="diff-chg">in
which
it
is
contained,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins>
</li>
<li>
<dfn id="dfn-column-cells" title="column cells">
cells
</dfn>
—
the
list
of
<a class="internalDFN" href="#dfn-cell" title="cell">
cells
</a>
in
the
column.
A
column
<em title="MUST" class="rfc2119">
MUST
</em>
contain
one
cell
from
each
<a class="internalDFN" href="#dfn-row">
row
</a>
in
the
table.
The
order
of
the
cells
in
the
list
<em title="MUST" class="rfc2119">
MUST
</em>
match
the
order
of
the
rows
in
which
they
appear
within
the
<a class="internalDFN" href="#dfn-table-rows" title="table rows">
rows
</a>
for
the
associated
<a class="internalDFN" href="#dfn-column-table" title="column table">
table
</a>.
</li>
<del class="diff-old">A
</del>
<li>
<dfn id="dfn-column-datatype" title="column datatype">
<ins class="diff-chg">datatype
</ins></dfn><ins class="diff-chg">
—
the
expected
</ins><a class="internalDFN" href="#dfn-datatype"><ins class="diff-chg">
datatype
</ins></a><ins class="diff-chg">
for
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
this
column,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins></li><li><dfn id="dfn-column-default" title="column default"><ins class="diff-chg">
default
</ins></dfn><ins class="diff-chg">
—
the
default
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
for
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
whose
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
is
an
empty
string.
</ins></li><li><dfn id="dfn-column-lang" title="column lang"><ins class="diff-chg">
lang
</ins></dfn><ins class="diff-chg">
—
the
code
for
the
expected
language
for
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
this
column,
expressed
in
the
format
defined
by
[
</ins><cite><a href="#bib-BCP47" class="bibref"><ins class="diff-chg">
BCP47
</ins></a></cite><ins class="diff-chg">
]
</ins></li><li><dfn id="dfn-column-name" title="column name"><ins class="diff-chg">
name
</ins></dfn><ins class="diff-chg">
—
the
name
of
the
column.
</ins></li><li><dfn id="dfn-column-null" title="column null"><ins class="diff-chg">
null
</ins></dfn><ins class="diff-chg">
—
the
string
or
strings
which
cause
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
having
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
matching
any
of
these
values
to
be
</ins><code><ins class="diff-chg">
null
</ins></code>.</li><li><dfn id="dfn-column-number" title="column number"><ins class="diff-chg">
number
</ins></dfn><ins class="diff-chg">
—
the
position
of
the
column
amongst
the
</ins><a class="internalDFN" href="#dfn-table-columns" title="table columns"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
for
the
associated
</ins><a class="internalDFN" href="#dfn-column-table" title="column table"><ins class="diff-chg">
table
</ins></a>,<ins class="diff-chg">
starting
from
1.
</ins></li><li><dfn id="dfn-column-ordered" title="column ordered"><ins class="diff-chg">
ordered
</ins></dfn><ins class="diff-chg">
—
a
boolean
that
indicates
whether
the
order
of
values
of
a
cell
should
be
preserved
or
not.
</ins></li><li><dfn id="dfn-column-property-url" title="column property URL"><ins class="diff-chg">
property
URL
</ins></dfn><ins class="diff-chg">
—
the
expected
</ins><a class="internalDFN" href="#dfn-cell-property-url" title="cell property URL"><ins class="diff-chg">
property
URL
</ins></a><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-uri-template-property" class="externalDFN"><ins class="diff-chg">
URI
template
</ins></a><ins class="diff-chg">
used
to
create
a
URL
identifier
for
the
property
of
each
</ins><a class="internalDFN" href="#dfn-annotation-value" title="annotation value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><ins class="diff-chg">
in
this
column
relative
to
the
</ins><a class="internalDFN" href="#dfn-row">
row
</a>
<ins class="diff-new">in
which
it
is
contained,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></li><li><dfn id="dfn-column-required" title="column required"><ins class="diff-new">
required
</ins>
</dfn>
<del class="diff-old">represents
</del>
<ins class="diff-chg">—
</ins>
a
<del class="diff-old">horizontal
arrangement
</del>
<ins class="diff-chg">boolean
that
indicates
that
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a>
of
<a class="internalDFN" href="#dfn-cell" title="cell">
cells
</a>
<del class="diff-old">within
</del>
<ins class="diff-chg">in
this
column
</ins><em title="MUST NOT" class="rfc2119"><ins class="diff-chg">
MUST
NOT
</ins></em><ins class="diff-chg">
be
empty.
</ins></li><li><dfn id="dfn-column-separator" title="column separator"><ins class="diff-chg">
separator
</ins></dfn><ins class="diff-chg">
—
</ins>
a
<del class="diff-old">table
.
The
properties
</del>
<ins class="diff-chg">string
value
used
to
create
multiple
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
this
column
by
splitting
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
on
the
separator.
</ins></li><li><dfn id="dfn-column-source-number" title="column source number"><ins class="diff-chg">
source
number
</ins></dfn><ins class="diff-chg">
—
the
position
</ins>
of
<ins class="diff-new">the
column
in
the
file
at
the
</ins><a class="internalDFN" href="#dfn-table-url" title="table url"><ins class="diff-new">
url
</ins></a><ins class="diff-new">
of
the
table,
or
</ins><code><ins class="diff-new">
null
</ins></code>.</li><li><dfn id="dfn-column-suppress-output" title="column suppress output"><ins class="diff-new">
suppress
output
</ins></dfn><ins class="diff-new">
—
</ins>
a
<del class="diff-old">row
are:
</del>
<ins class="diff-chg">boolean
that
indicates
whether
or
not
this
column
should
be
suppressed
in
any
output
generated
from
converting
the
table,
as
described
in
</ins><a href="#converting-tables" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.5
</ins></span><span class="sec-title"><ins class="diff-chg">
Converting
Tables
</ins></span></a>.</li>
<li>
<dfn id="dfn-column-table" title="column table">
table
</dfn>
—
the
<a class="internalDFN" href="#dfn-table">
table
</a>
<del class="diff-old">that
</del>
<ins class="diff-chg">in
which
</ins>
the
<del class="diff-old">row
appears
</del>
<ins class="diff-chg">column
appears.
</ins></li><li><dfn id="dfn-column-text-direction" title="column text direction"><ins class="diff-chg">
text
direction
</ins></dfn><ins class="diff-chg">
—
the
indicator
of
the
</ins><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
this
column,
as
described
</ins>
in
<a href="#bidirectional-tables" class="sectionRef sec-ref">
<ins class="diff-new">section
</ins><span class="secno"><ins class="diff-new">
6.3.1
</ins></span><span class="sec-title"><ins class="diff-new">
Bidirectional
Tables
</ins></span></a>.
</li>
<li>
<del class="diff-old">number
</del>
<dfn id="dfn-column-titles" title="column titles">
<ins class="diff-chg">titles
</ins>
</dfn>
—
<ins class="diff-new">any
number
of
human-readable
titles
for
</ins>
the
<del class="diff-old">position
</del>
<ins class="diff-chg">column,
each
</ins>
of
<ins class="diff-new">which
</ins><em title="MAY" class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
have
an
associated
language
code
as
defined
by
[
</ins><cite><a href="#bib-BCP47" class="bibref"><ins class="diff-new">
BCP47
</ins></a></cite><ins class="diff-new">
].
</ins></li><li><dfn id="dfn-column-value-url" title="column value URL"><ins class="diff-new">
value
URL
</ins></dfn><ins class="diff-new">
—
</ins>
the
<del class="diff-old">row
amongst
</del>
<ins class="diff-chg">expected
</ins><a class="internalDFN" href="#dfn-cell-value-url" title="cell value URL"><ins class="diff-chg">
value
URL
</ins></a><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-uri-template-property" class="externalDFN"><ins class="diff-chg">
URI
template
</ins></a><ins class="diff-chg">
used
to
create
</ins>
the
<del class="diff-old">rows
</del>
<ins class="diff-chg">URL
identifier
for
the
</ins><a class="internalDFN" href="#dfn-annotation-value" title="annotation value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
of
each
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><ins class="diff-chg">
in
this,
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins>
</a>
</cite>
<ins class="diff-new">].
</ins></li><li><dfn id="dfn-column-virtual" title="column virtual"><ins class="diff-new">
virtual
</ins></dfn><ins class="diff-new">
—
a
boolean
that
indicates
whether
the
column
is
a
</ins><a class="internalDFN" href="#dfn-virtual-column"><ins class="diff-new">
virtual
column
</ins></a>.<dfn id="dfn-virtual-column" title="virtual column"><ins class="diff-new">
Virtual
columns
</ins></dfn><ins class="diff-new">
are
used
to
extend
the
source
data
with
additional
empty
columns
to
support
more
advanced
conversions;
when
this
annotation
is
</ins><code><ins class="diff-new">
false
</ins></code>,<ins class="diff-new">
the
column
is
a
</ins><dfn id="dfn-real-column"><ins class="diff-new">
real
column
</ins></dfn>,<ins class="diff-new">
which
exists
in
the
source
data
</ins>
for
the
<del class="diff-old">table
</del>
<ins class="diff-chg">table.
</ins></li></ul><p><ins class="diff-chg">
Columns
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
in
addition
have
any
number
of
other
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-chg">
annotations
</ins>
</a>,
<del class="diff-old">starting
</del>
<ins class="diff-chg">such
as
a
description.
When
originating
</ins>
from
<del class="diff-old">1
</del>
<ins class="diff-chg">[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
],
these
annotations
arise
from
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-common-property" class="externalDFN"><ins class="diff-chg">
common
properties
</ins></a><ins class="diff-chg">
defined
on
table
group
descriptions
within
metadata
documents.
</ins></p></section><section property="bibo:hasPart" resource="#rows" typeof="bibo:Chapter" id="rows"><h3 resource="#h-rows" id="h-rows"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
4.4
</ins></span><ins class="diff-chg">
Rows
</ins></span></h3><p><ins class="diff-chg">
A
</ins><dfn id="dfn-row"><ins class="diff-chg">
row
</ins></dfn><ins class="diff-chg">
represents
a
horizontal
arrangement
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
within
a
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a>.<ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-core-annotations"><ins class="diff-chg">
core
annotations
</ins></a><ins class="diff-chg">
of
a
row
are:
</ins></p><ul>
<li>
<dfn id="dfn-row-cells" title="row cells">
cells
</dfn>
—
the
list
of
<a class="internalDFN" href="#dfn-cell" title="cell">
cells
</a>
in
the
row.
A
row
<em title="MUST" class="rfc2119">
MUST
</em>
contain
one
cell
from
each
<a class="internalDFN" href="#dfn-column">
column
</a>
in
the
table.
The
order
of
the
cells
in
the
list
<em title="MUST" class="rfc2119">
MUST
</em>
match
the
order
of
the
columns
in
which
they
appear
within
the
<a class="internalDFN" href="#dfn-table-columns">
table
columns
</a>
for
the
row's
table.
</li>
<li>
<dfn id="dfn-row-number" title="row number">
<ins class="diff-new">number
</ins></dfn><ins class="diff-new">
—
the
position
of
the
row
amongst
the
</ins><a class="internalDFN" href="#dfn-table-rows" title="table rows"><ins class="diff-new">
rows
</ins></a><ins class="diff-new">
for
the
</ins><a class="internalDFN" href="#dfn-row-table" title="row table"><ins class="diff-new">
table
</ins></a>,<ins class="diff-new">
starting
from
1.
</ins></li><li><dfn id="dfn-row-primary-key" title="row primary key"><ins class="diff-new">
primary
key
</ins></dfn><ins class="diff-new">
—
a
possibly
empty
list
of
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-new">
cells
</ins></a><ins class="diff-new">
whose
values
together
provide
a
unique
identifier
for
this
row.
</ins></li><li><dfn id="dfn-row-referenced-rows" title="row referenced rows"><ins class="diff-new">
referenced
rows
</ins></dfn><ins class="diff-new">
—
a
possibly
empty
list
of
pairs
of
a
</ins><a class="internalDFN" href="#dfn-table-foreign-keys" title="table foreign keys"><ins class="diff-new">
foreign
key
</ins></a><ins class="diff-new">
and
a
row
in
a
table
within
the
same
</ins><a class="internalDFN" href="#dfn-group-of-tables"><ins class="diff-new">
group
of
tables
</ins></a><ins class="diff-new">
(which
may
be
another
row
in
the
table
in
which
this
row
appears).
</ins></li><li><dfn id="dfn-row-source-number" title="row source number"><ins class="diff-new">
source
number
</ins></dfn><ins class="diff-new">
—
the
position
of
the
row
in
the
original
</ins><a class="internalDFN" href="#dfn-table-url" title="table url"><ins class="diff-new">
url
</ins></a><ins class="diff-new">
of
the
table,
or
</ins><code><ins class="diff-new">
null
</ins></code>.</li><li><dfn id="dfn-row-table" title="row table"><ins class="diff-new">
table
</ins></dfn><ins class="diff-new">
—
the
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-new">
table
</ins></a><ins class="diff-new">
in
which
the
row
appears.
</ins></li></ul><p><ins class="diff-new">
Rows
</ins><em title="MAY" class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
have
any
number
of
additional
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-new">
annotations
</ins></a>.<ins class="diff-new">
The
annotations
on
a
row
provide
additional
metadata
about
the
information
held
in
the
row,
such
as:
</ins></p><ul><li><ins class="diff-new">
the
certainty
of
the
information
in
that
row
</ins></li><li><ins class="diff-new">
information
about
the
source
or
provenance
of
the
data
in
that
row
</ins></li>
</ul>
<p>
<ins class="diff-new">Neither
this
specification
nor
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
]
defines
a
method
to
specify
such
annotations.
Implementations
</ins><em title="MAY" class="rfc2119"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
define
a
method
for
adding
annotations
to
rows
by
interpreting
</ins><a class="internalDFN" href="#dfn-table-notes" title="table notes"><ins class="diff-new">
notes
</ins></a><ins class="diff-new">
on
the
table.
</ins></p></section><section property="bibo:hasPart" resource="#cells" typeof="bibo:Chapter" id="cells"><h3 resource="#h-cells" id="h-cells"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
4.5
</ins></span><ins class="diff-new">
Cells
</ins></span></h3><p>
A
<dfn id="dfn-cell">
cell
</dfn>
represents
a
cell
at
the
intersection
of
a
<a class="internalDFN" href="#dfn-row">
row
</a>
and
a
<a class="internalDFN" href="#dfn-column">
column
</a>
within
a
<a class="internalDFN" href="#dfn-table">
table
</a>.
The
<del class="diff-old">properties
</del>
<a class="internalDFN" href="#dfn-core-annotations">
<ins class="diff-chg">core
annotations
</ins></a>
of
a
cell
are:
</p>
<ul>
<li>
<del class="diff-old">table
</del>
<dfn id="dfn-cell-about-url" title="cell about URL">
<ins class="diff-chg">about
URL
</ins>
</dfn>
—
<ins class="diff-new">an
absolute
URL
for
</ins>
the
<del class="diff-old">table
that
the
</del>
<ins class="diff-chg">entity
about
which
this
</ins>
cell
<del class="diff-old">appears
in
</del>
<ins class="diff-chg">provides
information,
or
</ins><code><ins class="diff-chg">
null
</ins></code>.
</li>
<li>
<dfn id="dfn-cell-column" title="cell column">
column
</dfn>
—
the
<a class="internalDFN" href="#dfn-column">
column
</a>
<del class="diff-old">that
</del>
<ins class="diff-chg">in
which
</ins>
the
cell
<del class="diff-old">appears
in;
</del>
<ins class="diff-chg">appears;
</ins>
the
cell
<em title="MUST" class="rfc2119">
MUST
</em>
be
in
the
<a class="internalDFN" href="#dfn-column-cells" title="column cells">
cells
</a>
for
that
<del class="diff-old">column
</del>
<ins class="diff-chg">column.
</ins>
</li>
<li>
<dfn id="dfn-cell-errors" title="cell errors">
<ins class="diff-chg">errors
</ins></dfn><ins class="diff-chg">
—
a
(possibly
empty)
list
of
validation
errors
generated
while
parsing
the
value
of
the
cell.
</ins></li><li><dfn id="dfn-cell-ordered" title="cell ordered"><ins class="diff-chg">
ordered
</ins></dfn><ins class="diff-chg">
—
a
boolean
that,
if
the
value
of
this
cell
is
a
list,
indicates
whether
the
order
of
that
list
should
be
preserved
or
not.
</ins></li><li><dfn id="dfn-cell-property-url" title="cell property URL"><ins class="diff-chg">
property
URL
</ins></dfn><ins class="diff-chg">
—
an
absolute
URL
for
the
property
associated
with
this
cell,
or
</ins><code><ins class="diff-chg">
null
</ins></code>.</li><li><dfn id="dfn-cell-row" title="cell row">
row
</dfn>
—
the
<a class="internalDFN" href="#dfn-row">
row
</a>
<del class="diff-old">that
</del>
<ins class="diff-chg">in
which
</ins>
the
cell
<del class="diff-old">appears
in;
</del>
<ins class="diff-chg">appears;
</ins>
the
cell
<em title="MUST" class="rfc2119">
MUST
</em>
be
in
the
<a class="internalDFN" href="#dfn-row-cells" title="row cells">
cells
</a>
for
that
<del class="diff-old">row
</del>
<ins class="diff-chg">row.
</ins>
</li>
<li>
<dfn id="dfn-cell-string-value" title="cell string value">
string
value
</dfn>
—
a
string
that
is
the
original
syntactic
representation
of
the
value
of
the
cell,
<del class="diff-old">ie
</del>
<ins class="diff-chg">eg
</ins>
how
the
cell
appears
within
a
CSV
file;
this
may
be
an
empty
<del class="diff-old">string
</del>
<ins class="diff-chg">string.
</ins>
</li>
<li>
<dfn id="dfn-cell-table" title="cell table">
<ins class="diff-chg">table
</ins></dfn><ins class="diff-chg">
—
the
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
in
which
the
cell
appears.
</ins></li><li><dfn id="dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></dfn><ins class="diff-chg">
—
which
direction
the
text
within
the
cell
should
be
displayed,
as
described
in
</ins><a href="#bidirectional-tables" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.3.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Bidirectional
Tables
</ins></span></a>.</li><li><dfn id="dfn-cell-value" title="cell value">
value
</dfn>
—
the
semantic
value
of
the
cell;
<del class="diff-old">within
the
core
tabular
data
model
(with
no
other
metadata
available)
</del>
this
<del class="diff-old">is
either
</del>
<em title="MAY" class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
be
</ins>
a
<del class="diff-old">string
</del>
<dfn id="dfn-cell-value-list" title="cell value list">
<ins class="diff-chg">list
</ins></dfn><ins class="diff-chg">
of
values,
each
of
</ins>
which
<del class="diff-old">is
the
same
as
</del>
<em title="MAY" class="rfc2119">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
have
a
</ins><dfn id="dfn-cell-value-datatype" title="cell value datatype"><ins class="diff-chg">
datatype
</ins></dfn><ins class="diff-chg">
other
than
a
string,
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
have
a
</ins><dfn id="dfn-cell-value-language" title="cell value language"><ins class="diff-chg">
language
</ins></dfn><ins class="diff-chg">
and
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
be
</ins><code><ins class="diff-chg">
null
</ins></code>.<ins class="diff-chg">
For
example,
annotations
might
enable
a
processor
to
understand
</ins>
the
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
string
value
</a>
of
the
<del class="diff-old">cell,
</del>
<ins class="diff-chg">cell
as
representing
a
number
</ins>
or
<del class="diff-old">null
,
</del>
<ins class="diff-chg">a
date.
By
default,
</ins>
if
the
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
string
value
</a>
is
an
empty
<del class="diff-old">string
Issue
40
Should
an
empty
string
value
always
count
as
a
null
</del>
<ins class="diff-chg">string,
the
</ins>
semantic
value
<del class="diff-old">within
</del>
<ins class="diff-chg">of
</ins>
the
<del class="diff-old">core
data
model
(ie
when
there
</del>
<ins class="diff-chg">cell
</ins>
is
<del class="diff-old">no
other
metadata
telling
the
processor
how
to
interpret
that
value),
or
should
the
semantic
</del>
<code>
<ins class="diff-chg">null
</ins></code>.</li><li><dfn id="dfn-cell-value-url" title="cell value URL">
value
<del class="diff-old">be
</del>
<ins class="diff-chg">URL
</ins></dfn><ins class="diff-chg">
—
</ins>
an
<del class="diff-old">empty
string?
</del>
<ins class="diff-chg">absolute
URL
for
this
cell's
value,
or
</ins><code><ins class="diff-chg">
null
</ins></code>.</li></ul>
<div class="note">
<div id="h-note3" role="heading" aria-level="4" class="note-title">
<span>
Note
</span>
</div>
<p class="">
There
presence
or
absence
of
quotes
around
a
value
within
a
CSV
file
is
a
syntactic
detail
that
is
not
reflected
in
the
tabular
data
model.
In
other
words,
there
is
no
distinction
in
the
model
between
the
second
value
in
<code>
a,,z
</code>
and
the
second
value
in
<code>
a,"",z
</code>.
</p>
</div>
<del class="diff-old">2.2
Annotated
Tabular
Data
Model
</del>
<p>
<del class="diff-old">An
annotated
table
is
a
table
that
is
annotated
with
additional
metadata.
The
table
</del>
<ins class="diff-chg">Cells
</ins><em title="MAY" class="rfc2119">
MAY
</em>
have
any
number
of
<del class="diff-old">properties
</del>
<ins class="diff-chg">additional
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-chg">
annotations
</ins></a>.<ins class="diff-chg">
The
annotations
on
a
cell
provide
metadata
about
the
value
held
</ins>
in
<del class="diff-old">addition
to
those
</del>
<ins class="diff-chg">the
cell,
particularly
when
this
overrides
the
information
</ins>
provided
<del class="diff-old">in
</del>
<ins class="diff-chg">for
</ins>
the
<del class="diff-old">core
tabular
data
model
described
in
section
2.1
Core
Tabular
Data
Model
</del>
<a class="internalDFN" href="#dfn-column">
<ins class="diff-chg">column
</ins>
</a>
<del class="diff-old">which
provide
information
about
</del>
<ins class="diff-chg">and
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
that
</ins>
the
<del class="diff-old">table
as
a
whole.
The
values
of
these
properties
may
be
lists,
structured
objects,
or
atomic
values.
</del>
<ins class="diff-chg">cell
falls
within.
</ins>
Annotations
on
a
<del class="diff-old">table
may
include:
</del>
<ins class="diff-chg">cell
might
be:
</ins>
</p>
<ul>
<li>
<del class="diff-old">titles
or
descriptions
</del>
<ins class="diff-chg">notes
to
aid
the
interpretation
</ins>
of
the
<del class="diff-old">table
</del>
<ins class="diff-chg">value
</ins>
</li>
<li>
information
about
the
source
or
provenance
of
the
data
in
<del class="diff-old">the
table
links
to
other
tables
(eg
to
indicate
tables
</del>
that
<del class="diff-old">include
related
information)
</del>
<ins class="diff-chg">cell
</ins>
</li>
</ul>
<p>
<del class="diff-old">The
columns
within
an
annotated
table
</del>
<ins class="diff-chg">Neither
this
specification
nor
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins>
</a>
<del class="diff-old">are
all
annotated
columns
:
columns
which
</del>
</cite>
<ins class="diff-chg">]
defines
a
method
to
specify
such
annotations.
Implementations
</ins><em title="MAY" class="rfc2119">
MAY
</em>
<del class="diff-old">have
any
number
of
properties
in
addition
</del>
<ins class="diff-chg">define
a
method
for
adding
annotations
</ins>
to
<del class="diff-old">those
provided
in
</del>
<ins class="diff-chg">cells
by
interpreting
</ins><a class="internalDFN" href="#dfn-table-notes" title="table notes"><ins class="diff-chg">
notes
</ins></a><ins class="diff-chg">
on
</ins>
the
<del class="diff-old">core
tabular
data
model
described
in
section
</del>
<ins class="diff-chg">table.
</ins></p></section><section property="bibo:hasPart" resource="#datatypes" typeof="bibo:Chapter" id="datatypes"><h3 resource="#h-datatypes" id="h-datatypes"><span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">4.6
</ins>
</span>
<del class="diff-old">Core
Tabular
Data
Model
</del>
<ins class="diff-chg">Datatypes
</ins>
</span>
<del class="diff-old">.
The
annotations
on
</del>
</h3>
<p>
<ins class="diff-chg">Columns
and
Cells
within
tables
may
be
annotated
with
</ins>
a
<del class="diff-old">column
might
provide
information
about
how
to
interpret
</del>
<dfn id="dfn-datatype">
<ins class="diff-chg">datatype
</ins></dfn><ins class="diff-chg">
which
indicates
</ins>
the
<del class="diff-old">cells
in
</del>
<ins class="diff-chg">type
of
</ins>
the
<del class="diff-old">column
or
information
about
</del>
<ins class="diff-chg">values
obtained
by
parsing
</ins>
the
<del class="diff-old">column
as
</del>
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
<ins class="diff-chg">string
value
</ins></a><ins class="diff-chg">
of
the
cell.
</ins></p><p><ins class="diff-chg">
Datatypes
are
based
on
</ins>
a
<del class="diff-old">whole.
Examples
</del>
<ins class="diff-chg">subset
</ins>
of
<del class="diff-old">annotations
might
be:
</del>
<ins class="diff-chg">those
defined
in
[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins></a></cite><ins class="diff-chg">
]
with
aliases.
The
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
tabular
data
model
</ins></a><ins class="diff-chg">
limits
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
cell
values
</ins></a><ins class="diff-chg">
to
have
datatypes
as
shown
on
</ins><a href="#fig-datatypes" class="sectionRef fig-ref"><ins class="diff-chg">
the
diagram
</ins></a>:
</p>
<ul>
<li>
<del class="diff-old">a
name
or
label
for
</del>
the
<del class="diff-old">column
</del>
<ins class="diff-chg">datatypes
defined
in
[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins></a></cite><ins class="diff-chg">
]
as
derived
from
and
including
</ins><code><ins class="diff-chg">
anyAtomicType
</ins></code>
</li>
<li>
the
<del class="diff-old">expected
type
</del>
<ins class="diff-chg">datatype
</ins><code><ins class="diff-chg">
xml
</ins></code>,<ins class="diff-chg">
a
sub-type
</ins>
of
<del class="diff-old">values
in
that
column
</del>
<code>
<ins class="diff-chg">string
</ins></code>,<ins class="diff-chg">
which
indicates
the
value
is
an
XML
fragment
</ins>
</li>
<li>
<ins class="diff-new">the
datatype
</ins><code><ins class="diff-new">
html
</ins></code>,<ins class="diff-new">
a
sub-type
of
</ins><code><ins class="diff-new">
string
</ins></code>,<ins class="diff-new">
which
indicates
the
value
is
</ins>
an
<del class="diff-old">indication
</del>
<ins class="diff-chg">HTML
fragment
</ins></li><li><ins class="diff-chg">
the
datatype
</ins><code><ins class="diff-chg">
json
</ins></code>,<ins class="diff-chg">
a
sub-type
</ins>
of
<del class="diff-old">whether
</del>
<code>
<ins class="diff-chg">string
</ins></code>,<ins class="diff-chg">
which
indicates
</ins>
the
<del class="diff-old">column
contains
unique
values
</del>
<ins class="diff-chg">value
is
serialized
JSON
</ins>
</li>
</ul>
<del class="diff-old">The
rows
within
an
annotated
table
are
all
annotated
rows
:
rows
which
MAY
have
any
number
of
properties
</del>
<figure id="fig-datatypes" style="text-align:center">
<img src="datatypes.svg" style="width: 50%" alt="Built-in Datatype Hierarchy diagram">
<figcaption>
<ins class="diff-chg">Fig.
</ins><span class="figno"><ins class="diff-chg">
1
</ins></span><span class="fig-title"><ins class="diff-chg">
Diagram
showing
the
built-in
datatypes,
based
on
[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins>
</a>
</cite>
<ins class="diff-new">];
names
</ins>
in
<del class="diff-old">addition
</del>
<ins class="diff-chg">paranthesis
denote
aliases
</ins>
to
<del class="diff-old">those
provided
in
</del>
the
<del class="diff-old">core
tabular
data
model
described
</del>
<ins class="diff-chg">[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins></a></cite><ins class="diff-chg">
]
terms
(see
the
diagram
</ins>
in
<del class="diff-old">section
2.1
Core
Tabular
Data
Model
</del>
<a href="datatypes.svg">
<ins class="diff-chg">SVG
</ins></a><ins class="diff-chg">
or
</ins><a href="datatypes.png"><ins class="diff-chg">
PNG
</ins></a><ins class="diff-chg">
formats)
</ins>
</span>
<del class="diff-old">.
</del>
</figcaption>
</figure>
<p>
The
<a class="internalDFN" href="#dfn-core-annotations">
<ins class="diff-new">core
</ins>
annotations
<del class="diff-old">on
</del>
</a>
<ins class="diff-chg">of
</ins>
a
<del class="diff-old">row
provide
additional
metadata
about
the
information
held
in
the
row,
such
as:
</del>
<ins class="diff-chg">datatype
are:
</ins>
</p>
<ul>
<li>
<dfn id="dfn-datatype-base" title="datatype base">
<ins class="diff-new">base
</ins></dfn><ins class="diff-new">
—
a
string
representing
</ins>
the
<del class="diff-old">certainty
</del>
<ins class="diff-chg">datatype
identifier
from
the
set
defined
above.
All
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a>
of
the
<del class="diff-old">information
in
that
row
</del>
<ins class="diff-chg">datatype
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
valid
values
of
the
base
datatype.
</ins>
</li>
<li>
<del class="diff-old">information
about
the
source
</del>
<dfn id="dfn-datatype-format" title="datatype format">
<ins class="diff-chg">format
</ins></dfn><ins class="diff-chg">
—
a
string
</ins>
or
<del class="diff-old">provenance
of
</del>
<ins class="diff-chg">object
that
defines
</ins>
the
<del class="diff-old">data
</del>
<ins class="diff-chg">format
of
a
value
of
this
type,
used
when
parsing
a
</ins><a class="internalDFN" href="#dfn-cell-string-value"><ins class="diff-chg">
cell
string
value
</ins></a><ins class="diff-chg">
as
described
</ins>
in
<del class="diff-old">that
row
</del>
<a class="sec-ref" href="#parsing-cells">
<span class="secno">
<ins class="diff-chg">6.2
</ins></span><span class="sec-title"><ins class="diff-chg">
Parsing
Cells
</ins></span></a>.
</li>
<del class="diff-old">The
cells
within
an
annotated
row
are
all
annotated
cells
:
cells
which
MAY
have
any
</del>
<li>
<dfn id="dfn-datatype-length" title="datatype length">
<ins class="diff-chg">length
</ins></dfn><ins class="diff-chg">
—
a
</ins>
number
<ins class="diff-new">that
the
exact
length
</ins>
of
<del class="diff-old">properties
</del>
<ins class="diff-chg">a
</ins><a class="internalDFN" href="#dfn-cell-string-value"><ins class="diff-chg">
cell
string
value
</ins>
</a>
<del class="diff-old">in
addition
to
those
provided
in
the
core
tabular
data
model
</del>
<ins class="diff-chg">as
</ins>
described
in
<a href="#length-constraints" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">4.6.1
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Core
Tabular
Data
Model
</del>
<ins class="diff-chg">Length
Constraints
</ins>
</span>
</a>.
<del class="diff-old">The
annotations
on
</del>
</li>
<li>
<dfn id="dfn-datatype-minimum-length" title="datatype minimum length">
<ins class="diff-chg">minimum
length
</ins></dfn><ins class="diff-chg">
—
</ins>
a
<del class="diff-old">cell
provide
metadata
about
</del>
<ins class="diff-chg">number
that
</ins>
the
<ins class="diff-new">minimum
length
of
a
</ins><a class="internalDFN" href="#dfn-cell-string-value"><ins class="diff-new">
cell
string
</ins>
value
<del class="diff-old">held
in
the
cell,
particularly
when
this
overrides
the
information
provided
for
the
annotated
column
and
annotated
row
</del>
</a>
<ins class="diff-new">as
described
in
</ins><a href="#length-constraints" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
4.6.1
</ins></span><span class="sec-title"><ins class="diff-new">
Length
Constraints
</ins></span></a>.</li><li><dfn id="dfn-datatype-maximum-length" title="datatype maximum length"><ins class="diff-new">
maximum
length
</ins></dfn><ins class="diff-new">
—
a
number
</ins>
that
the
<del class="diff-old">cell
falls
within.
Annotations
on
</del>
<ins class="diff-chg">maximum
length
of
</ins>
a
<a class="internalDFN" href="#dfn-cell-string-value">
cell
<del class="diff-old">might
be:
</del>
<ins class="diff-chg">string
value
</ins></a><ins class="diff-chg">
as
described
in
</ins><a href="#length-constraints" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
4.6.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Length
Constraints
</ins></span></a>.</li>
<li>
<del class="diff-old">notes
to
aid
</del>
<dfn id="dfn-datatype-minimum" title="datatype minimum">
<ins class="diff-chg">minimum
</ins></dfn><ins class="diff-chg">
—
a
number
that
</ins>
the
<del class="diff-old">interpretation
</del>
<ins class="diff-chg">minimum
valid
value
(inclusive)
</ins>
of
<del class="diff-old">the
</del>
<ins class="diff-chg">a
</ins><a class="internalDFN" href="#dfn-cell-string-value"><ins class="diff-chg">
cell
string
</ins>
value
</a>
<ins class="diff-new">as
described
in
</ins><a href="#value-constraints" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
4.6.2
</ins></span><span class="sec-title"><ins class="diff-new">
Value
Constraints
</ins></span></a>.
</li>
<li>
<del class="diff-old">type
annotations
for
</del>
<dfn id="dfn-datatype-maximum" title="datatype maximum">
<ins class="diff-chg">maximum
</ins></dfn><ins class="diff-chg">
—
a
number
that
</ins>
the
<ins class="diff-new">maximum
valid
</ins>
value
<ins class="diff-new">(inclusive)
of
a
</ins><a class="internalDFN" href="#dfn-cell-string-value"><ins class="diff-new">
cell
string
value
</ins></a><ins class="diff-new">
as
described
in
</ins><a href="#value-constraints" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
4.6.2
</ins></span><span class="sec-title"><ins class="diff-new">
Value
Constraints
</ins></span></a>.
</li>
<li>
<dfn id="dfn-datatype-minimum-exclusive" title="datatype minimum exclusive">
<ins class="diff-new">minimum
exclusive
</ins></dfn><ins class="diff-new">
—
</ins>
a
<del class="diff-old">flag
</del>
<ins class="diff-chg">number
</ins>
that
<del class="diff-old">indicates
</del>
the
<ins class="diff-new">minimum
valid
</ins>
value
<del class="diff-old">is
</del>
<ins class="diff-chg">(exclusive)
of
</ins>
a
<del class="diff-old">null
</del>
<a class="internalDFN" href="#dfn-cell-string-value">
<ins class="diff-chg">cell
string
</ins>
value
</a>
<ins class="diff-new">as
described
in
</ins><a href="#value-constraints" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
4.6.2
</ins></span><span class="sec-title"><ins class="diff-new">
Value
Constraints
</ins></span></a>.
</li>
<del class="diff-old">The
</del>
<li>
<dfn id="dfn-datatype-maximum-exclusive" title="datatype maximum exclusive">
<ins class="diff-chg">maximum
exclusive
</ins></dfn><ins class="diff-chg">
—
a
number
that
the
maximum
valid
</ins>
value
<ins class="diff-chg">(exclusive)
</ins>
of
<del class="diff-old">an
annotated
</del>
<ins class="diff-chg">a
</ins><a class="internalDFN" href="#dfn-cell-string-value">
cell
<ins class="diff-new">string
value
</ins>
</a>
<ins class="diff-chg">as
described
in
</ins><a href="#value-constraints" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
4.6.2
</ins></span><span class="sec-title"><ins class="diff-chg">
Value
Constraints
</ins></span></a>.</li></ul><p><ins class="diff-chg">
Datatypes
</ins><em title="MAY" class="rfc2119">
MAY
</em>
<del class="diff-old">be
</del>
<ins class="diff-chg">have
any
number
</ins>
of
<del class="diff-old">a
datatype
other
than
a
string.
For
example,
</del>
<ins class="diff-chg">additional
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation">
annotations
<del class="diff-old">might
enable
</del>
</a>.
<ins class="diff-chg">The
annotations
on
</ins>
a
<del class="diff-old">processor
to
understand
the
string
value
of
</del>
<ins class="diff-chg">datatype
provide
metadata
about
</ins>
the
<del class="diff-old">cell
</del>
<ins class="diff-chg">datatype
such
</ins>
as
<del class="diff-old">representing
a
number
</del>
<ins class="diff-chg">title
</ins>
or
<del class="diff-old">a
date.
Issue
41
</del>
<ins class="diff-chg">description.
These
arise
from
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-common-property" class="externalDFN"><ins class="diff-chg">
common
properties
</ins>
</a>
<ins class="diff-new">defined
on
datatype
descriptions
within
metadata
documents,
as
defined
in
[
</ins><cite>
<a href="#bib-tabular-metadata" class="bibref">
<ins class="diff-chg">tabular-metadata
</ins></a>
<del class="diff-old">The
permitted
types
of
names
and
values
of
annotations
need
to
be
spelled
out
here.
</del>
</cite>
<ins class="diff-chg">].
</ins>
</p>
<section property="bibo:hasPart" resource="#length-constraints" typeof="bibo:Chapter" id="length-constraints">
<h4 resource="#h-length-constraints" id="h-length-constraints">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">2.3
</del>
<ins class="diff-chg">4.6.1
</ins>
</span>
<del class="diff-old">Grouped
Tabular
Data
Model
</del>
<ins class="diff-chg">Length
Constraints
</ins>
</span>
</h4>
<p>
<del class="diff-old">A
group
of
tables
comprises
a
set
of
tables
(which
may
be
annotated
tables
</del>
<ins class="diff-chg">The
</ins><a class="internalDFN" href="#dfn-datatype-length" title="datatype length"><ins class="diff-chg">
length
</ins></a>,<a class="internalDFN" href="#dfn-datatype-minimum-length" title="datatype minimum length"><ins class="diff-chg">
minimum
length
</ins>
</a>
<del class="diff-old">)
</del>
and
<del class="diff-old">a
set
of
annotations
(
properties
</del>
<a class="internalDFN" href="#dfn-datatype-maximum-length" title="datatype maximum length">
<ins class="diff-chg">maximum
length
</ins>
</a>
<ins class="diff-new">annotations
indicate
the
exact,
minimum
</ins>
and
<ins class="diff-chg">maximum
lengths
for
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
cell
string
</ins>
values
</a>.
</p>
<p>
<ins class="diff-new">The
length
of
a
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-new">
value
</ins>
</a>
<del class="diff-old">)
that
relate
to
the
set.
</del>
<ins class="diff-chg">is
determined
as
follows:
</ins>
</p>
<ul>
<li>
<ins class="diff-chg">if
the
value
is
</ins><code><ins class="diff-chg">
null
</ins></code>,<ins class="diff-chg">
its
length
is
zero
</ins></li><li><ins class="diff-chg">
if
the
value
is
a
string
or
one
of
its
subtypes,
its
length
is
the
number
of
characters
in
the
value
</ins></li><li><ins class="diff-chg">
if
the
value
is
of
a
binary
type,
its
length
is
the
number
of
bytes
in
the
binary
value
</ins></li></ul></section><section property="bibo:hasPart" resource="#value-constraints" typeof="bibo:Chapter" id="value-constraints"><h4 resource="#h-value-constraints" id="h-value-constraints">
<span property="xhv:role" resource="xhv:heading">
<del class="diff-old">Note
</del>
<span class="secno">
<ins class="diff-chg">4.6.2
</ins></span><ins class="diff-chg">
Value
Constraints
</ins>
</span>
<del class="diff-old">Tables
can
be
loosely
related
to
each
other
simply
through
annotations;
not
all
tables
that
are
related
to
each
other
need
</del>
</h4>
<p>
<ins class="diff-chg">The
</ins><a class="internalDFN" href="#dfn-datatype-minimum" title="datatype minimum"><ins class="diff-chg">
minimum
</ins></a>,<a class="internalDFN" href="#dfn-datatype-maximum" title="datatype maximum"><ins class="diff-chg">
maximum
</ins></a>,<a class="internalDFN" href="#dfn-datatype-minimum-exclusive" title="datatype minimum exclusive"><ins class="diff-chg">
minimum
exclusive
</ins></a>,<ins class="diff-chg">
and
</ins><a class="internalDFN" href="#dfn-datatype-maximum-exclusive" title="datatype maximum exclusive"><ins class="diff-chg">
maximum
exclusive
</ins></a><ins class="diff-chg">
annotations
indicate
limits
on
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
cell
string
values
</ins></a>.<ins class="diff-chg">
These
apply
</ins>
to
<del class="diff-old">grouped
together.
Groups
</del>
<ins class="diff-chg">numeric,
date/time,
and
duration
types.
</ins></p><p><ins class="diff-chg">
Validation
</ins>
of
<del class="diff-old">tables
are
useful
because
they
can
be
annotated
with
metadata
that
applies
to
all
the
tables
</del>
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
<ins class="diff-chg">cell
string
values
</ins></a><ins class="diff-chg">
against
these
datatypes
is
as
defined
</ins>
in
<del class="diff-old">the
group.
</del>
<ins class="diff-chg">[
</ins><cite>
<a href="#bib-xmlschema11-2" class="bibref">
<ins class="diff-chg">xmlschema11-2
</ins></a></cite><ins class="diff-chg">
].
</ins></p>
</section>
</section>
</section>
<section property="bibo:hasPart" resource="#locating-metadata" typeof="bibo:Chapter" id="locating-metadata">
<h2 resource="#h-locating-metadata" id="h-locating-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.
</del>
<ins class="diff-chg">5.
</ins>
</span>
Locating
Metadata
</span>
</h2>
<p>
As
described
in
<a href="#model" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.2
</del>
<ins class="diff-chg">4.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Annotated
</del>
Tabular
Data
<del class="diff-old">Model
</del>
<ins class="diff-chg">Models
</ins>
</span>
</a>,
tabular
data
may
have
a
number
of
annotations
associated
with
it.
Here
we
describe
the
different
methods
that
can
be
used
to
locate
<ins class="diff-new">metadata
that
provides
</ins>
those
<del class="diff-old">annotations
given
a
link
to
a
CSV
file.
</del>
<ins class="diff-chg">annotations.
</ins>
</p>
<p>
In
most
methods
of
locating
metadata
described
here,
metadata
is
provided
within
<del class="diff-old">a
</del>
separate
<del class="diff-old">document.
</del>
<ins class="diff-chg">documents.
</ins>
The
syntax
of
<del class="diff-old">this
document
</del>
<ins class="diff-chg">these
documents
</ins>
is
defined
in
<del class="diff-old">the
Metadata
Vocabulary
for
Tabular
Data
</del>
<ins class="diff-chg">[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins>
</a>
<del class="diff-old">specification.
These
documents
can
include
things
like:
</del>
</cite>
<ins class="diff-chg">].
</ins>
</p>
<del class="diff-old">metadata
about
the
table,
such
as
titles,
descriptions,
provenance,
and
links
to
other
tables
metadata
about
columns
in
the
table,
such
as
labels,
data
types
and
other
constraints,
or
flags
to
indicate
values
in
the
column
are
unique
metadata
about
rows
in
the
table,
such
as
certainty
or
provenance
metadata
about
values
in
the
table,
such
as
notes
or
type
annotations
</del>
<p>
When
creating
a
set
of
annotations
from
metadata,
if
the
same
property
is
specified
in
two
locations
then
information
"closer"
to
the
end
user
or
interpreter
of
the
document
<del class="diff-old">should
override
</del>
<ins class="diff-chg">overrides
</ins>
other
information,
and
information
"closer"
to
the
document
itself
<del class="diff-old">should
override
</del>
<ins class="diff-chg">overrides
</ins>
information
"further"
from
the
document.
Explicitly,
the
order
of
<del class="diff-old">preference
</del>
<ins class="diff-chg">precedence
</ins>
is:
</p>
<ol>
<li>
metadata
supplied
by
the
user
of
the
implementation
that
is
processing
the
tabular
data,
see
<a href="#overriding-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.1
</del>
<ins class="diff-chg">5.1
</ins>
</span>
<span class="sec-title">
Overriding
Metadata
</span>
</a>
</li>
<li>
metadata
embedded
within
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
itself,
see
<a href="#embedded-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.2
</del>
<ins class="diff-chg">5.2
</ins>
</span>
<span class="sec-title">
Embedded
Metadata
</span>
</a>
</li>
<li>
metadata
in
a
document
linked
to
using
a
<code>
Link
</code>
header
associated
with
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
<del class="diff-old">file,
</del>
<ins class="diff-chg">file
</ins></a>,
see
<a href="#link-header" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.3
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<span class="sec-title">
Link
Header
</span>
</a>
</li>
<li>
file-specific
metadata
in
a
document
located
based
on
the
location
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
<del class="diff-old">file,
</del>
<ins class="diff-chg">file
</ins></a>,
see
<a href="#standard-file-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.4
</del>
<ins class="diff-chg">5.4
</ins>
</span>
<span class="sec-title">
Standard
File
Metadata
</span>
</a>
</li>
<li>
directory-specific
metadata
in
a
document
located
based
on
the
location
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
<del class="diff-old">file,
</del>
<ins class="diff-chg">file
</ins></a>,
see
<a href="#standard-directory-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">3.5
</del>
<ins class="diff-chg">5.5
</ins>
</span>
<span class="sec-title">
Standard
Directory
Metadata
</span>
</a>
</li>
</ol>
<p>
Processors
<em title="MUST" class="rfc2119">
MUST
</em>
<del class="diff-old">attempt
to
locate
a
</del>
<ins class="diff-chg">always
use
overriding
</ins>
metadata
<del class="diff-old">document
based
on
each
of
these
locations
in
order,
</del>
and
<del class="diff-old">use
first
</del>
<ins class="diff-chg">embedded
metadata.
If
the
overriding
</ins>
metadata
<del class="diff-old">document
that
is
successfully
located
in
this
way.
Issue
42
What
should
processors
do
if
they
have
been
passed
</del>
<ins class="diff-chg">does
not
originate
from
</ins>
a
<ins class="diff-new">complete
</ins>
metadata
file
<del class="diff-old">and
located
a
CSV
file
</del>
<ins class="diff-chg">itself
(for
example,
if
it
is
generated
</ins>
from
<del class="diff-old">that
metadata
file.
Should
they
still
check
for
metadata
files
related
specifically
</del>
<ins class="diff-chg">command-line
options
when
invoking
the
implementation),
processors
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
attempt
</ins>
to
<ins class="diff-new">locate
</ins>
the
<del class="diff-old">CSV
file
itself?
For
example,
say
that
an
application
has
been
pointed
at
a
metadata
file
at
http://example.org/metadata.json
which
references
http://example.org/toilets.csv
but
there
is
also
a
</del>
<ins class="diff-chg">first
</ins>
metadata
<del class="diff-old">file
at
http://example.org/toilets.csv-metadata.json
.
If
</del>
<ins class="diff-chg">document
from
</ins>
the
<del class="diff-old">processor
had
been
originally
pointed
to
</del>
<code>
<del class="diff-old">http://example.org/toilets.csv
</del>
<ins class="diff-chg">Link
</ins>
</code>
<del class="diff-old">then
it
would
have
located
</del>
<ins class="diff-chg">header,
</ins>
the
file-specific
<ins class="diff-new">metadata,
or
the
directory-specific
metadata.
The
located
</ins>
metadata
<del class="diff-old">at
http://example.org/toilets.csv-metadata.json
,
but
coming
via
http://example.org/metadata.json
means
that
file-specific
</del>
<ins class="diff-chg">from
these
locations
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
merged
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
no
</ins>
metadata
is
<del class="diff-old">skipped.
</del>
<ins class="diff-chg">supplied
or
found,
then
the
following
Metadata
is
used
as
the
</ins><dfn id="dfn-default-metadata"><ins class="diff-chg">
default
metadata
</ins></dfn>:
</p>
      <pre>{
<ins class="diff-chg">  "@type": "TableGroup",
  "tables": []
}
</ins></pre><section property="bibo:hasPart" resource="#overriding-metadata" typeof="bibo:Chapter" id="overriding-metadata"><h3 resource="#h-overriding-metadata" id="h-overriding-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.1
</del>
<ins class="diff-chg">5.1
</ins>
</span>
Overriding
Metadata
</span>
</h3>
<p>
Processors
<em title="SHOULD" class="rfc2119">
SHOULD
</em>
provide
users
with
the
facility
to
provide
their
own
metadata
for
<a class="internalDFN" href="#dfn-tabular-data-file" title="tabular data file">
tabular
data
files
</a>
that
they
process.
<ins class="diff-new">This
might
be
provided:
</ins></p><ul><li><ins class="diff-new">
through
processor
options,
such
as
command-line
options
for
a
command-line
implementation
or
checkboxes
in
a
GUI
</ins></li><li><ins class="diff-new">
by
enabling
the
user
to
select
an
existing
metadata
file,
which
may
be
local
or
remote
</ins></li><li><ins class="diff-new">
by
enabling
the
user
to
specify
a
series
of
metadata
files,
which
are
merged
by
the
processor
and
handled
as
if
they
were
a
single
file
</ins></li></ul><p><ins class="diff-new">
For
example,
a
processor
might
be
invoked
with:
</ins></p><div class="example"><div class="example-title"><span><ins class="diff-new">
Example
2
</ins></span>:<ins class="diff-new">
Command-line
CSV
processing
with
column
types
</ins></div><pre class="example"><ins class="diff-new">
$
csvlint
data.csv
--datatypes:string,float,string,string
</ins></pre></div><p><ins class="diff-new">
to
enable
the
testing
of
the
types
of
values
in
the
columns
of
a
CSV
file,
or
with:
</ins></p><div class="example"><div class="example-title"><span><ins class="diff-new">
Example
3
</ins></span>:<ins class="diff-new">
Command-line
CSV
processing
with
a
schema
</ins></div><pre class="example"><ins class="diff-new">
$
csvlint
data.csv
--schema:schema.json
</ins></pre></div><p><ins class="diff-new">
to
supply
a
schema
that
describes
the
contents
of
the
file,
against
which
it
can
be
validated.
</ins></p><p><ins class="diff-new">
Metadata
supplied
in
this
way
is
called
overriding,
or
user-supplied,
metadata.
Implementations
</ins><em title="SHOULD" class="rfc2119"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
define
how
any
options
they
define
are
mapped
into
the
vocabulary
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
If
the
user
selects
existing
metadata
files,
implementations
</ins><em title="MUST NOT" class="rfc2119"><ins class="diff-new">
MUST
NOT
</ins></em><ins class="diff-new">
use
metadata
located
through
the
link
header
(as
described
in
</ins><a href="#link-header" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.3
</ins></span><span class="sec-title"><ins class="diff-new">
Link
Header
</ins></span></a><ins class="diff-new">
),
file-specific
metadata
(as
described
in
</ins><a href="#standard-file-metadata" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.4
</ins></span><span class="sec-title"><ins class="diff-new">
Standard
File
Metadata
</ins></span></a><ins class="diff-new">
)
or
directory-specific
metadata
(as
described
in
</ins><a href="#standard-directory-metadata" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.5
</ins></span><span class="sec-title"><ins class="diff-new">
Standard
Directory
Metadata
</ins></span></a><ins class="diff-new">
).
</ins>
</p>
</section>
<section property="bibo:hasPart" resource="#embedded-metadata" typeof="bibo:Chapter" id="embedded-metadata">
<h3 resource="#h-embedded-metadata" id="h-embedded-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.2
</del>
<ins class="diff-chg">5.2
</ins>
</span>
Embedded
Metadata
</span>
</h3>
<p>
Most
syntaxes
for
tabular
data
provide
a
facility
for
<dfn id="dfn-embedded-metadata" title="embedded metadata">
embedding
<del class="diff-old">some
</del>
metadata
</dfn>
within
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
itself.
The
definition
of
a
syntax
for
tabular
data
<em title="SHOULD" class="rfc2119">
SHOULD
</em>
include
a
description
of
how
the
syntax
maps
to
an
annotated
data
<del class="diff-old">model.
See
section
</del>
<ins class="diff-chg">model,
and
in
particular
how
any
embedded
metadata
is
mapped
into
the
vocabulary
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
Parsing
based
on
the
default
dialect
for
CSV,
as
described
in
</ins><a href="#parsing" class="secitonRef sec-ref">
<span class="secno">
<del class="diff-old">5.
</del>
<ins class="diff-chg">8.
</ins>
</span>
<span class="sec-title">
Parsing
Tabular
Data
</span>
</a>,
<ins class="diff-new">will
extract
</ins><a class="internalDFN" href="#dfn-column-titles"><ins class="diff-new">
column
titles
</ins>
</a>
<del class="diff-old">for
</del>
<ins class="diff-chg">from
the
first
row
of
</ins>
a
<del class="diff-old">description
</del>
<ins class="diff-chg">CSV
file.
</ins></p>        <div class="example"><div class="example-title"><span>Example 4</span>: http://example.org/tree-ops.csv</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date<ins class="diff-chg">
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON
ST,Liquidambar
styraciflua,Large
Tree
Routine
Prune,6/2/2010
</ins></pre></div><p><ins class="diff-chg">
The
results
</ins>
of
this
<del class="diff-old">for
CSV
files.
</del>
<ins class="diff-chg">can
be
found
in
</ins><a href="#simple-example" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
8.2.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Simple
Example
</ins></span></a>.</p><p><ins class="diff-chg">
For
another
example,
the
following
tab-delimited
file
contains
embedded
metadata
where
it
is
assumed
that
comments
may
be
added
using
a
</ins><code><ins class="diff-chg">
#
</ins></code>,<ins class="diff-chg">
and
that
the
column
types
may
be
indicated
using
a
</ins><code><ins class="diff-chg">
#datatype
</ins></code><ins class="diff-chg">
annotation:
</ins></p>        <div class="example"><div class="example-title"><span>Example 5</span>: Tab-separated file containing embedded metadata</div><pre class="example"># publisher City of Palo Alto<ins class="diff-chg">
# updated 12/31/2010
#name GID on_street species trim_cycle  inventory_date
#datatype string  string  string  string  date:M/D/YYYY
  GID On Street Species Trim Cycle  Inventory Date
  1 ADDISON AV  Celtis australis  Large Tree Routine Prune  10/18/2010
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010
</ins></pre></div><p><ins class="diff-chg">
A
processor
that
recognises
this
format
may
be
able
to
extract
and
make
sense
of
this
embedded
metadata.
</ins>
</p>
</section>
<section property="bibo:hasPart" resource="#link-header" typeof="bibo:Chapter" id="link-header">
<h3 resource="#h-link-header" id="h-link-header">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.3
</del>
<ins class="diff-chg">5.3
</ins>
</span>
Link
Header
</span>
</h3>
<p>
<del class="diff-old">When
</del>
<ins class="diff-chg">If
the
user
has
not
supplied
a
metadata
file
as
overriding
metadata,
described
in
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Overriding
Metadata
</ins></span></a>,<ins class="diff-chg">
then
when
</ins>
retrieving
a
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
via
HTTP,
<del class="diff-old">the
response
MAY
</del>
<ins class="diff-chg">processors
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins>
</em>
<del class="diff-old">include
a
</del>
<ins class="diff-chg">retrieve
the
metadata
file
referenced
by
any
</ins>
<code>
Link
</code>
header
<del class="diff-old">with
</del>
<ins class="diff-chg">with:
</ins></p><ul><li>
<code>
<del class="diff-old">rel=describedby
</del>
<ins class="diff-chg">rel="describedby"
</ins>
</code>
and
</li>
<li>
<code>
<del class="diff-old">type=application/csv-metadata+json
</del>
<ins class="diff-chg">type="application/csvm+json"
</ins></code>,<code><ins class="diff-chg">
type="application/ld+json"
</ins>
</code>
<del class="diff-old">that
points
to
a
</del>
<ins class="diff-chg">or
</ins><code><ins class="diff-chg">
type="application/json"
</ins></code></li></ul><p><ins class="diff-chg">
so
long
as
this
referenced
</ins>
metadata
file
<del class="diff-old">that
</del>
describes
the
<ins class="diff-new">retrieved
</ins><a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
<del class="diff-old">file.
If,
by
inspection,
the
referenced
</del>
file
<del class="diff-old">is
not
</del>
</a>
<ins class="diff-chg">(ie,
contains
</ins>
a
<del class="diff-old">valid
metadata
file
then
it
MUST
be
ignored.
</del>
<a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-table-description" class="externalDFN">
<ins class="diff-chg">table
description
</ins></a><ins class="diff-chg">
whose
</ins><code><ins class="diff-chg">
url
</ins></code><ins class="diff-chg">
matches
the
request
URL).
</ins></p><p>
If
there
is
more
than
one
valid
metadata
file
linked
to
through
multiple
<code>
Link
</code>
headers,
then
<ins class="diff-new">implementations
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
</ins>
the
metadata
<ins class="diff-new">file
</ins>
referenced
by
<ins class="diff-new">the
last
</ins>
<code>
Link
</code>
<del class="diff-old">headers
that
appear
later
in
</del>
<ins class="diff-chg">header.
</ins></p><p><ins class="diff-chg">
For
example,
when
</ins>
the
response
<del class="diff-old">are
used
in
preference
</del>
to
<del class="diff-old">those
referenced
by
earlier
Link
headers.
</del>
<ins class="diff-chg">requesting
a
tab-separated
file
looks
like:
</ins>
</p>
        <div class="example"><div class="example-title"><span>Example 6</span>: HTTP response including Link headers</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pln">HTTP</span><span class="pun">/</span><span class="lit">1.1</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> OK
</span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Type</span><span class="pun">:</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">tab</span><span class="pun">-</span><span class="pln">separated</span><span class="pun">-</span><span class="pln">values
</span><span class="pun">...</span><span class="pln">
</span><span class="typ">Link</span><span class="pun">:</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln">metadata</span><span class="pun">.</span><span class="pln">ttl</span><span class="pun">&gt;;</span><span class="pln"> rel</span><span class="pun">=</span><span class="str">"describedBy"</span><span class="pun">;</span><span class="pln"> type</span><span class="pun">=</span><span class="str">"text/turtle"</span><span class="pln">
</span>
<span class="typ">
<ins class="diff-chg">Link
</ins></span>
<span class="pun">:
</span>
<del class="diff-old">Issue
43
</del>
<span class="pln">
</span>
<span class="pun">
<ins class="diff-chg">&lt;
</ins></span>
<span class="pln">
<ins class="diff-chg">metadata
</ins></span>
<del class="diff-old">Suggest
that
we
drop
</del>
<span class="pun">.
</span>
<span class="pln">
<ins class="diff-chg">json
</ins></span><span class="pun"><ins class="diff-chg">
&gt;;
</ins></span><span class="pln"><ins class="diff-chg">
rel
</ins></span><span class="pun"><ins class="diff-chg">
=
</ins></span><span class="str"><ins class="diff-chg">
"describedBy"
</ins></span><span class="pun"><ins class="diff-chg">
;
</ins></span><span class="pln"><ins class="diff-chg">
type
</ins></span><span class="pun"><ins class="diff-chg">
=
</ins></span><span class="str"><ins class="diff-chg">
"application/csvm+json"
</ins></span></pre></div><p><ins class="diff-chg">
an
implementation
must
use
</ins>
the
<del class="diff-old">requirement
</del>
<ins class="diff-chg">referenced
</ins><code><ins class="diff-chg">
metadata.json
</ins></code>
to
<del class="diff-old">ignore
invalid
</del>
<ins class="diff-chg">supply
</ins>
metadata
<del class="diff-old">files,
given
that
</del>
<ins class="diff-chg">for
processing
the
file.
</ins></p><p><ins class="diff-chg">
If
</ins>
the
<del class="diff-old">correct
</del>
metadata
file
<del class="diff-old">should
be
identified
through
the
type
of
</del>
<ins class="diff-chg">found
at
this
location
does
not
explicitly
include
a
reference
to
</ins>
the
<del class="diff-old">link.
</del>
<ins class="diff-chg">requested
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a><ins class="diff-chg">
then
it
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
ignored.
</ins>
</p>
</section>
<section property="bibo:hasPart" resource="#standard-file-metadata" typeof="bibo:Chapter" id="standard-file-metadata">
<h3 resource="#h-standard-file-metadata" id="h-standard-file-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.4
</del>
<ins class="diff-chg">5.4
</ins>
</span>
Standard
File
Metadata
</span>
</h3>
<p>
If
<ins class="diff-new">the
user
has
not
supplied
a
metadata
file
as
overriding
metadata,
described
in
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.1
</ins></span><span class="sec-title"><ins class="diff-new">
Overriding
Metadata
</ins></span></a>,<ins class="diff-new">
and
</ins>
no
<ins class="diff-new">applicable
</ins>
metadata
<del class="diff-old">document
</del>
<ins class="diff-chg">file
</ins>
has
been
<del class="diff-old">located
</del>
<ins class="diff-chg">discovered
</ins>
through
<del class="diff-old">higher-priority
mechanisms,
</del>
<ins class="diff-chg">a
</ins><code><ins class="diff-chg">
Link
</ins></code><ins class="diff-chg">
header,
described
in
</ins><a href="#link-header" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.3
</ins></span><span class="sec-title"><ins class="diff-chg">
Link
Header
</ins></span></a>,
processors
<em title="MUST" class="rfc2119">
MUST
</em>
attempt
to
locate
a
file-specific
metadata
document.
This
method
<del class="diff-old">is
only
</del>
<em title="MUST NOT" class="rfc2119">
<ins class="diff-chg">MUST
NOT
</ins></em><ins class="diff-chg">
be
</ins>
used
if
the
URL
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
<del class="diff-old">does
not
contain
</del>
</a>
<ins class="diff-chg">contains
</ins>
a
query
component.
</p>
<p>
In
this
case,
<ins class="diff-new">processors
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
construct
a
URL
for
</ins>
the
file-specific
metadata
document
<del class="diff-old">should
be
located
at
</del>
<ins class="diff-chg">by
appending
</ins>
<code>
<del class="diff-old">location
</del>
-metadata.json
<del class="diff-old">,
where
location
is
</del>
</code>
<ins class="diff-chg">to
</ins>
the
<del class="diff-old">base
URL
</del>
<ins class="diff-chg">location
</ins>
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
<del class="diff-old">with
the
</del>
</a>
<ins class="diff-chg">(with
any
</ins>
fragment
component
of
<del class="diff-old">the
</del>
<ins class="diff-chg">that
</ins>
URL
<del class="diff-old">removed,
if
applicable.
</del>
<ins class="diff-chg">removed)
and
attempt
to
retrieve
a
metadata
document
from
that
location.
</ins></p><p>
For
example,
if
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
is
at
<code>
http://example.org/south-west/devon.csv
</code>
then
processors
<del class="diff-old">should
</del>
<ins class="diff-chg">must
</ins>
attempt
to
locate
a
metadata
document
at
<code>
http://example.org/south-west/devon.csv-metadata.json
</code>.
<ins class="diff-new">On
the
other
hand,
if
the
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-new">
tabular
data
file
</ins></a><ins class="diff-new">
is
at
</ins><code><ins class="diff-new">
http://example.com/index.php?file=43178.csv
</ins></code><ins class="diff-new">
then,
because
the
URL
of
the
tabular
data
file
includes
a
query
component,
the
processor
must
not
attempt
to
look
for
a
file-specific
metadata
document.
</ins></p><p>
If
the
metadata
file
found
at
this
location
does
not
explicitly
<del class="diff-old">point
</del>
<ins class="diff-chg">include
a
reference
</ins>
to
the
relevant
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
then
it
<em title="MUST" class="rfc2119">
MUST
</em>
be
ignored.
</p>
</section>
<section property="bibo:hasPart" resource="#standard-directory-metadata" typeof="bibo:Chapter" id="standard-directory-metadata">
<h3 resource="#h-standard-directory-metadata" id="h-standard-directory-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">3.5
</del>
<ins class="diff-chg">5.5
</ins>
</span>
Standard
Directory
Metadata
</span>
</h3>
<p>
If
<ins class="diff-new">the
user
has
not
supplied
a
metadata
file
as
overriding
metadata,
described
in
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.1
</ins></span><span class="sec-title"><ins class="diff-new">
Overriding
Metadata
</ins></span></a>,<ins class="diff-new">
and
</ins>
no
<ins class="diff-new">applicable
</ins>
metadata
<del class="diff-old">document
</del>
<ins class="diff-chg">file
</ins>
has
been
<del class="diff-old">located
</del>
<ins class="diff-chg">discovered
</ins>
through
<del class="diff-old">higher-priority
mechanisms,
</del>
<ins class="diff-chg">a
</ins><code><ins class="diff-chg">
Link
</ins></code><ins class="diff-chg">
header,
described
in
</ins><a href="#link-header" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.3
</ins></span><span class="sec-title"><ins class="diff-chg">
Link
Header
</ins></span></a>,<ins class="diff-chg">
or
from
the
standard
file
metadata
location,
described
in
</ins><a href="#standard-file-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.4
</ins></span><span class="sec-title"><ins class="diff-chg">
Standard
File
Metadata
</ins></span></a>,
processors
<em title="MUST" class="rfc2119">
MUST
</em>
attempt
to
locate
a
directory-level
metadata
document.
This
method
<del class="diff-old">is
only
</del>
<em title="MUST NOT" class="rfc2119">
<ins class="diff-chg">MUST
NOT
</ins></em><ins class="diff-chg">
be
</ins>
used
if
the
URL
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
<del class="diff-old">does
not
contain
</del>
</a>
<ins class="diff-chg">contains
</ins>
a
query
component.
</p>
<p>
<del class="diff-old">The
</del>
<ins class="diff-chg">Processors
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
locate
and
retrieve
the
</ins>
common
metadata
document
for
a
directory
<del class="diff-old">can
be
located
</del>
by
resolving
the
relative
URL
<code>
metadata.json
</code>
against
the
base
URL
of
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
<del class="diff-old">file.
</del>
<ins class="diff-chg">file
</ins></a><ins class="diff-chg">
and
fetching
the
resulting
URL.
</ins></p><p>
For
example,
if
the
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
is
at
<code>
http://example.org/south-west/devon.csv
</code>
then
processors
<del class="diff-old">should
</del>
<ins class="diff-chg">must
</ins>
attempt
to
locate
a
metadata
file
at
<code>
http://example.org/south-west/metadata.json
</code>.
<ins class="diff-new">On
the
other
hand,
if
the
tabular
data
file
is
at
</ins><code><ins class="diff-new">
http://example.com/index.php?file=43178.csv
</ins></code><ins class="diff-new">
then,
because
the
URL
of
the
tabular
data
file
includes
a
query
component,
the
processor
must
not
attempt
to
look
for
a
directory-level
metadata
document.
</ins></p><p>
If
the
metadata
file
found
at
this
location
does
not
explicitly
<del class="diff-old">point
</del>
<ins class="diff-chg">include
a
reference
</ins>
to
the
relevant
<a class="internalDFN" href="#dfn-tabular-data-file">
tabular
data
file
</a>
then
it
<em title="MUST" class="rfc2119">
MUST
</em>
be
ignored.
</p>
</section>
</section>
<section property="bibo:hasPart" resource="#processing-tables" typeof="bibo:Chapter" id="processing-tables">
<h2 resource="#h-processing-tables" id="h-processing-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.
</del>
<ins class="diff-chg">6.
</ins>
</span>
<del class="diff-old">CSV+
Syntax
</del>
<ins class="diff-chg">Processing
Tables
</ins>
</span>
</h2>
<p>
This
section
<ins class="diff-new">describes
how
particular
types
of
applications
should
process
tabular
data
and
metadata
files.
</ins></p><p><ins class="diff-new">
In
many
cases,
an
application
will
start
processing
from
a
metadata
file.
In
that
case,
the
initial
metadata
file
</ins>
is
<del class="diff-old">non-normative.
</del>
<ins class="diff-chg">treated
as
</ins><a href="#overriding-metadata"><ins class="diff-chg">
overriding
metadata
</ins></a><ins class="diff-chg">
and
the
application
</ins><em title="MUST NOT" class="rfc2119"><ins class="diff-chg">
MUST
NOT
</ins>
</em>
<ins class="diff-new">continue
to
retrieve
other
available
metadata
about
each
of
the
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-new">
tabular
data
file
</ins></a><ins class="diff-new">
s
referenced
by
that
initial
metadata
file
other
than
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-new">
embedded
metadata
</ins></a>.</p><p><ins class="diff-new">
In
other
cases,
applications
will
start
from
a
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-new">
tabular
data
file
</ins></a>,<ins class="diff-new">
such
as
a
CSV
file,
and
</ins><a href="#locating-metadata"><ins class="diff-new">
locate
metadata
</ins></a><ins class="diff-new">
from
that
file.
This
metadata
will
be
used
to
process
the
file
as
if
the
processor
were
starting
from
that
metadata
file.
</ins></p><p><ins class="diff-new">
For
example,
if
a
validator
is
passed
a
locally
authored
metadata
file
</ins><code><ins class="diff-new">
spending.json
</ins></code>,<ins class="diff-new">
which
contains:
</ins></p>      <div class="example"><div class="example-title"><span>Example 7</span>: Metadata file referencing multiple tabular data files sharing a schema</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"government-spending.csv"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"tables"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">    </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/east-sussex-2015-03.csv"</span><span class="pun">,</span><span class="pln">  </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/east-sussex-2015-02.csv"</span><span class="pln">  </span><span class="pun">},</span><span class="pln"> </span><span class="pun">...</span><span class="pln">   </span><span class="pun">]</span><span class="pln"></span><span class="pun"><ins class="diff-new">
}
</ins></span></pre>
</div>
<p>
<ins class="diff-new">the
validator
would
validate
all
the
listed
tables,
using
the
locally
defined
schema
at
</ins><code><ins class="diff-new">
government-spending.csv
</ins></code>.<ins class="diff-new">
It
would
also
use
the
metadata
embedded
in
the
referenced
CSV
files;
for
example,
when
processing
</ins><code><ins class="diff-new">
http://example.org/east-sussex-2015-03.csv
</ins></code>,<ins class="diff-new">
it
would
use
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-new">
embedded
metadata
</ins></a><ins class="diff-new">
within
that
file.
</ins>
</p>
<p>
<del class="diff-old">There
</del>
<ins class="diff-chg">If
a
validator
</ins>
is
<del class="diff-old">no
standard
</del>
<ins class="diff-chg">passed
a
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a><code><ins class="diff-chg">
http://example.org/east-sussex-2015-03.csv
</ins></code>,<ins class="diff-chg">
the
validator
would
use
the
metadata
located
from
the
CSV
file:
the
first
metadata
file
found
through
the
</ins><code><ins class="diff-chg">
Link
</ins></code><ins class="diff-chg">
headers
found
when
retrieving
that
file,
or
at
</ins><code><ins class="diff-chg">
http://example.org/east-sussex-2015-03.csv-metadata.json
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
http://example.org/metadata.json
</ins></code>.</p><div class="note"><div id="h-note4" role="heading" aria-level="3" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Starting
with
a
metadata
file
can
remove
the
need
to
perform
additional
requests
to
locate
linked,
file-specific,
or
directory-specific
metadata
</ins></p></div><section property="bibo:hasPart" resource="#creating-annotated-tables" typeof="bibo:Chapter" id="creating-annotated-tables"><h3 resource="#h-creating-annotated-tables" id="h-creating-annotated-tables"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.1
</ins></span><ins class="diff-chg">
Creating
Annotated
Tables
</ins></span></h3><p><ins class="diff-chg">
After
locating
metadata,
metadata
is
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-merged" class="externalDFN"><ins class="diff-chg">
merged
</ins></a><ins class="diff-chg">
into
a
single
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-table-group-description" class="externalDFN"><ins class="diff-chg">
table
group
description
</ins></a>.<ins class="diff-chg">
When
starting
with
a
metadata
file,
this
involves
merging
the
provided
metadata
file
with
the
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a>
for
<del class="diff-old">CSV,
</del>
<ins class="diff-chg">each
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a><ins class="diff-chg">
referenced
by
that
file.
When
starting
with
a
tabular
data
file,
this
involves
locating
the
first
metadata
file
as
described
in
</ins><a href="#locating-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.
</ins></span><span class="sec-title"><ins class="diff-chg">
Locating
Metadata
</ins></span></a>
and
<del class="diff-old">there
are
many
variants
</del>
<ins class="diff-chg">merging
all
relevant
metadata
into
a
single
descriptor.
</ins></p><p><ins class="diff-chg">
If
processing
starts
with
a
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a>,<ins class="diff-chg">
implementations:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Retrieve
the
tabular
data
file.
</ins></li><li><ins class="diff-chg">
Retrieve
any
metadata
supplied
by
the
user
(
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
T
</ins></sub></code><ins class="diff-chg">
)
(see
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Overriding
Metadata
</ins></span></a><ins class="diff-chg">
).
</ins></li><li><ins class="diff-chg">
If
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
T
</ins></sub></code><ins class="diff-chg">
does
not
describe
a
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
or
</ins><a class="internalDFN" href="#dfn-group-of-tables"><ins class="diff-chg">
group
</ins>
of
<del class="diff-old">CSV
used
</del>
<ins class="diff-chg">tables
</ins></a><ins class="diff-chg">
describing
the
tabular
data
file,
retrieve
the
first
metadata
file
(
</ins><code><ins class="diff-chg">
FM
</ins></code><ins class="diff-chg">
)
as
described
in
</ins><a href="#locating-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.
</ins></span><span class="sec-title"><ins class="diff-chg">
Locating
Metadata
</ins></span></a>:<ol class="algorithm"><li><ins class="diff-chg">
metadata
referenced
from
a
</ins><em><ins class="diff-chg">
Link
Header
</ins></em><ins class="diff-chg">
that
may
be
returned
when
retrieving
the
tabular
data
file
(see
</ins><a href="#link-header" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.3
</ins></span><span class="sec-title"><ins class="diff-chg">
Link
Header
</ins></span></a><ins class="diff-chg">
).
</ins></li><li><ins class="diff-chg">
file-specific
metadata
in
a
document
located
based
</ins>
on
the
<del class="diff-old">web
today.
This
</del>
<ins class="diff-chg">location
of
the
tabular
data
file
(see
</ins><a href="#standard-file-metadata" class="sectionRef sec-ref">
section
<del class="diff-old">defines
</del>
<span class="secno">
<ins class="diff-chg">5.4
</ins></span><span class="sec-title"><ins class="diff-chg">
Standard
File
Metadata
</ins></span></a><ins class="diff-chg">
).
</ins></li><li><ins class="diff-chg">
directory-specific
metadata
in
</ins>
a
<del class="diff-old">method
</del>
<ins class="diff-chg">document
located
based
on
the
location
of
the
tabular
data
file
(see
</ins><a href="#standard-directory-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.5
</ins></span><span class="sec-title"><ins class="diff-chg">
Standard
Directory
Metadata
</ins></span></a><ins class="diff-chg">
).
</ins></li><li><a class="internalDFN" href="#dfn-default-metadata"><ins class="diff-chg">
default
metadata
</ins></a><ins class="diff-chg">
as
defined
in
</ins><a href="#locating-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.
</ins></span><span class="sec-title"><ins class="diff-chg">
Locating
Metadata
</ins></span></a><ins class="diff-chg">
with
a
single
</ins><code><ins class="diff-chg">
tables
</ins></code><ins class="diff-chg">
entry
where
the
</ins><code><ins class="diff-chg">
url
</ins></code><ins class="diff-chg">
property
is
set
from
that
of
the
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a>.</li></ol></li><li><ins class="diff-chg">
Proceed
as
if
the
process
starts
with
a
metadata
file
using
the
merged
metadata
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
M
</ins></sub><ins class="diff-chg">
=
merge(UM
</ins><sub><ins class="diff-chg">
T
</ins></sub>,<ins class="diff-chg">
FM)
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
T
</ins></sub></code><ins class="diff-chg">
if
no
</ins><code><ins class="diff-chg">
FM
</ins></code><ins class="diff-chg">
is
loaded.
</ins></li></ol><p><ins class="diff-chg">
If
the
process
starts
with
a
metadata
file:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Retrieve
the
metadata
file
yielding
the
metadata
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
M
</ins></sub></code><ins class="diff-chg">
(which
is
treated
as
overriding
metadata,
see
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Overriding
Metadata
</ins></span></a><ins class="diff-chg">
).
</ins></li><li><ins class="diff-chg">
For
each
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
in
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
M
</ins></sub></code><ins class="diff-chg">
in
order,
create
one
or
more
</ins><a class="internalDFN" href="#dfn-annotated-table" title="annotated table"><ins class="diff-chg">
annotated
tables
</ins></a>:<ol class="algorithm"><li><ins class="diff-chg">
Extract
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-descriptions"><ins class="diff-chg">
dialect
description
</ins></a><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
DD
</ins></code><ins class="diff-chg">
)
from
</ins><code><ins class="diff-chg">
UM
</ins><sub><ins class="diff-chg">
M
</ins></sub></code>
for
<del class="diff-old">outputting
</del>
<ins class="diff-chg">the
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
associated
with
the
</ins>
tabular
data
<del class="diff-old">adhering
</del>
<ins class="diff-chg">file.
If
there
is
no
such
dialect
description,
extract
the
first
available
dialect
description
from
a
</ins><a class="internalDFN" href="#dfn-group-of-tables"><ins class="diff-chg">
group
of
tables
</ins></a><ins class="diff-chg">
in
which
the
tabular
data
file
is
described.
Otherwise
use
the
default
dialect
description.
</ins></li><li><ins class="diff-chg">
If
using
the
default
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-descriptions"><ins class="diff-chg">
dialect
description
</ins></a>,<ins class="diff-chg">
override
default
values
in
</ins><code><ins class="diff-chg">
DD
</ins></code><ins class="diff-chg">
based
on
HTTP
headers
found
when
retrieving
the
tabular
data
file:
</ins><ul><li><ins class="diff-chg">
If
the
media
type
from
the
</ins><code><ins class="diff-chg">
Content-Type
</ins></code><ins class="diff-chg">
header
is
</ins><code><ins class="diff-chg">
text/tsv
</ins></code>,<ins class="diff-chg">
set
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-delimiter" class="externalDFN"><ins class="diff-chg">
delimiter
</ins></a>
to
<code>
<ins class="diff-new">TAB
</ins></code><ins class="diff-new">
in
</ins><code><ins class="diff-new">
DD
</ins></code>.</li><li><ins class="diff-new">
If
</ins>
the
<del class="diff-old">core
</del>
<code>
<ins class="diff-chg">Content-Type
</ins></code><ins class="diff-chg">
header
includes
the
</ins><code><ins class="diff-chg">
header
</ins></code><ins class="diff-chg">
parameter
with
a
value
of
</ins><code><ins class="diff-chg">
absent
</ins></code>,<ins class="diff-chg">
set
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-header" class="externalDFN"><ins class="diff-chg">
header
</ins></a><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
in
</ins><code><ins class="diff-chg">
DD
</ins></code>.</li><li><ins class="diff-chg">
If
the
</ins><code><ins class="diff-chg">
Content-Type
</ins></code><ins class="diff-chg">
header
includes
the
</ins><code><ins class="diff-chg">
charset
</ins></code><ins class="diff-chg">
parameter,
set
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-encoding" class="externalDFN"><ins class="diff-chg">
encoding
</ins></a><ins class="diff-chg">
to
this
value
in
</ins><code><ins class="diff-chg">
DD
</ins></code>.</li></ul></li><li><p><ins class="diff-chg">
Parse
the
tabular
data
file,
using
</ins><code><ins class="diff-chg">
DD
</ins></code><ins class="diff-chg">
as
a
guide,
to
create
a
basic
</ins>
tabular
data
model
<ins class="diff-new">(
</ins><code><ins class="diff-new">
T
</ins></code><ins class="diff-new">
)
and
extract
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-new">
embedded
metadata
</ins>
</a>
<del class="diff-old">described
</del>
<ins class="diff-chg">(
</ins><code><ins class="diff-chg">
EM
</ins></code><ins class="diff-chg">
),
for
example
from
the
</ins><a class="internalDFN" href="#dfn-header-line"><ins class="diff-chg">
header
line
</ins></a>.</p><div class="note"><div id="h-note5" role="heading" aria-level="4" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
This
specification
provides
a
non-normative
definition
for
parsing
CSV-based
files,
including
the
extraction
of
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a>,
in
<a href="#parsing" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.1
</del>
<ins class="diff-chg">8.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Core
</del>
<ins class="diff-chg">Parsing
</ins>
Tabular
Data
<del class="diff-old">Model
</del>
</span>
</a>.
<ins class="diff-new">This
specification
does
not
define
any
syntax
for
embedded
metadata
beyond
this;
whatever
syntax
is
used,
it's
assumed
that
metadata
can
be
mapped
to
the
vocabulary
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></p></div></li><li><ins class="diff-new">
If
a
</ins><code><ins class="diff-new">
Content-Language
</ins></code><ins class="diff-new">
HTTP
header
was
found
when
retrieving
the
tabular
data
file,
and
the
value
provides
a
single
language,
set
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#cell-language" class="externalDFN"><ins class="diff-new">
lang
</ins></a><ins class="diff-new">
inherited
property
to
this
value
in
</ins><code><ins class="diff-new">
EM
</ins></code>.</li><li><ins class="diff-new">
Create
the
merged
metadata
</ins><code><ins class="diff-new">
M
=
merge(UM
</ins><sub><ins class="diff-new">
M
</ins></sub>,<ins class="diff-new">
EM)
</ins></code><ins class="diff-new">
using
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-merged" class="externalDFN"><ins class="diff-new">
merge
algorithm
</ins></a><ins class="diff-new">
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></li><li><ins class="diff-new">
Use
the
metadata
</ins><code><ins class="diff-new">
M
</ins></code><ins class="diff-new">
to
add
annotations
to
the
tabular
data
model
</ins><code><ins class="diff-new">
T
</ins></code><ins class="diff-new">
as
described
in
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#annotating-tables"><ins class="diff-new">
Section
2
Annotating
Tables
</ins></a><ins class="diff-new">
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></li></ol></li></ol><div class="note"><div id="h-note6" role="heading" aria-level="4" class="note-title"><span><ins class="diff-new">
Note
</ins></span></div><p class=""><ins class="diff-new">
In
the
case
of
starting
with
a
metadata
file,
</ins><code><ins class="diff-new">
UM
</ins><sub><ins class="diff-new">
M
</ins></sub></code><ins class="diff-new">
will
describe
a
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-new">
table
</ins></a><ins class="diff-new">
or
</ins><a class="internalDFN" href="#dfn-group-of-tables"><ins class="diff-new">
group
of
tables
</ins></a>,<ins class="diff-new">
and
no
other
metadata
files
will
be
retrieved.
Thus
the
metadata
file
must
provide
all
applicable
metadata
aside
from
that
embedded
within
the
tabular
data
files
themselves.
</ins></p></div></section><section property="bibo:hasPart" resource="#parsing-cells" typeof="bibo:Chapter" id="parsing-cells"><h3 resource="#h-parsing-cells" id="h-parsing-cells"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
6.2
</ins></span><ins class="diff-new">
Parsing
Cells
</ins></span></h3><p><ins class="diff-new">
Unlike
many
other
data
formats,
tabular
data
is
designed
to
be
read
by
humans.
For
that
reason,
it's
common
for
data
to
be
represented
within
tabular
data
in
a
human-readable
way.
The
</ins><a class="internalDFN" href="#dfn-column-datatype" title="column datatype"><ins class="diff-new">
datatype
</ins></a>,<a class="internalDFN" href="#dfn-column-default" title="column default"><ins class="diff-new">
default
</ins></a>,<a class="internalDFN" href="#dfn-column-lang" title="column lang"><ins class="diff-new">
lang
</ins></a>,<a class="internalDFN" href="#dfn-column-null" title="column null"><ins class="diff-new">
null
</ins></a>,<a class="internalDFN" href="#dfn-column-required" title="column required"><ins class="diff-new">
required
</ins></a>,<ins class="diff-new">
and
</ins><a class="internalDFN" href="#dfn-column-separator" title="column separator"><ins class="diff-new">
separator
</ins></a><ins class="diff-new">
annotations
provide
the
information
needed
to
parse
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-new">
string
value
</ins></a><ins class="diff-new">
of
a
cell
into
its
(semantic)
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-new">
value
</ins>
</a>
<ins class="diff-new">annotation.
This
is
used:
</ins></p><ul><li><ins class="diff-new">
by
</ins><strong><ins class="diff-new">
validators
</ins></strong><ins class="diff-new">
to
check
that
the
data
in
the
table
is
in
the
expected
format,
</ins></li><li><ins class="diff-new">
by
</ins><strong><ins class="diff-new">
converters
</ins></strong><ins class="diff-new">
to
parse
the
values
before
mapping
them
into
values
in
the
target
of
the
conversion,
</ins></li><li><ins class="diff-new">
when
</ins><strong><ins class="diff-new">
displaying
</ins></strong><ins class="diff-new">
data,
to
map
it
into
formats
that
are
meaningful
for
those
viewing
the
data
(as
opposed
to
those
publishing
it),
and
</ins></li><li><ins class="diff-new">
when
</ins><strong><ins class="diff-new">
inputting
</ins></strong><ins class="diff-new">
data,
to
turn
entered
values
</ins>
into
<ins class="diff-new">representations
in
</ins>
a
<del class="diff-old">standard,
CSV-based,
syntax.
Compliant
applications
</del>
<ins class="diff-chg">consistent
format.
</ins></li></ul><p><ins class="diff-chg">
The
process
of
parsing
a
cell
creates
a
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><ins class="diff-chg">
with
annotations
based
on
the
original
string
value,
parsed
value
and
other
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
annotations
and
adds
the
cell
to
the
list
of
</ins><a class="internalDFN" href="#dfn-row-cells" title="row cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
a
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
and
</ins><a class="internalDFN" href="#dfn-column-cells" title="column cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
in
a
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a>:</p><ul><li><ins class="diff-chg">
The
raw
string
value
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li><li><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-column-ordered" title="column ordered"><ins class="diff-chg">
ordered
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-ordered" title="cell ordered"><ins class="diff-chg">
ordered
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li><li><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-column-text-direction" title="column text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li><li><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-row" title="cell row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li><li><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-column" title="cell column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li></ul><p><ins class="diff-chg">
After
parsing,
the
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
can
be:
</ins></p><ul><li><code><ins class="diff-chg">
null
</ins></code>,</li><li><ins class="diff-chg">
a
single
value
with
an
associated
optional
datatype
or
language,
or
</ins></li><li><ins class="diff-chg">
a
sequence
of
such
values.
</ins></li></ul><p><ins class="diff-chg">
The
process
of
parsing
the
string
value
into
a
single
value
or
a
list
of
values
is
as
follows:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
unless
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
string
</ins></code>,<code><ins class="diff-chg">
json
</ins></code>,<code><ins class="diff-chg">
xml
</ins></code>,<code><ins class="diff-chg">
html
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
anyAtomicType
</ins></code>,<ins class="diff-chg">
replace
all
carriage
return
(
</ins><code><ins class="diff-chg">
#xD
</ins></code><ins class="diff-chg">
),
line
feed
(
</ins><code><ins class="diff-chg">
#xA
</ins></code><ins class="diff-chg">
),
and
tab
(
</ins><code><ins class="diff-chg">
#x9
</ins></code><ins class="diff-chg">
)
characters
with
space
characters.
</ins></li><li><ins class="diff-chg">
unless
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
string
</ins></code>,<code><ins class="diff-chg">
json
</ins></code>,<code><ins class="diff-chg">
xml
</ins></code>,<code><ins class="diff-chg">
html
</ins></code>,<code><ins class="diff-chg">
anyAtomicType
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
normalizedString
</ins></code>,<ins class="diff-chg">
strip
leading
and
trailing
whitespace
from
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
and
replace
all
instances
of
two
or
more
whitespace
characters
with
a
single
space
character.
</ins></li><li><ins class="diff-chg">
if
the
normalized
string
is
an
empty
string,
apply
the
remaining
steps
to
the
string
given
by
the
</ins><a class="internalDFN" href="#dfn-column-default"><ins class="diff-chg">
column
default
</ins></a><ins class="diff-chg">
annotation.
</ins></li><li><ins class="diff-chg">
if
the
</ins><a class="internalDFN" href="#dfn-column-separator"><ins class="diff-chg">
column
separator
</ins></a><ins class="diff-chg">
annotation
is
not
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
normalized
string
is
an
empty
string,
the
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
is
an
empty
list.
If
the
</ins><a class="internalDFN" href="#dfn-column-required"><ins class="diff-chg">
column
required
</ins></a><ins class="diff-chg">
annotation
is
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
add
an
error
to
the
list
of
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
for
the
cell.
</ins></li><li><ins class="diff-chg">
if
the
</ins><a class="internalDFN" href="#dfn-column-separator"><ins class="diff-chg">
column
separator
</ins></a><ins class="diff-chg">
annotation
is
not
</ins><code><ins class="diff-chg">
null
</ins></code>,<ins class="diff-chg">
the
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
is
a
list
of
values;
set
the
</ins><a class="internalDFN" href="#dfn-cell-value-list" title="cell value list"><ins class="diff-chg">
list
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
and
create
the
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
created
by:
</ins><ol class="algorithm"><li><ins class="diff-chg">
if
the
normalized
string
is
the
same
as
any
one
of
the
values
of
the
</ins><a class="internalDFN" href="#dfn-column-null"><ins class="diff-chg">
column
null
</ins></a><ins class="diff-chg">
annotation,
then
the
resulting
value
is
</ins><code><ins class="diff-chg">
null
</ins></code>.</li><li><ins class="diff-chg">
split
the
normalized
string
at
the
character
specified
by
the
</ins><a class="internalDFN" href="#dfn-column-separator"><ins class="diff-chg">
column
separator
</ins></a><ins class="diff-chg">
annotation.
</ins></li><li><ins class="diff-chg">
unless
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
string
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
anyAtomicType
</ins></code>,<ins class="diff-chg">
strip
leading
and
trailing
whitespace
from
these
strings.
</ins></li><li><ins class="diff-chg">
applying
the
remaining
steps
to
each
of
the
strings
in
turn.
</ins></li></ol></li><li><ins class="diff-chg">
if
the
string
is
an
empty
string,
apply
the
remaining
steps
to
the
string
given
by
the
</ins><a class="internalDFN" href="#dfn-column-default"><ins class="diff-chg">
column
default
</ins></a><ins class="diff-chg">
annotation.
</ins></li><li><ins class="diff-chg">
if
the
string
is
the
same
as
any
one
of
the
values
of
the
</ins><a class="internalDFN" href="#dfn-column-null"><ins class="diff-chg">
column
null
</ins></a><ins class="diff-chg">
annotation,
then
the
resulting
value
is
</ins><code><ins class="diff-chg">
null
</ins></code>.<ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-column-separator"><ins class="diff-chg">
column
separator
</ins></a><ins class="diff-chg">
annotation
is
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-column-required"><ins class="diff-chg">
column
required
</ins></a><ins class="diff-chg">
annotation
is
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
add
an
error
to
the
list
of
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
for
the
cell.
</ins></li><li><ins class="diff-chg">
parse
the
string
using
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
if
one
is
specified,
as
described
below
to
give
a
value
with
an
associated
</ins><a class="internalDFN" href="#dfn-cell-value-datatype" title="cell value datatype"><ins class="diff-chg">
datatype
</ins></a>.<ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
string
</ins></code>,<ins class="diff-chg">
or
there
is
no
</ins><code><ins class="diff-chg">
datatype
</ins></code>,<ins class="diff-chg">
the
value
has
an
associated
</ins><a class="internalDFN" href="#dfn-cell-value-language" title="cell value language"><ins class="diff-chg">
language
</ins></a><ins class="diff-chg">
from
the
</ins><a class="internalDFN" href="#dfn-column-lang"><ins class="diff-chg">
column
lang
</ins></a><ins class="diff-chg">
annotation.
If
there
are
any
errors,
add
them
to
the
list
of
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
for
the
cell;
in
this
case
the
value
has
a
</ins><a class="internalDFN" href="#dfn-cell-value-datatype" title="cell value datatype"><ins class="diff-chg">
datatype
</ins></a><ins class="diff-chg">
of
</ins><code><ins class="diff-chg">
string
</ins></code><ins class="diff-chg">
;
if
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
string
</ins></code>,<ins class="diff-chg">
or
there
is
no
</ins><code><ins class="diff-chg">
datatype
</ins></code>,<ins class="diff-chg">
the
value
has
an
associated
</ins><a class="internalDFN" href="#dfn-cell-value-language" title="cell value language"><ins class="diff-chg">
language
</ins></a><ins class="diff-chg">
from
the
</ins><a class="internalDFN" href="#dfn-column-lang"><ins class="diff-chg">
column
lang
</ins></a><ins class="diff-chg">
annotation.
</ins></li><li><ins class="diff-chg">
validate
the
value
based
on
the
length
constraints
described
in
</ins><a href="#length-constraints" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
4.6.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Length
Constraints
</ins></span></a>,<ins class="diff-chg">
the
value
constraints
described
in
</ins><a href="#value-constraints" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
4.6.2
</ins></span><span class="sec-title"><ins class="diff-chg">
Value
Constraints
</ins></span></a><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
if
one
is
specified,
as
described
below.
If
there
are
any
errors,
add
them
to
the
list
of
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
for
the
cell.
</ins></li></ol><p><ins class="diff-chg">
The
final
value
(or
values)
become
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</p><p><ins class="diff-chg">
If
there
is
a
</ins><a class="internalDFN" href="#dfn-column-about-url" title="column about URL"><ins class="diff-chg">
about
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a>,<ins class="diff-chg">
it
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-about-url" title="cell about URL"><ins class="diff-chg">
about
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>,<ins class="diff-chg">
after
being
transformed
into
an
absolute
URL
as
described
in
</ins><cite><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#uri-template-properties"><ins class="diff-chg">
URI
Template
Properties
</ins></a></cite><ins class="diff-chg">
of
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
there
is
a
</ins><a class="internalDFN" href="#dfn-column-property-url" title="column property URL"><ins class="diff-chg">
property
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a>,<ins class="diff-chg">
it
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-property-url" title="cell property URL"><ins class="diff-chg">
property
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>,<ins class="diff-chg">
after
being
transformed
into
an
absolute
URL
as
described
in
</ins><cite><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#uri-template-properties"><ins class="diff-chg">
URI
Template
Properties
</ins></a></cite><ins class="diff-chg">
of
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
there
is
a
</ins><a class="internalDFN" href="#dfn-column-value-url" title="column value URL"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a>,<ins class="diff-chg">
it
becomes
the
</ins><a class="internalDFN" href="#dfn-cell-value-url" title="cell value URL"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>,<ins class="diff-chg">
after
being
transformed
into
an
absolute
URL
as
described
in
</ins><cite><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#uri-template-properties"><ins class="diff-chg">
URI
Template
Properties
</ins></a></cite><ins class="diff-chg">
of
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
The
</ins><a class="internalDFN" href="#dfn-column-value-url" title="column value URL"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
annotation
is
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
if
the
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-column-virtual"><ins class="diff-chg">
column
virtual
</ins></a><ins class="diff-chg">
annotation
is
</ins><code><ins class="diff-chg">
false
</ins></code>.</p><section property="bibo:hasPart" resource="#parsing-examples" typeof="bibo:Chapter" id="parsing-examples" class="informative"><h4 resource="#h-parsing-examples" id="h-parsing-examples"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.2.1
</ins></span><ins class="diff-chg">
Parsing
examples
</ins></span></h4><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
When
</ins><a class="internalDFN" href="#dfn-datatype"><ins class="diff-chg">
datatype
</ins></a><ins class="diff-chg">
annotation
is
available,
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
of
a
cell
is
the
same
as
its
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a>.<ins class="diff-chg">
For
example,
a
cell
with
a
string
value
of
</ins><code><ins class="diff-chg">
"99"
</ins></code><ins class="diff-chg">
would
similarly
have
the
(semantic)
value
</ins><code><ins class="diff-chg">
"99"
</ins></code>.</p><p><ins class="diff-chg">
If
a
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
provided
for
the
cell,
</ins>
that
<del class="diff-old">output
</del>
<ins class="diff-chg">is
used
to
create
a
(semantic)
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
for
the
cell.
For
example,
if
the
metadata
contains:
</ins></p><div class="example"><div class="example-title"><span><ins class="diff-chg">
Example
8
</ins></span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="str"><ins class="diff-chg">
"datatype"
</ins></span><span class="pun">:</span><span class="pln"></span><span class="str"><ins class="diff-chg">
"integer"
</ins></span></pre></div><p><ins class="diff-chg">
for
the
cell
with
the
string
value
</ins><code><ins class="diff-chg">
"99"
</ins></code><ins class="diff-chg">
then
the
value
of
that
cell
will
be
the
integer
</ins><code><ins class="diff-chg">
99
</ins></code>.<ins class="diff-chg">
A
cell
whose
string
value
was
not
a
valid
integer
(such
as
</ins><code><ins class="diff-chg">
"one"
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
"1.0"
</ins></code><ins class="diff-chg">
)
would
be
assigned
that
string
value
as
its
(semantic)
value
annotation,
but
also
have
a
validation
error
listed
in
its
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
annotation.
</ins></p><p><ins class="diff-chg">
Sometimes
data
uses
special
codes
to
indicate
unknown
or
null
values.
For
example,
a
particular
column
might
contain
a
number
that
is
expected
to
be
between
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
10
</ins></code>,<ins class="diff-chg">
with
the
string
</ins><code><ins class="diff-chg">
99
</ins></code><ins class="diff-chg">
used
in
the
original
tabular
data
file
to
indicate
a
null
value.
The
metadata
for
such
a
column
would
include:
</ins></p>          <div class="example"><div class="example-title"><span>Example 9</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln"></span><span class="pun">},</span><span class="pln"></span><span class="str"><ins class="diff-chg">
"null"
</ins></span><span class="pun">:</span><span class="pln"></span><span class="str"><ins class="diff-chg">
"99"
</ins></span></pre></div><p><ins class="diff-chg">
In
</ins>
this
<ins class="diff-new">case,
a
cell
with
a
string
value
of
</ins><code><ins class="diff-new">
"5"
</ins></code><ins class="diff-new">
would
have
the
(semantic)
value
of
the
integer
</ins><code><ins class="diff-new">
5
</ins></code><ins class="diff-new">
;
a
cell
with
a
string
value
of
</ins><code><ins class="diff-new">
"99"
</ins></code><ins class="diff-new">
would
have
the
value
</ins><code><ins class="diff-new">
null
</ins></code>.</p><p><ins class="diff-new">
Similarly,
a
cell
may
be
assigned
a
default
value
if
the
string
value
for
the
cell
is
empty.
A
configuration
such
as:
</ins></p>            <div class="example"><div class="example-title"><span>Example 10</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln"></span><span class="pun">},</span><span class="pln"></span><span class="str"><ins class="diff-new">
"default"
</ins></span><span class="pun">:</span><span class="pln"></span><span class="str"><ins class="diff-new">
"5"
</ins></span></pre></div><p><ins class="diff-new">
In
this
case,
a
cell
whose
string
value
is
</ins><code><ins class="diff-new">
""
</ins></code><ins class="diff-new">
would
be
assigned
the
value
of
the
integer
</ins><code><ins class="diff-new">
5
</ins></code>.<ins class="diff-new">
A
cell
whose
string
value
contains
whitespace,
such
as
a
single
tab
character,
would
also
be
assigned
the
value
of
the
integer
</ins><code><ins class="diff-new">
5
</ins></code>:<ins class="diff-new">
when
the
datatype
is
something
other
than
</ins><code><ins class="diff-new">
string
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
anyAtomicType
</ins></code>,<ins class="diff-new">
leading
and
trailing
whitespace
is
stripped
from
string
values
before
the
remainder
of
the
processing
is
carried
out.
</ins></p><p><ins class="diff-new">
Cells
can
contain
sequences
of
values.
For
example,
a
cell
might
have
the
string
value
</ins><code><ins class="diff-new">
"1
5
7.0"
</ins></code>.<ins class="diff-new">
In
this
case,
the
separator
is
a
space
character.
The
appropriate
configuration
would
be:
</ins></p>          <div class="example"><div class="example-title"><span>Example 11</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln"></span><span class="pun">},</span><span class="pln"></span><span class="str">"default"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"5"</span><span class="pun">,</span><span class="pln"></span><span class="str"><ins class="diff-new">
"separator"
</ins></span><span class="pun">:</span><span class="pln"></span><span class="str"><ins class="diff-new">
"
"
</ins></span></pre></div><p><ins class="diff-new">
and
this
would
mean
that
the
cell's
value
would
be
an
array
containing
two
integers
and
a
string:
</ins><code><ins class="diff-new">
[1,
5,
"7.0"]
</ins></code>.<ins class="diff-new">
The
final
value
of
the
array
is
a
string
because
it
is
not
a
valid
integer;
the
cell's
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-new">
errors
</ins></a><ins class="diff-new">
annotation
will
also
contain
a
validation
error.
</ins></p><p><ins class="diff-new">
Also,
with
this
configuration,
if
the
string
value
of
the
cell
were
</ins><code><ins class="diff-new">
""
</ins></code><ins class="diff-new">
(ie
it
was
an
empty
cell)
the
value
of
the
cell
would
be
an
empty
list.
</ins></p><p><ins class="diff-new">
A
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-new">
cell
value
</ins></a><ins class="diff-new">
can
be
inserted
into
a
URL
created
using
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-uri-template-property" class="externalDFN"><ins class="diff-new">
URI
template
property
</ins></a><ins class="diff-new">
such
as
</ins><code><ins class="diff-new">
valueUrl
</ins></code>.<ins class="diff-new">
For
example,
if
a
cell
with
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-new">
string
value
</ins></a><code><ins class="diff-new">
"1
5
7.0"
</ins></code><ins class="diff-new">
were
in
a
column
named
</ins><code><ins class="diff-new">
values
</ins></code>,<ins class="diff-new">
defined
with:
</ins></p>          <div class="example"><div class="example-title"><span>Example 12</span></div><pre style="" class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"decimal"</span><span class="pun">,</span><span class="pln"></span><span class="str">"separator"</span><span class="pun">:</span><span class="pln"> </span><span class="str">" "</span><span class="pun">,</span><span class="pln"></span><span class="str"><ins class="diff-new">
"valueUrl"
</ins></span><span class="pun">:</span><span class="pln"></span><span class="str"><ins class="diff-new">
"{?values}"
</ins></span></pre></div><p><ins class="diff-new">
then
after
expansion
of
the
URI
template,
the
resulting
</ins><code><ins class="diff-new">
valueUrl
</ins></code><ins class="diff-new">
would
be
</ins><code><ins class="diff-new">
?values=1.0,5.0,7.0
</ins></code>.<ins class="diff-new">
The
canonical
representations
of
the
decimal
values
are
used
within
the
URL.
</ins></p></section><section property="bibo:hasPart" resource="#formats-for-numeric-types" typeof="bibo:Chapter" id="formats-for-numeric-types"><h4 resource="#h-formats-for-numeric-types" id="h-formats-for-numeric-types"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
6.2.2
</ins></span><ins class="diff-new">
Formats
for
numeric
types
</ins></span></h4><p><ins class="diff-new">
It
is
not
uncommon
for
numbers
within
tabular
data
to
be
formatted
for
human
consumption,
which
may
involve
using
commas
for
decimal
points,
grouping
digits
in
the
number
using
commas,
or
adding
currency
symbols
or
percent
signs
to
the
number.
</ins></p><p><ins class="diff-new">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-new">
datatype
base
</ins></a><ins class="diff-new">
is
a
numeric
type,
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-new">
datatype
</ins>
format
<del class="diff-old">must
meet
each
</del>
</a>
<ins class="diff-chg">annotation
indicates
the
expected
format
for
that
number.
Its
value
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
either
a
single
string
or
an
object
with
one
or
more
</ins>
of
the
<del class="diff-old">constraints.
</del>
<ins class="diff-chg">properties:
</ins>
</p>
<dl>
<dt>
<dfn id="dfn-datatype-format-decimalchar" title="datatype format decimalChar">
<ins class="diff-new">decimalChar
</ins></dfn></dt><dd><ins class="diff-new">
A
single
character
string
whose
value
is
used
to
represent
a
decimal
point
within
the
number.
The
default
value
is
</ins><code><ins class="diff-new">
"."
</ins></code>.</dd><dt><dfn id="dfn-datatype-format-groupchar" title="datatype format groupChar"><ins class="diff-new">
groupChar
</ins></dfn></dt><dd><ins class="diff-new">
A
single
character
string
whose
value
is
used
to
group
digits
within
the
number.
The
default
value
is
</ins><code><ins class="diff-new">
","
</ins></code>.</dd><dt><dfn id="dfn-datatype-format-pattern" title="datatype format pattern"><ins class="diff-new">
pattern
</ins></dfn></dt><dd><ins class="diff-new">
A
regular
expression
string,
in
the
syntax
and
interpreted
as
defined
by
[
</ins><cite><a href="#bib-ECMASCRIPT" class="bibref"><ins class="diff-new">
ECMASCRIPT
</ins></a></cite><ins class="diff-new">
].
</ins></dd></dl>
<div class="note">
<div id="h-note7" role="heading" aria-level="5" class="note-title">
<span>
Note
</span>
</div>
<p class="">
<del class="diff-old">We
</del>
<ins class="diff-chg">Authors
</ins>
are
<del class="diff-old">actively
working
</del>
<ins class="diff-chg">encouraged
to
be
conservative
in
the
regular
expressions
that
they
use,
sticking
to
the
basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</ins></p></div><p><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
is
a
single
string,
this
is
interpreted
in
the
same
way
as
if
it
were
an
object
</ins>
with
<ins class="diff-new">a
</ins><a class="internalDFN" href="#dfn-datatype-format-pattern" title="datatype format pattern"><ins class="diff-new">
pattern
</ins></a><ins class="diff-new">
property
whose
value
is
that
string.
</ins></p><p><ins class="diff-new">
When
parsing
</ins>
the
<del class="diff-old">IETF
</del>
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
<ins class="diff-chg">string
value
</ins></a><ins class="diff-chg">
of
a
cell
against
this
format
specification,
implementations
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
recognise
and
parse
numbers
that
consist
of:
</ins></p><ol><li><ins class="diff-chg">
an
optional
</ins><code><ins class="diff-chg">
+
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
-
</ins></code><ins class="diff-chg">
sign,
</ins></li><li><ins class="diff-chg">
followed
by
a
decimal
digit
(
</ins><code><ins class="diff-chg">
0-9
</ins></code><ins class="diff-chg">
),
</ins></li><li><ins class="diff-chg">
followed
by
any
number
of
decimal
digits
(
</ins><code><ins class="diff-chg">
0-9
</ins></code><ins class="diff-chg">
)
and
the
character
specified
as
the
</ins><a class="internalDFN" href="#dfn-datatype-format-groupchar" title="datatype format groupChar"><ins class="diff-chg">
groupChar
</ins></a>,</li><li><ins class="diff-chg">
followed
by
an
optional
</ins><a class="internalDFN" href="#dfn-datatype-format-decimalchar" title="datatype format decimalChar"><ins class="diff-chg">
decimalChar
</ins></a><ins class="diff-chg">
followed
by
one
or
more
decimal
digits
(
</ins><code><ins class="diff-chg">
0-9
</ins></code><ins class="diff-chg">
),
</ins></li><li><ins class="diff-chg">
followed
by
an
optional
exponent,
consisting
of
an
</ins><code><ins class="diff-chg">
E
</ins></code><ins class="diff-chg">
followed
by
an
optional
</ins><code><ins class="diff-chg">
+
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
-
</ins></code><ins class="diff-chg">
sign
followed
by
one
or
more
decimal
digits
(
</ins><code><ins class="diff-chg">
0-9
</ins></code><ins class="diff-chg">
),
or
</ins></li><li><ins class="diff-chg">
followed
by
an
optional
percent
(
</ins><code><ins class="diff-chg">
%
</ins></code><ins class="diff-chg">
)
or
per-mille
(
</ins><code><ins class="diff-chg">
‰
</ins></code><ins class="diff-chg">
)
sign.
</ins></li></ol><p><ins class="diff-chg">
or
that
are
one
of
the
special
values:
</ins></p><ol><li><code><ins class="diff-chg">
NaN
</ins></code>,</li><li><code><ins class="diff-chg">
INF
</ins></code>,<ins class="diff-chg">
or
</ins></li><li><code><ins class="diff-chg">
-INF
</ins></code>.</li></ol><p><ins class="diff-chg">
Implementations
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
add
a
validation
error
</ins>
to
<del class="diff-old">develop
</del>
<ins class="diff-chg">the
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
annotation
for
the
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><ins class="diff-chg">
if
the
string
being
parsed:
</ins></p><ul><li><ins class="diff-chg">
does
not
meet
the
numeric
format
defined
above,
</ins></li><li><ins class="diff-chg">
contains
two
consecutive
</ins><a class="internalDFN" href="#dfn-datatype-format-groupchar" title="datatype format groupChar"><ins class="diff-chg">
groupChar
</ins></a><ins class="diff-chg">
characters,
</ins></li><li><ins class="diff-chg">
does
not
match
the
regular
expression
defined
in
the
</ins><a class="internalDFN" href="#dfn-datatype-format-pattern" title="datatype format pattern"><ins class="diff-chg">
pattern
</ins></a><ins class="diff-chg">
property,
if
there
is
one,
</ins></li><li><ins class="diff-chg">
contains
the
</ins><a class="internalDFN" href="#dfn-datatype-format-decimalchar" title="datatype format decimalChar"><ins class="diff-chg">
decimalChar
</ins></a>,<ins class="diff-chg">
if
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
integer
</ins></code><ins class="diff-chg">
or
one
of
its
sub-values,
</ins></li><li><ins class="diff-chg">
contains
an
exponent,
if
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
decimal
</ins></code><ins class="diff-chg">
or
one
of
its
sub-values,
or
</ins></li><li><ins class="diff-chg">
is
one
of
the
special
values
</ins><code><ins class="diff-chg">
NaN
</ins></code>,<code><ins class="diff-chg">
INF
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
-INF
</ins></code>,<ins class="diff-chg">
if
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
decimal
</ins></code><ins class="diff-chg">
or
one
of
its
sub-values.
</ins></li></ul><p><ins class="diff-chg">
Implementations
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
use
the
sign,
exponent,
percent,
and
per-mille
signs
when
parsing
the
</ins><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
of
</ins>
a
<ins class="diff-new">cell
to
provide
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-new">
value
</ins></a><ins class="diff-new">
of
the
cell.
For
example,
the
string
value
</ins><code><ins class="diff-new">
"-25%"
</ins></code><ins class="diff-new">
must
be
interpreted
as
</ins><code><ins class="diff-new">
-0.25
</ins></code><ins class="diff-new">
and
the
string
value
</ins><code><ins class="diff-new">
"1E6"
</ins></code><ins class="diff-new">
as
</ins><code><ins class="diff-new">
1000000
</ins></code>.</p></section><section property="bibo:hasPart" resource="#formats-for-booleans" typeof="bibo:Chapter" id="formats-for-booleans"><h4 resource="#h-formats-for-booleans" id="h-formats-for-booleans"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
6.2.3
</ins></span><ins class="diff-new">
Formats
for
booleans
</ins></span></h4><p><ins class="diff-new">
Boolean
values
may
be
represented
in
many
ways
aside
from
the
</ins>
standard
<code>
<ins class="diff-new">1
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
0
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
true
</ins></code><ins class="diff-new">
and
</ins><code><ins class="diff-new">
false
</ins></code>.</p><p><ins class="diff-new">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-new">
datatype
base
</ins></a>
for
<del class="diff-old">CSV,
which
</del>
<ins class="diff-chg">a
cell
</ins>
is
<del class="diff-old">outside
</del>
<code>
<ins class="diff-chg">boolean
</ins></code>,
the
<del class="diff-old">scope
of
</del>
<a class="internalDFN" href="#dfn-datatype-format">
<ins class="diff-chg">datatype
format
</ins></a><ins class="diff-chg">
annotation
provides
</ins>
the
<del class="diff-old">Working
Group.
</del>
<ins class="diff-chg">true
and
false
values
expected,
separated
by
</ins><code><ins class="diff-chg">
|
</ins></code>.<ins class="diff-chg">
For
example
if
</ins><code><ins class="diff-chg">
format
</ins></code><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
Y|N
</ins></code><ins class="diff-chg">
then
cells
must
hold
either
</ins><code><ins class="diff-chg">
Y
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
N
</ins></code><ins class="diff-chg">
with
</ins><code><ins class="diff-chg">
Y
</ins></code><ins class="diff-chg">
meaning
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
N
</ins></code><ins class="diff-chg">
meaning
</ins><code><ins class="diff-chg">
false
</ins></code>.</p><p>
The
<del class="diff-old">details
</del>
<ins class="diff-chg">resulting
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
will
be
one
or
more
boolean
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
values.
</ins></p></section><section property="bibo:hasPart" resource="#formats-for-dates-and-times" typeof="bibo:Chapter" id="formats-for-dates-and-times"><h4 resource="#h-formats-for-dates-and-times" id="h-formats-for-dates-and-times"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.2.4
</ins></span><ins class="diff-chg">
Formats
for
dates
and
times
</ins></span></h4><p><ins class="diff-chg">
Dates
and
times
are
commonly
represented
in
tabular
data
in
formats
other
than
those
defined
in
[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
a
date
or
time
type,
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
indicates
the
expected
format
for
that
date
or
time.
</ins></p><p><ins class="diff-chg">
The
supported
date
and
time
formats
listed
</ins>
here
<del class="diff-old">aim
to
help
shape
</del>
<ins class="diff-chg">are
expressed
in
terms
of
the
</ins><a href="http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table"><ins class="diff-chg">
date
field
symbols
</ins></a><ins class="diff-chg">
defined
in
[
</ins><cite><a href="#bib-UAX35" class="bibref"><ins class="diff-chg">
UAX35
</ins></a></cite><ins class="diff-chg">
]
and
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
interpreted
by
implementations
as
defined
in
</ins>
that
<ins class="diff-new">specification.
</ins></p><p><ins class="diff-new">
The
following
date
formats
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
recognised
by
implementations:
</ins></p><ul><li><code><ins class="diff-new">
yyyy-MM-dd
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
2015-03-22
</ins></code></li><li><code><ins class="diff-new">
yyyyMMdd
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
20150322
</ins></code></li><li><code><ins class="diff-new">
dd-MM-yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22-03-2015
</ins></code></li><li><code><ins class="diff-new">
d-M-yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22-3-2015
</ins></code></li><li><code><ins class="diff-new">
MM-dd-yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
03-22-2015
</ins></code></li><li><code><ins class="diff-new">
M-d-yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
3-22-2015
</ins></code></li><li><code><ins class="diff-new">
dd/MM/yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22/03/2015
</ins></code></li><li><code><ins class="diff-new">
d/M/yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22/3/2015
</ins></code></li><li><code><ins class="diff-new">
MM/dd/yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
03/22/2015
</ins></code></li><li><code><ins class="diff-new">
M/d/yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
3/22/2015
</ins></code></li><li><code><ins class="diff-new">
dd.MM.yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22.03.2015
</ins></code></li><li><code><ins class="diff-new">
d.M.yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
22.3.2015
</ins></code></li><li><code><ins class="diff-new">
MM.dd.yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
03.22.2015
</ins></code></li><li><code><ins class="diff-new">
M.d.yyyy
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
3.22.2015
</ins></code></li></ul><p><ins class="diff-new">
The
following
time
formats
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
recognised
by
implementations:
</ins></p><ul><li><code><ins class="diff-new">
HH:mm:ss
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
15:02:37
</ins></code></li><li><code><ins class="diff-new">
HHmmss
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
150237
</ins></code></li><li><code><ins class="diff-new">
HH:mm
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
15:02
</ins></code></li><li><code><ins class="diff-new">
HHmm
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
1502
</ins></code></li></ul><p><ins class="diff-new">
The
following
date/time
formats
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
recognised
by
implementations:
</ins></p><ul><li><code><ins class="diff-new">
yyyy-MM-ddTHH:mm:ss
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
2015-03-15T15:02:37
</ins></code></li><li><code><ins class="diff-new">
yyyy-MM-ddTHH:mm
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
2015-03-15T15:02
</ins></code></li><li><ins class="diff-new">
any
of
the
date
formats
above,
followed
by
a
single
space,
followed
by
any
of
the
time
formats
above,
e.g.,
</ins><code><ins class="diff-new">
M/d/yyyy
HH:mm
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
3/22/2015
15:02
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
dd.MM.yyyy
HH:mm:ss
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
22.03.2015
15:02:37
</ins></code></li></ul><p><ins class="diff-new">
Implementations
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
also
recognise
date,
time,
and
date/time
formats
that
end
with
timezone
markers
consisting
of
between
one
and
three
</ins><code><ins class="diff-new">
x
</ins></code><ins class="diff-new">
s
or
</ins><code><ins class="diff-new">
X
</ins></code><ins class="diff-new">
s,
possibly
after
a
single
space.
These
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
interpreted
as
follows:
</ins></p><ul><li><code><ins class="diff-new">
X
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-08
</ins></code>,<code><ins class="diff-new">
+0530
</ins></code>,<ins class="diff-new">
or
</ins><code><ins class="diff-new">
Z
</ins></code><ins class="diff-new">
(minutes
are
optional)
</ins></li><li><code><ins class="diff-new">
XX
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-0800
</ins></code>,<code><ins class="diff-new">
+0530
</ins></code>,<ins class="diff-new">
or
</ins><code><ins class="diff-new">
Z
</ins></code></li><li><code><ins class="diff-new">
XXX
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-08:00
</ins></code>,<code><ins class="diff-new">
+05:30
</ins></code>,<ins class="diff-new">
or
</ins><code><ins class="diff-new">
Z
</ins></code></li><li><code><ins class="diff-new">
x
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-08
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
+0530
</ins></code><ins class="diff-new">
(
</ins><code><ins class="diff-new">
Z
</ins></code><ins class="diff-new">
is
not
permitted)
</ins></li><li><code><ins class="diff-new">
xx
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-0800
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
+0530
</ins></code><ins class="diff-new">
(
</ins><code><ins class="diff-new">
Z
</ins></code><ins class="diff-new">
is
not
permitted)
</ins></li><li><code><ins class="diff-new">
xxx
</ins></code><ins class="diff-new">
e.g.,
</ins><code><ins class="diff-new">
-08:00
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
+05:30
</ins></code><ins class="diff-new">
(
</ins><code><ins class="diff-new">
Z
</ins></code><ins class="diff-new">
is
not
permitted)
</ins></li></ul><p><ins class="diff-new">
For
example,
formats
could
include
</ins><code><ins class="diff-new">
yyyy-MM-ddTHH:mm:ssXXX
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
2015-03-15T15:02:37Z
</ins></code><ins class="diff-new">
or
</ins><code><ins class="diff-new">
2015-03-15T15:02:37-05:00
</ins></code>,<ins class="diff-new">
or
</ins><code><ins class="diff-new">
HH:mm
x
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
15:02
-05
</ins></code>.</p><p><ins class="diff-new">
The
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-new">
cell
value
</ins></a><ins class="diff-new">
will
one
or
more
dates/time
values
extracted
using
the
</ins><code><ins class="diff-new">
format
</ins></code>.</p><div class="note"><div id="h-note8" role="heading" aria-level="5" class="note-title"><span><ins class="diff-new">
Note
</ins></span></div><p class=""><ins class="diff-new">
For
simplicity,
this
version
of
this
</ins>
standard
<del class="diff-old">based
on
our
requirements.
</del>
<ins class="diff-chg">does
not
support
abbreviated
or
full
month
or
day
names,
or
double
digit
years.
Future
versions
of
this
standard
may
support
other
date
and
time
formats,
or
general
purpose
date/time
pattern
strings.
Authors
of
schemas
</ins><em title="SHOULD" class="rfc2119"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
use
appropriate
regular
expressions,
along
with
the
</ins><code><ins class="diff-chg">
string
</ins></code><ins class="diff-chg">
datatype,
for
dates
and
times
that
use
a
format
other
than
that
specified
here.
</ins>
</p>
</div>
</section>
<section property="bibo:hasPart" resource="#formats-for-durations" typeof="bibo:Chapter" id="formats-for-durations">
<h4 resource="#h-formats-for-durations" id="h-formats-for-durations">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-new">6.2.5
</ins></span><ins class="diff-new">
Formats
for
durations
</ins></span></h4>
<p>
<del class="diff-old">This
section
does
</del>
<ins class="diff-chg">Durations
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
be
formatted
and
interpreted
as
defined
in
[
</ins><cite><a href="#bib-xmlschema11-2" class="bibref"><ins class="diff-chg">
xmlschema11-2
</ins></a></cite><ins class="diff-chg">
],
using
the
[
</ins><cite><a href="#bib-ISO8601" class="bibref"><ins class="diff-chg">
ISO8601
</ins></a></cite><ins class="diff-chg">
]
format
</ins><code><ins class="diff-chg">
-?P
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
Y
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
M
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
DT
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
H
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
M
</ins><var><ins class="diff-chg">
n
</ins></var><ins class="diff-chg">
S
</ins></code>.<ins class="diff-chg">
For
example,
the
duration
</ins><code><ins class="diff-chg">
P1Y1D
</ins></code><ins class="diff-chg">
is
used
for
a
year
and
a
day;
the
duration
</ins><code><ins class="diff-chg">
PT2H30M
</ins></code><ins class="diff-chg">
for
2
hours
and
30
minutes.
</ins></p><p><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
a
duration
type,
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
provides
a
regular
expression
for
the
string
values,
in
the
syntax
and
processed
as
defined
by
[
</ins><cite><a href="#bib-ECMASCRIPT" class="bibref"><ins class="diff-chg">
ECMASCRIPT
</ins></a></cite><ins class="diff-chg">
].
</ins></p><div class="note"><div id="h-note9" role="heading" aria-level="5" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Authors
are
encouraged
to
be
conservative
in
the
regular
expressions
that
they
use,
sticking
to
the
basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</ins></p></div><p><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-cell-value"><ins class="diff-chg">
cell
value
</ins></a><ins class="diff-chg">
will
be
one
or
more
durations
extracted
using
the
</ins><code><ins class="diff-chg">
format
</ins></code>.</p></section><section property="bibo:hasPart" resource="#formats-for-other-types" typeof="bibo:Chapter" id="formats-for-other-types"><h4 resource="#h-formats-for-other-types" id="h-formats-for-other-types"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.2.6
</ins></span><ins class="diff-chg">
Formats
for
other
types
</ins></span></h4><p><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-datatype-base"><ins class="diff-chg">
datatype
base
</ins></a><ins class="diff-chg">
is
</ins>
not
<del class="diff-old">seek
</del>
<ins class="diff-chg">numeric,
</ins><code><ins class="diff-chg">
boolean
</ins></code>,<ins class="diff-chg">
a
date/time
type,
or
a
duration
type,
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
provides
a
regular
expression
for
the
string
values,
in
the
syntax
and
processed
as
defined
by
[
</ins><cite><a href="#bib-ECMASCRIPT" class="bibref"><ins class="diff-chg">
ECMASCRIPT
</ins></a></cite><ins class="diff-chg">
].
</ins></p><div class="note"><div id="h-note10" role="heading" aria-level="5" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Authors
are
encouraged
</ins>
to
<del class="diff-old">describe
how
applications
</del>
<ins class="diff-chg">be
conservative
in
the
regular
expressions
</ins>
that
<del class="diff-old">input
</del>
<ins class="diff-chg">they
use,
sticking
to
the
basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</ins></p></div><p><ins class="diff-chg">
Values
that
are
labelled
as
</ins><code><ins class="diff-chg">
html
</ins></code>,<code><ins class="diff-chg">
xml
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
json
</ins></code><em title="SHOULD NOT" class="rfc2119"><ins class="diff-chg">
SHOULD
NOT
</ins>
</em>
<del class="diff-old">textual
</del>
<ins class="diff-chg">be
validated
against
those
formats.
</ins></p><div class="note"><div id="h-note11" role="heading" aria-level="5" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Metadata
creators
who
wish
to
check
the
syntax
of
HTML,
XML,
or
JSON
within
</ins>
tabular
data
should
<del class="diff-old">interpret
it,
except
that
any
</del>
<ins class="diff-chg">use
the
</ins><a class="internalDFN" href="#dfn-datatype-format"><ins class="diff-chg">
datatype
format
</ins></a><ins class="diff-chg">
annotation
to
specify
a
regular
expression
against
which
such
values
will
be
tested.
</ins></p></div></section></section><section property="bibo:hasPart" resource="#displaying-tables" typeof="bibo:Chapter" id="displaying-tables" class="informative"><h3 resource="#h-displaying-tables" id="h-displaying-tables"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.3
</ins></span><ins class="diff-chg">
Displaying
Tables
</ins></span></h3><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
When
displaying
tables,
implementations
should:
</ins></p><ul><li><ins class="diff-chg">
use
the
</ins><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-chg">
direction
</ins></a><ins class="diff-chg">
annotation
on
each
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a>,<ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
on
each
cell,
to
determine
the
ordering
of
columns
and
characters
within
cells,
as
described
in
</ins><a href="#bidirectional-tables" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.3.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Bidirectional
Tables
</ins></span></a></li><li><ins class="diff-chg">
use
the
</ins><a class="internalDFN" href="#dfn-column-titles" title="column titles"><ins class="diff-chg">
titles
</ins></a><ins class="diff-chg">
annotation
on
each
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
to
provide
a
header
for
the
column,
selecting
the
first
title
in
a
language
based
on
the
user's
locale
and
preferences
</ins></li><li><ins class="diff-chg">
add
links
to
headers
based
on
the
</ins><a class="internalDFN" href="#dfn-cell-property-url" title="cell property URL"><ins class="diff-chg">
property
URLs
</ins></a><ins class="diff-chg">
of
the
cells
in
the
first
row
of
the
table
</ins></li><li><ins class="diff-chg">
display
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
cell
values
</ins></a>,<ins class="diff-chg">
particularly
boolean,
numeric
and
date/time
values,
in
a
lexical
form
based
on
the
user's
locale
and
preferences
</ins></li><li><ins class="diff-chg">
add
links
to
the
display
of
rows
and
cells
based
on
the
</ins><a class="internalDFN" href="#dfn-cell-about-url" title="cell about URL"><ins class="diff-chg">
about
URL
</ins></a><ins class="diff-chg">
and
</ins><a class="internalDFN" href="#dfn-cell-value-url" title="cell value URL"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
annotations
on
cells
</ins></li><li><ins class="diff-chg">
highlight
or
otherwise
indicate
cells
with
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a></li><li><ins class="diff-chg">
provide
a
way
of
viewing
non-core
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-chg">
annotations
</ins></a><ins class="diff-chg">
on
table
groups,
tables,
columns,
rows
and
cells
</ins></li><li><ins class="diff-chg">
provide
links
to
download
the
raw
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
</ins>
data
<ins class="diff-new">file
</ins></a>
that
is
<ins class="diff-new">being
displayed
</ins></li></ul><section property="bibo:hasPart" resource="#bidirectional-tables" typeof="bibo:Chapter" id="bidirectional-tables"><h4 resource="#h-bidirectional-tables" id="h-bidirectional-tables"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
6.3.1
</ins></span><ins class="diff-new">
Bidirectional
Tables
</ins></span></h4><p><ins class="diff-new">
There
are
two
levels
of
bidirectionality
to
consider
when
displaying
tables:
the
directionality
of
the
table
(i.e.,
whether
the
columns
should
be
arranged
left-to-right
or
right-to-left)
and
the
directionality
of
the
content
of
individual
cells.
</ins></p><p><ins class="diff-new">
The
</ins><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-new">
direction
</ins></a><ins class="diff-new">
annotation
on
the
table
provides
information
about
the
desired
display
of
the
table.
If
</ins><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-new">
direction
</ins></a><ins class="diff-new">
is
</ins><code><ins class="diff-new">
ltr
</ins></code><ins class="diff-new">
then
the
first
column
should
be
displayed
on
the
left
and
the
last
column
on
the
right.
If
</ins><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-new">
direction
</ins></a><ins class="diff-new">
is
</ins><code><ins class="diff-new">
rtl
</ins></code><ins class="diff-new">
then
the
first
column
should
be
displayed
on
the
right
and
the
last
column
on
the
left.
</ins></p><p><ins class="diff-new">
If
</ins><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-new">
direction
</ins></a><ins class="diff-new">
is
</ins><code><ins class="diff-new">
default
</ins></code><ins class="diff-new">
then
tables
should
be
displayed
with
attention
to
the
bidirectionality
of
the
content
of
the
file.
Specifically,
the
values
of
the
cells
</ins>
in
the
<del class="diff-old">format
</del>
<ins class="diff-chg">table
should
be
scanned
breadth
first:
from
the
first
cell
in
the
first
column
through
to
the
last
cell
in
the
first
row,
down
to
the
last
cell
in
the
last
column.
If
the
first
character
in
the
table
with
a
</ins><a href="http://unicode.org/reports/tr9/#Bidirectional_Character_Types"><ins class="diff-chg">
strong
type
</ins></a><ins class="diff-chg">
as
</ins>
defined
<del class="diff-old">here
</del>
<ins class="diff-chg">in
[
</ins><cite><a href="#bib-BIDI" class="bibref"><ins class="diff-chg">
BIDI
</ins></a></cite><ins class="diff-chg">
]
indicates
a
</ins><abbr title="right-to-left"><ins class="diff-chg">
RTL
</ins></abbr><ins class="diff-chg">
directionality,
the
table
</ins>
should
be
<del class="diff-old">understood
</del>
<ins class="diff-chg">displayed
with
the
first
column
on
the
right
and
the
last
column
on
the
left.
Otherwise,
the
table
should
be
displayed
with
the
first
column
on
the
left
and
the
last
column
on
the
right.
Characters
such
as
whitespace,
quotes,
commas,
and
numbers
do
not
have
a
strong
type,
and
therefore
are
skipped
when
identifying
the
character
that
determines
the
directionality
of
the
table.
</ins></p><p><ins class="diff-chg">
Implementations
should
enable
user
preferences
to
override
the
indicated
metadata
about
the
directionality
of
the
table.
</ins></p><p><ins class="diff-chg">
Once
the
directionality
of
the
table
has
been
determined,
each
cell
within
the
table
should
be
considered
as
a
separate
</ins><a href="http://unicode.org/reports/tr9/#The_Paragraph_Level"><ins class="diff-chg">
paragraph
</ins></a>,
as
defined
<del class="diff-old">here.
</del>
<ins class="diff-chg">by
the
Unicode
Bidirectional
Algorithm
(
</ins><abbr title="Unicode Bidirectional Algorithm"><ins class="diff-chg">
UBA
</ins></abbr><ins class="diff-chg">
)
in
[
</ins><cite><a href="#bib-BIDI" class="bibref"><ins class="diff-chg">
BIDI
</ins></a></cite><ins class="diff-chg">
].
The
default
directionality
for
the
cell
is
determined
by
looking
at
the
</ins><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
for
the
cell.
</ins></p><p><ins class="diff-chg">
Thus,
as
defined
by
the
</ins><abbr title="Unicode Bidirectional Algorithm"><ins class="diff-chg">
UBA
</ins></abbr>,<ins class="diff-chg">
if
a
cell
contains
no
characters
with
a
strong
type
(if
it's
a
number
or
date
for
example)
then
the
way
the
cell
is
displayed
should
be
determined
by
the
</ins><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
of
the
cell.
However,
when
the
cell
contains
characters
with
a
strong
type
(such
as
letters)
then
they
should
be
displayed
according
to
the
Unicode
Bidirectional
Algorithm
as
described
in
[
</ins><cite><a href="#bib-BIDI" class="bibref"><ins class="diff-chg">
BIDI
</ins></a></cite><ins class="diff-chg">
].
</ins></p></section></section><section property="bibo:hasPart" resource="#validating-tables" typeof="bibo:Chapter" id="validating-tables"><h3 resource="#h-validating-tables" id="h-validating-tables"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.4
</ins></span><ins class="diff-chg">
Validating
Tables
</ins></span></h3><p><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-validators" class="externalDFN"><ins class="diff-chg">
Validators
</ins></a><ins class="diff-chg">
test
whether
given
</ins><a class="internalDFN" href="#dfn-tabular-data-file" title="tabular data file"><ins class="diff-chg">
tabular
data
files
</ins></a><ins class="diff-chg">
adhere
to
the
structure
defined
within
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-schema" class="externalDFN"><ins class="diff-chg">
schema
</ins></a>.<ins class="diff-chg">
Validators
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
raise
errors
as
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
]
and
in
the
following
situations:
</ins></p><ul><li><ins class="diff-chg">
if
there
is
more
than
one
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
with
the
same
</ins><a class="internalDFN" href="#dfn-row-primary-key" title="row primary key"><ins class="diff-chg">
primary
key
</ins></a>,<ins class="diff-chg">
that
is
where
the
</ins><a class="internalDFN" href="#dfn-cell" title="cell"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
listed
for
the
primary
key
for
the
row
have
the
same
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
as
the
cells
listed
for
the
primary
key
for
another
row,
</ins></li><li><ins class="diff-chg">
for
each
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
that
does
not
have
a
</ins><a class="internalDFN" href="#dfn-row-referenced-rows" title="row referenced rows"><ins class="diff-chg">
referenced
row
</ins></a><ins class="diff-chg">
for
each
of
the
</ins><a class="internalDFN" href="#dfn-table-foreign-keys" title="table foreign keys"><ins class="diff-chg">
foreign
keys
</ins></a><ins class="diff-chg">
on
the
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
in
which
the
row
appears,
or
</ins></li><li><ins class="diff-chg">
for
each
</ins><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
error
</ins></a><ins class="diff-chg">
on
each
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a>.</li></ul><p><ins class="diff-chg">
Processors
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
continue
validating
after
encountering
the
first
error.
</ins></p></section><section property="bibo:hasPart" resource="#converting-tables" typeof="bibo:Chapter" id="converting-tables"><h3 resource="#h-converting-tables" id="h-converting-tables"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
6.5
</ins></span><ins class="diff-chg">
Converting
Tables
</ins></span></h3><p><ins class="diff-chg">
Conversions
of
tabular
data
to
other
formats
operate
over
a
</ins><a class="internalDFN" href="#dfn-annotated-table"><ins class="diff-chg">
annotated
table
</ins></a><ins class="diff-chg">
constructed
as
defined
in
</ins><cite><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#annotating-tables"><ins class="diff-chg">
Annotating
Tables
</ins></a></cite><ins class="diff-chg">
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
The
mechanics
of
these
conversions
to
other
formats
are
defined
in
other
specifications
such
as
[
</ins><cite><a href="#bib-csv2json" class="bibref"><ins class="diff-chg">
csv2json
</ins></a></cite><ins class="diff-chg">
]
and
[
</ins><cite><a href="#bib-csv2rdf" class="bibref"><ins class="diff-chg">
csv2rdf
</ins></a></cite><ins class="diff-chg">
].
</ins></p><p><ins class="diff-chg">
Conversion
specifications
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
define
a
default
mapping
from
an
annotated
table
that
lacks
any
annotations
(i.e.,
that
is
equivalent
to
an
un-annotated
table).
</ins></p><p><ins class="diff-chg">
Conversion
specifications
</ins><em title="MUST" class="rfc2119"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
use
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-inherited-property" class="externalDFN"><ins class="diff-chg">
property
value
</ins></a><ins class="diff-chg">
of
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#cell-propertyUrl"><code><ins class="diff-chg">
propertyUrl
</ins></code></a><ins class="diff-chg">
of
a
column
as
the
basis
for
naming
machine-readable
fields
in
the
target
format,
such
as
the
name
of
the
equivalent
element
or
attribute
in
XML,
property
in
JSON
or
property
URI
in
RDF.
</ins></p><p><ins class="diff-chg">
Conversion
specifications
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
use
any
of
the
</ins><a class="internalDFN" href="#dfn-annotation" title="annotation"><ins class="diff-chg">
annotations
</ins></a><ins class="diff-chg">
found
on
an
annotated
table
group,
table,
column,
row
or
cell,
including
non-core
annotations,
to
adjust
the
mapping
into
another
format.
</ins></p><p><ins class="diff-chg">
Conversion
specifications
</ins><em title="MAY" class="rfc2119"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
define
additional
annotations,
not
defined
in
this
specification,
which
are
specifically
used
when
converting
to
the
target
format
of
the
conversion.
For
example,
a
conversion
to
XML
might
specify
a
</ins><code><ins class="diff-chg">
http://example.org/conversion/xml/element-or-attribute
</ins></code><ins class="diff-chg">
property
on
columns
that
determines
whether
a
particular
column
is
represented
through
an
element
or
an
attribute
in
the
data.
</ins></p></section></section><section property="bibo:hasPart" resource="#syntax" typeof="bibo:Chapter" id="syntax" class="informative"><h2 resource="#h-syntax" id="h-syntax"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
7.
</ins></span><ins class="diff-chg">
Best
Practice
CSV
</ins></span></h2><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
There
is
no
standard
for
CSV,
and
there
are
many
variants
of
CSV
used
on
the
web
today.
This
section
defines
a
method
for
expressing
tabular
data
adhering
to
the
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
tabular
data
model
</ins></a><ins class="diff-chg">
in
CSV.
Authors
are
encouraged
to
adhere
to
the
constraints
described
in
this
section
as
implementations
should
process
such
CSV
files
consistently.
</ins>
</p>
<div class="note">
<div id="h-note12" role="heading" aria-level="3" class="note-title">
<span>
Note
</span>
</div>
<div class="">
<p>
This
syntax
is
not
compliant
with
<code>
text/csv
</code>
as
defined
in
[
<cite>
<a href="#bib-RFC4180" class="bibref">
RFC4180
</a>
</cite>
]
in
that
it
permits
line
endings
other
than
<code>
CRLF
</code>.
Supporting
<code>
LF
</code>
line
endings
<del class="diff-old">are
</del>
<ins class="diff-chg">is
</ins>
important
<del class="diff-old">characteristics
</del>
for
data
formats
that
are
used
on
non-Windows
platforms.
However,
all
files
that
adhere
to
[
<cite>
<a href="#bib-RFC4180" class="bibref">
RFC4180
</a>
</cite>
]'s
definition
of
CSV
<del class="diff-old">are
compliant
CSV+
files.
</del>
<ins class="diff-chg">meet
the
constraints
described
in
this
section.
</ins></p><p><ins class="diff-chg">
Developing
a
standard
for
CSV
is
outside
the
scope
of
the
Working
Group.
The
details
here
aim
to
help
shape
any
future
standard.
</ins>
</p>
</div>
</div>
<section property="bibo:hasPart" resource="#content-type" typeof="bibo:Chapter" id="content-type">
<h3 resource="#h-content-type" id="h-content-type">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.1
</del>
<ins class="diff-chg">7.1
</ins>
</span>
Content
Type
</span>
</h3>
<p>
The
appropriate
content
type
for
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
is
<code>
text/csv
</code>.
For
example,
when
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
is
transmitted
via
HTTP,
the
HTTP
response
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
include
a
<code>
Content-Type
</code>
header
with
the
value
<code>
text/csv
</code>:
</p>
<del class="diff-old">        Content-Type: text/csv
</del>
        <pre>Content-Type: text/csv
</pre>
<del class="diff-old">Issue
See
below
for
issues
relating
to
whether
we
should
instead
define
a
different
content
type.
</del>
</section>
<section property="bibo:hasPart" resource="#encoding" typeof="bibo:Chapter" id="encoding">
<h3 resource="#h-encoding" id="h-encoding">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.2
</del>
<ins class="diff-chg">7.2
</ins>
</span>
Encoding
</span>
</h3>
<p>
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
files
<del class="diff-old">SHOULD
</del>
<ins class="diff-chg">should
</ins>
be
encoded
using
UTF-8.
If
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
is
not
encoded
using
UTF-8,
the
encoding
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
be
specified
through
the
<code>
charset
</code>
parameter
in
the
<code>
Content-Type
</code>
header:
</p>
<del class="diff-old">        Content-Type: text/csv;charset=ISO-8859-1
</del>
        <pre>Content-Type: text/csv;charset=ISO-8859-1
</pre>
</section>
<section property="bibo:hasPart" resource="#line-endings" typeof="bibo:Chapter" id="line-endings">
<h3 resource="#h-line-endings" id="h-line-endings">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.3
</del>
<ins class="diff-chg">7.3
</ins>
</span>
Line
Endings
</span>
</h3>
<p>
The
ends
of
rows
in
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
be
either
<code>
CRLF
</code>
(
<code>
U+000D
U+000A
</code>
)
or
<code>
LF
</code>
(
<code>
U+000A
</code>
).
Line
endings
within
escaped
<a class="internalDFN" href="#dfn-cell" title="cell">
cells
</a>
are
not
normalised.
</p>
<del class="diff-old">Issue
45
Section
4.1.1
of
RFC2046
specifies
that
"The
canonical
form
of
any
MIME
"text"
subtype
MUST
always
represent
a
line
break
as
a
CRLF
sequence.
Similarly,
any
occurrence
of
CRLF
in
MIME
"text"
MUST
represent
a
line
break.
Use
of
CR
and
LF
outside
of
line
break
sequences
is
also
forbidden."
Should
we
be
defining
application/csv
instead,
to
prevent
having
to
adhere
to
this
rule,
or
should
we
stick
to
the
CRLF
rule?
</del>
</section>
<section property="bibo:hasPart" resource="#lines" typeof="bibo:Chapter" id="lines">
<h3 resource="#h-lines" id="h-lines">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.4
</del>
<ins class="diff-chg">7.4
</ins>
</span>
Lines
</span>
</h3>
<p>
Each
line
of
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
contain
the
same
number
of
comma-separated
values.
</p>
<p>
Values
that
contain
commas,
line
<del class="diff-old">endings
</del>
<ins class="diff-chg">endings,
</ins>
or
double
quotes
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
be
escaped
by
having
the
entire
value
wrapped
in
double
quotes.
There
<del class="diff-old">MUST
NOT
</del>
<ins class="diff-chg">should
not
</ins>
be
whitespace
before
or
after
the
double
quotes.
Within
these
escaped
cells,
any
double
quotes
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
be
escaped
with
two
double
quotes
(
<code>
""
</code>
).
</p>
<section property="bibo:hasPart" resource="#headers" typeof="bibo:Chapter" id="headers">
<h4 resource="#h-headers" id="h-headers">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.4.1
</del>
<ins class="diff-chg">7.4.1
</ins>
</span>
Headers
</span>
</h4>
<p>
The
first
line
of
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
<del class="diff-old">SHOULD
</del>
<ins class="diff-chg">should
</ins>
contain
a
comma-separated
list
of
names
of
<a class="internalDFN" href="#dfn-column" title="column">
columns
</a>.
This
is
known
as
the
<dfn id="dfn-header-line">
header
line
</dfn>
and
provides
<del class="diff-old">names
</del>
<ins class="diff-chg">titles
</ins>
for
the
columns.
There
are
no
constraints
on
these
<del class="diff-old">names.
</del>
<ins class="diff-chg">titles.
</ins>
</p>
<p>
If
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
does
not
include
a
header
line,
this
<del class="diff-old">MUST
</del>
<ins class="diff-chg">should
</ins>
be
specified
using
the
<code>
header
</code>
parameter
of
the
media
type:
</p>
<del class="diff-old">          Content-Type: text/csv;header=absent
</del>
          <pre>Content-Type: text/csv;header=absent
</pre>
</section>
</section>
<section property="bibo:hasPart" resource="#ebnf" typeof="bibo:Chapter" id="ebnf">
<h3 resource="#h-ebnf" id="h-ebnf">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.4.2
</del>
<ins class="diff-chg">7.5
</ins></span><ins class="diff-chg">
Grammar
</ins></span></h3><p><ins class="diff-chg">
This
grammar
is
a
generalization
of
that
defined
in
[
</ins><cite><a href="#bib-RFC4180" class="bibref"><ins class="diff-chg">
RFC4180
</ins></a></cite><ins class="diff-chg">
]
and
is
included
for
reference
only.
</ins></p><p><ins class="diff-chg">
The
</ins><abbr title="Extended Backus–Naur Form"><ins class="diff-chg">
EBNF
</ins></abbr><ins class="diff-chg">
used
here
is
defined
in
XML
1.0
[
</ins><cite><a href="#bib-EBNF-NOTATION" class="bibref"><ins class="diff-chg">
EBNF-NOTATION
</ins></a></cite><ins class="diff-chg">
].
</ins></p><div><table class="grammar"><tbody id="grammar-productions"><tr id="grammar-production-csv"><td><ins class="diff-chg">
[1]
</ins></td><td><code><ins class="diff-chg">
csv
</ins></code></td><td>::=</td><td><a href="#grammar-production-header"><ins class="diff-chg">
header
</ins></a><a href="#grammar-production-record"><ins class="diff-chg">
record
</ins></a><code><ins class="diff-chg">
+
</ins></code></td></tr><tr id="grammar-production-header"><td><ins class="diff-chg">
[2]
</ins></td><td><code><ins class="diff-chg">
header
</ins></code></td><td>::=</td><td><a href="#grammar-production-record"><ins class="diff-chg">
record
</ins></a></td></tr><tr id="grammar-production-record"><td><ins class="diff-chg">
[3]
</ins></td><td><code><ins class="diff-chg">
record
</ins></code></td><td>::=</td><td><a href="#grammar-production-fields"><ins class="diff-chg">
fields
</ins></a><code class="grammar-char-escape"><ins class="diff-chg">
#x0D
</ins></code><code><ins class="diff-chg">
?
</ins></code><code class="grammar-char-escape"><ins class="diff-chg">
#x0A
</ins></code></td></tr><tr id="grammar-production-fields"><td><ins class="diff-chg">
[4]
</ins></td><td><code><ins class="diff-chg">
fields
</ins></code></td><td>::=</td><td><a href="#grammar-production-field"><ins class="diff-chg">
field
</ins></a><ins class="diff-chg">
("
</ins><code class="grammar-literal">,</code><ins class="diff-chg">
"
</ins><a href="#grammar-production-fields"><ins class="diff-chg">
fields
</ins></a><ins class="diff-chg">
)
</ins><code><ins class="diff-chg">
*
</ins></code></td></tr><tr id="grammar-production-field"><td><ins class="diff-chg">
[5]
</ins></td><td><code><ins class="diff-chg">
field
</ins></code></td><td>::=</td><td><a href="#grammar-production-WS"><ins class="diff-chg">
WS
</ins></a><code><ins class="diff-chg">
*
</ins></code><a href="#grammar-production-rawfield"><ins class="diff-chg">
rawfield
</ins></a><a href="#grammar-production-WS"><ins class="diff-chg">
WS
</ins></a><code><ins class="diff-chg">
*
</ins></code></td></tr><tr id="grammar-production-rawfield"><td><ins class="diff-chg">
[6]
</ins></td><td><code><ins class="diff-chg">
rawfield
</ins></code></td><td>::=</td><td><ins class="diff-chg">
'
</ins><code class="grammar-literal"><ins class="diff-chg">
"
</ins></code><ins class="diff-chg">
'
</ins><a href="#grammar-production-QCHAR"><ins class="diff-chg">
QCHAR
</ins></a><code><ins class="diff-chg">
*
</ins></code><ins class="diff-chg">
'
</ins><code class="grammar-literal"><ins class="diff-chg">
"
</ins></code><ins class="diff-chg">
'
</ins><code><ins class="diff-chg">
|
</ins></code><a href="#grammar-production-SCHAR"><ins class="diff-chg">
SCHAR
</ins></a><code><ins class="diff-chg">
*
</ins></code></td></tr><tr id="grammar-production-QCHAR"><td><ins class="diff-chg">
[7]
</ins></td><td><code><ins class="diff-chg">
QCHAR
</ins></code></td><td>::=</td><td><code><ins class="diff-chg">
[
</ins></code><code class="grammar-literal"><ins class="diff-chg">
^"
</ins></code><code><ins class="diff-chg">
]
</ins></code><code><ins class="diff-chg">
|
</ins></code><ins class="diff-chg">
'
</ins><code class="grammar-literal"><ins class="diff-chg">
""
</ins></code><ins class="diff-chg">
'
</ins></td></tr><tr id="grammar-production-SCHAR"><td><ins class="diff-chg">
[8]
</ins></td><td><code><ins class="diff-chg">
SCHAR
</ins></code></td><td>::=</td><td><code><ins class="diff-chg">
[
</ins></code><code class="grammar-literal"><ins class="diff-chg">
^",
</ins></code><code class="grammar-char-escape"><ins class="diff-chg">
#x0A
</ins></code><code class="grammar-char-escape"><ins class="diff-chg">
#x0D
</ins></code><code><ins class="diff-chg">
]
</ins></code></td></tr><tr id="grammar-production-WS"><td><ins class="diff-chg">
[9]
</ins></td><td><code><ins class="diff-chg">
WS
</ins></code></td><td>::=</td><td><code><ins class="diff-chg">
[
</ins></code><code class="grammar-char-escape"><ins class="diff-chg">
#x20
</ins></code><code class="grammar-char-escape"><ins class="diff-chg">
#x09
</ins></code><code><ins class="diff-chg">
]
</ins></code></td></tr></tbody></table></div></section></section><section property="bibo:hasPart" resource="#parsing" typeof="bibo:Chapter" id="parsing" class="informative"><h2 resource="#h-parsing" id="h-parsing"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.
</ins></span><ins class="diff-chg">
Parsing
Tabular
Data
</ins></span></h2><p><em><ins class="diff-chg">
This
section
is
non-normative.
</ins></em></p><p><ins class="diff-chg">
As
described
in
</ins><a href="#syntax" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
7.
</ins></span><span class="sec-title"><ins class="diff-chg">
Best
Practice
CSV
</ins></span></a>,<ins class="diff-chg">
there
may
be
many
formats
which
an
application
might
interpret
into
the
tabular
data
model
described
in
</ins><a href="#model" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
4.
</ins></span><span class="sec-title"><ins class="diff-chg">
Tabular
Data
Models
</ins></span></a>,<ins class="diff-chg">
including
using
different
separators
or
fixed
format
tables,
multiple
tables
within
a
single
file,
or
ones
that
have
metadata
lines
before
a
table
header.
</ins></p><div class="note"><div id="h-note13" role="heading" aria-level="3" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
Standardising
the
parsing
of
CSV
is
outside
the
chartered
scope
of
the
Working
Group.
This
non-normative
section
is
intended
to
help
the
creators
of
parsers
handle
the
wide
variety
of
CSV-based
formats
that
they
may
encounter
due
to
the
current
lack
of
standardisation
of
the
format.
</ins></p></div><p><ins class="diff-chg">
This
section
describes
an
algorithm
for
parsing
formats
that
do
not
adhere
to
the
constraints
described
in
</ins><a href="#syntax" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
7.
</ins></span><span class="sec-title"><ins class="diff-chg">
Best
Practice
CSV
</ins></span></a>,<ins class="diff-chg">
as
well
as
those
that
do,
and
extracting
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a>.<ins class="diff-chg">
The
parsing
algorithm
uses
the
following
flags.
These
may
be
set
by
metadata
properties
found
while
</ins><a href="#locating-metadata" class="sectionRef"><ins class="diff-chg">
Locating
Metadata
</ins></a>,<ins class="diff-chg">
including
through
user
input
(see
</ins><a href="#overriding-metadata" class="sectionRef"><ins class="diff-chg">
Overriding
Metadata
</ins></a><ins class="diff-chg">
),
or
through
the
inclusion
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a><ins class="diff-chg">
within
a
metadata
file:
</ins></p><dl><dt><dfn id="dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></dfn></dt><dd><ins class="diff-chg">
A
character
that,
when
it
appears
at
the
beginning
of
a
row,
indicates
that
the
row
is
a
comment
that
should
be
associated
as
a
</ins><a href="http://www.w3.org/TR/rdf-schema/#ch_comment"><code><ins class="diff-chg">
rdfs:comment
</ins></code></a><ins class="diff-chg">
annotation
to
the
table.
This
is
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-commentPrefix"><code><ins class="diff-chg">
commentPrefix
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
null
</ins></code>,<ins class="diff-chg">
which
means
no
rows
are
treated
as
comments.
A
value
other
than
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
may
mean
that
the
</ins><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
numbers
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-row" title="row"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
are
different
from
their
</ins><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
numbers
</ins></a>.</dd><dt><dfn id="dfn-delimiter"><ins class="diff-chg">
delimiter
</ins></dfn></dt><dd><ins class="diff-chg">
The
separator
between
cells,
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-delimiter"><code><ins class="diff-chg">
delimiter
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code>,</code>.</dd><dt><dfn id="dfn-encoding"><ins class="diff-chg">
encoding
</ins></dfn></dt><dd><ins class="diff-chg">
The
character
encoding
for
the
file,
one
of
the
encodings
listed
in
[
</ins><cite><a href="#bib-encoding" class="bibref"><ins class="diff-chg">
encoding
</ins></a></cite><ins class="diff-chg">
],
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-encoding"><code><ins class="diff-chg">
encoding
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
utf-8
</ins></code>.</dd><dt><dfn id="dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></dfn></dt><dd><ins class="diff-chg">
The
character
that
is
used
to
escape
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a><ins class="diff-chg">
within
escaped
cells,
or
</ins><code><ins class="diff-chg">
null
</ins></code>,<ins class="diff-chg">
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-doubleQuote"><code><ins class="diff-chg">
doubleQuote
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
"
</ins></code><ins class="diff-chg">
(such
that
</ins><code><ins class="diff-chg">
""
</ins></code><ins class="diff-chg">
is
used
to
escape
</ins><code><ins class="diff-chg">
"
</ins></code><ins class="diff-chg">
within
an
escaped
cell).
</ins></dd><dt><dfn id="dfn-header-row-count"><ins class="diff-chg">
header
row
count
</ins></dfn></dt><dd><ins class="diff-chg">
The
number
of
</ins><dfn id="dfn-header-row" title="header row"><ins class="diff-chg">
header
rows
</ins></dfn><ins class="diff-chg">
(following
the
skipped
rows)
in
the
file,
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-header"><code><ins class="diff-chg">
header
</ins></code></a><ins class="diff-chg">
or
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-headerRowCount"><code><ins class="diff-chg">
headerRowCount
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
1
</ins></code>.<ins class="diff-chg">
A
value
other
than
</ins><code><ins class="diff-chg">
0
</ins></code><ins class="diff-chg">
will
mean
that
the
</ins><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
numbers
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-row" title="row"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
will
be
different
from
their
</ins><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
numbers
</ins></a>.</dd><dt><dfn id="dfn-line-terminators"><ins class="diff-chg">
line
terminators
</ins></dfn></dt><dd><ins class="diff-chg">
The
characters
that
can
be
used
at
the
end
of
a
row,
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-lineTerminators"><code><ins class="diff-chg">
lineTerminators
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
[CRLF,
LF]
</ins></code>.</dd><dt><dfn id="dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></dfn></dt><dd><ins class="diff-chg">
The
character
that
is
used
around
escaped
cells,
or
</ins><code><ins class="diff-chg">
null
</ins></code>,<ins class="diff-chg">
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-quoteChar"><code><ins class="diff-chg">
quoteChar
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
"
</ins></code>.</dd><dt><dfn id="dfn-skip-blank-rows"><ins class="diff-chg">
skip
blank
rows
</ins></dfn></dt><dd><ins class="diff-chg">
Indicates
whether
to
ignore
wholly
empty
rows
(ie
rows
in
which
all
the
cells
are
empty),
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-skipBlankRows"><code><ins class="diff-chg">
skipBlankRows
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
false
</ins></code>.<ins class="diff-chg">
A
value
other
than
</ins><code><ins class="diff-chg">
false
</ins></code><ins class="diff-chg">
may
mean
that
the
</ins><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
numbers
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-row" title="row"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
are
different
from
their
</ins><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
numbers
</ins></a>.</dd><dt><dfn id="dfn-skip-columns"><ins class="diff-chg">
skip
columns
</ins></dfn></dt><dd><ins class="diff-chg">
The
number
of
columns
to
skip
at
the
beginning
of
each
row,
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-skipColumns"><code><ins class="diff-chg">
skipColumns
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
0
</ins></code>.<ins class="diff-chg">
A
value
other
than
</ins><code><ins class="diff-chg">
0
</ins></code><ins class="diff-chg">
will
mean
that
the
</ins><a class="internalDFN" href="#dfn-column-source-number" title="column source number"><ins class="diff-chg">
source
numbers
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-column" title="column"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
will
be
different
from
their
</ins><a class="internalDFN" href="#dfn-column-number" title="column number"><ins class="diff-chg">
numbers
</ins></a>.</dd><dt><dfn id="dfn-skip-rows"><ins class="diff-chg">
skip
rows
</ins></dfn></dt><dd><ins class="diff-chg">
The
number
of
rows
to
skip
at
the
beginning
of
the
file,
before
a
header
row
or
tabular
data,
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-skipRows"><code><ins class="diff-chg">
skipRows
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
0
</ins></code>.<ins class="diff-chg">
A
value
greater
than
</ins><code><ins class="diff-chg">
0
</ins></code><ins class="diff-chg">
will
mean
that
the
</ins><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
numbers
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-row" title="row"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
will
be
different
from
their
</ins><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
numbers
</ins></a>.</dd><dt><dfn id="dfn-trim"><ins class="diff-chg">
trim
</ins></dfn></dt><dd><ins class="diff-chg">
Indicates
whether
to
trim
whitespace
around
cells;
may
be
</ins><code><ins class="diff-chg">
true
</ins></code>,<code><ins class="diff-chg">
false
</ins></code>,<code><ins class="diff-chg">
start
</ins></code>,<ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
end
</ins></code>,<ins class="diff-chg">
set
by
the
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-skipInitialSpace"><code><ins class="diff-chg">
skipInitialSpace
</ins></code></a><ins class="diff-chg">
or
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dialect-trim"><code><ins class="diff-chg">
trim
</ins></code></a><ins class="diff-chg">
property
of
a
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-chg">
dialect
description
</ins></a>.<ins class="diff-chg">
The
default
is
</ins><code><ins class="diff-chg">
false
</ins></code>.</dd></dl><p><ins class="diff-chg">
The
algorithm
for
using
these
flags
to
parse
a
document
containing
tabular
data
to
create
a
basic
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
tabular
data
model
</ins></a><ins class="diff-chg">
and
to
extract
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a><ins class="diff-chg">
is
as
follows:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Create
a
new
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><em><ins class="diff-chg">
T
</ins></em><ins class="diff-chg">
with
the
annotations:
</ins><ul><li><a class="internalDFN" href="#dfn-table-columns" title="table columns"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-table-rows" title="table rows"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-table-id" title="table id"><ins class="diff-chg">
id
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a class="internalDFN" href="#dfn-table-url" title="table url"><ins class="diff-chg">
url
</ins></a><ins class="diff-chg">
set
to
the
location
of
the
file,
if
known,
or
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a class="internalDFN" href="#dfn-table-direction" title="table direction"><ins class="diff-chg">
direction
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
ltr
</ins></code></li><li><a class="internalDFN" href="#dfn-table-suppress-output" title="table suppress output"><ins class="diff-chg">
suppress
output
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a class="internalDFN" href="#dfn-table-notes" title="table notes"><ins class="diff-chg">
notes
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a class="internalDFN" href="#dfn-table-foreign-keys" title="table foreign keys"><ins class="diff-chg">
foreign
keys
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-table-transformations" title="table transformations"><ins class="diff-chg">
transformations
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li></ul></li><li><ins class="diff-chg">
Create
a
metadata
document
structure
</ins><em><ins class="diff-chg">
M
</ins></em><ins class="diff-chg">
that
looks
like:
</ins>          <pre style="" class="highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"rdfs:comment"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">  </span><span class="pun">}</span><span class="pln"></span><span class="pun">}</span><span class="pln"></span></pre></li><li><ins class="diff-chg">
If
the
URL
of
the
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a><ins class="diff-chg">
being
parsed
is
known,
set
the
</ins><code><ins class="diff-chg">
url
</ins></code><ins class="diff-chg">
property
on
</ins><em><ins class="diff-chg">
M
</ins></em><ins class="diff-chg">
to
that
URL.
</ins></li><li><ins class="diff-chg">
Set
</ins><dfn id="dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></dfn><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
1
</ins></code>.</li><li><ins class="diff-chg">
Read
the
file
using
the
</ins><a class="internalDFN" href="#dfn-encoding"><ins class="diff-chg">
encoding
</ins></a>.</li><li><ins class="diff-chg">
Repeat
the
following
the
number
of
times
indicated
by
</ins><a class="internalDFN" href="#dfn-skip-rows"><ins class="diff-chg">
skip
rows
</ins></a>:<ol class="algorithm"><li><a class="internalDFN" href="#dfn-read-a-row"><ins class="diff-chg">
Read
a
row
</ins></a><ins class="diff-chg">
to
provide
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>.</li><li><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a><ins class="diff-chg">
is
not
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
begins
with
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a>,<ins class="diff-chg">
strip
that
prefix
from
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>,<ins class="diff-chg">
and
add
the
resulting
string
to
the
</ins><code><em><ins class="diff-chg">
M
</ins></em>.rdfs:comment</code><ins class="diff-chg">
array.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
is
not
an
empty
string,
add
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
to
the
</ins><code><em><ins class="diff-chg">
M
</ins></em>.rdfs:comment</code><ins class="diff-chg">
array.
</ins></li><li><ins class="diff-chg">
Add
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></a>.</li></ol></li><li><ins class="diff-chg">
Repeat
the
following
the
number
of
times
indicated
by
</ins><a class="internalDFN" href="#dfn-header-row-count"><ins class="diff-chg">
header
row
count
</ins></a>:<ol class="algorithm"><li><a class="internalDFN" href="#dfn-read-a-row"><ins class="diff-chg">
Read
a
row
</ins></a><ins class="diff-chg">
to
provide
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>.</li><li><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a><ins class="diff-chg">
is
not
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
begins
with
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a>,<ins class="diff-chg">
strip
that
prefix
from
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>,<ins class="diff-chg">
and
add
the
resulting
string
to
the
</ins><code><em><ins class="diff-chg">
M
</ins></em>.rdfs:comment</code><ins class="diff-chg">
array.
</ins></li><li><ins class="diff-chg">
Otherwise,
</ins><a class="internalDFN" href="#dfn-parse-a-row" title="parse a row"><ins class="diff-chg">
parse
the
row
</ins></a><ins class="diff-chg">
to
provide
a
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>,<ins class="diff-chg">
and:
</ins><ol class="algorithm"><li><ins class="diff-chg">
Remove
the
first
</ins><a class="internalDFN" href="#dfn-skip-columns"><ins class="diff-chg">
skip
columns
</ins></a><ins class="diff-chg">
number
of
values
from
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>.</li><li><ins class="diff-chg">
For
each
of
the
remaining
values
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>:<ol class="algorithm"><li><ins class="diff-chg">
If
the
value
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
is
an
empty
string
or
consists
only
of
whitespace,
do
nothing.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
there
is
no
column
description
object
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
</ins><code><em><ins class="diff-chg">
M
</ins></em>.tableSchema.columns</code>,<ins class="diff-chg">
create
a
new
one
with
a
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
property
whose
value
is
an
array
containing
a
single
value
that
is
the
value
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
add
the
value
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
to
the
array
at
</ins><code><em><ins class="diff-chg">
M
</ins></em>.tableSchema.columns[<em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
].title
</ins></code>.</li></ol></li></ol></li><li><ins class="diff-chg">
Add
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></a>.</li></ol></li><li><ins class="diff-chg">
Set
</ins><dfn id="dfn-model-row-number" title="model row number"><ins class="diff-chg">
row
number
</ins></dfn><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
1
</ins></code>.</li><li><ins class="diff-chg">
While
it
is
possible
to
read
another
row,
do
the
following:
</ins><ol class="algorithm"><li><ins class="diff-chg">
Set
the
</ins><dfn id="dfn-source-column-number"><ins class="diff-chg">
source
column
number
</ins></dfn><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
1
</ins></code>.</li><li><a class="internalDFN" href="#dfn-read-a-row"><ins class="diff-chg">
Read
a
row
</ins></a><ins class="diff-chg">
to
provide
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>.</li><li><ins class="diff-chg">
If
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a><ins class="diff-chg">
is
not
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
begins
with
the
</ins><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a>,<ins class="diff-chg">
strip
that
prefix
from
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>,<ins class="diff-chg">
and
add
the
resulting
string
to
the
</ins><code><em><ins class="diff-chg">
M
</ins></em>.rdfs:comment</code><ins class="diff-chg">
array.
</ins></li><li><ins class="diff-chg">
Otherwise,
</ins><a class="internalDFN" href="#dfn-parse-a-row" title="parse a row"><ins class="diff-chg">
parse
the
row
</ins></a><ins class="diff-chg">
to
provide
a
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>,<ins class="diff-chg">
and:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
all
of
the
values
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
are
empty
strings,
and
</ins><a class="internalDFN" href="#dfn-skip-blank-rows"><ins class="diff-chg">
skip
blank
rows
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
add
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
row.
</ins></li><li><ins class="diff-chg">
Otherwise,
create
a
new
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><em><ins class="diff-chg">
R
</ins></em>,<ins class="diff-chg">
with:
</ins><ul><li><a class="internalDFN" href="#dfn-row-table" title="row table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
T
</ins></em></li><li><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
number
</ins></a><ins class="diff-chg">
set
to
</ins><a class="internalDFN" href="#dfn-model-row-number" title="model row number"><ins class="diff-chg">
row
number
</ins></a></li><li><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
number
</ins></a><ins class="diff-chg">
set
to
</ins><a class="internalDFN" href="#dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></a></li><li><a class="internalDFN" href="#dfn-row-primary-key" title="row primary key"><ins class="diff-chg">
primary
key
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-row-referenced-rows" title="row referenced rows"><ins class="diff-chg">
referenced
rows
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-row-cells" title="row cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li></ul></li><li><ins class="diff-chg">
Append
</ins><em><ins class="diff-chg">
R
</ins></em><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-table-rows" title="table rows"><ins class="diff-chg">
rows
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><em><ins class="diff-chg">
T
</ins></em>.</li><li><ins class="diff-chg">
Remove
the
first
</ins><a class="internalDFN" href="#dfn-skip-columns"><ins class="diff-chg">
skip
columns
</ins></a><ins class="diff-chg">
number
of
values
from
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
and
add
that
number
to
the
</ins><a class="internalDFN" href="#dfn-source-column-number"><ins class="diff-chg">
source
column
number
</ins></a>.</li><li><ins class="diff-chg">
For
each
of
the
remaining
values
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
(where
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
starts
at
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
):
</ins><ol class="algorithm"><li><ins class="diff-chg">
Identify
the
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><em><ins class="diff-chg">
C
</ins></em><ins class="diff-chg">
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
within
the
</ins><a class="internalDFN" href="#dfn-table-columns" title="table columns"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><em><ins class="diff-chg">
T
</ins></em>.<ins class="diff-chg">
If
there
is
no
such
column:
</ins><ol class="algorithm"><li><ins class="diff-chg">
Create
a
new
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><em><ins class="diff-chg">
C
</ins></em><ins class="diff-chg">
with:
</ins><ul><li><a class="internalDFN" href="#dfn-column-table" title="column table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
T
</ins></em></li><li><a class="internalDFN" href="#dfn-column-number" title="column number"><ins class="diff-chg">
number
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
i
</ins></em></li><li><a class="internalDFN" href="#dfn-column-source-number" title="column source number"><ins class="diff-chg">
source
number
</ins></a><ins class="diff-chg">
set
to
</ins><a class="internalDFN" href="#dfn-source-column-number"><ins class="diff-chg">
source
column
number
</ins></a></li><li><a class="internalDFN" href="#dfn-column-name" title="column name"><ins class="diff-chg">
name
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a class="internalDFN" href="#dfn-column-titles" title="column titles"><ins class="diff-chg">
titles
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-column-datatype" title="column datatype"><ins class="diff-chg">
datatype
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
string
</ins></code></li><li><a class="internalDFN" href="#dfn-column-virtual" title="column virtual"><ins class="diff-chg">
virtual
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a class="internalDFN" href="#dfn-column-suppress-output" title="column suppress output"><ins class="diff-chg">
suppress
output
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a class="internalDFN" href="#dfn-column-cells" title="column cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li></ul></li><li><ins class="diff-chg">
Append
</ins><em><ins class="diff-chg">
C
</ins></em><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-table-columns" title="table columns"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><em><ins class="diff-chg">
T
</ins></em><ins class="diff-chg">
(at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
).
</ins></li></ol></li><li><ins class="diff-chg">
Create
a
new
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><em><ins class="diff-chg">
D
</ins></em>,<ins class="diff-chg">
with:
</ins><ul><li><a class="internalDFN" href="#dfn-cell-table" title="cell table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
T
</ins></em></li><li><a class="internalDFN" href="#dfn-cell-column" title="cell column"><ins class="diff-chg">
column
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
C
</ins></em></li><li><a class="internalDFN" href="#dfn-cell-row" title="cell row"><ins class="diff-chg">
row
</ins></a><ins class="diff-chg">
set
to
</ins><em><ins class="diff-chg">
R
</ins></em></li><li><a class="internalDFN" href="#dfn-cell-string-value" title="cell string value"><ins class="diff-chg">
string
value
</ins></a><ins class="diff-chg">
set
to
the
value
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a></li><li><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
set
to
the
value
at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
in
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a></li><li><a class="internalDFN" href="#dfn-cell-errors" title="cell errors"><ins class="diff-chg">
errors
</ins></a><ins class="diff-chg">
set
to
an
empty
list
</ins></li><li><a class="internalDFN" href="#dfn-cell-text-direction" title="cell text direction"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
ltr
</ins></code></li><li><a class="internalDFN" href="#dfn-cell-about-url" title="cell about URL"><ins class="diff-chg">
about
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a class="internalDFN" href="#dfn-cell-property-url" title="cell property URL"><ins class="diff-chg">
property
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a class="internalDFN" href="#dfn-cell-value-url" title="cell value URL"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li></ul></li><li><ins class="diff-chg">
Append
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><em><ins class="diff-chg">
D
</ins></em><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-column-cells" title="column cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-column"><ins class="diff-chg">
column
</ins></a><em><ins class="diff-chg">
C
</ins></em>.</li><li><ins class="diff-chg">
Append
</ins><a class="internalDFN" href="#dfn-cell"><ins class="diff-chg">
cell
</ins></a><em><ins class="diff-chg">
D
</ins></em><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-row-cells" title="row cells"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
of
</ins><a class="internalDFN" href="#dfn-row"><ins class="diff-chg">
row
</ins></a><em><ins class="diff-chg">
R
</ins></em><ins class="diff-chg">
(at
index
</ins><em><ins class="diff-chg">
i
</ins></em><ins class="diff-chg">
).
</ins></li><li><ins class="diff-chg">
Add
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-source-column-number"><ins class="diff-chg">
source
column
number
</ins></a>.</li></ol></li></ol></li><li><ins class="diff-chg">
Add
</ins><code><ins class="diff-chg">
1
</ins></code><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-source-row-number"><ins class="diff-chg">
source
row
number
</ins></a>.</li></ol></li><li><ins class="diff-chg">
If
</ins><code><em><ins class="diff-chg">
M
</ins></em>.rdfs:comment</code><ins class="diff-chg">
is
an
empty
array,
remove
the
</ins><code><ins class="diff-chg">
rdfs:comment
</ins></code><ins class="diff-chg">
property
from
</ins><em><ins class="diff-chg">
M
</ins></em>.</li><li><ins class="diff-chg">
Return
the
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><em><ins class="diff-chg">
T
</ins></em><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a><em><ins class="diff-chg">
M
</ins></em>.</li></ol><p><ins class="diff-chg">
To
</ins><dfn id="dfn-read-a-row"><ins class="diff-chg">
read
a
row
</ins></dfn><ins class="diff-chg">
to
provide
</ins><dfn id="dfn-row-content"><ins class="diff-chg">
row
content
</ins></dfn>,<ins class="diff-chg">
perform
the
following
steps:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Set
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
to
an
empty
string.
</ins></li><li><ins class="diff-chg">
Read
a
character
and
process
as
follows:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
followed
by
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
both
characters
to
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>,<ins class="diff-chg">
and
move
on
to
process
the
character
following
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
is
not
the
same
as
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
and
the
character
following
it
to
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
a
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a><ins class="diff-chg">
obtained
by
</ins><a class="internalDFN" href="#dfn-read-a-quoted-value" title="read a quoted value"><ins class="diff-chg">
reading
a
quoted
value
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
character
following
the
quoted
value.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
the
character
is,
or
starts
a
sequence
that
is,
a
</ins><a class="internalDFN" href="#dfn-line-terminators" title="line terminators"><ins class="diff-chg">
line
terminator
</ins></a>,<ins class="diff-chg">
return
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
append
the
character
to
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li></ol></li><li><ins class="diff-chg">
If
there
are
no
more
characters
to
read,
return
the
</ins><a class="internalDFN" href="#dfn-row-content"><ins class="diff-chg">
row
content
</ins></a>.</li></ol><p><ins class="diff-chg">
To
</ins><dfn id="dfn-read-a-quoted-value"><ins class="diff-chg">
read
a
quoted
value
</ins></dfn><ins class="diff-chg">
to
provide
a
</ins><dfn id="dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></dfn>,<ins class="diff-chg">
perform
the
following
steps:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Set
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a><ins class="diff-chg">
to
an
empty
string.
</ins></li><li><ins class="diff-chg">
Read
the
initial
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a><ins class="diff-chg">
and
add
a
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a>.</li><li><ins class="diff-chg">
Read
a
character
and
process
as
follows:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
followed
by
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
both
characters
to
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a>,<ins class="diff-chg">
and
move
on
to
process
the
character
following
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
is
not
the
same
as
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
and
the
character
following
it
to
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
a
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
return
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
append
the
character
to
the
</ins><a class="internalDFN" href="#dfn-quoted-value"><ins class="diff-chg">
quoted
value
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li></ol></li></ol><p><ins class="diff-chg">
To
</ins><dfn id="dfn-parse-a-row"><ins class="diff-chg">
parse
a
row
</ins></dfn><ins class="diff-chg">
to
provide
a
</ins><dfn id="dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></dfn>,<ins class="diff-chg">
perform
the
following
steps:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Set
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
to
an
empty
list
and
the
</ins><dfn id="dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></dfn><ins class="diff-chg">
to
an
empty
string.
</ins></li><li><ins class="diff-chg">
Set
the
</ins><dfn id="dfn-quoted"><ins class="diff-chg">
quoted
</ins></dfn><ins class="diff-chg">
flag
to
</ins><code><ins class="diff-chg">
false
</ins></code>.</li><li><ins class="diff-chg">
Read
a
character
and
process
as
follows:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
followed
by
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
a
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a>,<ins class="diff-chg">
and
move
on
to
process
the
character
following
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>.</li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
an
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
and
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
is
not
the
same
as
the
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a>,<ins class="diff-chg">
append
the
character
following
the
</ins><a class="internalDFN" href="#dfn-escape-character"><ins class="diff-chg">
escape
character
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
a
</ins><a class="internalDFN" href="#dfn-quote-character"><ins class="diff-chg">
quote
character
</ins></a><ins class="diff-chg">
then:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
</ins><a class="internalDFN" href="#dfn-quoted"><ins class="diff-chg">
quoted
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
false
</ins></code>,<ins class="diff-chg">
set
the
</ins><a class="internalDFN" href="#dfn-quoted"><ins class="diff-chg">
quoted
</ins></a><ins class="diff-chg">
flag
to
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
and
move
on
to
process
the
next
character.
If
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a><ins class="diff-chg">
is
not
an
empty
string,
raise
an
error.
</ins></li><li><ins class="diff-chg">
Otherwise,
set
</ins><a class="internalDFN" href="#dfn-quoted"><ins class="diff-chg">
quoted
</ins></a><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
false
</ins></code>,<ins class="diff-chg">
and
move
on
to
process
the
next
character.
If
the
next
character
is
not
the
</ins><a class="internalDFN" href="#dfn-delimiter"><ins class="diff-chg">
delimiter
</ins></a>,<ins class="diff-chg">
raise
an
error.
</ins></li></ol></li><li><ins class="diff-chg">
Otherwise,
if
the
character
is
a
</ins><a class="internalDFN" href="#dfn-delimiter"><ins class="diff-chg">
delimiter
</ins></a>,<ins class="diff-chg">
then:
</ins><ol class="algorithm"><li><ins class="diff-chg">
If
</ins><a class="internalDFN" href="#dfn-quoted"><ins class="diff-chg">
quoted
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
true
</ins></code>,<ins class="diff-chg">
append
the
</ins><a class="internalDFN" href="#dfn-delimiter"><ins class="diff-chg">
delimiter
</ins></a><ins class="diff-chg">
character
to
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li><li><ins class="diff-chg">
Otherwise,
</ins><a class="internalDFN" href="#dfn-trim-a-cell-value" title="trim a cell value"><ins class="diff-chg">
trim
</ins></a><ins class="diff-chg">
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a>,<ins class="diff-chg">
add
the
resulting
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li></ol></li><li><ins class="diff-chg">
Otherwise,
append
the
character
to
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a><ins class="diff-chg">
and
move
on
to
process
the
next
character.
</ins></li></ol></li><li><ins class="diff-chg">
If
there
are
no
more
characters
to
read,
</ins><a class="internalDFN" href="#dfn-trim-a-cell-value" title="trim a cell value"><ins class="diff-chg">
trim
</ins></a><ins class="diff-chg">
the
</ins><a class="internalDFN" href="#dfn-current-cell-value"><ins class="diff-chg">
current
cell
value
</ins></a>,<ins class="diff-chg">
add
the
resulting
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a><ins class="diff-chg">
to
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a><ins class="diff-chg">
and
return
the
</ins><a class="internalDFN" href="#dfn-list-of-cell-values"><ins class="diff-chg">
list
of
cell
values
</ins></a>.</li></ol><p><ins class="diff-chg">
To
</ins><dfn id="dfn-trim-a-cell-value"><ins class="diff-chg">
trim
a
cell
value
</ins></dfn><ins class="diff-chg">
to
provide
a
</ins><dfn id="dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></dfn>,<ins class="diff-chg">
perform
the
following
steps:
</ins></p><ol class="algorithm"><li><ins class="diff-chg">
Set
the
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a><ins class="diff-chg">
to
the
provided
cell
value.
</ins></li><li><ins class="diff-chg">
If
</ins><a class="internalDFN" href="#dfn-trim"><ins class="diff-chg">
trim
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
start
</ins></code><ins class="diff-chg">
then
remove
any
leading
whitespace
from
the
start
of
the
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a><ins class="diff-chg">
and
move
on
to
the
next
step.
</ins></li><li><ins class="diff-chg">
If
</ins><a class="internalDFN" href="#dfn-trim"><ins class="diff-chg">
trim
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
true
</ins></code><ins class="diff-chg">
or
</ins><code><ins class="diff-chg">
end
</ins></code><ins class="diff-chg">
then
remove
any
trailing
whitespace
from
the
end
of
the
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a><ins class="diff-chg">
and
move
on
to
the
next
step.
</ins></li><li><ins class="diff-chg">
Return
the
</ins><a class="internalDFN" href="#dfn-trimmed-cell-value"><ins class="diff-chg">
trimmed
cell
value
</ins></a>.</li></ol><div class="note"><div id="h-note14" role="heading" aria-level="3" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
This
parsing
algorithm
does
not
account
for
the
possibility
of
there
being
more
than
one
area
of
tabular
data
within
a
single
CSV
file.
</ins></p></div><section property="bibo:hasPart" resource="#bidirectionality-in-csv-files" typeof="bibo:Chapter" id="bidirectionality-in-csv-files" class="informative"><h3 resource="#h-bidirectionality-in-csv-files" id="h-bidirectionality-in-csv-files"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.1
</ins>
</span>
Bidirectionality
in
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
Files
</span>
</h3>
<p>
<em>
<ins class="diff-chg">This
section
is
non-normative.
</ins></em></p>
<p>
Bidirectional
content
does
not
alter
the
definition
of
rows
or
the
assignment
of
cells
to
columns.
Whether
or
not
a
<del class="diff-old">CSV+
</del>
<ins class="diff-chg">CSV
</ins>
file
contains
right-to-left
characters,
the
first
column's
content
is
the
first
cell
of
each
row,
which
is
the
text
prior
to
the
first
occurrence
of
a
comma
within
that
row.
</p>
<div class="example" title="Bidirectional CSV file">
<p>
For
example,
<a href="http://referendum2012.elections.eg/results/referendum-results">
Egyptian
Referendum
results
</a>
are
available
as
a
CSV
file
at
<a href="https://egelections-2011.appspot.com/Referendum2012/results/csv/EG.csv">
https://egelections-2011.appspot.com/Referendum2012/results/csv/EG.csv
</a>.
Over
the
wire
and
in
non-Unicode-aware
text
editors,
the
CSV
looks
like:
</p>
<del class="diff-old">            
‌ا‌ل‌م‌ح‌ا‌ف‌ظ‌ة‌,‌ن‌س‌ب‌ة‌ ‌م‌و‌ا‌ف‌ق‌,‌ن‌س‌ب‌ة‌ ‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌,‌ع‌د‌د‌ ‌ا‌ل‌ن‌ا‌خ‌ب‌ي‌ن‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ص‌ح‌ي‌ح‌ة‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ب‌ا‌ط‌ل‌ة‌,‌ن‌س‌ب‌ة‌ ‌ا‌ل‌م‌ش‌ا‌ر‌ك‌ة‌,‌م‌و‌ا‌ف‌ق‌,‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌
‌ا‌ل‌ق‌ل‌ي‌و‌ب‌ي‌ة‌,60.0,40.0,"2,639,808","853,125","15,224",32.9,"512,055","341,070"
‌ا‌ل‌ج‌ي‌ز‌ة‌,66.7,33.3,"4,383,701","1,493,092","24,105",34.6,"995,417","497,675"
‌ا‌ل‌ق‌ا‌ه‌ر‌ة‌,43.2,56.8,"6,580,478","2,254,698","36,342",34.8,"974,371","1,280,327"
‌ق‌ن‌ا‌,84.5,15.5,"1,629,713","364,509","6,743",22.8,"307,839","56,670"
...
              
</del>
          <pre>            <bdo dir="ltr">
<ins class="diff-chg">‌ا‌ل‌م‌ح‌ا‌ف‌ظ‌ة‌,‌ن‌س‌ب‌ة‌ ‌م‌و‌ا‌ف‌ق‌,‌ن‌س‌ب‌ة‌ ‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌,‌ع‌د‌د‌ ‌ا‌ل‌ن‌ا‌خ‌ب‌ي‌ن‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ص‌ح‌ي‌ح‌ة‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ب‌ا‌ط‌ل‌ة‌,‌ن‌س‌ب‌ة‌ ‌ا‌ل‌م‌ش‌ا‌ر‌ك‌ة‌,‌م‌و‌ا‌ف‌ق‌,‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌
‌ا‌ل‌ق‌ل‌ي‌و‌ب‌ي‌ة‌,60.0,40.0,"2,639,808","853,125","15,224",32.9,"512,055","341,070"
‌ا‌ل‌ج‌ي‌ز‌ة‌,66.7,33.3,"4,383,701","1,493,092","24,105",34.6,"995,417","497,675"
‌ا‌ل‌ق‌ا‌ه‌ر‌ة‌,43.2,56.8,"6,580,478","2,254,698","36,342",34.8,"974,371","1,280,327"
‌ق‌ن‌ا‌,84.5,15.5,"1,629,713","364,509","6,743",22.8,"307,839","56,670"
...
</ins>            </bdo>
</pre>
<p>
Within
this
CSV
file,
the
first
column
appears
as
the
content
of
each
line
before
the
first
comma
and
is
named
<code>
المحافظة
</code>
(appearing
at
the
start
of
each
row
as
<code>
<bdo dir="ltr">
‌ا‌ل‌م‌ح‌ا‌ف‌ظ‌ة‌
</bdo>
</code>
in
the
example,
which
is
displaying
the
relevant
characters
from
left
to
right
in
the
order
they
appear
"on
the
wire").
</p>
<p>
The
CSV
translates
to
a
table
model
that
looks
like:
</p>
<table style="width: 100%; text-align: right">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr style="text-align: center">
<th>
Column
/
Row
</th>
<th>
column
1
</th>
<th>
column
2
</th>
<th>
column
3
</th>
<th>
column
4
</th>
<th>
column
5
</th>
<th>
column
6
</th>
<th>
column
7
</th>
<th>
column
8
</th>
<th>
column
9
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
<del class="diff-old">row
1
(header)
</del>
<ins class="diff-chg">column
names
</ins>
</th>
<th>
المحافظة
</th>
<th>
نسبة
موافق
</th>
<th>
نسبة
غير
موافق
</th>
<th>
عدد
الناخبين
</th>
<th>
الأصوات
الصحيحة
</th>
<th>
الأصوات
الباطلة
</th>
<th>
نسبة
المشاركة
</th>
<th>
موافق
</th>
<th>
غير
موافق
</th>
</tr>
<tr>
<th>
row
<del class="diff-old">2
</del>
<ins class="diff-chg">1
</ins>
</th>
<td>
القليوبية
</td>
<td>
60.0
</td>
<td>
40.0
</td>
<td>
2,639,808
</td>
<td>
853,125
</td>
<td>
15,224
</td>
<td>
32.9
</td>
<td>
512,055
</td>
<td>
341,070
</td>
</tr>
<tr>
<th>
row
<del class="diff-old">3
</del>
<ins class="diff-chg">2
</ins>
</th>
<td>
الجيزة
</td>
<td>
66.7
</td>
<td>
33.3
</td>
<td>
4,383,701
</td>
<td>
1,493,092
</td>
<td>
24,105
</td>
<td>
34.6
</td>
<td>
995,417
</td>
<td>
497,675
</td>
</tr>
<tr>
<th>
row
<del class="diff-old">4
</del>
<ins class="diff-chg">3
</ins>
</th>
<td>
القاهرة
</td>
<td>
43.2
</td>
<td>
56.8
</td>
<td>
6,580,478
</td>
<td>
2,254,698
</td>
<td>
36,342
</td>
<td>
34.8
</td>
<td>
974,371
</td>
<td>
1,280,327
</td>
</tr>
<tr>
<th>
row
<del class="diff-old">5
</del>
<ins class="diff-chg">4
</ins>
</th>
<td>
قنا
</td>
<td>
84.5
</td>
<td>
15.5
</td>
<td>
1,629,713
</td>
<td>
364,509
</td>
<td>
6,743
</td>
<td>
22.8
</td>
<td>
307,839
</td>
<td>
56,670
</td>
</tr>
</tbody>
</table>
<p>
The
fragment
identifier
<code>
#col=3
</code>
identifies
the
third
of
the
columns,
named
<code>
نسبة
غير
موافق
</code>
(appearing
as
<code>
<bdo dir="ltr">
‌ن‌س‌ب‌ة‌
‌غ‌ي‌ر‌
‌م‌و‌ا‌ف‌ق‌
</bdo>
</code>
in
the
example).
</p>
<p>
<del class="diff-old">[
</del>
<a href="#bidirectional-tables" class="sectionRef sec-ref">
<ins class="diff-chg">section
</ins><span class="secno"><ins class="diff-chg">
6.3.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Bidirectional
Tables
</ins></span>
<del class="diff-old">tabular-metadata
</del>
</a>
<del class="diff-old">]
</del>
defines
how
this
table
model
should
be
displayed
by
compliant
applications,
and
how
metadata
can
affect
the
display.
The
default
is
for
the
display
to
be
determined
by
the
content
of
the
table.
For
example,
if
this
CSV
were
turned
into
an
HTML
table
for
display
into
a
web
page,
it
should
be
displayed
with
the
first
column
on
the
right
and
the
last
on
the
left,
as
follows:
</p>
<table style="width: 100%; text-align: right">
<thead>
<tr>
<th>
غير
موافق
</th>
<th>
موافق
</th>
<th>
نسبة
المشاركة
</th>
<th>
الأصوات
الباطلة
</th>
<th>
الأصوات
الصحيحة
</th>
<th>
عدد
الناخبين
</th>
<th>
نسبة
غير
موافق
</th>
<th>
نسبة
موافق
</th>
<th>
المحافظة
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
341,070
</td>
<td>
512,055
</td>
<td>
32.9
</td>
<td>
15,224
</td>
<td>
853,125
</td>
<td>
2,639,808
</td>
<td>
40.0
</td>
<td>
60.0
</td>
<td>
القليوبية
</td>
</tr>
<tr>
<td>
497,675
</td>
<td>
995,417
</td>
<td>
34.6
</td>
<td>
24,105
</td>
<td>
1,493,092
</td>
<td>
4,383,701
</td>
<td>
33.3
</td>
<td>
66.7
</td>
<td>
الجيزة
</td>
</tr>
<tr>
<td>
1,280,327
</td>
<td>
974,371
</td>
<td>
34.8
</td>
<td>
36,342
</td>
<td>
2,254,698
</td>
<td>
6,580,478
</td>
<td>
56.8
</td>
<td>
43.2
</td>
<td>
القاهرة
</td>
</tr>
<tr>
<td>
56,670
</td>
<td>
307,839
</td>
<td>
22.8
</td>
<td>
6,743
</td>
<td>
364,509
</td>
<td>
1,629,713
</td>
<td>
15.5
</td>
<td>
84.5
</td>
<td>
قنا
</td>
</tr>
</tbody>
</table>
<p>
The
fragment
identifier
<code>
#col=3
</code>
still
identifies
the
third
of
the
columns,
named
<code>
نسبة
غير
موافق
</code>,
which
appears
in
the
HTML
display
as
the
third
column
from
the
right
and
is
what
those
who
read
right-to-left
would
think
of
as
the
third
column.
</p>
<p>
Note
that
this
display
matches
that
shown
<a href="http://referendum2012.elections.eg/results/referendum-results">
on
the
original
website
</a>.
</p>
</div>
<div class="issue">
<div id="h-issue1" role="heading" aria-level="4" class="issue-title">
<a href="https://github.com/w3c/csvw/issues/46">
<span>
Issue
46
</span>
</a>
</div>
<div class="">
<p>
An
alternative
approach
is
for
the
CSV
to
be
parsed
into
a
table
model
in
which
the
columns
are
numbered
in
the
reverse,
for
tables
which
are
either
marked
as
or
detected
to
be
right-to-left
tables.
For
example,
we
could
introduce
a
<code>
bidi=rtl
</code>
or
similar
media
type
parameter,
and
use
this
to
determine
whether
the
first
column
in
table
generated
from
the
CSV
is
the
text
before
the
first
comma
in
each
line
or
the
text
after
the
last
comma
in
the
line.
</p>
<p>
In
the
example
above,
if
the
CSV
were
served
with
<code>
bidi=rtl
</code>,
or
the
table
was
detected
as
being
a
right-to-left
table,
then
the
column
numbering
in
the
model
would
be
reversed:
</p>
<table style="width: 100%; text-align: right">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr style="text-align: center">
<th>
Column
/
Row
</th>
<th>
column
9
</th>
<th>
column
8
</th>
<th>
column
7
</th>
<th>
column
6
</th>
<th>
column
5
</th>
<th>
column
4
</th>
<th>
column
3
</th>
<th>
column
2
</th>
<th>
column
1
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
row
1
(header)
</th>
<th>
المحافظة
</th>
<th>
نسبة
موافق
</th>
<th>
نسبة
غير
موافق
</th>
<th>
عدد
الناخبين
</th>
<th>
الأصوات
الصحيحة
</th>
<th>
الأصوات
الباطلة
</th>
<th>
نسبة
المشاركة
</th>
<th>
موافق
</th>
<th>
غير
موافق
</th>
</tr>
<tr>
<th>
row
2
</th>
<td>
القليوبية
</td>
<td>
60.0
</td>
<td>
40.0
</td>
<td>
2,639,808
</td>
<td>
853,125
</td>
<td>
15,224
</td>
<td>
32.9
</td>
<td>
512,055
</td>
<td>
341,070
</td>
</tr>
<tr>
<th>
row
3
</th>
<td>
الجيزة
</td>
<td>
66.7
</td>
<td>
33.3
</td>
<td>
4,383,701
</td>
<td>
1,493,092
</td>
<td>
24,105
</td>
<td>
34.6
</td>
<td>
995,417
</td>
<td>
497,675
</td>
</tr>
<tr>
<th>
row
4
</th>
<td>
القاهرة
</td>
<td>
43.2
</td>
<td>
56.8
</td>
<td>
6,580,478
</td>
<td>
2,254,698
</td>
<td>
36,342
</td>
<td>
34.8
</td>
<td>
974,371
</td>
<td>
1,280,327
</td>
</tr>
<tr>
<th>
row
5
</th>
<td>
قنا
</td>
<td>
84.5
</td>
<td>
15.5
</td>
<td>
1,629,713
</td>
<td>
364,509
</td>
<td>
6,743
</td>
<td>
22.8
</td>
<td>
307,839
</td>
<td>
56,670
</td>
</tr>
</tbody>
</table>
<p>
This
would
require
a
change
to
[
<cite>
<a href="#bib-RFC7111" class="bibref">
RFC7111
</a>
</cite>
]
but
that
might
be
required
by
updates
to
the
definition
of
<code>
text/csv
</code>
in
any
case.
With
the
change,
the
fragment
identifier
<code>
#col=3
</code>
would
then
refer
to
the
third
column
from
the
right,
named
<code>
نسبة
المشاركة
</code>.
</p>
<p>
If
the
model
were
defined
in
this
way,
there
would
be
no
need
to
determine
the
order
of
the
columns
when
displayed
using
a
metadata
property.
Columns
would
always
be
displayed
with
the
first
column
(numbered
1
in
the
model)
on
the
left.
The
final
display
in
HTML,
for
example,
would
be
exactly
as
above.
The
only
difference
would
be
that
<code>
#col=3
</code>
would
refer
to
the
third
column
from
the
left.
</p>
<p>
We
note
that
using
media
type
parameters
is
problematic
because
publishers
might
not
have
the
ability
to
set
them
on
their
servers,
and
because
they
can
easily
get
lost
as
a
file
is
republished
or
emailed
between
people.
</p>
<p>
We
invite
comment
on
the
best
way
to
approach
bidirectionality
in
CSV
files.
</p>
</div>
</div>
</section>
<section property="bibo:hasPart" resource="#examples" typeof="bibo:Chapter" id="examples">
<h3 resource="#h-examples" id="h-examples">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">4.5
</del>
<ins class="diff-chg">8.2
</ins>
</span>
<del class="diff-old">Grammar
</del>
<ins class="diff-chg">Examples
</ins>
</span>
</h3>
<section property="bibo:hasPart" resource="#simple-example" typeof="bibo:Chapter" id="simple-example">
<h4 resource="#h-simple-example" id="h-simple-example">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-new">8.2.1
</ins></span><ins class="diff-new">
Simple
Example
</ins></span></h4>
<p>
<del class="diff-old">This
grammar
is
a
generalization
of
</del>
<ins class="diff-chg">A
simple
CSV
file
</ins>
that
<ins class="diff-new">complies
to
the
constraints
described
in
</ins><a href="#syntax" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
7.
</ins></span><span class="sec-title"><ins class="diff-new">
Best
Practice
CSV
</ins></span></a>,<ins class="diff-new">
at
</ins><code><ins class="diff-new">
http://example.org/tree-ops.csv
</ins></code>,<ins class="diff-new">
might
look
like:
</ins></p>          <div class="example"><div class="example-title"><span>Example 13</span>: http://example.org/tree-ops.csv</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date<ins class="diff-new">
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON
ST,Liquidambar
styraciflua,Large
Tree
Routine
Prune,6/2/2010
</ins></pre></div><p><ins class="diff-new">
Parsing
this
file
results
in
an
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-new">
annotated
tabular
data
model
</ins></a><ins class="diff-new">
of
a
single
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-new">
table
</ins></a><var><ins class="diff-new">
T
</ins></var><ins class="diff-new">
with
five
columns
and
two
rows.
The
columns
have
the
annotations
shown
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-new">
id
</ins></th><th colspan="5"><ins class="diff-new">
core
annotations
</ins></th></tr><tr><th><ins class="diff-new">
table
</ins></th><th><ins class="diff-new">
number
</ins></th><th><ins class="diff-new">
source
number
</ins></th><th><ins class="diff-new">
cells
</ins></th><th><ins class="diff-new">
titles
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
C1
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
1
</ins></td><td><ins class="diff-new">
1
</ins></td><td><var><ins class="diff-new">
C1.1
</ins></var>,<var><ins class="diff-new">
C2.1
</ins></var></td><td><code><ins class="diff-new">
GID
</ins></code></td></tr><tr><td><var><ins class="diff-new">
C2
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
2
</ins></td><td><ins class="diff-new">
2
</ins></td><td><var><ins class="diff-new">
C1.2
</ins></var>,<var><ins class="diff-new">
C2.2
</ins></var></td><td><code><ins class="diff-new">
On
Street
</ins></code></td></tr><tr><td><var><ins class="diff-new">
C3
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
3
</ins></td><td><ins class="diff-new">
3
</ins></td><td><var><ins class="diff-new">
C1.3
</ins></var>,<var><ins class="diff-new">
C2.3
</ins></var></td><td><code><ins class="diff-new">
Species
</ins></code></td></tr><tr><td><var><ins class="diff-new">
C4
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
4
</ins></td><td><ins class="diff-new">
4
</ins></td><td><var><ins class="diff-new">
C1.4
</ins></var>,<var><ins class="diff-new">
C2.4
</ins></var></td><td><code><ins class="diff-new">
Trim
Cycle
</ins></code></td></tr><tr><td><var><ins class="diff-new">
C5
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
5
</ins></td><td><ins class="diff-new">
5
</ins></td><td><var><ins class="diff-new">
C1.5
</ins></var>,<var><ins class="diff-new">
C2.5
</ins></var></td><td><code><ins class="diff-new">
Inventory
Date
</ins></code></td></tr></tbody></table><p><ins class="diff-new">
The
extracted
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-new">
embedded
metadata
</ins></a>,<ins class="diff-new">
as
</ins>
defined
in
[
<cite>
<del class="diff-old">RFC4180
</del>
<a href="#bib-tabular-metadata" class="bibref">
<ins class="diff-chg">tabular-metadata
</ins>
</a>
</cite>
<del class="diff-old">]
and
is
included
for
reference
only.
</del>
<ins class="diff-chg">],
would
look
like:
</ins>
</p>
          <div class="example"><div class="example-title"><span>Example 14</span>: tree-ops.csv Embedded Metadata</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"GID"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Species"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pln"> </span><span class="pun">]}</span><span class="pln">
    </span><span class="pun">]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
<ins class="diff-new">}
</ins></span></pre></div>
<p>
The
<del class="diff-old">EBNF
used
here
</del>
<ins class="diff-chg">rows
have
the
annotations
shown
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="4"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
R1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C1.5
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C2.1
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td></tr></tbody></table><div class="note"><div id="h-note15" role="heading" aria-level="5" class="note-title"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
The
</ins><a class="internalDFN" href="#dfn-row-source-number" title="row source number"><ins class="diff-chg">
source
number
</ins></a><ins class="diff-chg">
of
each
row
</ins>
is
<del class="diff-old">defined
</del>
<ins class="diff-chg">offset
by
one
from
the
</ins><a class="internalDFN" href="#dfn-row-number" title="row number"><ins class="diff-chg">
number
</ins></a><ins class="diff-chg">
of
each
row
because
</ins>
in
<del class="diff-old">XML
1.0
</del>
<ins class="diff-chg">the
source
CSV
file,
the
header
line
is
the
first
line.
It
is
possible
to
reconstruct
a
</ins>
[
<cite>
<del class="diff-old">EBNF-NOTATION
</del>
<a href="#bib-RFC7111" class="bibref">
<ins class="diff-chg">RFC7111
</ins>
</a>
</cite>
<del class="diff-old">].
</del>
<ins class="diff-chg">]
compliant
reference
to
the
first
record
in
the
original
CSV
file
(
</ins><code><ins class="diff-chg">
http://example.org/tree-ops.csv#row=2
</ins></code><ins class="diff-chg">
)
using
the
value
of
the
row's
source
number.
This
enables
implementations
to
retain
provenance
between
the
table
model
and
the
original
file.
</ins>
</p>
</div>
<p>
<ins class="diff-chg">The
cells
have
the
annotations
shown
in
the
following
table
(note
that
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
all
the
cells
in
the
table
are
strings,
denoted
by
the
double
quotes
in
the
table
below):
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
column
</ins></th><th><ins class="diff-chg">
row
</ins></th><th><ins class="diff-chg">
string
value
</ins></th><th><ins class="diff-chg">
value
</ins></th></tr></thead><tbody><tr>
<td>
<del class="diff-old">[1]
</del>
<var>
<ins class="diff-chg">C1.1
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">T
</ins></var></td><td><var><ins class="diff-new">
C1
</ins></var></td><td><var><ins class="diff-new">
R1
</ins></var></td>
<td>
<code>
<del class="diff-old">csv
</del>
<ins class="diff-chg">"1"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<del class="diff-old">header
record
</del>
<code>
<del class="diff-old">+
</del>
<ins class="diff-chg">"1"
</ins>
</code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">[2]
</del>
<var>
<ins class="diff-chg">C1.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">C2
</ins></var></td><td><var><ins class="diff-new">
R1
</ins></var></td>
<td>
<code>
<del class="diff-old">header
</del>
<ins class="diff-chg">"ADDISON
AV"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"ADDISON
AV"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.3
</ins></var>
</td>
<td>
<del class="diff-old">record
</del>
<var>
<ins class="diff-chg">T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code>
</td>
<td>
<code>
<ins class="diff-new">"Celtis
australis"
</ins></code></td>
</tr>
<tr>
<td>
<del class="diff-old">[3]
</del>
<var>
<ins class="diff-chg">C1.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var>
</td>
<td>
<code>
<del class="diff-old">record
</del>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins></code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">fields
#x0D
</del>
<var>
<ins class="diff-chg">C1.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins>
</code>
</td>
<td>
<code>
<del class="diff-old">?
</del>
<ins class="diff-chg">"10/18/2010"
</ins>
</code>
<del class="diff-old">#x0A
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"2"
</ins>
</code>
</td>
<td>
<code>
<ins class="diff-new">"2"
</ins></code></td>
</tr>
<tr>
<td>
<del class="diff-old">[4]
</del>
<var>
<ins class="diff-chg">C2.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">C2
</ins></var></td><td><var><ins class="diff-new">
R2
</ins></var></td>
<td>
<code>
<del class="diff-old">fields
</del>
<ins class="diff-chg">"EMERSON
ST"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"EMERSON
ST"
</ins></code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">field
("
,
</del>
<var>
<ins class="diff-chg">C2.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins>
</code>
<del class="diff-old">"
fields
)
</del>
</td>
<td>
<code>
<del class="diff-old">*
</del>
<ins class="diff-chg">"Liquidambar
styraciflua"
</ins>
</code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">[5]
</del>
<var>
<ins class="diff-chg">C2.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">R2
</ins></var></td>
<td>
<code>
<del class="diff-old">field
</del>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins></code>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-new">C2.5
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><var><ins class="diff-new">
C5
</ins></var></td><td><var><ins class="diff-new">
R2
</ins></var></td>
<td>
<del class="diff-old">WS
</del>
<code>
<del class="diff-old">*
</del>
<ins class="diff-chg">"6/2/2010"
</ins>
</code>
<del class="diff-old">rawfield
</del>
</td>
<td>
<code>
<ins class="diff-chg">"6/2/2010"
</ins></code></td></tr></tbody></table><section property="bibo:hasPart" resource="#using-overriding-metadata" typeof="bibo:Chapter" id="using-overriding-metadata"><h5 resource="#h-using-overriding-metadata" id="h-using-overriding-metadata"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.1.1
</ins></span><ins class="diff-chg">
Using
Overriding
Metadata
</ins></span></h5><p><ins class="diff-chg">
The
tools
that
the
consumer
of
this
data
uses
may
provide
a
mechanism
for
overriding
the
metadata
that
has
been
provided
within
the
file
itself.
For
example,
they
might
enable
the
consumer
to
add
machine-readable
names
to
the
columns,
or
to
mark
the
fifth
column
as
holding
a
date
in
the
format
</ins><code><ins class="diff-chg">
M/D/YYYY
</ins></code>.<ins class="diff-chg">
These
facilities
are
implementation
defined;
the
code
for
invoking
a
Javascript-based
parser
might
look
like:
</ins></p>          	<div class="example"><div class="example-title"><span>Example 15</span>: Javascript implementation configuration</div><pre style="" class="highlight example prettyprint prettyprinted"><span class="pln">data</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">({</span><span class="pln">  </span><span class="str">"column-names"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">],</span><span class="pln">  </span><span class="str">"datatypes"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">],</span><span class="pln">  </span><span class="str">"formats"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="str">"M/D/YYYY"</span><span class="pun">]</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
});
</ins></span></pre></div><p><ins class="diff-chg">
This
is
equivalent
to
a
metadata
file
expressed
in
the
syntax
defined
in
[
</ins><cite><a href="#bib-tabular-metadata" class="bibref"><ins class="diff-chg">
tabular-metadata
</ins>
</a>
<del class="diff-old">WS
</del>
</cite>
<ins class="diff-chg">],
looking
like:
</ins></p>            <div class="example"><div class="example-title"><span>Example 16</span>: Equivalent metadata syntax</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln">        </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">      </span><span class="pun">}</span><span class="pln">    </span><span class="pun">}]</span><span class="pln">  </span><span class="pun">}</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
}
</ins></span></pre></div><p><ins class="diff-chg">
This
would
be
merged
with
the
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins>
</a>
<ins class="diff-new">found
in
the
CSV
file,
providing
the
titles
for
the
columns
to
create:
</ins></p>            <div class="example"><div class="example-title"><span>Example 17</span>: Merged metadata</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln">       </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln">         </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">      </span><span class="pun">}</span><span class="pln">    </span><span class="pun">}]</span><span class="pln">  </span><span class="pun">}</span><span class="pln"></span>
<span class="pun">
<ins class="diff-new">}
</ins></span></pre></div><p><ins class="diff-new">
The
processor
can
then
create
an
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-new">
annotated
tabular
data
model
</ins></a><ins class="diff-new">
that
included
</ins>
<code>
<del class="diff-old">*
</del>
<ins class="diff-chg">name
</ins></code><ins class="diff-chg">
annotations
on
the
columns,
and
</ins><code><ins class="diff-chg">
datatype
</ins></code><ins class="diff-chg">
annotations
on
the
cells,
and
created
cells
whose
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
were
of
appropriate
types
(in
the
case
of
this
Javascript
implementation,
the
cells
in
the
last
column
would
be
</ins><code><ins class="diff-chg">
Date
</ins>
</code>
<ins class="diff-new">objects,
for
example).
</ins></p><p><ins class="diff-new">
Assuming
this
kind
of
implementation-defined
parsing,
the
columns
would
then
have
the
annotations
shown
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-new">
id
</ins></th><th colspan="7"><ins class="diff-new">
core
annotations
</ins></th></tr><tr><th><ins class="diff-new">
table
</ins></th><th><ins class="diff-new">
number
</ins></th><th><ins class="diff-new">
source
number
</ins></th><th><ins class="diff-new">
cells
</ins></th><th><ins class="diff-new">
name
</ins></th><th><ins class="diff-new">
titles
</ins></th><th><ins class="diff-new">
datatype
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
C1
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">T
</ins></var></td><td><ins class="diff-new">
1
</ins></td><td><ins class="diff-new">
1
</ins></td><td><var><ins class="diff-new">
C1.1
</ins></var>,<var><ins class="diff-new">
C2.1
</ins></var></td><td><code><ins class="diff-new">
GID
</ins></code></td><td><code><ins class="diff-new">
GID
</ins></code></td><td><code><ins class="diff-new">
string
</ins></code></td>
</tr>
<tr>
<td>
<del class="diff-old">[6]
</del>
<var>
<ins class="diff-chg">C2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var>
</td>
<td>
<code>
<del class="diff-old">rawfield
</del>
<ins class="diff-chg">on_street
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">On
Street
</ins></code>
</td>
<td>
<del class="diff-old">'
"
</del>
<code>
<ins class="diff-chg">string
</ins>
</code>
<del class="diff-old">'
QCHAR
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
3
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var></td><td>
<code>
<del class="diff-old">*
</del>
<ins class="diff-chg">species
</ins>
</code>
<del class="diff-old">'
"
</del>
</td>
<td>
<code>
<ins class="diff-chg">Species
</ins>
</code>
<del class="diff-old">'
</del>
</td>
<td>
<code>
<del class="diff-old">|
</del>
<ins class="diff-chg">string
</ins>
</code>
<del class="diff-old">SCHAR
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var></td><td>
<code>
<del class="diff-old">*
</del>
<ins class="diff-chg">trim_cycle
</ins></code></td><td><code><ins class="diff-chg">
Trim
Cycle
</ins>
</code>
</td>
<td>
<code>
<ins class="diff-new">string
</ins></code></td>
</tr>
<tr>
<td>
<del class="diff-old">[7]
</del>
<var>
<ins class="diff-chg">C5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var>
</td>
<td>
<ins class="diff-new">5
</ins></td><td><ins class="diff-new">
5
</ins></td><td><var><ins class="diff-new">
C1.5
</ins></var>,<var><ins class="diff-new">
C2.5
</ins></var></td>
<td>
<code>
<del class="diff-old">QCHAR
</del>
<ins class="diff-chg">inventory_date
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">Inventory
Date
</ins></code>
</td>
<td>
<code>
<del class="diff-old">[
</del>
<ins class="diff-chg">{
"base":
"date",
"format":
"M/d/yyyy"
}
</ins>
</code>
<del class="diff-old">^"
</del>
</td>
</tr>
</tbody>
</table>
<p>
<ins class="diff-chg">The
cells
have
the
annotations
shown
in
the
following
table.
Because
of
the
overrides
provided
by
the
consumer
to
guide
the
parsing,
and
the
way
the
parser
works,
the
cells
in
the
</ins><code><ins class="diff-chg">
Inventory
Date
</ins>
</code>
<ins class="diff-new">column
(cells
</ins><var><ins class="diff-new">
C1.5
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
C2.5
</ins></var><ins class="diff-new">
)
have
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-new">
values
</ins></a><ins class="diff-new">
that
are
parsed
dates
rather
than
unparsed
strings.
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-new">
id
</ins></th><th colspan="5"><ins class="diff-new">
core
annotations
</ins></th></tr><tr><th><ins class="diff-new">
table
</ins></th><th><ins class="diff-new">
column
</ins></th><th><ins class="diff-new">
row
</ins></th><th><ins class="diff-new">
string
value
</ins></th><th><ins class="diff-new">
value
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
C1.1
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><var><ins class="diff-new">
C1
</ins></var></td><td><var><ins class="diff-new">
R1
</ins></var></td><td>
<code>
<del class="diff-old">]
</del>
<ins class="diff-chg">"1"
</ins>
</code>
</td>
<td>
<code>
<del class="diff-old">|
</del>
<ins class="diff-chg">"1"
</ins>
</code>
<del class="diff-old">'
""
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C1.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins>
</code>
<del class="diff-old">'
</del>
</td>
<td>
<code>
<ins class="diff-chg">"ADDISON
AV"
</ins></code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">[8]
</del>
<var>
<ins class="diff-chg">C1.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">R1
</ins></var></td>
<td>
<code>
<del class="diff-old">SCHAR
</del>
<ins class="diff-chg">"Celtis
australis"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"Celtis
australis"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var>
</td>
<td>
<code>
<del class="diff-old">[
</del>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins>
</code>
<del class="diff-old">^",
</del>
</td>
<td>
<code>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins>
</code>
<del class="diff-old">#x0A
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C1.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins>
</code>
<del class="diff-old">#x0D
</del>
</td>
<td>
<code>
<ins class="diff-chg">2010-10-18
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"2"
</ins>
</code>
</td>
<td>
<code>
<del class="diff-old">]
</del>
<ins class="diff-chg">"2"
</ins>
</code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">[9]
</del>
<var>
<ins class="diff-chg">C2.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var>
</td>
<td>
<code>
<del class="diff-old">WS
</del>
<ins class="diff-chg">"EMERSON
ST"
</ins>
</code>
</td>
<del class="diff-old">::=
</del>
<td>
<code>
<ins class="diff-chg">"EMERSON
ST"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var>
</td>
<td>
<var>
<ins class="diff-new">C3
</ins></var></td><td><var><ins class="diff-new">
R2
</ins></var></td><td>
<code>
<del class="diff-old">[
</del>
<ins class="diff-chg">"Liquidambar
styraciflua"
</ins>
</code>
<del class="diff-old">#x20
</del>
</td>
<td>
<code>
<ins class="diff-chg">"Liquidambar
styraciflua"
</ins>
</code>
<del class="diff-old">#x09
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C2.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins>
</code>
</td>
<td>
<code>
<del class="diff-old">]
</del>
<ins class="diff-chg">"Large
Tree
Routine
Prune"
</ins>
</code>
</td>
</tr>
<tr>
<td>
<del class="diff-old">Note
</del>
<var>
<ins class="diff-chg">C2.5
</ins></var>
</td>
<del class="diff-old">We
should
probably
place
further
restrictions
on
QCHAR
and
SCHAR
to
avoid
control
characters.
If
header
weren’t
optional,
it
would
be
better
defined
as
in
RFC4180,
but
if
the
syntax
allows
it
to
be
optional,
this
would
make
it
not
an
LL(1)
grammar,
which
isn’t
too
much
of
an
issue.
</del>
<td>
<var>
<ins class="diff-chg">T
</ins></var>
</td>
<del class="diff-old">5.
Parsing
Tabular
Data
</del>
<td>
<var>
<ins class="diff-chg">C5
</ins></var>
</td>
<del class="diff-old">This
section
is
non-normative.
</del>
<td>
<var>
<ins class="diff-chg">R2
</ins></var></td><td><code><ins class="diff-chg">
"6/2/2010"
</ins></code></td><td><code><ins class="diff-chg">
2010-06-02
</ins></code></td></tr></tbody></table></section><section property="bibo:hasPart" resource="#using-a-metadata-file" typeof="bibo:Chapter" id="using-a-metadata-file"><h5 resource="#h-using-a-metadata-file" id="h-using-a-metadata-file"><span property="xhv:role" resource="xhv:heading">
<del class="diff-old">As
described
in
section
</del>
<span class="secno">
<del class="diff-old">4.
</del>
<ins class="diff-chg">8.2.1.2
</ins>
</span>
<del class="diff-old">CSV+
Syntax
</del>
<ins class="diff-chg">Using
a
Metadata
File
</ins>
</span>
<del class="diff-old">,
there
may
</del>
</h5>
<p>
<ins class="diff-chg">A
similar
set
of
annotations
could
</ins>
be
<del class="diff-old">many
formats
which
an
application
might
interpret
into
the
tabular
data
model
described
</del>
<ins class="diff-chg">provided
through
a
metadata
file,
located
as
discussed
</ins>
in
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">2.
</del>
<ins class="diff-chg">5.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Tabular
Data
Models
</del>
<ins class="diff-chg">Locating
Metadata
</ins>
</span>
<del class="diff-old">,
including
using
different
separators
or
fixed
format
tables,
multiple
tables
within
a
single
file,
or
ones
that
have
metadata
lines
before
a
table
header.
</del>
</a>
<ins class="diff-chg">and
defined
in
[
</ins><cite>
<a href="#bib-tabular-metadata" class="bibref">
<ins class="diff-chg">tabular-metadata
</ins></a>
<del class="diff-old">Note
</del>
</cite>
<ins class="diff-chg">].
For
example,
this
might
look
like:
</ins></p>            <div class="example"><div class="example-title"><span>Example 18</span>: http://example.org/tree-ops.csv-metadata.json</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@language"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"en"</span><span class="pun">}],</span><span class="pln">  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"tree-ops.csv"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"dc:title"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Tree Operations"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"dcat:keyword"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"tree"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"street"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"maintenance"</span><span class="pun">],</span><span class="pln">  </span><span class="str">"dc:publisher"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"schema:name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Example Municipality"</span><span class="pun">,</span><span class="pln">    </span><span class="str">"schema:url"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@id"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org"</span><span class="pun">}</span><span class="pln">  </span><span class="pun">},</span><span class="pln">  </span><span class="str">"dc:license"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@id"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://opendefinition.org/licenses/cc-by/"</span><span class="pun">},</span><span class="pln">  </span><span class="str">"dc:modified"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@value"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"2010-12-31"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"xsd:date"</span><span class="pun">},</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Generic Identifier"</span><span class="pun">],</span><span class="pln">      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"An identifier for the operation on a tree."</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"required"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The street that the tree is on."</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The species of the tree."</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The operation performed on the tree."</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The date of the operation that was performed."</span><span class="pun">,</span><span class="pln">      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pun">}</span><span class="pln">    </span><span class="pun">}],</span><span class="pln">    </span><span class="str">"primaryKey"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">    </span><span class="str">"aboutUrl"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"#gid-{GID}"</span><span class="pln">  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
<ins class="diff-chg">}
</ins></span>
<del class="diff-old">Standardising
the
parsing
of
CSV
is
outside
the
chartered
scope
of
the
Working
Group.
This
non-normative
section
is
intended
to
help
the
creators
of
parsers
handle
the
wide
variety
of
CSV-based
formats
that
they
may
encounter
due
to
the
current
lack
of
standardisation
of
the
format.
</del>
</pre>
</div>
<p>
<del class="diff-old">This
section
describes
an
algorithm
for
parsing
formats
other
than
the
plain
CSV+
format
specified
in
section
4.
CSV+
Syntax
.
It
is
impossible
to
do
this
in
a
fully
automated
manner,
so
</del>
<ins class="diff-chg">The
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
tabular
data
model
</ins></a><ins class="diff-chg">
generated
from
</ins>
this
<del class="diff-old">algorithm
depends
on
</del>
<ins class="diff-chg">would
be
more
sophisticated
again.
The
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><ins class="diff-chg">
itself
would
have
</ins>
the
following
<del class="diff-old">flags
being
set
externally
(eg
through
user
input):
</del>
<ins class="diff-chg">annotations:
</ins>
</p>
<dl>
<dt>
<del class="diff-old">encoding
</del>
<code>
<ins class="diff-chg">dc:title
</ins></code>
</dt>
<dd>
<del class="diff-old">The
character
encoding
for
the
file,
one
of
the
encodings
listed
in
[
</del>
<del class="diff-old">encoding
</del>
<code>
<ins class="diff-chg">{"@value":
"Tree
Operations",
"@language":
"en"}
</ins></code></dd><dt>
<del class="diff-old">].
The
default
is
</del>
<code>
<del class="diff-old">utf-8
.
</del>
<ins class="diff-chg">dcat:keyword
</ins></code></dt><dd><code><ins class="diff-chg">
[{"@value":
"tree",
"@language",
"en"},
{"@value":
"street",
"@language":
"en"},
{"@value":
"maintenance",
"@language":
"en"}]
</ins></code>
</dd>
<dt>
<del class="diff-old">line
terminator
</del>
<code>
<ins class="diff-chg">dc:publisher
</ins></code>
</dt>
<dd>
<del class="diff-old">The
character
that
is
used
at
the
end
of
a
row.
The
default
is
</del>
<code>
<del class="diff-old">CRLF
.
</del>
<ins class="diff-chg">[{
"schema:name":
"Example
Municipality",
"schema:url":
{"@id":
"http://example.org"}
}]
</ins></code>
</dd>
<dt>
<del class="diff-old">quote
character
</del>
<code>
<ins class="diff-chg">dc:license
</ins></code>
</dt>
<dd>
<del class="diff-old">The
character
that
is
used
around
escaped
cells.
The
default
is
</del>
<code>
<del class="diff-old">"
.
</del>
<ins class="diff-chg">{"@id":
"http://opendefinition.org/licenses/cc-by/"}
</ins></code>
</dd>
<dt>
<del class="diff-old">escape
character
</del>
<code>
<ins class="diff-chg">dc:modified
</ins></code>
</dt>
<dd>
<code>
<ins class="diff-new">{"@value":
"2010-12-31",
"@type":
"date"}
</ins></code></dd></dl><p>
The
<del class="diff-old">character
that
is
used
to
escape
</del>
<ins class="diff-chg">columns
would
have
</ins>
the
<del class="diff-old">quote
character
within
escaped
cells.
The
default
is
</del>
<ins class="diff-chg">annotations
shown
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="7"><ins class="diff-chg">
core
annotations
</ins></th><th colspan="1"><ins class="diff-chg">
other
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
name
</ins></th><th><ins class="diff-chg">
titles
</ins></th><th><ins class="diff-chg">
datatype
</ins></th><th>
<code>
<del class="diff-old">"
</del>
<ins class="diff-chg">dc:description
</ins>
</code>
<del class="diff-old">(such
that
</del>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
<ins class="diff-chg">C1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
1
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C2.1
</ins></var></td><td>
<code>
<del class="diff-old">""
</del>
<ins class="diff-chg">GID
</ins>
</code>
<del class="diff-old">is
used
to
escape
</del>
</td>
<td>
<code>
<del class="diff-old">"
</del>
<ins class="diff-chg">GID
</ins></code>,<code><ins class="diff-chg">
Generic
Identifier
</ins>
</code>
<del class="diff-old">within
an
escaped
cell).
</del>
<del class="diff-old">skip
rows
</del>
</td>
<del class="diff-old">The
number
of
rows
to
skip
at
the
beginning
of
</del>
<td>
<code>
<ins class="diff-chg">string
</ins></code></td><td><code><ins class="diff-chg">
An
identifier
for
</ins>
the
<del class="diff-old">file,
before
</del>
<ins class="diff-chg">operation
on
</ins>
a
<del class="diff-old">header
row
or
tabular
data.
</del>
<ins class="diff-chg">tree.
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var></td><td><code><ins class="diff-chg">
on_street
</ins></code></td><td><code><ins class="diff-chg">
On
Street
</ins></code></td><td><code><ins class="diff-chg">
string
</ins></code></td><td><code>
The
<del class="diff-old">default
</del>
<ins class="diff-chg">street
that
the
tree
</ins>
is
<ins class="diff-new">on.
</ins></code></td></tr><tr><td><var><ins class="diff-new">
C3
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
3
</ins></td><td><ins class="diff-new">
3
</ins></td><td><var><ins class="diff-new">
C1.3
</ins></var>,<var><ins class="diff-new">
C2.3
</ins></var></td><td>
<code>
<del class="diff-old">0
.
</del>
<ins class="diff-chg">species
</ins></code>
<del class="diff-old">comment
prefix
</del>
</td>
<del class="diff-old">A
character
that,
when
it
appears
at
the
beginning
</del>
<td>
<code>
<ins class="diff-chg">Species
</ins></code></td><td><code><ins class="diff-chg">
string
</ins></code></td><td><code><ins class="diff-chg">
The
species
</ins>
of
<del class="diff-old">a
skipped
row,
indicates
a
comment
that
should
be
associated
as
a
comment
annotation
to
</del>
the
<del class="diff-old">table.
</del>
<ins class="diff-chg">tree.
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var></td><td><code><ins class="diff-chg">
trim_cycle
</ins></code></td><td><code><ins class="diff-chg">
Trim
Cycle
</ins></code></td><td><code><ins class="diff-chg">
string
</ins></code></td><td><code>
The
<del class="diff-old">default
is
</del>
<ins class="diff-chg">operation
performed
on
the
tree.
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
5
</ins></td><td><ins class="diff-chg">
5
</ins></td><td><var><ins class="diff-chg">
C1.5
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td><td>
<code>
<del class="diff-old">#
.
</del>
<ins class="diff-chg">inventory_date
</ins></code>
<del class="diff-old">header
row
count
</del>
</td>
<td>
<code>
<ins class="diff-chg">Inventory
Date
</ins></code></td><td><code><ins class="diff-chg">
{
"base":
"date",
"format":
"M/d/yyyy"
}
</ins></code></td><td><code>
The
<del class="diff-old">number
</del>
<ins class="diff-chg">date
</ins>
of
<del class="diff-old">header
</del>
<ins class="diff-chg">the
operation
that
was
performed.
</ins></code></td></tr></tbody></table><p><ins class="diff-chg">
The
</ins>
rows
<del class="diff-old">(following
</del>
<ins class="diff-chg">have
an
additional
</ins><a class="internalDFN" href="#dfn-row-primary-key" title="row primary key"><ins class="diff-chg">
primary
key
</ins></a><ins class="diff-chg">
annotation,
as
shown
in
</ins>
the
<del class="diff-old">skipped
rows)
</del>
<ins class="diff-chg">following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
primary
key
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
R1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C1.5
</ins></var></td><td><ins class="diff-chg">
C1.1
</ins></td></tr><tr><td><var><ins class="diff-chg">
R2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C2.1
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td><td><ins class="diff-chg">
C2.1
</ins></td></tr></tbody></table><p><ins class="diff-chg">
Thanks
to
the
provided
metadata,
the
cells
again
have
the
annotations
shown
</ins>
in
the
<del class="diff-old">file.
</del>
<ins class="diff-chg">following
table.
</ins>
The
<del class="diff-old">default
</del>
<ins class="diff-chg">metadata
file
has
provided
the
information
to
supplement
the
model
with
additional
annotations
but
also,
for
the
</ins><code><ins class="diff-chg">
Inventory
Date
</ins></code><ins class="diff-chg">
column
(cells
</ins><var><ins class="diff-chg">
C1.5
</ins></var><ins class="diff-chg">
and
</ins><var><ins class="diff-chg">
C2.5
</ins></var><ins class="diff-chg">
),
have
a
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a><ins class="diff-chg">
that
</ins>
is
<ins class="diff-new">a
parsed
date
rather
than
an
unparsed
string.
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-new">
id
</ins></th><th colspan="6"><ins class="diff-new">
core
annotations
</ins></th></tr><tr><th><ins class="diff-new">
table
</ins></th><th><ins class="diff-new">
column
</ins></th><th><ins class="diff-new">
row
</ins></th><th><ins class="diff-new">
string
value
</ins></th><th><ins class="diff-new">
value
</ins></th><th><ins class="diff-new">
about
URL
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
C1.1
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><var><ins class="diff-new">
C1
</ins></var></td><td><var><ins class="diff-new">
R1
</ins></var></td><td>
<code>
<del class="diff-old">1
.
</del>
<ins class="diff-chg">"1"
</ins></code>
<del class="diff-old">delimiter
</del>
</td>
<del class="diff-old">The
separator
between
cells.
The
default
is
,
.
</del>
<td>
<del class="diff-old">skip
columns
</del>
<code>
<ins class="diff-chg">"1"
</ins></code>
</td>
<td>
<code>
<ins class="diff-chg">http://example.org/tree-ops.csv#gid-1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins></code></td><td><code><ins class="diff-chg">
2010-10-18
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"2"
</ins></code></td><td><code><ins class="diff-chg">
"2"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-2
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"EMERSON
ST"
</ins></code></td><td><code><ins class="diff-chg">
"EMERSON
ST"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-2
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-2
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-2
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"6/2/2010"
</ins></code></td><td><code><ins class="diff-chg">
2010-06-02
</ins></code></td><td><code><ins class="diff-chg">
http://example.org/tree-ops.csv#gid-2
</ins></code></td></tr></tbody></table></section></section><section property="bibo:hasPart" resource="#empty-and-quoted-cells" typeof="bibo:Chapter" id="empty-and-quoted-cells"><h4 resource="#h-empty-and-quoted-cells" id="h-empty-and-quoted-cells"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.2
</ins></span><ins class="diff-chg">
Empty
and
Quoted
Cells
</ins></span></h4><p>
The
<del class="diff-old">number
</del>
<ins class="diff-chg">following
slightly
amended
CSV
file
contains
quoted
and
missing
cell
values:
</ins></p>          <div class="example"><div class="example-title"><span>Example 19</span>: CSV file containing quoted and missing cell values</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date<ins class="diff-chg">
1,ADDISON AV,"Celtis australis","Large Tree Routine Prune",10/18/2010
2,,"Liquidambar
styraciflua","Large
Tree
Routine
Prune",
</ins></pre></div><p><ins class="diff-chg">
Parsing
this
file
similarly
results
in
an
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
tabular
data
model
</ins></a>
of
<ins class="diff-new">a
single
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-new">
table
</ins></a><var><ins class="diff-new">
T
</ins></var><ins class="diff-new">
with
five
columns
and
two
rows.
The
</ins>
columns
<ins class="diff-new">and
rows
have
exactly
the
same
annotations
as
previously,
but
there
are
two
</ins><code><ins class="diff-new">
null
</ins></code><ins class="diff-new">
cell
values
for
</ins><var><ins class="diff-new">
C2.2
</ins></var><ins class="diff-new">
and
</ins><var><ins class="diff-new">
C2.5
</ins></var>.<ins class="diff-new">
Note
that
the
quoting
of
values
within
the
CSV
makes
no
difference
</ins>
to
<del class="diff-old">skip
at
</del>
<ins class="diff-chg">either
</ins>
the
<del class="diff-old">beginning
</del>
<a class="internalDFN" href="#dfn-cell-string-value" title="cell string value">
<ins class="diff-chg">string
value
</ins></a><ins class="diff-chg">
or
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
value
</ins></a>
of
<del class="diff-old">each
row,
before
any
header
columns.
The
default
is
0
.
</del>
<ins class="diff-chg">the
cell.
</ins></p><table style="width: 100%; text-align: left"><thead><tr>
<del class="diff-old">header
</del>
<th rowspan="2">
<ins class="diff-chg">id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th>
column
<del class="diff-old">count
</del>
</th>
<th>
<ins class="diff-chg">row
</ins></th><th><ins class="diff-chg">
string
value
</ins></th><th><ins class="diff-chg">
value
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"1"
</ins></code></td><td><code><ins class="diff-chg">
"1"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins></code></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"2"
</ins></code></td><td><code><ins class="diff-chg">
"2"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
""
</ins></code></td><td><code><ins class="diff-chg">
null
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
""
</ins></code></td><td><code><ins class="diff-chg">
null
</ins></code></td></tr></tbody></table></section><section property="bibo:hasPart" resource="#tabular-data-embedding-annotations" typeof="bibo:Chapter" id="tabular-data-embedding-annotations"><h4 resource="#h-tabular-data-embedding-annotations" id="h-tabular-data-embedding-annotations"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.3
</ins></span><ins class="diff-chg">
Tabular
Data
Embedding
Annotations
</ins></span></h4><p>
The
<del class="diff-old">number
</del>
<ins class="diff-chg">following
example
illustrates
some
</ins>
of
<del class="diff-old">header
columns
(following
</del>
the
<del class="diff-old">skipped
columns)
</del>
<ins class="diff-chg">complexities
that
can
be
involved
</ins>
in
<del class="diff-old">each
row.
</del>
<ins class="diff-chg">parsing
tabular
data,
how
the
flags
described
above
can
be
used,
and
how
new
tabular
data
formats
could
be
defined
that
embed
additional
annotations
into
the
tabular
data
model.
</ins></p><p><ins class="diff-chg">
In
this
example,
the
publishers
of
the
data
are
using
an
internal
convention
to
supply
additional
metadata
about
the
tabular
data
embedded
within
the
file
itself.
They
are
also
using
a
tab
as
a
separator
rather
than
a
comma.
</ins></p>	        <div class="example"><div class="example-title"><span>Example 20</span>: Tab-separated file containing embedded metadata</div><pre class="example">#	publisher	City of Palo Alto<ins class="diff-chg">
#	updated	12/31/2010
#name	GID	on_street	species	trim_cycle	inventory_date
#datatype	string	string	string	string	date:M/D/YYYY
	GID	On Street	Species	Trim Cycle	Inventory Date
	1	ADDISON AV	Celtis australis	Large Tree Routine Prune	10/18/2010
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010
</ins></pre></div><section property="bibo:hasPart" resource="#naive-parsing" typeof="bibo:Chapter" id="naive-parsing"><h5 resource="#h-naive-parsing" id="h-naive-parsing"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.3.1
</ins></span><ins class="diff-chg">
Naive
Parsing
</ins></span></h5><p><ins class="diff-chg">
Naive
parsing
of
the
above
data
will
assume
a
comma
separator
and
thus
results
in
a
single
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins></a><var><ins class="diff-chg">
T
</ins></var><ins class="diff-chg">
with
a
single
column
and
six
rows.
</ins>
The
<del class="diff-old">default
is
</del>
<ins class="diff-chg">column
has
the
annotations
shown
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
titles
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
1
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C2.1
</ins></var>,<var><ins class="diff-chg">
C3.1
</ins></var>,<var><ins class="diff-chg">
C4.1
</ins></var>,<var><ins class="diff-chg">
C5.1
</ins></var></td><td>
<code>
<del class="diff-old">0
.
</del>
<ins class="diff-chg">#
publisher
City
of
Palo
Alto
</ins></code>
<del class="diff-old">skip
blank
rows
</del>
</td>
<del class="diff-old">Indicates
whether
to
ignore
wholly
empty
rows
(ie
</del>
</tr>
</tbody>
</table>
<p>
<ins class="diff-chg">The
</ins>
rows
<ins class="diff-new">have
the
annotations
shown
</ins>
in
<del class="diff-old">which
</del>
<ins class="diff-chg">the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="4"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
R1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C2.1
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
3
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C3.1
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
5
</ins></td><td><var><ins class="diff-chg">
C4.1
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
5
</ins></td><td><ins class="diff-chg">
6
</ins></td><td><var><ins class="diff-chg">
C5.1
</ins></var></td></tr><tr><td><var><ins class="diff-chg">
R6
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
6
</ins></td><td><ins class="diff-chg">
7
</ins></td><td><var><ins class="diff-chg">
C6.1
</ins></var></td></tr></tbody></table><p><ins class="diff-chg">
The
cells
have
the
annotations
shown
in
the
following
table
(note
that
the
</ins><a class="internalDFN" href="#dfn-cell-value" title="cell value"><ins class="diff-chg">
values
</ins></a><ins class="diff-chg">
of
</ins>
all
the
cells
<ins class="diff-new">in
the
table
</ins>
are
<del class="diff-old">empty).
The
default
is
</del>
<ins class="diff-chg">strings,
denoted
by
the
double
quotes
in
the
table
below):
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
column
</ins></th><th><ins class="diff-chg">
row
</ins></th><th><ins class="diff-chg">
string
value
</ins></th><th><ins class="diff-chg">
value
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td>
<code>
<del class="diff-old">false
.
</del>
<ins class="diff-chg">"#
updated
12/31/2010"
</ins></code>
<del class="diff-old">trim
</del>
</td>
<td>
<del class="diff-old">Indicates
whether
to
trim
whitespace
around
cells;
may
be
</del>
<code>
<del class="diff-old">true
,
</del>
<ins class="diff-chg">"#
updated
12/31/2010"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td>
<code>
<del class="diff-old">false
,
</del>
<ins class="diff-chg">"#name
GID
on_street
species
trim_cycle
inventory_date"
</ins></code></td><td>
<code>
<del class="diff-old">start
</del>
<ins class="diff-chg">"#name
GID
on_street
species
trim_cycle
inventory_date"
</ins>
</code>
<del class="diff-old">or
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td>
<code>
<del class="diff-old">end
.
The
default
is
</del>
<ins class="diff-chg">"#datatype
string
string
string
string
date:M/D/YYYY"
</ins></code></td><td>
<code>
<del class="diff-old">false
.
</del>
<ins class="diff-chg">"#datatype
string
string
string
string
date:M/D/YYYY"
</ins></code>
</td>
</tr>
<tr>
<del class="diff-old">Issue
47
</del>
<td>
<var>
<ins class="diff-chg">C3.1
</ins></var>
</td>
<td>
<var>
<ins class="diff-chg">T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R3
</ins></var></td><td><code><ins class="diff-chg">
"
GID
On
Street
Species
Trim
Cycle
Inventory
Date"
</ins></code></td><td><code><ins class="diff-chg">
"
GID
On
Street
Species
Trim
Cycle
Inventory
Date"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C4.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R4
</ins></var></td><td><code><ins class="diff-chg">
"
1
ADDISON
AV
Celtis
australis
Large
Tree
Routine
Prune
10/18/2010"
</ins></code></td><td><code><ins class="diff-chg">
"
1
ADDISON
AV
Celtis
australis
Large
Tree
Routine
Prune
10/18/2010"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C5.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R5
</ins></var></td><td><code><ins class="diff-chg">
"
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010"
</ins></code></td><td><code><ins class="diff-chg">
"
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010"
</ins></code></td></tr></tbody></table></section><section property="bibo:hasPart" resource="#parsing-with-flags" typeof="bibo:Chapter" id="parsing-with-flags"><h5 resource="#h-parsing-with-flags" id="h-parsing-with-flags"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.3.2
</ins></span><ins class="diff-chg">
Parsing
with
Flags
</ins></span></h5>
<p>
<del class="diff-old">When
parsing,
should
we:
</del>
<ins class="diff-chg">The
consumer
of
the
data
may
use
the
flags
described
above
to
create
a
more
useful
set
of
data
from
this
file.
Specifically,
they
could
set:
</ins>
</p>
<ul>
<li>
<del class="diff-old">always
trim
whitespace
around
cells?
</del>
<a class="internalDFN" href="#dfn-delimiter">
<ins class="diff-chg">delimiter
</ins></a><ins class="diff-chg">
to
a
tab
character
</ins>
</li>
<li>
<del class="diff-old">always
create
empty
cells
for
missing
cells?
</del>
<a class="internalDFN" href="#dfn-skip-rows">
<ins class="diff-chg">skip
rows
</ins></a><ins class="diff-chg">
to
4
</ins></li><li><a class="internalDFN" href="#dfn-skip-columns"><ins class="diff-chg">
skip
columns
</ins></a><ins class="diff-chg">
to
1
</ins></li><li><a class="internalDFN" href="#dfn-comment-prefix"><ins class="diff-chg">
comment
prefix
</ins></a><ins class="diff-chg">
to
</ins><code><ins class="diff-chg">
#
</ins></code>
</li>
</ul>
<p>
<ins class="diff-chg">Setting
these
is
done
in
an
implementation-defined
way.
It
could
be
done,
for
example,
by
sniffing
the
contents
of
the
file
itself,
through
command-line
options,
or
by
embedding
a
dialect
description
into
a
metadata
file
associated
with
the
tabular
data,
which
would
look
like:
</ins></p>	          <div class="example"><div class="example-title"><span>Example 21</span>: Dialect description</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"delimiter"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"\t"</span><span class="pun">,</span><span class="pln">  </span><span class="str">"skipRows"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln">  </span><span class="str">"skipColumns"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="str">"commentPrefix"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"#"</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
}
</ins></span></pre>
</div>
<p>
<del class="diff-old">The
algorithm
for
</del>
<ins class="diff-chg">With
these
flags
in
operation,
</ins>
parsing
<del class="diff-old">a
document
containing
</del>
<ins class="diff-chg">this
file
results
in
an
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-chg">
annotated
</ins>
tabular
data
<ins class="diff-new">model
</ins></a><ins class="diff-new">
of
a
single
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-new">
table
</ins></a><var><ins class="diff-new">
T
</ins></var><ins class="diff-new">
with
five
columns
and
two
rows
which
</ins>
is
<del class="diff-old">as
follows:
Read
</del>
<ins class="diff-chg">largely
</ins>
the
<del class="diff-old">file
using
</del>
<ins class="diff-chg">same
as
that
created
from
</ins>
the
<del class="diff-old">specified
encoding
</del>
<ins class="diff-chg">original
simple
example
described
in
</ins><a href="#simple-example" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
8.2.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Simple
Example
</ins></span>
</a>.
<del class="diff-old">Find
</del>
<ins class="diff-chg">There
are
three
differences.
</ins></p><p><ins class="diff-chg">
First,
because
</ins>
the
<del class="diff-old">rows.
Each
row
ends
</del>
<ins class="diff-chg">four
skipped
rows
began
</ins>
with
<del class="diff-old">a
line
terminator
,
but
values
that
are
enclosed
within
</del>
the
<del class="diff-old">quote
character
may
contain
</del>
<a class="internalDFN" href="#dfn-comment-prefix">
<ins class="diff-chg">comment
prefix
</ins></a>,
the
<del class="diff-old">line
terminator
without
it
indicating
</del>
<ins class="diff-chg">table
itself
now
has
four
</ins><code><ins class="diff-chg">
rdfs:comment
</ins></code><ins class="diff-chg">
annotations,
with
</ins>
the
<del class="diff-old">end
</del>
<ins class="diff-chg">values:
</ins></p><ol><li><code><ins class="diff-chg">
publisher
City
</ins>
of
<ins class="diff-new">Palo
Alto
</ins></code></li><li><code><ins class="diff-new">
updated
12/31/2010
</ins></code></li><li><code><ins class="diff-new">
name
GID
on_street
species
trim_cycle
inventory_date
</ins></code></li><li><code><ins class="diff-new">
datatype
string
string
string
string
date:M/D/YYYY
</ins></code></li></ol><p><ins class="diff-new">
Second,
because
</ins>
the
<del class="diff-old">row.
The
quote
character
may
be
escaped
using
</del>
<ins class="diff-chg">first
column
has
been
skipped,
</ins>
the
<del class="diff-old">escape
character
</del>
<a class="internalDFN" href="#dfn-column-source-number" title="column source number">
<ins class="diff-chg">source
number
</ins>
</a>
<del class="diff-old">where
it
appears
within
cells.
If
</del>
<ins class="diff-chg">of
each
of
</ins>
the
<del class="diff-old">escape
character
</del>
<ins class="diff-chg">columns
</ins>
is
<del class="diff-old">not
the
same
as
the
quote
character
then
</del>
<ins class="diff-chg">offset
by
one
from
</ins>
the
<del class="diff-old">escape
character
</del>
<a class="internalDFN" href="#dfn-column-number" title="column number">
<ins class="diff-chg">number
</ins>
</a>
<del class="diff-old">is
also
used
to
escape
the
character
that
immediately
follows
it.
Skip
</del>
<ins class="diff-chg">of
each
column:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
titles
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C2.1
</ins></var></td><td><code><ins class="diff-chg">
GID
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var></td><td><code><ins class="diff-chg">
On
Street
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
3
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var></td><td><code><ins class="diff-chg">
Species
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
5
</ins></td><td><var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var></td><td><code><ins class="diff-chg">
Trim
Cycle
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
5
</ins></td><td><ins class="diff-chg">
6
</ins></td><td><var><ins class="diff-chg">
C1.5
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td><td><code><ins class="diff-chg">
Inventory
Date
</ins></code></td></tr></tbody></table><p><ins class="diff-chg">
Finally,
because
four
additional
rows
have
been
skipped,
</ins>
the
<a class="internalDFN" href="#dfn-row-source-number" title="row source number">
<ins class="diff-new">source
</ins>
number
</a>
<ins class="diff-new">of
each
</ins>
of
<ins class="diff-new">the
</ins>
rows
<del class="diff-old">indicated
</del>
<ins class="diff-chg">is
offset
</ins>
by
<ins class="diff-new">five
from
</ins>
the
<del class="diff-old">skip
</del>
<a class="internalDFN" href="#dfn-row-number">
<ins class="diff-chg">row
number
</ins></a><ins class="diff-chg">
(the
four
skipped
</ins>
rows
<ins class="diff-new">plus
the
single
header
row):
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-new">
id
</ins></th><th colspan="4"><ins class="diff-new">
core
annotations
</ins></th></tr><tr><th><ins class="diff-new">
table
</ins></th><th><ins class="diff-new">
number
</ins></th><th><ins class="diff-new">
source
number
</ins></th><th><ins class="diff-new">
cells
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
R1
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
1
</ins></td><td><ins class="diff-new">
6
</ins></td><td><var><ins class="diff-new">
C1.1
</ins></var>,<var><ins class="diff-new">
C1.2
</ins></var>,<var><ins class="diff-new">
C1.3
</ins></var>,<var><ins class="diff-new">
C1.4
</ins></var>,<var><ins class="diff-new">
C1.5
</ins></var></td></tr><tr><td><var><ins class="diff-new">
R2
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
2
</ins></td><td><ins class="diff-new">
7
</ins></td><td><var><ins class="diff-new">
C2.1
</ins></var>,<var><ins class="diff-new">
C2.2
</ins></var>,<var><ins class="diff-new">
C2.3
</ins></var>,<var><ins class="diff-new">
C2.4
</ins></var>,<var><ins class="diff-new">
C2.5
</ins></var></td></tr></tbody></table></section><section property="bibo:hasPart" resource="#recognising-tabular-data-formats" typeof="bibo:Chapter" id="recognising-tabular-data-formats"><h5 resource="#h-recognising-tabular-data-formats" id="h-recognising-tabular-data-formats"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
8.2.3.3
</ins></span><ins class="diff-new">
Recognising
Tabular
Data
Formats
</ins></span></h5><p><ins class="diff-new">
The
conventions
used
in
this
data
(invented
for
the
purpose
of
this
example)
are
in
fact
intended
to
create
an
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-new">
annotated
tabular
data
model
</ins>
</a>
<del class="diff-old">parameter.
These
form
comment
</del>
<ins class="diff-chg">which
includes
named
</ins>
annotations
on
the
<del class="diff-old">table.
If
</del>
<ins class="diff-chg">table
itself,
on
the
columns,
and
on
the
cells.
The
creator
of
these
conventions
could
create
a
specification
for
this
particular
tabular
data
syntax
and
register
a
media
type
for
it.
The
specification
would
include
statements
like:
</ins></p><ul><li><ins class="diff-chg">
A
tab
delimiter
is
always
used.
</ins></li><li><ins class="diff-chg">
The
first
column
is
always
ignored.
</ins></li><li><ins class="diff-chg">
When
the
first
column
of
</ins>
a
<del class="diff-old">skipped
</del>
row
<del class="diff-old">begins
with
</del>
<ins class="diff-chg">has
</ins>
the
<del class="diff-old">comment
prefix
,
strip
that
prefix
from
</del>
<ins class="diff-chg">value
</ins><code><ins class="diff-chg">
"#"
</ins></code>,
the
<del class="diff-old">beginning
</del>
<ins class="diff-chg">second
column
is
the
name
of
an
annotation
on
the
table
and
the
values
</ins>
of
the
<del class="diff-old">row
</del>
<ins class="diff-chg">remaining
columns
are
concatenated
</ins>
to
create
the
<del class="diff-old">content
</del>
<ins class="diff-chg">value
</ins>
of
<del class="diff-old">the
comment
</del>
<ins class="diff-chg">that
</ins>
annotation.
</li>
<li>
<del class="diff-old">Gather
</del>
<ins class="diff-chg">When
</ins>
the
<del class="diff-old">number
</del>
<ins class="diff-chg">first
column
</ins>
of
<del class="diff-old">header
rows
indicated
by
the
header
</del>
<ins class="diff-chg">a
</ins>
row
<del class="diff-old">count
parameter;
</del>
<ins class="diff-chg">has
the
value
</ins><code><ins class="diff-chg">
#name
</ins></code>,
the
remaining
<del class="diff-old">rows
are
data
rows.
</del>
<ins class="diff-chg">cells
in
the
row
provide
a
</ins><code><ins class="diff-chg">
name
</ins></code><ins class="diff-chg">
annotation
for
each
column
in
the
table.
</ins>
</li>
<li>
<del class="diff-old">Split
</del>
<ins class="diff-chg">When
</ins>
the
<del class="diff-old">header
and
data
rows
into
</del>
<ins class="diff-chg">first
column
of
a
row
has
the
value
</ins><code><ins class="diff-chg">
#datatype
</ins></code>,<ins class="diff-chg">
the
remaining
</ins>
cells
<del class="diff-old">using
</del>
<ins class="diff-chg">in
</ins>
the
<del class="diff-old">delimiter
.
Values
that
are
enclosed
within
</del>
<ins class="diff-chg">row
provide
</ins><code><ins class="diff-chg">
datatype
</ins></code><ins class="diff-chg">
/
</ins><code><ins class="diff-chg">
format
</ins></code><ins class="diff-chg">
annotations
for
</ins>
the
<del class="diff-old">quote
character
may
contain
</del>
<ins class="diff-chg">cells
within
</ins>
the
<del class="diff-old">delimiter
.
The
quote
character
may
be
escaped
using
</del>
<ins class="diff-chg">relevant
column,
and
these
are
interpreted
to
create
</ins>
the
<del class="diff-old">escape
character
</del>
<a class="internalDFN" href="#dfn-cell-value" title="cell value">
<ins class="diff-chg">value
</ins>
</a>
<ins class="diff-new">for
each
cell
in
that
column.
</ins></li><li><ins class="diff-new">
The
first
row
</ins>
where
<del class="diff-old">it
appears
within
cells.
If
</del>
the
<del class="diff-old">escape
character
</del>
<ins class="diff-chg">first
column
</ins>
is
<del class="diff-old">not
</del>
<ins class="diff-chg">empty
is
a
row
of
headers;
these
provide
</ins><code><ins class="diff-chg">
title
</ins></code><ins class="diff-chg">
annotations
on
</ins>
the
<del class="diff-old">same
as
</del>
<ins class="diff-chg">columns
in
</ins>
the
<del class="diff-old">quote
character
then
</del>
<ins class="diff-chg">table.
</ins></li><li><ins class="diff-chg">
The
remaining
rows
make
up
</ins>
the
<del class="diff-old">escape
character
is
also
used
to
escape
</del>
<ins class="diff-chg">data
of
</ins>
the
<del class="diff-old">character
</del>
<ins class="diff-chg">table.
</ins></li></ul><p><ins class="diff-chg">
Parsers
</ins>
that
<del class="diff-old">immediately
follows
it.
</del>
<ins class="diff-chg">recognised
the
format
could
then
build
a
more
sophisticated
annotated
tabular
data
model
using
only
the
embedded
information
in
the
</ins><a class="internalDFN" href="#dfn-tabular-data-file"><ins class="diff-chg">
tabular
data
file
</ins></a>.<ins class="diff-chg">
They
would
extract
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-chg">
embedded
metadata
</ins></a><ins class="diff-chg">
looking
like:
</ins>
</p>
            <div class="example"><div class="example-title"><span>Example 22</span>: Embedded metadata in the format of the annotated tabular model</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dc:publisher"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"City of Palo Alto"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dc:updated"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"12/31/2010"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln"> 
        </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
<ins class="diff-new">}
</ins></span></pre></div>
<p>
<del class="diff-old">If
trim
</del>
<ins class="diff-chg">As
before,
the
result
would
be
a
single
</ins><a class="internalDFN" href="#dfn-table"><ins class="diff-chg">
table
</ins>
</a>
<del class="diff-old">is
</del>
<var>
<ins class="diff-chg">T
</ins></var><ins class="diff-chg">
with
five
columns
and
two
rows.
The
table
itself
would
have
two
annotations:
</ins></p><dl><dt>
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">dc:publisher
</ins>
</code>
<del class="diff-old">or
</del>
</dt>
<dd>
<code>
<del class="diff-old">start
then
whitespace
from
the
start
</del>
<ins class="diff-chg">{"@value":
"City
</ins>
of
<del class="diff-old">values
that
are
not
enclosed
must
be
removed
from
the
value.
If
trim
is
</del>
<ins class="diff-chg">Palo
Alto"}
</ins></code></dd><dt>
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">dc:updated
</ins>
</code>
<del class="diff-old">or
</del>
</dt>
<dd>
<code>
<del class="diff-old">end
</del>
<ins class="diff-chg">{"@value":
"12/31/2010"}
</ins>
</code>
<del class="diff-old">then
whitespace
from
</del>
</dd>
</dl>
<p>
<ins class="diff-chg">The
columns
have
</ins>
the
<del class="diff-old">end
of
values
that
are
not
enclosed
must
be
removed
from
</del>
<ins class="diff-chg">annotations
shown
in
</ins>
the
<del class="diff-old">value.
</del>
<ins class="diff-chg">following
table:
</ins>
</p>
<del class="diff-old">In
each
row,
ignore
the
</del>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
<ins class="diff-chg">id
</ins></th><th colspan="6"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th>
number
<del class="diff-old">of
columns
indicated
by
the
skip
columns
parameter.
Always
start
from
</del>
</th>
<th>
<ins class="diff-chg">source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
name
</ins></th><th><ins class="diff-chg">
titles
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C2.1
</ins></var></td><td><code><ins class="diff-chg">
GID
</ins></code></td><td><code><ins class="diff-chg">
GID
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var></td><td><code><ins class="diff-chg">
on_street
</ins></code></td><td><code><ins class="diff-chg">
On
Street
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
3
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var></td><td><code><ins class="diff-chg">
species
</ins></code></td><td><code><ins class="diff-chg">
Species
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
5
</ins></td><td><var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var></td><td><code><ins class="diff-chg">
trim_cycle
</ins></code></td><td><code><ins class="diff-chg">
Trim
Cycle
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
5
</ins></td><td><ins class="diff-chg">
6
</ins></td><td><var><ins class="diff-chg">
C1.5
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td><td><code><ins class="diff-chg">
inventory_date
</ins></code></td><td><code><ins class="diff-chg">
Inventory
Date
</ins></code></td></tr></tbody></table><p><ins class="diff-chg">
The
rows
have
</ins>
the
<del class="diff-old">first
character
</del>
<ins class="diff-chg">annotations
shown
</ins>
in
the
<del class="diff-old">row
when
counting
columns
(see
section
4.4.2
Bidirectionality
</del>
<ins class="diff-chg">following
table,
exactly
as
</ins>
in
<del class="diff-old">CSV+
Files
</del>
<ins class="diff-chg">previous
examples:
</ins></p><table style="width: 100%; text-align: left"><thead><tr>
<del class="diff-old">).
Gather
the
</del>
<th rowspan="2">
<ins class="diff-chg">id
</ins></th><th colspan="4"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
</ins>
number
</th>
<th>
<ins class="diff-new">cells
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-new">
R1
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
1
</ins></td><td><ins class="diff-new">
6
</ins></td><td><var><ins class="diff-new">
C1.1
</ins></var>,<var><ins class="diff-new">
C1.2
</ins></var>,<var><ins class="diff-new">
C1.3
</ins></var>,<var><ins class="diff-new">
C1.4
</ins></var>,<var><ins class="diff-new">
C1.5
</ins></var></td></tr><tr><td><var><ins class="diff-new">
R2
</ins></var></td><td><var><ins class="diff-new">
T
</ins></var></td><td><ins class="diff-new">
2
</ins></td><td><ins class="diff-new">
7
</ins></td><td><var><ins class="diff-new">
C2.1
</ins></var>,<var><ins class="diff-new">
C2.2
</ins></var>,<var><ins class="diff-new">
C2.3
</ins></var>,<var><ins class="diff-new">
C2.4
</ins></var>,<var><ins class="diff-new">
C2.5
</ins></var></td></tr></tbody></table><p><ins class="diff-new">
The
cells
have
the
annotations
shown
in
the
following
table.
Because
</ins>
of
<del class="diff-old">header
columns
indicated
by
</del>
the
<del class="diff-old">header
column
count
parameter.
Always
start
from
</del>
<ins class="diff-chg">way
</ins>
the
<del class="diff-old">first
character
in
</del>
<ins class="diff-chg">particular
tabular
data
format
has
been
specified,
these
include
additional
annotations
but
also,
for
</ins>
the
<del class="diff-old">row
when
counting
columns
(see
section
4.4.2
Bidirectionality
in
CSV+
Files
).
Each
cell
within
a
header
row
that
is
not
in
a
skipped
or
header
</del>
<code>
<ins class="diff-chg">Inventory
Date
</ins></code>
column
<del class="diff-old">is
</del>
<ins class="diff-chg">(cells
</ins><var><ins class="diff-chg">
C1.5
</ins></var><ins class="diff-chg">
and
</ins><var><ins class="diff-chg">
C2.5
</ins></var><ins class="diff-chg">
),
have
</ins>
a
<del class="diff-old">label
annotation
on
</del>
<a class="internalDFN" href="#dfn-cell-value" title="cell value">
<ins class="diff-chg">value
</ins></a>
that
<del class="diff-old">column.
Each
cell
within
a
header
column
</del>
is
<ins class="diff-new">a
parsed
date
rather
than
</ins>
an
<del class="diff-old">annotation
on
the
</del>
<ins class="diff-chg">unparsed
string.
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
column
</ins></th><th>
row
<del class="diff-old">it
appears
in;
if
there
is
</del>
</th>
<th>
<ins class="diff-chg">string
value
</ins></th><th><ins class="diff-chg">
value
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"1"
</ins></code></td><td><code><ins class="diff-chg">
"1"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td><td><code><ins class="diff-chg">
"ADDISON
AV"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td><td><code><ins class="diff-chg">
"Celtis
australis"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C1.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R1
</ins></var></td><td><code><ins class="diff-chg">
"10/18/2010"
</ins></code></td><td><code><ins class="diff-chg">
2010-10-18
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"2"
</ins></code></td><td><code><ins class="diff-chg">
"2"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C2
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"EMERSON
ST"
</ins></code></td><td><code><ins class="diff-chg">
"EMERSON
ST"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td><td><code><ins class="diff-chg">
"Liquidambar
styraciflua"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td><td><code><ins class="diff-chg">
"Large
Tree
Routine
Prune"
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C2.5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
R2
</ins></var></td><td><code><ins class="diff-chg">
"6/2/2010"
</ins></code></td><td><code><ins class="diff-chg">
2010-06-02
</ins></code></td></tr></tbody></table></section></section><section property="bibo:hasPart" resource="#parsing-multiple-header-lines" typeof="bibo:Chapter" id="parsing-multiple-header-lines"><h4 resource="#h-parsing-multiple-header-lines" id="h-parsing-multiple-header-lines"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
8.2.4
</ins></span><ins class="diff-chg">
Parsing
Multiple
Header
Lines
</ins></span></h4><p><ins class="diff-chg">
The
following
example
shows
</ins>
a
<ins class="diff-new">CSV
file
with
multiple
</ins>
header
<del class="diff-old">row
then
that
provides
</del>
<ins class="diff-chg">lines:
</ins></p>          <div class="example"><div class="example-title"><span>Example 23</span>: CSV file with multiple header lines</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="typ">Who</span><span class="pun">,</span><span class="typ">What</span><span class="pun">,,</span><span class="typ">Where</span><span class="pun">,</span><span class="pln"></span><span class="typ">Organisation</span><span class="pun">,</span><span class="typ">Sector</span><span class="pun">,</span><span class="typ">Subsector</span><span class="pun">,</span><span class="typ">Department</span><span class="pun">,</span><span class="typ">Municipality</span><span class="pln"></span><span class="com">#org,#sector,#subsector,#adm1,#adm2</span><span class="pln"><ins class="diff-chg">
UNICEF</span><span class="pun">,</span><span class="typ">Education</span><span class="pun">,</span><span class="typ">Teacher</span><span class="pln"> training</span><span class="pun">,</span><span class="typ">Choc</span><span class="pun">ó,</span><span class="typ">Quidb</span><span class="pun">ó</span><span class="pln">
UNICEF
</ins></span><span class="pun">,</span><span class="typ"><ins class="diff-chg">
Education
</ins></span><span class="pun">,</span><span class="typ"><ins class="diff-chg">
Teacher
</ins></span><span class="pln"><ins class="diff-chg">
training
</ins></span><span class="pun">,</span><span class="typ"><ins class="diff-chg">
Choc
</ins></span><span class="pun"><ins class="diff-chg">
ó,
</ins></span><span class="typ"><ins class="diff-chg">
Bojay
</ins></span><span class="pun"><ins class="diff-chg">
á
</ins></span></pre></div><p><ins class="diff-chg">
Here,
</ins>
the
<del class="diff-old">type
of
</del>
<ins class="diff-chg">first
line
contains
some
grouping
titles
in
</ins>
the
<del class="diff-old">annotation
</del>
<ins class="diff-chg">first
line,
which
are
not
particularly
helpful.
The
lines
following
those
contain
useful
titles
</ins>
for
the
<del class="diff-old">row,
otherwise
it
is
</del>
<ins class="diff-chg">columns.
Thus
the
appropriate
configuration
for
</ins>
a
<del class="diff-old">label
annotation.
If
skip
blank
rows
is
</del>
<ins class="diff-chg">dialect
description
is:
</ins></p>          <div class="example"><div class="example-title"><span>Example 24</span>: Dialect description for multiple header lines</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"skipRows"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">  </span><span class="str">"headerRowCount"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
}
</ins></span></pre></div><p><ins class="diff-chg">
With
this
configuration,
the
table
model
contains
five
columns,
each
of
which
have
two
titles,
summarised
in
the
following
table:
</ins></p><table style="width: 100%; text-align: left"><thead><tr><th rowspan="2"><ins class="diff-chg">
id
</ins></th><th colspan="5"><ins class="diff-chg">
core
annotations
</ins></th></tr><tr><th><ins class="diff-chg">
table
</ins></th><th><ins class="diff-chg">
number
</ins></th><th><ins class="diff-chg">
source
number
</ins></th><th><ins class="diff-chg">
cells
</ins></th><th><ins class="diff-chg">
titles
</ins></th></tr></thead><tbody><tr><td><var><ins class="diff-chg">
C1
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
1
</ins></td><td><ins class="diff-chg">
1
</ins></td><td><var><ins class="diff-chg">
C1.1
</ins></var>,<var><ins class="diff-chg">
C2.1
</ins></var></td><td>
<code>
<del class="diff-old">true
</del>
<ins class="diff-chg">Organisation
</ins></code>,<code><ins class="diff-chg">
#org
</ins>
</code>
<del class="diff-old">then
ignore
any
rows
in
which
all
</del>
</td>
</tr>
<tr>
<td>
<var>
<ins class="diff-chg">C2
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
2
</ins></td><td><ins class="diff-chg">
2
</ins></td><td><var><ins class="diff-chg">
C1.2
</ins></var>,<var><ins class="diff-chg">
C2.2
</ins></var></td><td><code><ins class="diff-chg">
Sector
</ins></code>,<code><ins class="diff-chg">
#sector
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C3
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
3
</ins></td><td><ins class="diff-chg">
3
</ins></td><td><var><ins class="diff-chg">
C1.3
</ins></var>,<var><ins class="diff-chg">
C2.3
</ins></var></td><td><code><ins class="diff-chg">
Subsector
</ins></code>,<code><ins class="diff-chg">
#subsector
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C4
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
4
</ins></td><td><ins class="diff-chg">
4
</ins></td><td><var><ins class="diff-chg">
C1.4
</ins></var>,<var><ins class="diff-chg">
C2.4
</ins></var></td><td><code><ins class="diff-chg">
Department
</ins></code>,<code><ins class="diff-chg">
#adm1
</ins></code></td></tr><tr><td><var><ins class="diff-chg">
C5
</ins></var></td><td><var><ins class="diff-chg">
T
</ins></var></td><td><ins class="diff-chg">
5
</ins></td><td><ins class="diff-chg">
5
</ins></td><td><var><ins class="diff-chg">
C1.5
</ins></var>,<var><ins class="diff-chg">
C2.5
</ins></var></td><td><code><ins class="diff-chg">
Municipality
</ins></code>,<code><ins class="diff-chg">
#adm2
</ins></code></td></tr></tbody></table><p><ins class="diff-chg">
As
metadata,
this
would
look
like:
</ins></p>          <div class="example"><div class="example-title"><span>Example 25</span>: Extracted metadata</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Organisation"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#org"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln">       </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Sector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#sector"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln">       </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Subsector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#subsector"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln">       </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Department"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#adm1"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln">       </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Municipality"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#adm2"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln">     </span><span class="pun">]</span><span class="pln">  </span><span class="pun">}</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
}
</ins></span></pre></div><p><ins class="diff-chg">
A
separate
metadata
file
could
contain
just
</ins>
the
<del class="diff-old">cell
values
are
empty
strings.
</del>
<ins class="diff-chg">second
of
each
of
these
titles,
for
example:
</ins></p>          <div class="example"><div class="example-title"><span>Example 26</span>: Metadata file</div><pre style="" class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"org"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#org" }, </span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"sector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#sector" }, </span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"subsector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#subsector" }, </span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"adm1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#adm1" }, </span><span class="pln">      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"adm2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#adm2" }, </span><span class="pln">    </span><span class="pun">]</span><span class="pln">  </span><span class="pun">}</span><span class="pln"></span><span class="pun"><ins class="diff-chg">
}
</ins></span></pre></div><p><ins class="diff-chg">
This
enables
people
from
multiple
jurisdictions
to
use
the
same
tabular
data
structures
without
having
to
use
exactly
the
same
titles
within
their
documents.
</ins></p>
</section>
</section>
</section>
<section property="bibo:hasPart" resource="#standards" typeof="bibo:Chapter" class="appendix informative" id="standards">
<h2 resource="#h-standards" id="h-standards">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.
</span>
Existing
Standards
</span>
</h2>
<p>
<em>
<ins class="diff-new">This
section
is
non-normative.
</ins></em></p>
<p>
This
appendix
outlines
various
ways
in
which
CSV
is
defined.
</p>
<section property="bibo:hasPart" resource="#rfc" typeof="bibo:Chapter" id="rfc">
<h3 resource="#h-rfc" id="h-rfc">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.1
</span>
RFC
4180
</span>
</h3>
<p>
[
<cite>
<a href="#bib-RFC4180" class="bibref">
RFC4180
</a>
</cite>
]
defines
CSV
with
the
following
ABNF
grammar:
</p>
<del class="diff-old">        file = [header CRLF] record *(CRLF record) [CRLF]
header = name *(COMMA name)
record = field *(COMMA field)
name = field
field = (escaped / non-escaped)
escaped = DQUOTE *(TEXTDATA / COMMA / CR / LF / 2DQUOTE) DQUOTE
non-escaped = *TEXTDATA
COMMA = %x2C
CR = %x0D
DQUOTE =  %x22
LF = %x0A
CRLF = CR LF
TEXTDATA =  %x20-21 / %x23-2B / %x2D-7E
</del>
        <pre>file = [header CRLF] record *(CRLF record) [CRLF]
<ins class="diff-chg">header = name *(COMMA name)
record = field *(COMMA field)
name = field
field = (escaped / non-escaped)
escaped = DQUOTE *(TEXTDATA / COMMA / CR / LF / 2DQUOTE) DQUOTE
non-escaped = *TEXTDATA
COMMA = %x2C
CR = %x0D
DQUOTE =  %x22
LF = %x0A
CRLF = CR LF
TEXTDATA =  %x20-21 / %x23-2B / %x2D-7E
</ins>
</pre>
<p>
Of
particular
note
here
are:
</p>
<ul>
<li>
The
production
for
<code>
TEXTDATA
</code>
indicates
that
only
non-control
ASCII
characters
are
permitted
within
a
CSV
file.
This
restriction
is
routinely
ignored
in
practice,
and
is
impractical
on
the
international
web.
</li>
<li>
Lines
should
be
ended
with
<code>
CRLF
</code>.
This
makes
it
harder
to
produce
CSV
files
on
Unix-based
systems
where
the
usual
line
ending
is
<code>
LF
</code>.
</li>
<li>
The
header
line
is
optional;
a
<code>
header
</code>
parameter
on
the
media
type
indicates
whether
the
header
is
present
or
not.
</li>
<li>
Fields
may
be
escaped
by
wrapping
them
in
double
quotes;
any
double
quotes
within
the
field
must
be
escaped
with
two
double
quotes
(
<code>
""
</code>
).
</li>
</ul>
</section>
<section property="bibo:hasPart" resource="#excel" typeof="bibo:Chapter" id="excel">
<h3 resource="#h-excel" id="h-excel">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.2
</span>
Excel
</span>
</h3>
<p>
Excel
is
a
common
tool
for
both
creating
and
reading
CSV
documents,
and
therefore
the
CSV
that
it
produces
is
a
de
facto
standard.
</p>
<div class="note">
<div id="h-note16" role="heading" aria-level="4" class="note-title">
<span>
Note
</span>
</div>
<p class="">
The
following
describes
the
behaviour
of
Microsoft
Excel
for
Mac
2011
with
an
English
locale.
Further
testing
is
needed
to
see
the
behaviour
of
Excel
in
other
situations.
</p>
</div>
<section property="bibo:hasPart" resource="#saved-csv" typeof="bibo:Chapter" id="saved-csv">
<h4 resource="#h-saved-csv" id="h-saved-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.2.1
</span>
Saved
CSV
</span>
</h4>
<p>
Excel
generates
CSV
files
encoded
using
Windows-1252
with
<code>
LF
</code>
line
endings.
Characters
that
cannot
be
represented
within
Windows-1252
are
replaced
by
underscores.
Only
those
cells
that
need
escaping
(eg
because
they
contain
commas
or
double
quotes)
are
escaped,
and
double
quotes
are
escaped
with
two
double
quotes.
</p>
<p>
Dates
and
numbers
are
formatted
as
displayed,
which
means
that
formatting
can
lead
to
information
being
lost
or
becoming
inconsistent.
</p>
</section>
<section property="bibo:hasPart" resource="#opened-csv" typeof="bibo:Chapter" id="opened-csv">
<h4 resource="#h-opened-csv" id="h-opened-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.2.2
</span>
Opened
CSV
</span>
</h4>
<p>
When
opening
CSV
files,
Excel
interprets
CSV
files
saved
in
UTF-8
as
being
encoded
as
Windows-1252
(whether
or
not
a
<a href="http://en.wikipedia.org/wiki/Byte_order_mark">
<abbr title="Byte Order Mark">
BOM
</abbr>
</a>
is
present).
It
correctly
deals
with
double
quoted
cells,
except
that
it
converts
line
breaks
within
cells
into
spaces.
It
understands
<code>
CRLF
</code>
as
a
line
break.
It
detects
dates
(formatted
as
<code>
YYYY-MM-DD
</code>
)
and
formats
them
in
the
default
date
formatting
for
files.
</p>
</section>
<section property="bibo:hasPart" resource="#imported-csv" typeof="bibo:Chapter" id="imported-csv">
<h4 resource="#h-imported-csv" id="h-imported-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.2.3
</span>
Imported
CSV
</span>
</h4>
<p>
Excel
provides
more
control
when
importing
CSV
files
into
Excel.
However,
it
does
not
properly
understand
UTF-8
(with
or
without
<abbr title="Byte Order Mark">
BOM
</abbr>
).
It
does
however
properly
understand
UTF-16
and
can
read
non-ASCII
characters
from
a
UTF-16-encoded
file.
</p>
<p>
A
particular
quirk
in
the
importing
of
CSV
is
that
if
a
cell
contains
a
line
break,
the
final
double
quote
that
escapes
the
cell
will
be
included
within
it.
</p>
</section>
<section property="bibo:hasPart" resource="#copied-tabular-data" typeof="bibo:Chapter" id="copied-tabular-data">
<h4 resource="#h-copied-tabular-data" id="h-copied-tabular-data">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.2.4
</span>
Copied
Tabular
Data
</span>
</h4>
<p>
When
tabular
data
is
copied
from
Excel,
it
is
copied
in
a
tab-delimited
format,
with
<code>
LF
</code>
line
breaks.
</p>
</section>
</section>
<section property="bibo:hasPart" resource="#google" typeof="bibo:Chapter" id="google">
<h3 resource="#h-google" id="h-google">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.3
</span>
Google
Spreadsheets
</span>
</h3>
<section property="bibo:hasPart" resource="#downloading-csv" typeof="bibo:Chapter" id="downloading-csv">
<h4 resource="#h-downloading-csv" id="h-downloading-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.3.1
</span>
Downloading
CSV
</span>
</h4>
<p>
Downloaded
CSV
files
are
encoded
in
UTF-8,
without
a
<a href="http://en.wikipedia.org/wiki/Byte_order_mark">
<abbr title="Byte Order Mark">
BOM
</abbr>
</a>,
and
with
<code>
LF
</code>
line
endings.
Dates
and
numbers
are
formatted
as
they
appear
within
the
spreadsheet.
</p>
</section>
<section property="bibo:hasPart" resource="#importing-csv" typeof="bibo:Chapter" id="importing-csv">
<h4 resource="#h-importing-csv" id="h-importing-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.3.2
</span>
Importing
CSV
</span>
</h4>
<p>
CSV
files
can
be
imported
as
UTF-8
(with
or
without
<abbr title="Byte Order Mark">
BOM
</abbr>
).
<code>
CRLF
</code>
line
endings
are
correctly
recognised.
Dates
are
reformatted
to
the
default
date
format
on
load.
</p>
</section>
</section>
<section property="bibo:hasPart" resource="#csv-files-in-a-tabular-data-package" typeof="bibo:Chapter" id="csv-files-in-a-tabular-data-package">
<h3 resource="#h-csv-files-in-a-tabular-data-package" id="h-csv-files-in-a-tabular-data-package">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.4
</span>
CSV
Files
in
a
Tabular
Data
Package
</span>
</h3>
<p>
<a href="http://dataprotocols.org/tabular-data-package/#csv-files">
Tabular
Data
Packages
</a>
place
the
following
restrictions
on
CSV
files:
</p>
<blockquote>
<p>
As
a
starting
point,
CSV
files
included
in
a
Tabular
Data
Package
package
must
conform
to
the
RFC
for
CSV
(4180
-
Common
Format
and
MIME
Type
for
Comma-Separated
Values
(CSV)
Files).
In
addition:
</p>
<ul>
<li>
<p>
File
names
<em title="MUST" class="rfc2119">
MUST
</em>
end
with
<code>.csv
</code>.
</p>
</li>
<li>
<p>
Files
<em title="MUST" class="rfc2119">
MUST
</em>
be
encoded
as
<del class="diff-old">UTF-8
</del>
<ins class="diff-chg">UTF-8.
</ins></p>
</li>
<li>
<p>
Files
<em title="MUST" class="rfc2119">
MUST
</em>
have
a
single
header
row.
This
row
<em title="MUST" class="rfc2119">
MUST
</em>
be
the
first
row
in
the
file.
</p>
<ul>
<li>
<p>
Terminology:
each
column
in
the
CSV
file
is
termed
a
<em>
field
</em>
and
its
<code>
name
</code>
is
the
string
in
that
column
in
the
header
row.
</p>
</li>
<li>
<p>
The
<code>
name
</code>
<em title="MUST" class="rfc2119">
MUST
</em>
be
unique
amongst
<del class="diff-old">fields
and
</del>
<ins class="diff-chg">fields,
</ins><em title="MUST" class="rfc2119">
MUST
</em>
contain
at
least
one
<ins class="diff-new">character,
and
</ins><em title="MUST" class="rfc2119"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
conform
to
the
</ins>
character
<del class="diff-old">There
are
no
further
</del>
restrictions
<del class="diff-old">on
the
form
of
</del>
<ins class="diff-chg">defined
for
</ins>
the
<a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#column-name" class="externalDFN">
<code>
name
</code>
<del class="diff-old">but
it
is
RECOMMENDED
that
it
contain
only
alphanumeric
characters
together
with
“
.-_”
</del>
</a>
<ins class="diff-chg">property.
</ins></p>
</li>
</ul>
</li>
<li>
<p>
Rows
in
the
file
<em title="MUST NOT" class="rfc2119">
MUST
NOT
</em>
contain
more
fields
than
are
in
the
header
row
(though
they
may
contain
<del class="diff-old">less)
</del>
<ins class="diff-chg">less).
</ins></p>
</li>
<li>
<p>
Each
file
<em title="MUST" class="rfc2119">
MUST
</em>
have
an
entry
in
the
<code>
<del class="diff-old">resources
</del>
<ins class="diff-chg">tables
</ins>
</code>
array
in
the
<code>
datapackage.json
</code>
<del class="diff-old">file
</del>
<ins class="diff-chg">file.
</ins></p>
</li>
<li>
<p>
The
resource
metadata
<em title="MUST" class="rfc2119">
MUST
</em>
include
a
<code>
<del class="diff-old">schema
</del>
<ins class="diff-chg">tableSchema
</ins>
</code>
attribute
whose
value
<em title="MUST" class="rfc2119">
MUST
</em>
<del class="diff-old">conform
to
the
JSON
Table
Schema
</del>
<ins class="diff-chg">be
a
valid
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-schema-description" class="externalDFN"><ins class="diff-chg">
schema
description
</ins></a>.</p>
</li>
<li>
<p>
All
fields
in
the
CSV
files
<em title="MUST" class="rfc2119">
MUST
</em>
be
described
in
the
<a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-schema-description" class="externalDFN">
schema
<ins class="diff-chg">description
</ins></a>.</p>
</li>
</ul>
<p>
CSV
files
generated
by
different
applications
often
vary
in
their
syntax,
e.g.
use
of
quoting
characters,
delimiters,
etc.
To
encourage
conformance,
CSV
files
in
a
CSV
files
in
a
Tabular
Data
Package
<em title="SHOULD" class="rfc2119">
SHOULD
</em>:
</p>
<ul>
<li>
Use
<del class="diff-old">“,”
</del>
<ins class="diff-chg">","
</ins>
as
field
<del class="diff-old">delimiters
</del>
<ins class="diff-chg">delimiters.
</ins>
</li>
<li>
Use
<del class="diff-old">“rn”
</del>
<code>
<ins class="diff-chg">CRLF
</ins></code><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
U+000D
U+000A
</ins></code><ins class="diff-chg">
)
</ins>
or
<del class="diff-old">“n”
</del>
<code>
<ins class="diff-chg">LF
</ins></code><ins class="diff-chg">
(
</ins><code><ins class="diff-chg">
U+000A
</ins></code><ins class="diff-chg">
)
</ins>
as
line
<del class="diff-old">terminators
</del>
<ins class="diff-chg">terminators.
</ins>
</li>
</ul>
<p>
If
a
CSV
file
does
not
follow
these
rules
then
its
specific
CSV
dialect
<em title="MUST" class="rfc2119">
MUST
</em>
be
documented.
The
resource
hash
for
the
resource
in
the
<code>
datapackage.json
</code>
descriptor
<em title="MUST" class="rfc2119">
MUST
</em>:
</p>
<ul>
<li>
Include
a
<code>
dialect
</code>
key
that
conforms
to
that
described
in
the
<a href="http://dataprotocols.org/csv-dialect/">
CSV
Dialect
Description
Format
</a>.
</li>
</ul>
<p>
Applications
processing
the
CSV
file
<em title="SHOULD" class="rfc2119">
SHOULD
</em>
read
use
the
<code>
dialect
</code>
of
the
CSV
file
to
guide
parsing.
</p>
</blockquote>
</section>
<div class="note">
<div id="h-note17" role="heading" aria-level="3" class="note-title">
<span>
<del class="diff-old">Issue
</del>
<ins class="diff-chg">Note
</ins>
</span>
</div>
<div class="">
<p>
<del class="diff-old">More
details
of
behaviour
of
other
tools
should
go
here.
This
should
include
</del>
<ins class="diff-chg">To
replicate
</ins>
the
<del class="diff-old">most
popular
CSV
parsing/generating
libraries
in
common
programming
languages.
Test
</del>
<ins class="diff-chg">findings
above,
test
</ins>
files
which
include
non-ASCII
characters,
double
<del class="diff-old">quotes
</del>
<ins class="diff-chg">quotes,
</ins>
and
line
breaks
within
cells
are:
</p>
<ul>
<li>
<a href="test-utf8.csv">
test-utf8.csv
</a>
</li>
<li>
<a href="test-utf8-bom.csv">
test-utf8-bom.csv
</a>
</li>
<li>
<a href="test-utf16.csv">
test-utf16.csv
</a>
</li>
<li>
<a href="test-utf16-bom.csv">
test-utf16-bom.csv
</a>
</li>
<li>
<a href="test.xlsx">
test.xslx
</a>
</li>
<li>
<a href="test.xls">
test.xsl
</a>
</li>
</ul>
</div>
</div>
</section>
<section property="bibo:hasPart" resource="#acknowledgements" typeof="bibo:Chapter" id="acknowledgements" class="appendix informative">
<h2 resource="#h-acknowledgements" id="h-acknowledgements">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
B.
</span>
<ins class="diff-new">Acknowledgements
</ins></span></h2><p><em><ins class="diff-new">
This
section
is
non-normative.
</ins></em></p><div><ins class="diff-new">
At
the
time
of
publication,
the
following
individuals
had
participated
in
the
Working
Group,
in
the
order
of
their
first
name:
Adam
Retter,
Alf
Eaton,
Anastasia
Dimou,
Andy
Seaborne,
Axel
Polleres,
Christopher
Gutteridge,
Dan
Brickley,
Davide
Ceolin,
Eric
Stephan,
Erik
Mannens,
Gregg
Kellogg,
Ivan
Herman,
Jeni
Tennison,
Jeremy
Tandy,
Jürgen
Umbrich,
Rufus
Pollock,
Stasinos
Konstantopoulos,
William
Ingram,
and
Yakov
Shafranovich.
</ins></div></section><section property="bibo:hasPart" resource="#changes" typeof="bibo:Chapter" class="appendix" id="changes"><h2 resource="#h-changes" id="h-changes"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
C.
</ins></span><ins class="diff-new">
Changes
since
the
working
draft
of
08
January
2015
</ins></span></h2><p><ins class="diff-new">
The
document
has
undergone
substantial
changes
since
the
last
working
draft.
Below
are
some
of
the
changes
made:
</ins></p><ul><li><ins class="diff-new">
Describe
all
core
annotations
on
a
</ins><a class="internalDFN" href="#dfn-group-of-tables"><ins class="diff-new">
group
of
tables
</ins></a>,<a class="internalDFN" href="#dfn-table" title="table"><ins class="diff-new">
tables
</ins></a>,<a class="internalDFN" href="#dfn-column" title="column"><ins class="diff-new">
columns
</ins></a>,<a class="internalDFN" href="#dfn-row" title="row"><ins class="diff-new">
rows
</ins></a>,<ins class="diff-new">
and
</ins><a class="internalDFN" href="#dfn-datatype" title="datatype"><ins class="diff-new">
datatypes
</ins></a>.</li><li><ins class="diff-new">
Removed
the
</ins><em><ins class="diff-new">
Core
Tabular
Data
Model
</ins></em>,<ins class="diff-new">
as
this
can
be
derived
from
the
</ins><a class="internalDFN" href="#dfn-annotated-tabular-data-model"><ins class="diff-new">
Annotated
Tabular
Data
Model
</ins></a><ins class="diff-new">
with
an
appropriate
</ins><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-new">
dialect
description
</ins></a><a href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/#dfn-dialect-description" class="externalDFN"><ins class="diff-new">
dialect
description
</ins></a>.</li><li><ins class="diff-new">
Describe
the
process
of
</ins><a href="#locating-metadata"><ins class="diff-new">
locating
metadata
</ins></a>,<ins class="diff-new">
using
this
to
create
</ins><a class="internalDFN" href="#dfn-embedded-metadata"><ins class="diff-new">
embedded
metadata
</ins></a>,<a href="#processing-tables"><ins class="diff-new">
processing
</ins></a><a class="internalDFN" href="#dfn-tabular-data-file" title="tabular data file"><ins class="diff-new">
tabular
data
files
</ins></a>,<ins class="diff-new">
and
</ins><a href="#creating-annotated-tables"><ins class="diff-new">
creating
annotated
tables
</ins></a>.</li><li><ins class="diff-new">
Move
details
on
</ins><a href="#datatypes"><ins class="diff-new">
datatypes
</ins></a><ins class="diff-new">
and
</ins><a href="#cells"><ins class="diff-new">
parsing
cells
</ins></a>.<ins class="diff-new">
Datatypes
include
detailed
formats
for
different
datatypes.
</ins></li></ul></section><section property="bibo:hasPart" resource="#references" typeof="bibo:Chapter" id="references" class="appendix"><h2 resource="#h-references" id="h-references"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
D.
</ins></span>
References
</span>
</h2>
<section property="bibo:hasPart" resource="#normative-references" typeof="bibo:Chapter" id="normative-references">
<h3 resource="#h-normative-references" id="h-normative-references">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">B.1
</del>
<ins class="diff-chg">D.1
</ins>
</span>
Normative
references
</span>
</h3>
<dl resource="" class="bibliography">
<dt id="bib-BCP47">
<ins class="diff-chg">[BCP47]
</ins></dt><dd><ins class="diff-chg">
A.
Phillips;
M.
Davis.
</ins><a property="dc:requires" href="http://tools.ietf.org/html/bcp47"><cite><ins class="diff-chg">
Tags
for
Identifying
Languages
</ins></cite></a>.<ins class="diff-chg">
September
2009.
IETF
Best
Current
Practice.
URL:
</ins><a property="dc:requires" href="http://tools.ietf.org/html/bcp47"><ins class="diff-chg">
http://tools.ietf.org/html/bcp47
</ins></a></dd><dt id="bib-BIDI"><ins class="diff-chg">
[BIDI]
</ins></dt><dd><ins class="diff-chg">
Mark
Davis;
Aharon
Lanin;
Andrew
Glass.
</ins><a property="dc:requires" href="http://www.unicode.org/reports/tr9/"><cite><ins class="diff-chg">
Unicode
Bidirectional
Algorithm
</ins></cite></a>.<ins class="diff-chg">
5
June
2014.
Unicode
Standard
Annex
#9.
URL:
</ins><a property="dc:requires" href="http://www.unicode.org/reports/tr9/"><ins class="diff-chg">
http://www.unicode.org/reports/tr9/
</ins></a></dd><dt id="bib-ECMASCRIPT"><ins class="diff-chg">
[ECMASCRIPT]
</ins></dt><dd><ins class="diff-chg">
Allen
Wirfs-Brock.
</ins><a property="dc:requires" href="http://people.mozilla.org/~jorendorff/es6-draft.html"><cite><ins class="diff-chg">
ECMA-262
ECMAScript
Language
Specification,
Edition
6
</ins></cite></a>.<ins class="diff-chg">
Draft.
URL:
</ins><a property="dc:requires" href="http://people.mozilla.org/~jorendorff/es6-draft.html"><ins class="diff-chg">
http://people.mozilla.org/~jorendorff/es6-draft.html
</ins></a></dd><dt id="bib-ISO8601"><ins class="diff-chg">
[ISO8601]
</ins></dt><dd><cite><ins class="diff-chg">
Representation
of
dates
and
times.
</ins></cite><ins class="diff-chg">
International
Organization
for
Standardization.
2004.
ISO
8601:2004.
URL:
</ins><a property="dc:requires" href="http://www.iso.org/iso/catalogue_detail?csnumber=40874"><ins class="diff-chg">
http://www.iso.org/iso/catalogue_detail?csnumber=40874
</ins></a></dd><dt id="bib-JSON-LD"><ins class="diff-chg">
[JSON-LD]
</ins></dt><dd><ins class="diff-chg">
Manu
Sporny;
Gregg
Kellogg;
Markus
Lanthaler.
</ins><a property="dc:requires" href="http://www.w3.org/TR/json-ld/"><cite><ins class="diff-chg">
JSON-LD
1.0
</ins></cite></a>.<ins class="diff-chg">
16
January
2014.
W3C
Recommendation.
URL:
</ins><a property="dc:requires" href="http://www.w3.org/TR/json-ld/"><ins class="diff-chg">
http://www.w3.org/TR/json-ld/
</ins></a></dd><dt id="bib-RFC2119"><ins class="diff-chg">
[RFC2119]
</ins></dt><dd><ins class="diff-chg">
S.
Bradner.
</ins><a property="dc:requires" href="https://tools.ietf.org/html/rfc2119"><cite><ins class="diff-chg">
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</ins></cite></a>.<ins class="diff-chg">
March
1997.
Best
Current
Practice.
URL:
</ins><a property="dc:requires" href="https://tools.ietf.org/html/rfc2119"><ins class="diff-chg">
https://tools.ietf.org/html/rfc2119
</ins></a></dd>
<dt id="bib-RFC4180">
[RFC4180]
</dt>
<dd>
Y.
Shafranovich.
<a property="dc:requires" href="https://tools.ietf.org/html/rfc4180">
<cite>
Common
Format
and
MIME
Type
for
Comma-Separated
Values
(CSV)
Files
</cite>
</a>.
October
2005.
Informational.
URL:
<a property="dc:requires" href="https://tools.ietf.org/html/rfc4180">
https://tools.ietf.org/html/rfc4180
</a>
</dd>
<dt id="bib-UAX35">
<ins class="diff-new">[UAX35]
</ins></dt><dd><ins class="diff-new">
Mark
Davis;
CLDR
committee
members.
</ins><a property="dc:requires" href="http://www.unicode.org/reports/tr35/tr35-31/tr35.html"><cite><ins class="diff-new">
Unicode
Locale
Data
Markup
Language
(LDML)
</ins></cite></a>.<ins class="diff-new">
15
March
2013.
Unicode
Standard
Annex
#35.
URL:
</ins><a property="dc:requires" href="http://www.unicode.org/reports/tr35/tr35-31/tr35.html"><ins class="diff-new">
http://www.unicode.org/reports/tr35/tr35-31/tr35.html
</ins></a></dd>
<dt id="bib-encoding">
[encoding]
</dt>
<dd>
Anne
van
Kesteren;
Joshua
Bell;
Addison
Phillips.
<a property="dc:requires" href="http://www.w3.org/TR/encoding/">
<cite>
Encoding
</cite>
</a>.
16
September
2014.
W3C
Candidate
Recommendation.
URL:
<a property="dc:requires" href="http://www.w3.org/TR/encoding/">
http://www.w3.org/TR/encoding/
</a>
</dd>
<dt id="bib-tabular-metadata">
[tabular-metadata]
</dt>
<dd>
<del class="diff-old">Rufus
Pollock;
</del>
Jeni
<del class="diff-old">Tennison.
</del>
<ins class="diff-chg">Tennison;
Gregg
Kellogg.
</ins><a property="dc:requires" href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/">
<cite>
Metadata
Vocabulary
for
Tabular
Data
</cite>
</a>.
W3C
Working
Draft.
URL:
<del class="diff-old">http://www.w3.org/TR/2015/WD-tabular-metadata-20150108/
</del>
<a property="dc:requires" href="http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/">
<ins class="diff-chg">http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/
</ins></a></dd><dt id="bib-xmlschema11-2"><ins class="diff-chg">
[xmlschema11-2]
</ins></dt><dd><ins class="diff-chg">
David
Peterson;
Sandy
Gao;
Ashok
Malhotra;
Michael
Sperberg-McQueen;
Henry
Thompson;
Paul
V.
Biron
et
al.
</ins><a property="dc:requires" href="http://www.w3.org/TR/xmlschema11-2/"><cite><ins class="diff-chg">
W3C
XML
Schema
Definition
Language
(XSD)
1.1
Part
2:
Datatypes
</ins></cite></a>.<ins class="diff-chg">
5
April
2012.
W3C
Recommendation.
URL:
</ins><a property="dc:requires" href="http://www.w3.org/TR/xmlschema11-2/"><ins class="diff-chg">
http://www.w3.org/TR/xmlschema11-2/
</ins>
</a>
</dd>
</dl>
</section>
<section property="bibo:hasPart" resource="#informative-references" typeof="bibo:Chapter" id="informative-references">
<h3 resource="#h-informative-references" id="h-informative-references">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">B.2
</del>
<ins class="diff-chg">D.2
</ins>
</span>
Informative
references
</span>
</h3>
<dl resource="" class="bibliography">
<dt id="bib-EBNF-NOTATION">
[EBNF-NOTATION]
</dt>
<dd>
Tim
Bray;
Jean
Paoli;
C.
Michael
Sperberg-McQueen;
Eve
Maler;
François
Yergau.
<a property="dc:references" href="http://www.w3.org/TR/xml/#sec-notation">
<cite>
EBNF
Notation
</cite>
</a>.
W3C
Recommendation.
URL:
<del class="diff-old">http://www.w3.org/TR/REC-xml/#sec-notation
</del>
<a property="dc:references" href="http://www.w3.org/TR/xml/#sec-notation">
<ins class="diff-chg">http://www.w3.org/TR/xml/#sec-notation
</ins>
</a>
</dd>
<dt id="bib-RFC7111">
[RFC7111]
</dt>
<dd>
<del class="diff-old">Michael
</del>
<ins class="diff-chg">M.
</ins>
Hausenblas;
<del class="diff-old">Erik
</del>
<ins class="diff-chg">E.
</ins>
Wilde;
<del class="diff-old">Jenni
</del>
<ins class="diff-chg">J.
</ins>
Tennison.
<a property="dc:references" href="https://tools.ietf.org/html/rfc7111">
<cite>
URI
Fragment
Identifiers
for
the
text/csv
Media
Type
</cite>
</a>.
<del class="diff-old">Internet
RFC.
</del>
<ins class="diff-chg">January
2014.
Informational.
</ins>
URL:
<del class="diff-old">http://www.ietf.org/rfc/rfc7111.txt
</del>
<a property="dc:references" href="https://tools.ietf.org/html/rfc7111">
<ins class="diff-chg">https://tools.ietf.org/html/rfc7111
</ins></a></dd><dt id="bib-annotation-model"><ins class="diff-chg">
[annotation-model]
</ins></dt><dd><ins class="diff-chg">
Robert
Sanderson;
Paolo
Ciccarese.
</ins><a property="dc:references" href="http://www.w3.org/TR/annotation-model/"><cite><ins class="diff-chg">
Web
Annotation
Data
Model
</ins></cite></a>.<ins class="diff-chg">
11
December
2014.
W3C
Working
Draft.
URL:
</ins><a property="dc:references" href="http://www.w3.org/TR/annotation-model/"><ins class="diff-chg">
http://www.w3.org/TR/annotation-model/
</ins></a></dd><dt id="bib-csv2json"><ins class="diff-chg">
[csv2json]
</ins></dt><dd><ins class="diff-chg">
Jeremy
Tandy;
Ivan
Herman.
</ins><a property="dc:references" href="http://www.w3.org/TR/2015/WD-csv2json-20150416/"><cite><ins class="diff-chg">
Generating
JSON
from
Tabular
Data
on
the
Web
</ins></cite></a>.<ins class="diff-chg">
W3C
Working
Draft.
URL:
</ins><a property="dc:references" href="http://www.w3.org/TR/2015/WD-csv2json-20150416/"><ins class="diff-chg">
http://www.w3.org/TR/2015/WD-csv2json-20150416/
</ins></a></dd><dt id="bib-csv2rdf"><ins class="diff-chg">
[csv2rdf]
</ins></dt><dd><ins class="diff-chg">
Jeremy
Tandy;
Ivan
Herman;
Gregg
Kellogg.
</ins><a property="dc:references" href="http://www.w3.org/TR/2015/WD-csv2rdf-20150416/"><cite><ins class="diff-chg">
Generating
RDF
from
Tabular
Data
on
the
Web
</ins></cite></a>.<ins class="diff-chg">
W3C
Working
Draft.
URL:
</ins><a property="dc:references" href="http://www.w3.org/TR/2015/WD-csv2rdf-20150416/"><ins class="diff-chg">
http://www.w3.org/TR/2015/WD-csv2rdf-20150416/
</ins>
</a>
</dd>
</dl>
</section>
</section>
</body>
</html>
