<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<!-- 
###############################################################
TO RENDER THIS DOCUMENT IN YOUR BROWSER, USE THIS URL:
http://w3c.github.io/hcls-fhir-rdf/spec/rdf.html
###############################################################
-->
<html>
	<head>
		<title>RDF Representation</title>
		<meta charset="utf-8"/>
		<script src="/Tools/respec/respec-w3c-common.js" async class="remove"></script>
		<script class="remove">
			var respecConfig = {
				edDraftURI: "http://w3c.github.io/hcls-fhir-rdf/spec/rdf.html",
				issueBase: "https://github.com/w3c/hcls-fhir-rdf/issues",
				specStatus: "unofficial",
				shortName:  "fhir-rdf",
				editors: [
					{
						name:       "Anthony Mallia",
						url:        "amallia@edmondsci.com",
						company:    "Edmond Scientific",
						companyURL: "http://edmondsci.com/"
					},
					{
						name:       "Eric Prud'hommeaux",
						url:        "http://www.w3.org/People/Eric/",
						company:    "W3C/MIT",
						companyURL: "http://www.w3.org/"
					}
				],
				wg:           "Semantic Web in Health Care and Life Sciences Interest Group",
				wgURI:        "//www.w3.org/wiki/HCLSIG",
				wgPublicList: "public-semweb-lifesci",
				wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/73865/status",
        otherLinks: [{
          key: "Source code for this document",
          data: [{
              value: "GitHub repository -- see spec/rdf.html",
              href: "https://github.com/w3c/hcls-fhir-rdf"
          }, {
              value: "Issues list",
              href: "https://github.com/w3c/hcls-fhir-rdf/issues"
          }]
          }]
			};
		</script>
		<!-- script src="https://www.w3.org/scripts/jquery/2.1/jquery.min.js"></script--> 
		<style>
      .special { color: red; }
      .inferred { color: green; }
      pre.FHIRXML {
        font-size: 8pt;
        line-height: 100%;
        text-align: left ! important;
        font-family: Consolas;
        writing-mode: lr-tb;
        background-color: #f2f2f2;
        padding-left: 0.0555in;
        padding-right: 0.0555in;
        border-width: 0.018cm;
        border-style: solid;
        border-color: #00000a;
        color: #000000;
        padding-bottom: 0in;
        padding-top: 0in;
      border-top-style: none;    
      border-bottom-style: none; 
      }
      pre.FHIRRDF {
        font-size: 8pt;
        line-height: 100%;
        text-align: left ! important;
        font-family: Consolas;
        writing-mode: lr-tb;
        background-color: #e4fff2;
        padding-left: 0.0555in;
        padding-right: 0.0555in;
        border-width: 0.018cm;
        border-style: solid;
        border-color: #00000a;
        color: #000000;
        padding-bottom: 0in;
        padding-top: 0in;
      border-top-style: none;    
      border-bottom-style: none; 
      }
      pre.FHIRShEx {
        font-size: 8pt;
        line-height: 100%;
        text-align: left ! important;
        font-family: Consolas;
        writing-mode: lr-tb;
        background-color: #fffda0;
        padding-left: 0.0555in;
        padding-right: 0.0555in;
        border-width: 0.018cm;
        border-style: solid;
        border-color: #00000a;
        color: #000000;
        padding-bottom: 0in;
        padding-top: 0in;
      border-top-style: none;    
      border-bottom-style: none; 
      }
      .ul {
        text-decoration: underline;
      }
      span.code {
        background-color: #f2f2f2;
        border-style: solid;
        border-top-style: none;
        border-bottom-style: none;
        border-left-style: .1em;
        border-right-style: thin;
      }
      .Table1 td {
          padding-left: 0.075in;
          padding-right: 0.075in;
          padding-top: 0in;
          padding-bottom: 0in;
          border-style: none;
      }
pre.spec {
    border: 1px solid #dcdcdc;
    font-size: 11px;
    background: #FFFFE0;
    padding: 5px;
    width: 650px;
    white-space: pre-wrap;
}
.spec a.dict { color: purple; }
pre.spec a {
    color: darkgreen;
    text-decoration: none;
    border: 0;
}
pre.spec a:hover, a:focus {
    color: #2a6496;
    text-decoration: underline;
}
.description { color: navy; }
.description a { color: navy; }
pre.spec .description a { color: navy; } /* override pre.spec a */
.Table1 pre.spec {
    border-top-style: none;
    border-bottom-style: none;
    padding-top: 0;
    padding-bottom: 0;
    margin-top: 0;
    margin-bottom: 0;
}
.greyback { background-color: #C0C0C0; }
.scalar { color: #2A00FF; }
img.scaled {
    display: block;
    max-width:90%;
    max-height:90%;
    width: auto;
    height: auto;
}
.todo { color:red; border: thin solid red; }
.todo:before { content: "TODO" }
.contentious { color: red; }

.shared { border-left: solid thick #909; padding-left: .5em; }

      .constant {
        /* font-lock-constant-face */
        color: #008b8b;
      }
      .keyword {
        /* font-lock-keyword-face */
        color: #a020f0;
      }
      .type {
        /* font-lock-type-face */
        color: #228b22;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #a0522d;
      }
.triple { color: green; font-family: fixed; font-size: .9em; }
tr { margin-top: 1ex; }

table {
    line-height: 1;
}
td img { height: 1.5ex; }
		</style>
	</head>
	<body>

		<section id="abstract">
			<p>
        This document defines the RDF representation of FHIR Resources.
        Later versions of this document will include RDF representations of value sets and structure definitions.
        A companion document describes the <a href="ontology">OWL ontology for FHIR/RDF</a>.
			</p>
		</section>

		<section id="sotd"><!-- filled in automagically --></section>

		<section class='introductory'>
		  <h2>Revision History</h2>
			<p>
				The detailed list of changes and their diffs can be found in the <a href="https://github.com/w3c/hcls-fhir-rdf/commits/gh-pages/spec/index.html">Git repository</a>.
			</p>
			<ul>
				<li><b>2016-02-09</b>: Created this page as a copy of the side-by-side document (dbooth)</li>
			</ul>
		</section>

<section class="fhirspec">
<a name="root"> </a>
<h2>Resource Description Framework (RDF) Representation </h2>
<table class="cols"><tr><td id="wg"><a _target="blank" href="[%wg fhir%]">[%wgt fhir%]</a> Work Group</td><td id="fmm"><a href="resource.html#maturity">Maturity Level</a>: 0</td><td id="ballot"><a href="help.html#status">Ballot Status</a>: <a href="history.html#pubs">Draft</a></td></tr></table>

<div style="background-color: #F0B0B0; border:1px solid black; padding: 5px;">
<p>
This page and the RDF forms are particularly prone to change. The page is not 
part of the current ballot, and so at the most it can be a draft page in DSTU 2.
Comments on this and the page content are welcome.
</p>
</div>

<p>
FHIR resources can be represented as an <a href="http://www.w3.org/RDF/">RDF graph</a> serialised in one of a number of RDF syntaxes.
When represented in RDF, the resources are described as instances of classes that are also defined in RDF, and published with this 
specification. This page describes:
</p>
<ul>
 <li><a href="#class">RDF description of the FHIR Resource Class definitions</a></li>
 <li><a href="#profile">RDF representation of Profiles</a></li>
 <li><a href="#instance">RDF description of FHIR resource instances</a></li>
 <li><a href="#api">How to exchange RDF using the RESTful API</a></li>
</ul>
<p>
Note: this page uses turtle for clarify and readability, but there is no requirement or 
expectation that turtle should be used in preference to other syntaxes. Note that production
turtle instances would not be laid out so clearly either.
</p>

<p>
Implementer Note: The FHIR RDF format is defined to assist the process of bridging between operational
data exchange and formal knowledge processing systems. While the RDF form offers a fully
functional representation of FHIR resources, it has very different operational characteristics
from the <a href="json.html">JSON</a> and <a href="xml.html">XML</a>, and would be implemented
for different reasons. Systems focused on operational exchange of data would not generally
use RDF.
</p>

<a name="class"> </a>
<h3>RDF Representation of FHIR</h3>
<p>
The FHIR RDF definitions are defined for the following purposes:
</p>
<ul>
 <li>Providing the class definitions to support RDF based representation of resource instances</li>
 <li>Supporting knowledge based analysis of the FHIR specification itself</li>
 <li>Providing knowledge of use at run-time for converting between FHIR and other content models</li>
 <li>Supporting reasoning across the information/terminology model boundary</li>
</ul>
<p>
The RDF definitions are published as a series of turtle files <a href="rim.ttl">RIM</a> and <a href="fhir.ttl">FHIR</a>.
</p>

<h4>RDF Class Definitions</h4>
<p>
The backbone of the RDF definitions are a formal definition of the FHIR resources as RDF classes. 
Each data type, resource, or element within a resource is defined as rdf:Class with a series of 
rdf:Property items. Each property has a rdfs:range the specifies the value domain for the property. 
In most cases, the conversion from the base resource definitions is straightforward. 
</p>
<p>
Constraints are represented in two ways - as OWL statements, and as SHACL predicates. Implementers
wishing to enforce constraints can use tools from either language, or process the knowledge represented
in these constraints in any other way they see fit.
</p>
<h4>Enumerated Codes</h4>
<p>
FHIR elements that have a <a href="datatypes.html#code">code data type</a> with a 
<a href="terminologies.html#required">Required</a> binding to an extensional 
<a href="valueset.html">ValueSet</a> are bound directly to the concepts defined
in the code system. The RDF defines the value set, an associated code system, and 
an RDF class for the code system. Each code in the code system is defined as a singleton
class where the class elucidates the definition and relationships of the concept, 
and the single instance is used to refer to the concept. 
</p>
<h4>The Ontological RIM</h4>
<p>
THe RDF definitions for the resources and classes are also mapped to an ontological representation of the 
v3 RIM, which is also distributed as part of this specification (<a href="rim.ttl">turtle</a> and <a href="rim.rdf.xml">RDF/XML</a>).
The resources and type definitions refer to both classes and code systems defined as part of the RIM. 
The references to the classes defined in the RIM are generally only of interest from a RIM perspective;
they do not define semantics that are necessary to understand the FHIR resources directly. 
</p>
<p>
The Ontological RIM is a variant of the <a href="http://www.hl7.org/implement/standards/rim.cfm">v3 RIM</a>
optimised for its use as an ontology supporting FHIR and other reasonsing uses. It has the following
variations from the classical <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=186">HL7 v3</a> RIM:
</p>
<ul>
 <li>II.root and CD.codeSystem are changed to xs:anyUri so that they can accomodate RDF concepts as well as pure OIDs and UUIDs</li>
 <li>The structure of the CD data type has been re-organised to support validation logic more effectively</li>
 <li>Only the base structural classes are included (yet?)</li>
 <li>More: mixins? associations? nullFlavor on associations?</li>
</ul>
<h4>Other Mappings</h4>
<p>
In addition to mappings to the Ontological RIM, the RDF contains mappings to other 
sources of knowledge, including LOINC, SNOMED CT, OBO, etc. In these cases, the mappings 
reference concepts that are not defined within the RDF content provided as part of this
specification, and implementers will need to locate them elsewhere.
</p>

<a name="decimal"> </a>
<h3>Decimal Precision</h3>
<p>
todo.
<!-- 
From Tony:
This is what it should be:
 
fhir:string rdf:type owl:Class ;
           
            rdfs:subClassOf fhir:Element ,
                            [ rdf:type owl:Restriction ;
                              owl:onProperty fhir:value ;
                              owl:allValuesFrom [ rdf:type rdfs:Datatype ;
                                                  owl:onDatatype xsd:string ;
                                                  owl:withRestrictions ( [ xsd:minLength 1 ]
                                                                         [ xsd:maxLength 1000000 ]
                                                                       )
                                                ]
                            ] ,
                            [ rdf:type owl:Restriction ;
                              owl:onProperty fhir:value ;
                              owl:maxQualifiedCardinality "1"^^xsd:nonNegativeInteger ;
                              owl:onDataRange xsd:string
                            ] ;
           
            rdfs:comment "A sequence of Unicode characters with a minimum of 1 and max 1000000" .
-->
</p>

<a name="profile"> </a>
<h3>RDF Representation of Profiles</h3>
<p>
todo.
</p>

<a name="instance"> </a>
<h3>RDF Resource Instances</h3>
<p>
A FHIR resource is represented by a series of RDF triples, starting 
with the fixed identifier ":resource". For readability, this page presents
instances using turtle, but production instances can use any valid RDF syntax.
</p>
<pre class="rdf">
@prefix fhir: &lt;http://hl7.org/fhir/&gt; .
@prefix flag: &lt;http://hl7.org/fhir/Flag.&gt; .

:resource a fhir:Flag;...
</pre>
<p>
The ":resource" object has a type predicate ("a") that indicates what kind of resource it is. 
In addition, the object will have a series of predicates for the properties 
defined in the RDF class definitions:
</p>
<pre class="rdf">
:resource a fhir:Flag;
  flag:id "example";
  flag:text [...];
  flag:category [...];
  flag:status fhir:flag-status\#active.
</pre>
<p>
Enumerated fields are represented using an anonymous concept that has an rdf:type which 
is the concept as defined in the RDF code system definitions.
</p>
<p>
Property names are defined by class, and follow into the data types:
</p>
<pre class="rdf">
  flag:category [
    fhir:CodeableConcept.coding [
	  fhir:Coding.system &lt;http://example.org/local&gt;;
	  fhir:Coding.code "admin";
	  fhir:Coding.display "Admin";
	];
	fhir:CodeableConcept.text "admin"
  ];
</pre>
<p>
The <a href="datatypes.html">primitive types</a> are represented using the 
same W3C schema based types as in the XML and JSON formats. Since the types 
are defined in advance, there is not usually a need to specify the type 
explicitly unless the RDF syntax requires this (e.g. in turtle, it would 
not be specified).
</p>
<p>
There are several special issues for the RDF based representation:
</p>
<h4>Missing elements</h4>
<p>
There are a number of elements in the FHIR resources and data types
that have an explicit meaning or a default value when they are missing. 
Default values are represented explicitly in the RDF representation; 
they are not not omitted. For example, Patient.active has a default value of 
"false", and is defined like this:
</p>
<pre>
fhir:Patient.active a rdf:Property;
  os:occurs os:Zero-or-one;
  rdfs:range fhir:boolean;
  fhir:default [
     a fhir:boolean;
     fhir:value [ fhir:Boolean.value "true"]
  ].
</pre>
<p>
Since it has a default value, it can never be omitted from an instance:
</p>
<pre>
:resource a fhir:Patient;
  fhir:Patient.active [ fhir:Boolean.value "true"],
  ...etc
</pre>
<p>
Some elements do not have a default value, but they do have a meaning 
when there is no element present. As an example, 
if <a href="patient-definitions.html#Patient.animal">Patient.animal</a> is not present, 
the patient is a human. In RDF (OWL particularly), reasoners cannot 
infer meaning from missing elements, so the element must always be present,
but may have a value of http://hl7.org/fhir/nil (in RDF, fhir:nil).
</p>
<p>
Here's a patient resource with an animal property:
</p>
<pre class="rdf">
:resource a fhir:Patient;
  pat:animal [ ... ]
</pre>
<p>
If the patient is human then the representation will be:
</p>
<pre class="rdf">
:resource a fhir:Patient;
  pat:animal fhir:nil;
</pre>
<p>
Note: fhir:nil may be used for any property that has no value in a JSON or XML 
instance, but when the element has a 'meaning when missing', there SHALL be either
an explicit value or else fhir:nil in the instance.
</p>
<h4>Order</h4>
<p>
FHIR elements with cardinality > 1 are inherently ordered (though the meaning of the 
order may not be known, or the order may have no real significance). This order 
must be maintained when round-tripping FHIR instances. 
</p>
<p>
TODO: it is not yet resolved how this will be done.
</p>
<h4>Contained Resources</h4>
<p>
Contained resources are represented like this:
</p>
<pre>
:resource a fhir:Observation;
  fhir:contained :resource\#23;
  fhir:Observation.subject [
     fhir:Reference.reference [ fhir:string.value :resource\#23]
  ].

:resource\#23 a fhir:Patient;
  fhir:Patient.name [
    fhir:text [ fhir:string.value "John Smith"]
  ].
</pre>
<p>
In order to make it easy to serialise multiple resources, the id within 
the resource is scoped by the URL of the resource that contains it.
</p>

<h4>Extensions</h4>
<p>
In RDF, extensions are represented in two parts. The first 
part is a definition of the resource, and the second part is
the extension value. Extensions are split like this in RDF 
to take advantage of RDF and to make reasoning easier.
</p>
<p>
The first part is the definition. This conveys whether the 
extension is a modifier, and what type it has:
</p>
<pre class="rdf">
@prefix ex: &lt;http://hl7.org/fhir/StructureDefinition/&gt; .

ex:birthplace a fhir:ExtensionDefinition;
   rdfs:range fhir:Address;
   fhir:flag fhir:isModifier.
</pre>
<p>
This definition SHALL be present in any instance of an RDF
graph where an extension is used. If the extension is a 
modifier, it SHALL be labelled as such. Additional 
information from the extension definition MAY be provided,
but this is not required, and often is not possible (the 
minimum mandatory content is also represented in XML and
JSON). 
</p>
<p>
The value of an extension is represented as a predicate:
</p>
<pre class="rdf">
:resource a fhir:Patient;
  ex:birthPlace [ .. properties of address ... ];
</pre>
<p>
The value of the property is the value of the extension, 
or a complex object with further extensions. 
</p>
<h4>Concept References</h4>
<p>
The data type <a href="datatypes.html#Coding">Coding</a> and its 
container <a href="datatypes.html#CodeableConcept">CodeableConcept</a> 
represent references from a resource to a separate knowledge container. 
The definitions of the Coding data type are constained by operational 
considerations around incomplete knowledge, longitudinal version issues, 
use across multiple contexts, etc., so a mapping process is required to 
match the information that constitutes the Coding reference to the target
RDF concept on which reasoning will be based. 
</p>
<p>
For instance, a reference to a LOINC code in a JSON resource 
instance takes this form: 
</p>
<pre class="json">
{
  "resourceType" : "Observation",
  "code" : {
    "coding" : {
      "system" :  [ fhir:uri.value "http://loinc.org"],
      "code" : [ fhir:code.value "54411-4"],
      "display" : [ fhir:string.value "Rh immune globulin given Qualitative"]
   	},
    "text" : "Rh immune globulin"
  }
}
</pre>
<p>
As an example, in the local LOINC RDF representation, the URI for that LOINC
code is http://loinc.org/owl/54411-4. (Note that for many terminologies, including LOINC,
there is no standard RDF representation and multiple forms with different addressing 
schemes are available. Where standard representations exist, implementers 
SHOULD use the same addressing scheme.) 
</p>
<p>
There is no algorithmic conversion between the system/code and the equivalent 
RDF concept; instead, a mapping table or process of some kind must be maintained. These 
mapping tables have variable complexity. In the worst case - codes that have
the form of an expression - considerable syntactic and semantic logic is 
required to perform the mapping. For this reason, the reconciliation process
is often performed as a preprocessing step prior to using the RDF for reasoning. 
Once the reconciliation process is complete, the resolved concepts are stated as 
rdf:type assertions on the concept:
</p>
<pre class="rdf">
@prefix loinc: &lt;http://loinc.org/owl#&gt; .

:resource a fhir:Observation;
  fhir:Observation.code [
    a loinc:54411-4;
    fhir:CodeableConcept.coding [
      fhir:Coding.system [ fhir:uri.value &lt;http://loinc.org&gt;] ;
      fhir:Coding.code [ fhir:code.value "54411-4" ];
      fhir:Coding.display [ fhir:string.value "Rh immune globulin given Qualitative"];
      ];
    fhir:CodeableConcept.text [ fhir:string.value "Rh immune globulin" ];
  ].
</pre>
<p>
Typically, these type assertions are only used in the RDF form, but they 
can be carried as a normal FHIR extension in both the XML and JSON forms:
</p>
<pre class="rdf">
{
  "resourceType" : "Observation",
  "code" : {
    "extension" : {
      "url" : "http://hl7.org/fhir/StructureDefinition/rdftype",
      "valueUri" : "http://loinc.org/owl/54411-4"
    },
    "coding" : {
      "system" : "http://loinc.org",
      "code" : "54411-4",
      "display" : "Rh immune globulin given Qualitative"
   	},
    "text" : "Rh immune globulin"
  }
}
</pre>
<p>
Implementers should note that these type assertions often reference 
local ontologies, and the correct URI may be scope dependent or 
may vary on a different lifecycle due to the coding information itself, 
and so it is usually not appropriate to persist these references.
</p>
<p>
These type assertions may be made against either CodeableConcept or
Coding data types; when the FHIR resource property has a type 
of CodeableConcept they should be made at this level rather than
on the Coding.
</p>
<h4>Resource References</h4>
<p>
The <a href="references.html#Reference">Reference</a> data type 
represents a reference from one resource to another. The reference 
may be a relative URL, and resolution is subject to local 
rules and context (e.g. server API [base], or context in a bundle). 
For the same reasons as with Concept References, this can be reconciled
with the actual concrete resource instance in the RDF. As an example, 
a reference to a resource would be represented like this in JSON:
</p>
<pre class="json">
{
  "resourceType" : "Observation",
  "subject" : {
    "reference" : "Patient/example"
  }
}
</pre>
<p>
In RDF, this is represented as an anonymous instance of the data type reference:
</p>
<pre class="rdf">
:resource a fhir:Observation;
  fhir:Observation.subject [
    fhir:Reference.reference [ fhir:string.value "Patient/example" ];
  	a pat:example
  ].
</pre>
<p>
If this has been resolved to a specific instance, then the 
subject is directly assigned to the instance:
</p>
<pre class="rdf">
:resource a fhir:Observation;
  fhir:Observation.subject :patient-example.
  
:patient-example fhir:Reference.reference [ fhir:string.value "Patient/example" ];
</pre>
<p>
The details of the reference are added to the target resource. 
<i>TODO: this means that traceability of the reference is lost, and it's not round-trippable
if the reconciliation includes resources that have more than one literal value to reference in the 
target resource</i>
</p>

<pre class="rdf">
@prefix pat: &lt;http://acme.com/services/fhir/Patient/#&gt; 

:resource a fhir:Observation;
  fhir:Observation.subject [
    fhir:Reference.reference [ fhir:string.value "Patient/example" ];
  	a pat:example
  ].
</pre>

<h4>Other Stuff</h4>
<p>
Todo: implement a template for RDF? (turtle? RDF XML - yuck)
Todo: note that there's no canonical form for RDF, nor any defined support for signatures. 
</p>
<a name="api"> </a>
<h3>Using RDF with the REST API</h3>
<p>
When using RDF on the REST API, the following media types apply:
</p>
<ul>
 <li>text/turtle - RDF as Turtle</li>
 <li>application/rdf+xml - RDF in XML format</li>
 <li>text/n3 - N3 format</li>
</ul>
<p>
Implementations are encouraged to support this list. However servers are not required to support all these, 
and may support additional syntaxes.
</p>

</section>

<section id="DefaultMapping">
      <h2>Default Mapping</h2>
      <p>
        FHIR Logical Models define the content model of FHIR Resources.
        Most of FHIR/RDF is defined by interpreting Logical Models as constraints on RDF graphs.
        Logical Models include a sequence of attribute definitions or choice between attributes.
        Attribute definitions include a name  name and a set of permissible values, which are defined by one of:
      </p>
      <ul>
        <li>datatype.</li>
        <li>Reference to a Resource or a choice of Resources.</li>
        <li>structure consisting of a nested sequence of attribute definitions or choice between attributes.</li>
      </ul>
            <table class="logical"><tbody><tr><th class="hierarchy"><a href="http://hl7-fhir.github.io/formats.html#table" title="The logical name of the element">Name</a></th><th class="hierarchy"><a href="http://hl7-fhir.github.io/formats.html#table" title="Reference to the type of the element">Type</a></th><th class="hierarchy">ₙ</th></tr><tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/icon_resource.png" alt="✉" title="Resource" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation" title="Observation : Measurements and simple assertions made about a patient, device or other subject.">Observation</a><a id="Observation"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/domainresource.html">DomainResource</a></td><td class="hierarchy"></td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation.identifier" title="Observation.identifier : A unique identifier for the simple observation instance.">identifier</a><a id="Observation.identifier"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/datatypes.html#Identifier">Identifier</a></td><td class="hierarchy">*</td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_primitive.png" alt="▭" title="Primitive Data Type" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation.status" title="Observation.status : The status of the result value.">status</a><a id="Observation.status"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/datatypes.html#code">code</a></td><td class="hierarchy">1</td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation.code" title="Observation.code : Describes what was observed. Sometimes this is called the observation &quot;name&quot;.">code</a><a id="Observation.code"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/datatypes.html#CodeableConcept">CodeableConcept</a></td><td class="hierarchy">1</td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_reference.png" alt="☞" title="Reference to another Resource" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation.subject" title="Observation.subject : The patient, or group of patients, location, or device whose characteristics (direct or indirect) are described by the observation and into whose record the observation is placed.  Comments: Indirect characteristics may be those of a specimen, fetus, donor,  other observer (for example a relative or EMT), or any observation made about the subject.">subject</a><a id="Observation.subject"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/references.html">Reference</a>(<a href="http://hl7-fhir.github.io/patient.html" class="Patient">Patient</a> | <a href="http://hl7-fhir.github.io/group.html">Group</a> | <a href="http://hl7-fhir.github.io/device.html">Device</a> | <a href="http://hl7-fhir.github.io/location.html">Location</a>)</td><td class="hierarchy">?</td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_choice.gif" alt="?" title="Choice of Types" class="hierarchy"/> <a href="http://hl7-fhir.github.io/observation-definitions.html#Observation.effective_x_" title="Observation.effective[x] : The time or time-period the observed value is asserted as being true. For biological subjects - e.g. human patients - this is usually called the &quot;physiologically relevant time&quot;. This is usually either the time of the procedure or of specimen collection, but very often the source of the date/time is not known, only the date/time itself.">effective[x]</a><a id="Observation.effective_x_"> </a></td><td class="hierarchy"></td><td class="hierarchy">?</td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vline.png" alt="│" class="hierarchy"/><img src="/fhir-images/tbl_vjoin.png" alt="├" class="hierarchy"/><img src="/fhir-images/icon_primitive.png" alt="▭" title="Primitive Data Type" class="hierarchy"/> <span title="A date, date-time or partial date (e.g. just year or year + month).  If hours and minutes are specified, a time zone SHALL be populated. The format is a union of the schema types gYear, gYearMonth, date and dateTime. Seconds must be provided due to schema type constraints but may be zero-filled and may be ignored.                 Dates SHALL be valid dates.">effectiveDateTime</span><a id="Observation.effectiveDateTime"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/datatypes.html#dateTime">dateTime</a></td><td class="hierarchy"></td></tr>
<tr><td class="hierarchy"><img src="/fhir-images/tbl_spacer.png" alt="" class="hierarchy"/><img src="/fhir-images/tbl_vline.png" alt="│" class="hierarchy"/><img src="/fhir-images/tbl_vjoin_end.png" alt="└" class="hierarchy"/><img src="/fhir-images/icon_datatype.gif" alt="⧆" title="Data Type" class="hierarchy"/> <span title="A time period defined by a start and end date and optionally time.">effectivePeriod</span><a id="Observation.effectivePeriod"> </a></td><td class="hierarchy"><a href="http://hl7-fhir.github.io/datatypes.html#Period">Period</a></td><td class="hierarchy"></td></tr>
</tbody>
            </table>
<pre>
Turtle Template

[ a fhir:Observation; fhir:nodeRole fhir:treeRoot;
  # from Resource: id; meta; implicitRules; and language
  # from DomainResource: text; contained; extension; and modifierExtension
  fhir:Obervation.identifier [ <a href="">Identifier</a> ]; # 0..* Unique Id for this particular observation
  fhir:Obervation.status [ fhir:value "&lt;code&gt;" ]; # R!  registered | preliminary | final | amended +
  fhir:Obervation.code [ <a href="">CodeableConcept</a> ]; # 1..1 R!  Type of observation (code / type)
  fhir:Obervation.subject [ fhir:reference [ <a href="">Patient</a>|<a href="">Group</a>|<a href="">Device</a>|<a href="">Location</a> ] ]; # 0..1 Who and/or what this is about
  fhir:Obervation.encounter [ fhir:reference [ <a href="">Encounter</a> ] ]; # 0..1 Healthcare event during which this observation is made
  # effective[x]: 0..1 Clinically relevant time/time-period for observation. One of these 2:
    fhir:Obervation.effectiveDateTime [ fhir:value "&lt;dateTime&gt;" ];
    fhir:Obervation.effectivePeriod [ <a href="">Period</a> ];
]
</pre>
      <section id="ResourceRoot">
        <h2>Resource Root</h2>
        <p>
          Each <code>FHIR Resource</code> is represented by an RDF node called the <code>resource root</code>.
          A function <code>add(subject, predicate object)</code> defines triples to compose an RDF graph.
          A <code>current node</code> identifies the current subject corresponding to attributes in the hierarchy of the <code>Structure Definition</code>.
          The <code>current node</code> is initially the <code>resource root</code>.
          For a FHIR Resource of type R, we begin by adding a type triple and a root flag to the <code>current node</code>.
        </p>
        <ul class="add">
          <li>add(<code>current node</code>, rdf:type, fhir:R) <span class="ex">_:node1234 rdf:type fhir:Observation</span></li>
          <li>add(<code>current node</code>, fhir:structuralRole, fhir:ResourceRoot) <span class="ex">_:node1234 fhir:structuralRole fhir:ResourceRoot</span></li>
        </ul>
        <p class="issue">
          Is the <code>resource root</code> ever a named node? If so, is it the HTTP name of the entity?
        </p>
		  </section>
		  <section id="PropertyLabel">
        <h2>Property Label</h2>
        <p>
          Each attribute in the structure definition identifies an RDF predicate composed of the property name.
        </p>
		  </section>
      <section id="DefaultTypeMapping">
          <section id="NestedElements">
          	<h2>Nested Elements</h2>
          <p class="shared">
            An XML tag is unique within the namespace that it is declared in.
            FHIR does not use global declarations.
            The XML tag is mapped to an Object Property where the name is prefixed with the Class name in which it was declared.
            A tag “bar” declared in a complex type “Foo” would become an Object Property “Foo.bar”.
            This is aligned with the structural definition mechanism in FHIR.
          </p>
		    </section>
		    <section>
          <h2>Datatypes</h2>
          <p class="shared">
            In RDF the value attribute of a datatype is a Data Property named “value” with undefined range.
            Each FHIR data type has a restriction on the range of the Data Property (see section on Datatypes).
          </p>
		    </section>
		  </section>
		</section>

    <section id="moveme">
      <h2>stuff to move elsewhere</h2>
      <pre>
Turtle Template

[ a fhir:Observation; fhir:nodeRole fhir:treeRoot;
  # from Resource: id; meta; implicitRules; and language
  # from DomainResource: text; contained; extension; and modifierExtension
  fhir:Obervation.identifier [ <a href="">Identifier</a> ]; # 0..* Unique Id for this particular observation
  fhir:Obervation.status [ fhir:value "&lt;code&gt;" ]; # R!  registered | preliminary | final | amended +
  fhir:Obervation.category [ <a href="">CodeableConcept</a> ]; # 0..1 Classification of  type of observation
  fhir:Obervation.code [ <a href="">CodeableConcept</a> ]; # 1..1 R!  Type of observation (code / type)
  fhir:Obervation.subject [ fhir:reference [ <a href="">Patient</a>|<a href="">Group</a>|<a href="">Device</a>|<a href="">Location</a> ] ]; # 0..1 Who and/or what this is about
  fhir:Obervation.encounter [ fhir:reference [ <a href="">Encounter</a> ] ]; # 0..1 Healthcare event during which this observation is made
  # effective[x]: 0..1 Clinically relevant time/time-period for observation. One of these 2:
    fhir:Obervation.effectiveDateTime [ fhir:value "&lt;dateTime&gt;" ];
    fhir:Obervation.effectivePeriod [ <a href="">Period</a> ];
  fhir:Obervation.issued [ fhir:value "&lt;instant&gt;" ]; # 0..1 Date/Time this was made available
  fhir:Obervation.performer [ fhir:reference [ <a href="">Practitioner</a>|<a href="">Organization</a>|<a href="">Patient</a>|<a href="">RelatedPerson</a> ] ]; # 0..* Reference Who is responsible for the observation
  # value[x]: 0..1 Actual result. One of these 10:
    fhir:Obervation.valueQuantity [ <a href="">Quantity</a> ];
    fhir:Obervation.valueCodeableConcept [ <a href="">CodeableConcept</a> ];
    fhir:Obervation.valueString [ fhir:value "&lt;string&gt;" ];
    fhir:Obervation.valueRange [ <a href="">Range</a> ];
    fhir:Obervation.valueRatio [ <a href="">Ratio</a> ];
    fhir:Obervation.valueSampledData [ <a href="">SampledData</a> ];
    fhir:Obervation.valueAttachment [ <a href="">Attachment</a> ];
    fhir:Obervation.valueTime [ fhir:value "&lt;time&gt;" ];
    fhir:Obervation.valueDateTime [ fhir:value "&lt;dateTime&gt;" ];
    fhir:Obervation.valuePeriod [ <a href="">Period</a> ];
  fhir:Obervation.dataAbsentReason [ <a href="">CodeableConcept</a> ]; # 0..1 C? Why the result is missing
  fhir:Obervation.interpretation [ <a href="">CodeableConcept</a> ]; # 0..1 High; low; normal; etc.
  fhir:Obervation.comment [ fhir:value "&lt;string&gt;" ]; # 0..1 Comments about result
  fhir:Obervation.bodySite [ <a href="">CodeableConcept</a> ]; # 0..1 Observed body part
  fhir:Obervation.method [ <a href="">CodeableConcept</a> ]; # 0..1 How it was done
  fhir:Obervation.specimen [ fhir:reference [ <a href="">Specimen</a> ] ]; # 0..1 Specimen used for this observation
  fhir:Obervation.device [ fhir:reference [ <a href="">Device</a>|<a href="">DeviceMetric</a> ] ]; # 0..1 (Measurement) Device
  fhir:Obervation.referenceRange [ # 0..* Provides Provides guide for interpretation
    fhir:Obervation.referenceRange.low  [ fhir:reference [ <a href="">SimpleQuantity</a> ] ]; # 0..1 C? Low Range; if relevant
    fhir:Obervation.referenceRange.high [ fhir:reference [ <a href="">SimpleQuantity</a> ] ]; # 0..1 C? High Range; if relevant
    fhir:Obervation.referenceRange.meaning [ <a href="">CodeableConcept</a> ]; # 0..1 Indicates the meaning/use of this range of this range
    fhir:Obervation.referenceRange.age [ <a href="">Range</a> ]; # 0..1 Applicable age range; if relevant
    fhir:Obervation.referenceRange.text [ fhir:value "&lt;string&gt;" ] # 0..1 Text based reference range in an observation
  ];
  fhir:Obervation.related [ # 0..* Resource Resource related to this observation
    fhir:Obervation.related.type [ fhir:value "&lt;code&gt;" ]; # 0..1 has-member | derived-from | sequel-to | replaces | qualified-by | interfered-by
    fhir:Obervation.related.target [ fhir:reference [ <a href="">Observation</a>|<a href="">QuestionnaireResponse</a> ] ] # 1..1 R!  Resource that is related to this one
  ];
  fhir:Obervation.component [ # 0..* Component Component results
    fhir:Obervation.component.code [ <a href="">CodeableConcept</a> ]; # 1..1 C? R!  Type of component observation (code / type)
    # value[x]: 0..1 Actual component result. One of these 10:
    fhir:Obervation.related.valueQuantity [ <a href="">Quantity</a> ];
    fhir:Obervation.related.valueCodeableConcept [ <a href="">CodeableConcept</a> ];
    fhir:Obervation.related.valueString [ fhir:value "&lt;string&gt;" ];
    fhir:Obervation.related.valueRange [ <a href="">Range</a> ];
    fhir:Obervation.related.valueRatio [ <a href="">Ratio</a> ];
    fhir:Obervation.related.valueSampledData [ <a href="">SampledData</a> ];
    fhir:Obervation.related.valueAttachment [ <a href="">Attachment</a> ];
    fhir:Obervation.related.valueTime [ fhir:value "&lt;time&gt;" ];
    fhir:Obervation.related.valueDateTime [ fhir:value "&lt;dateTime&gt;" ];
    fhir:Obervation.related.valuePeriod [ <a href="">Period</a> ];
    fhir:Obervation.related.dataAbsentReason [ <a href="">CodeableConcept</a> ]; # C? Why the component result is missing
    fhir:Obervation.related.referenceRange [ Content as for Observation.referenceRange ] # 0..* Content Provides guide for interpretation of component result
  ]
]
      </pre>
    </section>
  </body>
</html>
