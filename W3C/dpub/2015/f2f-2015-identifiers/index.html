<!DOCTYPE html>
<html prefix="talk: http://w3c.github.io/dpub/idpf-digital-book-2015/index.html ore: http://www.openarchives.org/ore/terms/" lang="en">
  <head about="talk:">
    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <title property="dc:title">Identifiers in PWP</title>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="ore:describes" resource="talk:#talk">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=792, user-scalable=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <link rel="stylesheet" href="shower/themes/w3c/styles/style.css">
    <!-- These styles should be adapted to the details on where and what ribbon should be used, and how large the copyright is -->
    <style type="text/css">
      .slide:after {
        padding: 60px 0 0 !important;
        height: 150px ;
        background: url(figures/W3C_ribbon.png) no-repeat ;
      }
      .titlepage p.copyright {
        left: 10em;
      }
    </style>
  </head>

  <body class="list" about="talk:#talk" prefix="bibo: http://purl.org/ontology/bibo/ event: http://purl.org/NET/c4dm/event.owl#" typeof="cc:Work bibo:Slideshow">

    <header class="caption">
      <h1 property="dc:title" rel="dc:subject" resource="http://id.loc.gov/authorities/subjects/sh85042368#concept">Identifiers in PWP</h1>
      <h2>
        <span rel="bibo:authorList" inlist="">
          <span resource="http://www.ivan-herman.net/foaf#me" typeof="foaf:Person"> <span property="foaf:name">Ivan Herman</span>, <span property="rdfs:seeAlso" resource="http://orcid.org/0000-0003-0782-2704">W3C</span></span>
        </span>
      </h2>
      <h3 rel="bibo:presentedAt">
      DPUB IG F2F meeting, Sapporo, Japan
      </h3>
      <h3 property="dc:date">2015-10-30</h3>
      <p class="copyright">
        <a href="http://creativecommons.org/licenses/by-nd/3.0/"><img class="plain" alt="Creative Commons License" src="figures/80x15.png"></a>&nbsp;
        This work is licensed under a <a rel="cc:license" href="http://creativecommons.org/licenses/by-nd/3.0/">Creative Commons Attribution 3.0 License</a>,
        with attribution to <a rel="cc:attributionURL" href="http://www.w3.org" property="cc:attributionName">W3C</a></p>
      <p class="copyright">Copyright <sup>©</sup>2015 W3C<sup>®</sup> (MIT, ERCIM, Keio, Beihang)</p>
    </header>


    <section class="slide titlepage"><div>
      <h2>Identifiers in PWP</h2>
      <h3>DPUB IG F2F discussion, Sapporo, Japan</h3>
      <h3>Ivan Herman, W3C </h3>
      <h4>2015-10-30</h4>

      <p class="copyright">This work is licensed under a <a target="_blank" href="http://creativecommons.org/licenses/by-nd/3.0/">Creative Commons Attribution 3.0 License</a>, with attribution to <a target="_blank" href="http://www.w3.org">W3C</a>.<br />
        Copyright <sup>©</sup>2015&nbsp;W3C<sup>®</sup> (MIT, ERCIM, Keio, Beihang)</p>
    </div></section>

    <!-- ========================================================================= -->
 
    <section class="slide"><div>
      <p class="notitle">Slides are at <a href="http://w3c.github.io/dpub/f2f-2015-identifiers/"><code>http://w3c.github.io/dpub/f2f-2015-identifiers/</code></a>
    </div></section>

    <section class="slide shout cover"><div id="major">
      <img src="covers/recap.jpg">
      <h3>Reminders on PWP and its states</h3>
      <style type="text/css">
        #major h3 {
          color: yellow;
        }
      </style>
   </div></section>

    <section class="slide"><div>
      <h2>Formally</h2>
      <ul>
        <li>A <strong><i>Web Publication</i></strong> is an aggregated set of interrelated Web resources, intended to be seen as a single Web resource, and which <i>can be uniquely addressed</i> on the Web</li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>Formally</h2>
      <ul>
        <li>A <strong><i>Portable Web Publication</i></strong> is such that a user agent can render its essential content by relying  on the Web Resources <em>within</em> the same Web Publication</li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>Envisioned “states” of a Portable Web Publication</h2>
      <table>
        <tr>
          <th class="headerleft" style="width: 20%"></th>
          <th style="width:40%" class="headertop">Protocol Access</th>
          <th style="border-left: 1px solid #CCC; border-right: 1px solid #CCC; width:40%" class="headertop">File Access</th>
        </tr>
        <tr>
          <th class="headerleft">Packed</th>
          <td>PWP as one archive on a server</td>
          <td>PWP as one archive on a local disc</td>
        </tr>
        <tr>
          <th class="headerleft">Unpacked</th>
          <td>PWP spread over several files on a server</td>
          <td>PWP spread over several files on a local disc</td>
        </tr>
      </table>
    </div></section>

    <section class="slide"><div>
      <h2>Advances in modern browsers: Web and Service Workers</h2>
      <ul>
        <li>Web Worker: a truly parallel thread within the browser</li>
        <li>A Service Worker is a special type of Web Worker, with additional features:
          <ul>
            <li>it is a <i>programmable network proxy</i>: the main thread’s network calls are caught and the request/answer can be modified on-the-fly behind the scenes</li>
            <li>it has an interface to handle a local cache for networked data</li>
            <li>it will stay alive even if the user moves away from the main page, and can be accessed later if he/she returns to it</li>
          </ul>
        </li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>Envisioned Architecture: <br/>unpacked state</h2>
      <figure>
        <img class="plain" src="figures/Workers-basic.svg" alt="Document consumed through the Web in a traditional way" width="99%">
      </figure>
    </div></section>

    <section class="slide"><div>
      <h2>Envisioned Architecture: <br/>cached state</h2>
      <figure>
        <img class="plain" src="figures/Workers-cache.svg" alt="Document consumed through a Service Worker, possibly cached" width="99%">
      </figure>
    </div></section>

    <section class="slide"><div>
      <h2>Envisioned Architecture: <br/>packed state</h2>
      <figure>
        <img class="plain" src="figures/Workers-package.svg" alt="Document consumed through a Service Worker, possibly unpacked" width="99%">
      </figure>
    </div></section>

    <section class="slide"><div>
      <h2>When Packed: PWP packaging structure</h2>
      <figure>
        <img class="plain" src="figures/PWP-Package-Structure-2.svg" alt="PWP Packaging structure diagram with admin file in JSON" width="99%">
      </figure>
    </div></section>

    <section class="slide"><div>
        <h2>EPUB 3.1 work</h2>
        <ul>
          <li>There is an IDPF WG to define EPUB 3.1</li>
          <li>In line of the PWP development, but must be backward compatible</li>
          <li>Some issues explored by that group (e.g., “browser friendly manifestation") is very close
            <ul><li>whatever we do, we will have to synhronize the groups</li></ul>
          </li>
        </ul> 
    </div></section>


    <!-- @@@ -->

    <section class="slide shout cover" id="ident"><div>
      <img src="covers/library.jpg">
      <h3>Technical Challenge: Identification</h3>
      <style type="text/css">
        #ident h3 {
          color:snow;
          margin-top: 0.2em;
        }
      </style>
    </div></section>

    <section class='slide'><div>
      <h2>What we would like?</h2>
      <ul>
        <li>Have <em>one</em> identifier (URL, URN, etc) approach that would work seamlessly over <em>all</em> states</li>
        <li>Include fragment identifiers down to the details of each individual content</li>
        <li>Do not reinvent the wheel: reuse existing, and tried, Web technologies</li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>One URI: how?</h2>
      <ul>
        <li>Is it enough to say that “Service Workers will solve it”? The idea is:
          <ul>
            <li>use one URI (e.g., <code>http://ex.org/book.pwp</code>)</li>
            <li>the “core” rendering works as if this was in <i>unpacked</i> and <i>protocol access</i> states</li>
            <li>the PWP SW unpacks (if necessary) and emulates protocol access (if necessary)</li>
          </ul>
        </li>
        <li>Sounds good but how does the PWP SW knows what to do?
          <ul>
            <li>unpacked vs. packed: the media type may provide the necessary information</li>
            <li>but what about the file vs. protocol access?
              <ul><li>should we forget about file access and claim that applications/browsers turn file access into <code>file:///…</code> internally?</li></ul>
            </li>
          </ul>
        </li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>One URI: what?</h2>
     <ul>
        <li>Just a reminder of a problem: what is the URI for…
            <ul>
              <li>Shakespeare’s Hamlet? <ul><li>the work, the 2015 English editon,…</li></ul></li>
              <li>its digital edition published by Publisher XYZ? <ul><li>the print, the EPUB version, the Kindle version<,…/li></ul></li>
              <li>the copy I own and annotate?<ul><li>on this device, all my copies,…</li></ul></li>
            </ul>
        </li>
        <li>Different usage domain have different habits (ISBN, DOI, etc)
          <ul><li>each identifies <em>one</em> of these above…</li></ul>
        </li>
        <li>Is it realistic to solve this by separate identifiers?
          <ul><li>maybe <em>one</em> identifier plus some metadata…</li></ul>
        <li>It is <em>not</em> in W3C‘s (or IDPF‘s) role to solve this</li>
        <li>However: who will?</li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>What does the <code style="font-size:120%">HTTP GET</code> return?</h2>
      <ol>
        <li>A PWP manifest file?</li>
        <li>An HTML with a <code>&lt;link&gt;</code> to a manifest file?</li>
        <li>Any content, but a <code>Link:</code> in the HTTP header for the manifest file?
          <ul><li>but what happens to <code>file:///</code> scheme?</li></ul>
        </li>
        <li>#2 <em>or</em> #3 above?</li>
        <li><em>any</em> of the #3 above?</li>
      </ol>
    </div></section>

    <section class='slide'><div>
      <h2>Get “into” the publication: how?</h2>
      <ul>
        <li>The URI is for the PWP instance as a whole; what is the URI for one of the constituents?</li>
        <li> some approaches that have come up here and there:
          <ol>
            <li><code>http://ex.org/book.pwp#epubcfi(/1/2/…)</code>
            <li><code>http://ex.org/book.pwp!chapter1.html</code></li>
            <li><code>http://ex.org/book.pwp/chapter1.html</code></li>
          </ol>
        </li>
        <li>Some thoughts:
          <ul>
            <li>#3 is the closest to a purely Web view</li>
            <li>#1 makes it difficult to reuse existing fragment identifiers for content</li>
            <li>All these impose a particular organization of resources (essentially, a “folder” view) which restricts the generic idea of a PWP</li>
          </ul>
        </li>
      </ol>
    </div></section>

    <section class="slide"><div>
      <h2>Just a thought On the last issue (folder view)…</h2>
      <ul>
        <li>The manifest file may include some statements for a 'redirection'
          <ul><li>i.e., <code>chapter1.html</code>➝<code>http://ex.org/resources/chapter1.html</code></li></ul>
        </li>
        <li>There is an RFC650 for URI templates that may be helpful
          <ul><li>See the nice <a href="https://lists.w3.org/Archives/Public/public-csv-wg/2014Oct/att-0080/RFC6570-uri-template-overview.pdf">overview by Jeremy Tandy</a></li></ul>
        </li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>Get “Within” the content?</h2>
      <ul>
        <li>So far, we got to one resource within the Web Document</li>
        <li>We must get <em>into</em> the content
          <ul><li>a specific section, an image area, time interval…</li></ul>
        </li>
        <li>This is where fragment id-s come into the picture
          <ul>
            <li><code>http://ex.org/book.pwp/chapter1.html@section2</code></li>
            <li><code>http://ex.org/book.pwp/image1.jpg#xywh=percent:25,25,50,50</code></li>
            <li><code>http://ex.org/book.pwp/video1.ogv#track=audio&t=10,20</code></li>
          </ul>
        </li>
        <li>Luckily, this is a widely deployed approach
          <ul>
            <li>we should avoid defining PWP specific approaches, just reuse what is out there</li>
            <li>but we may influence others to define such fragments, e.g., for the <code>findText API</code></li>
          </ul>
        </li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>How should identifiers be used within a Web Publication?</h2>
      <ul>
        <li>Should there be requirements/restrictions how URI-s should be used among PWP consitutent resources?
          <ul><li>e.g., “You must use relative URI-s only"</li></ul>
        </li>
        <li>That would mean further restrictions on what Web Documents are all about:-(</li>
        <li>Does a PWP Service Worker solve this issue in general?</li>
      </ul>
    </div></section>

    <section class="slide"><div>
      <h2>Moving forward</h2>
      <ul>
        <li>Develop some detailed usage scenarios with all four possible states on how an engine should work</li>
        <li>Align with a possible POM work</li>
        <li>Align with relevant EPUB 3.1 work at IDPF</li>
      </ul>
    </div></section>

    <!-- ===================================== -->
    <div class="progress"><div></div> </div>
    <script src="shower/shower.min.js"></script>

  </body>
</html>
