<p>{{CanvasSidebar}} {{PreviousNext(“Web/API/Canvas_API/Tutorial/Basic_animations”, “Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas”)}}</p>
<p>In the last chapter we made some <a href="/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations">basic animations</a> and got to know ways to get things moving. In this part we will have a closer look at the motion itself and are going to add some physics to make our animations more advanced.</p>
<h2 id="drawing-a-ball">Drawing a ball</h2>
<p>We are going to use a ball for our animation studies, so let’s first draw that ball onto the canvas. The following code will set us up.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;canvas&quot;</span><span class="ot"> width=</span><span class="st">&quot;600&quot;</span><span class="ot"> height=</span><span class="st">&quot;300&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></a></code></pre></div>
<p>As usual, we need a drawing context first. To draw the ball, we will create a <code>ball</code> object which contains properties and a <code>draw()</code> method to paint it on the canvas.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-5" title="5">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-9" title="9">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-10" title="10">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-11" title="11">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-12" title="12">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-13" title="13">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-14" title="14">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-15" title="15">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-17" title="17"></a>
<a class="sourceLine" id="cb2-18" title="18"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<p>Nothing special here, the ball is actually a simple circle and gets drawn with the help of the {{domxref(“CanvasRenderingContext2D.arc()”, “arc()”)}} method.</p>
<h2 id="adding-velocity">Adding velocity</h2>
<p>Now that we have a ball, we are ready to add a basic animation like we have learned in the <a href="/en-US/docs/Web/API/Canvas_API/Tutorial/Basic_animations">last chapter</a> of this tutorial. Again, {{domxref(“window.requestAnimationFrame()”)}} helps us to control the animation. The ball gets moving by adding a velocity vector to the position. For each frame, we also {{domxref(“CanvasRenderingContext2D.clearRect”, “clear”, "", 1)}} the canvas to remove old circles from prior frames.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="kw">var</span> raf<span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb3-6" title="6">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-7" title="7">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="dt">vx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-9" title="9">  <span class="dt">vy</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-10" title="10">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb3-12" title="12">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-13" title="13">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-14" title="14">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-15" title="15">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-16" title="16">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-17" title="17">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb3-20" title="20"></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="kw">function</span> <span class="at">draw</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb3-22" title="22">  <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-23" title="23">  <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb3-24" title="24">  <span class="va">ball</span>.<span class="at">x</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-25" title="25">  <span class="va">ball</span>.<span class="at">y</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-26" title="26">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="op">}</span></a>
<a class="sourceLine" id="cb3-28" title="28"></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseover&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-30" title="30">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-32" title="32"></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb3-34" title="34">  <span class="va">window</span>.<span class="at">cancelAnimationFrame</span>(raf)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb3-36" title="36"></a>
<a class="sourceLine" id="cb3-37" title="37"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<h2 id="boundaries">Boundaries</h2>
<p>Without any boundary collision testing our ball runs out of the canvas quickly. We need to check if the <code>x</code> and <code>y</code> position of the ball is out of the canvas dimensions and invert the direction of the velocity vectors. To do so, we add the following checks to the <code>draw</code> method:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="cf">if</span> (<span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">height</span> <span class="op">||</span> <span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="va">ball</span>.<span class="at">vy</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="op">}</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="cf">if</span> (<span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">width</span> <span class="op">||</span> <span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb4-5" title="5">  <span class="va">ball</span>.<span class="at">vx</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="op">}</span></a></code></pre></div>
<h3 id="first-demo">First demo</h3>
<p>Let’s see how it looks in action so far.</p>
<h4 id="html">HTML</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;canvas&quot;</span><span class="ot"> style=</span><span class="st">&quot;border: 1px solid&quot;</span><span class="ot"> width=</span><span class="st">&quot;600&quot;</span><span class="ot"> height=</span><span class="st">&quot;300&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></a></code></pre></div>
<h4 id="javascript">JavaScript</h4>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="kw">var</span> raf<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="dt">vx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-9" title="9">  <span class="dt">vy</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-10" title="10">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-13" title="13">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-14" title="14">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-15" title="15">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-16" title="16">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-17" title="17">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb6-20" title="20"></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="kw">function</span> <span class="at">draw</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-22" title="22">  <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-23" title="23">  <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-24" title="24">  <span class="va">ball</span>.<span class="at">x</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-25" title="25">  <span class="va">ball</span>.<span class="at">y</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-26" title="26"></a>
<a class="sourceLine" id="cb6-27" title="27">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">height</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb6-28" title="28">      <span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-29" title="29">    <span class="va">ball</span>.<span class="at">vy</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-30" title="30">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-31" title="31">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">width</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb6-32" title="32">      <span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-33" title="33">    <span class="va">ball</span>.<span class="at">vx</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb6-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-35" title="35"></a>
<a class="sourceLine" id="cb6-36" title="36">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-37" title="37"><span class="op">}</span></a>
<a class="sourceLine" id="cb6-38" title="38"></a>
<a class="sourceLine" id="cb6-39" title="39"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseover&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-40" title="40">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-41" title="41"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-42" title="42"></a>
<a class="sourceLine" id="cb6-43" title="43"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-44" title="44">  <span class="va">window</span>.<span class="at">cancelAnimationFrame</span>(raf)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-45" title="45"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-46" title="46"></a>
<a class="sourceLine" id="cb6-47" title="47"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<h4 id="result">Result</h4>
<p>Move your mouse into the canvas to start the animation.</p>
<p>{{EmbedLiveSample(“First_demo”, “610”, “340”)}}</p>
<h2 id="acceleration">Acceleration</h2>
<p>To make the motion more real, you can play with the velocity like this, for example:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="va">ball</span>.<span class="at">vy</span> <span class="op">*=</span> <span class="fl">.99</span><span class="op">;</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="va">ball</span>.<span class="at">vy</span> <span class="op">+=</span> <span class="fl">.25</span><span class="op">;</span></a></code></pre></div>
<p>This slows down the vertical velocity each frame, so that the ball will just bounce on the floor in the end.</p>
<h3 id="second-demo">Second demo</h3>
<h4 id="html-1">HTML</h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;canvas&quot;</span><span class="ot"> style=</span><span class="st">&quot;border: 1px solid&quot;</span><span class="ot"> width=</span><span class="st">&quot;600&quot;</span><span class="ot"> height=</span><span class="st">&quot;300&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></a></code></pre></div>
<h4 id="javascript-1">JavaScript</h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="kw">var</span> raf<span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-6" title="6">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-7" title="7">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="dt">vx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-9" title="9">  <span class="dt">vy</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-10" title="10">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-11" title="11">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb9-12" title="12">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb9-13" title="13">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-14" title="14">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-15" title="15">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-16" title="16">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-17" title="17">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb9-20" title="20"></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="kw">function</span> <span class="at">draw</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb9-22" title="22">  <span class="va">ctx</span>.<span class="at">clearRect</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-23" title="23">  <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb9-24" title="24">  <span class="va">ball</span>.<span class="at">x</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-25" title="25">  <span class="va">ball</span>.<span class="at">y</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-26" title="26">  <span class="va">ball</span>.<span class="at">vy</span> <span class="op">*=</span> <span class="fl">.99</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-27" title="27">  <span class="va">ball</span>.<span class="at">vy</span> <span class="op">+=</span> <span class="fl">.25</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-28" title="28"></a>
<a class="sourceLine" id="cb9-29" title="29">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">height</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-30" title="30">      <span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-31" title="31">    <span class="va">ball</span>.<span class="at">vy</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-32" title="32">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-33" title="33">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">width</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb9-34" title="34">      <span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-35" title="35">    <span class="va">ball</span>.<span class="at">vx</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-36" title="36">  <span class="op">}</span></a>
<a class="sourceLine" id="cb9-37" title="37"></a>
<a class="sourceLine" id="cb9-38" title="38">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-39" title="39"><span class="op">}</span></a>
<a class="sourceLine" id="cb9-40" title="40"></a>
<a class="sourceLine" id="cb9-41" title="41"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseover&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-42" title="42">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-43" title="43"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-44" title="44"></a>
<a class="sourceLine" id="cb9-45" title="45"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb9-46" title="46">  <span class="va">window</span>.<span class="at">cancelAnimationFrame</span>(raf)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-47" title="47"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb9-48" title="48"></a>
<a class="sourceLine" id="cb9-49" title="49"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<h4 id="result-1">Result</h4>
<p>{{EmbedLiveSample(“Second_demo”, “610”, “340”)}}</p>
<h2 id="trailing-effect">Trailing effect</h2>
<p>Until now we have made use of the {{domxref(“CanvasRenderingContext2D.clearRect”, “clearRect”)}} method when clearing prior frames. If you replace this method with a semi-transparent {{domxref(“CanvasRenderingContext2D.fillRect”, “fillRect”)}}, you can easily create a trailing effect.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;rgba(255, 255, 255, 0.3)&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="third-demo">Third demo</h3>
<h4 id="html-2">HTML</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;canvas&quot;</span><span class="ot"> style=</span><span class="st">&quot;border: 1px solid&quot;</span><span class="ot"> width=</span><span class="st">&quot;600&quot;</span><span class="ot"> height=</span><span class="st">&quot;300&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></a></code></pre></div>
<h4 id="javascript-2">JavaScript</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="kw">var</span> raf<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-7" title="7">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-8" title="8">  <span class="dt">vx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-9" title="9">  <span class="dt">vy</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-10" title="10">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-11" title="11">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-12" title="12">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-13" title="13">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-14" title="14">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-15" title="15">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-16" title="16">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb12-20" title="20"></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="kw">function</span> <span class="at">draw</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-22" title="22">  <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;rgba(255, 255, 255, 0.3)&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-23" title="23">  <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span> <span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-24" title="24">  <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-25" title="25">  <span class="va">ball</span>.<span class="at">x</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-26" title="26">  <span class="va">ball</span>.<span class="at">y</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-27" title="27">  <span class="va">ball</span>.<span class="at">vy</span> <span class="op">*=</span> <span class="fl">.99</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-28" title="28">  <span class="va">ball</span>.<span class="at">vy</span> <span class="op">+=</span> <span class="fl">.25</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-29" title="29"></a>
<a class="sourceLine" id="cb12-30" title="30">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">height</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb12-31" title="31">      <span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-32" title="32">    <span class="va">ball</span>.<span class="at">vy</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-34" title="34">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">width</span> <span class="op">||</span></a>
<a class="sourceLine" id="cb12-35" title="35">      <span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-36" title="36">    <span class="va">ball</span>.<span class="at">vx</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-37" title="37">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-38" title="38"></a>
<a class="sourceLine" id="cb12-39" title="39">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-40" title="40"><span class="op">}</span></a>
<a class="sourceLine" id="cb12-41" title="41"></a>
<a class="sourceLine" id="cb12-42" title="42"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseover&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-43" title="43">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-44" title="44"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-45" title="45"></a>
<a class="sourceLine" id="cb12-46" title="46"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-47" title="47">  <span class="va">window</span>.<span class="at">cancelAnimationFrame</span>(raf)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-48" title="48"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-49" title="49"></a>
<a class="sourceLine" id="cb12-50" title="50"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<h4 id="result-2">Result</h4>
<p>{{EmbedLiveSample(“Third_demo”, “610”, “340”)}}</p>
<h2 id="adding-mouse-control">Adding mouse control</h2>
<p>To get some control over the ball, we can make it follow our mouse using the <a href="/en-US/docs/Web/API/Element/mousemove_event"><code>mousemove</code></a> event, for example. The <a href="/en-US/docs/Web/API/Element/click_event"><code>click</code></a> event releases the ball and lets it bounce again.</p>
<h3 id="fourth-demo">Fourth demo</h3>
<h4 id="html-3">HTML</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode html"><code class="sourceCode html"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">&lt;canvas</span><span class="ot"> id=</span><span class="st">&quot;canvas&quot;</span><span class="ot"> style=</span><span class="st">&quot;border: 1px solid&quot;</span><span class="ot"> width=</span><span class="st">&quot;600&quot;</span><span class="ot"> height=</span><span class="st">&quot;300&quot;</span><span class="kw">&gt;&lt;/canvas&gt;</span></a></code></pre></div>
<h4 id="javascript-3">JavaScript</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">var</span> canvas <span class="op">=</span> <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;canvas&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw">var</span> ctx <span class="op">=</span> <span class="va">canvas</span>.<span class="at">getContext</span>(<span class="st">&#39;2d&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="kw">var</span> raf<span class="op">;</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">var</span> running <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-5" title="5"></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="kw">var</span> ball <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-7" title="7">  <span class="dt">x</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="dt">y</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-9" title="9">  <span class="dt">vx</span><span class="op">:</span> <span class="dv">5</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-10" title="10">  <span class="dt">vy</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-11" title="11">  <span class="dt">radius</span><span class="op">:</span> <span class="dv">25</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-12" title="12">  <span class="dt">color</span><span class="op">:</span> <span class="st">&#39;blue&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb14-13" title="13">  <span class="dt">draw</span><span class="op">:</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb14-14" title="14">    <span class="va">ctx</span>.<span class="at">beginPath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-15" title="15">    <span class="va">ctx</span>.<span class="at">arc</span>(<span class="kw">this</span>.<span class="at">x</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">y</span><span class="op">,</span> <span class="kw">this</span>.<span class="at">radius</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="va">Math</span>.<span class="at">PI</span> <span class="op">*</span> <span class="dv">2</span><span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-16" title="16">    <span class="va">ctx</span>.<span class="at">closePath</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-17" title="17">    <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">color</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-18" title="18">    <span class="va">ctx</span>.<span class="at">fill</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-19" title="19">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="op">};</span></a>
<a class="sourceLine" id="cb14-21" title="21"></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="kw">function</span> <span class="at">clear</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb14-23" title="23">  <span class="va">ctx</span>.<span class="at">fillStyle</span> <span class="op">=</span> <span class="st">&#39;rgba(255, 255, 255, 0.3)&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-24" title="24">  <span class="va">ctx</span>.<span class="at">fillRect</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="va">canvas</span>.<span class="at">width</span><span class="op">,</span><span class="va">canvas</span>.<span class="at">height</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="op">}</span></a>
<a class="sourceLine" id="cb14-26" title="26"></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="kw">function</span> <span class="at">draw</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb14-28" title="28">  <span class="at">clear</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-29" title="29">  <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-30" title="30">  <span class="va">ball</span>.<span class="at">x</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-31" title="31">  <span class="va">ball</span>.<span class="at">y</span> <span class="op">+=</span> <span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-32" title="32"></a>
<a class="sourceLine" id="cb14-33" title="33">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">height</span> <span class="op">||</span> <span class="va">ball</span>.<span class="at">y</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vy</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-34" title="34">    <span class="va">ball</span>.<span class="at">vy</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vy</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-35" title="35">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-36" title="36">  <span class="cf">if</span> (<span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&gt;</span> <span class="va">canvas</span>.<span class="at">width</span> <span class="op">||</span> <span class="va">ball</span>.<span class="at">x</span> <span class="op">+</span> <span class="va">ball</span>.<span class="at">vx</span> <span class="op">&lt;</span> <span class="dv">0</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-37" title="37">    <span class="va">ball</span>.<span class="at">vx</span> <span class="op">=</span> <span class="op">-</span><span class="va">ball</span>.<span class="at">vx</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-38" title="38">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-39" title="39"></a>
<a class="sourceLine" id="cb14-40" title="40">  raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-41" title="41"><span class="op">}</span></a>
<a class="sourceLine" id="cb14-42" title="42"></a>
<a class="sourceLine" id="cb14-43" title="43"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mousemove&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-44" title="44">  <span class="cf">if</span> (<span class="op">!</span>running) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-45" title="45">    <span class="at">clear</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-46" title="46">    <span class="va">ball</span>.<span class="at">x</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">clientX</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-47" title="47">    <span class="va">ball</span>.<span class="at">y</span> <span class="op">=</span> <span class="va">e</span>.<span class="at">clientY</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-48" title="48">    <span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb14-49" title="49">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-50" title="50"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-51" title="51"></a>
<a class="sourceLine" id="cb14-52" title="52"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;click&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-53" title="53">  <span class="cf">if</span> (<span class="op">!</span>running) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-54" title="54">    raf <span class="op">=</span> <span class="va">window</span>.<span class="at">requestAnimationFrame</span>(draw)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-55" title="55">    running <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-56" title="56">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-57" title="57"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-58" title="58"></a>
<a class="sourceLine" id="cb14-59" title="59"><span class="va">canvas</span>.<span class="at">addEventListener</span>(<span class="st">&#39;mouseout&#39;</span><span class="op">,</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-60" title="60">  <span class="va">window</span>.<span class="at">cancelAnimationFrame</span>(raf)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-61" title="61">  running <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb14-62" title="62"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb14-63" title="63"></a>
<a class="sourceLine" id="cb14-64" title="64"><span class="va">ball</span>.<span class="at">draw</span>()<span class="op">;</span></a></code></pre></div>
<h4 id="result-3">Result</h4>
<p>Move the ball using your mouse and release it with a click.</p>
<p>{{EmbedLiveSample(“Fourth_demo”, “610”, “340”)}}</p>
<h2 id="breakout">Breakout</h2>
<p>This short chapter only explains some techniques to create more advanced animations. There are many more! How about adding a paddle, some bricks, and turn this demo into a <a href="https://en.wikipedia.org/wiki/Breakout_%28video_game%29">Breakout</a> game? Check out our <a href="/en-US/docs/Games">Game development</a> area for more gaming related articles.</p>
<h2 id="see-also">See also</h2>
<ul>
<li>{{domxref(“window.requestAnimationFrame()”)}}</li>
<li><a href="/en-US/docs/Games/Techniques/Efficient_animation_for_web_games">Efficient animation for web games</a></li>
</ul>
<p>{{PreviousNext(“Web/API/Canvas_API/Tutorial/Basic_animations”, “Web/API/Canvas_API/Tutorial/Pixel_manipulation_with_canvas”)}}</p>
