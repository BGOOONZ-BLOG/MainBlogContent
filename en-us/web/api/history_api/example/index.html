<p>This is an example of an AJAX website composed only of three pages (<em>first_page.php</em>, <em>second_page.php</em> and <em>third_page.php</em>). To see how it works, please create the following files (or git clone <a href="https://github.com/giabao/mdn-ajax-nav-example">https://github.com/giabao/mdn-ajax-nav-example.git</a> ):</p>
<blockquote>
<p><strong>Note:</strong> For fully integrating the {{HTMLElement(“form”)}} elements within this <em>mechanism</em>, please take a look at the paragraph <a href="/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#submitting_forms_and_uploading_files">Submitting forms and uploading files</a>.</p>
</blockquote>
<p><strong>first_page.php</strong>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">&lt;?php</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="kw">$page_title</span> = <span class="st">&quot;First page&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="kw">$as_json</span> = <span class="kw">false</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-5" title="5">    if <span class="ot">(</span><span class="kw">isset</span><span class="ot">(</span><span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">])</span> &amp;&amp; <span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">]</span> == <span class="st">&quot;json&quot;</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb1-6" title="6">        <span class="kw">$as_json</span> = <span class="kw">true</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">        ob_start<span class="ot">();</span></a>
<a class="sourceLine" id="cb1-8" title="8">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-10" title="10">&lt;!doctype html&gt;</a>
<a class="sourceLine" id="cb1-11" title="11">&lt;html&gt;</a>
<a class="sourceLine" id="cb1-12" title="12">&lt;head&gt;</a>
<a class="sourceLine" id="cb1-13" title="13">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb1-14" title="14">        include <span class="st">&quot;include/header.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-15" title="15">        echo <span class="st">&quot;&lt;title&gt;&quot;</span> . <span class="kw">$page_title</span> . <span class="st">&quot;&lt;/title&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-16" title="16"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-17" title="17">&lt;/head&gt;</a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19">&lt;body&gt;</a>
<a class="sourceLine" id="cb1-20" title="20"></a>
<a class="sourceLine" id="cb1-21" title="21">&lt;<span class="ot">?</span>php <span class="kw">include</span> <span class="st">&quot;include/before_content.php&quot;</span><span class="ot">;</span> <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;first_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb1-24" title="24"></a>
<a class="sourceLine" id="cb1-25" title="25">&lt;div id=<span class="st">&quot;ajax-content&quot;</span>&gt;</a>
<a class="sourceLine" id="cb1-26" title="26">&lt;<span class="ot">?</span>php } <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28">    &lt;p&gt;This is the content of &lt;strong&gt;first_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb1-31" title="31">    if <span class="ot">(</span><span class="kw">$as_json</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb1-32" title="32">        echo <span class="fu">json_encode</span><span class="ot">(</span><span class="kw">array</span><span class="ot">(</span><span class="st">&quot;page&quot;</span> =&gt; <span class="kw">$page_title</span><span class="ot">,</span> <span class="st">&quot;content&quot;</span> =&gt; <span class="fu">ob_get_clean</span><span class="ot">()));</span></a>
<a class="sourceLine" id="cb1-33" title="33">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb1-34" title="34"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb1-35" title="35">&lt;/div&gt;</a>
<a class="sourceLine" id="cb1-36" title="36"></a>
<a class="sourceLine" id="cb1-37" title="37">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;first_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb1-38" title="38"></a>
<a class="sourceLine" id="cb1-39" title="39">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb1-40" title="40">        include <span class="st">&quot;include/after_content.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-41" title="41">        echo <span class="st">&quot;&lt;/body&gt;</span><span class="kw">\n</span><span class="st">&lt;/html&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb1-42" title="42">    }</a>
<a class="sourceLine" id="cb1-43" title="43"><span class="kw">?&gt;</span></a></code></pre></div>
<p><strong>second_page.php</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">&lt;?php</span></a>
<a class="sourceLine" id="cb2-2" title="2">    <span class="kw">$page_title</span> = <span class="st">&quot;Second page&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">$as_json</span> = <span class="kw">false</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-5" title="5">    if <span class="ot">(</span><span class="kw">isset</span><span class="ot">(</span><span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">])</span> &amp;&amp; <span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">]</span> == <span class="st">&quot;json&quot;</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb2-6" title="6">        <span class="kw">$as_json</span> = <span class="kw">true</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-7" title="7">        ob_start<span class="ot">();</span></a>
<a class="sourceLine" id="cb2-8" title="8">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb2-9" title="9"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-10" title="10">&lt;!doctype html&gt;</a>
<a class="sourceLine" id="cb2-11" title="11">&lt;html&gt;</a>
<a class="sourceLine" id="cb2-12" title="12">&lt;head&gt;</a>
<a class="sourceLine" id="cb2-13" title="13">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb2-14" title="14">        include <span class="st">&quot;include/header.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-15" title="15">        echo <span class="st">&quot;&lt;title&gt;&quot;</span> . <span class="kw">$page_title</span> . <span class="st">&quot;&lt;/title&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-17" title="17">&lt;/head&gt;</a>
<a class="sourceLine" id="cb2-18" title="18"></a>
<a class="sourceLine" id="cb2-19" title="19">&lt;body&gt;</a>
<a class="sourceLine" id="cb2-20" title="20"></a>
<a class="sourceLine" id="cb2-21" title="21">&lt;<span class="ot">?</span>php <span class="kw">include</span> <span class="st">&quot;include/before_content.php&quot;</span><span class="ot">;</span> <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;second_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb2-24" title="24"></a>
<a class="sourceLine" id="cb2-25" title="25">&lt;div id=<span class="st">&quot;ajax-content&quot;</span>&gt;</a>
<a class="sourceLine" id="cb2-26" title="26">&lt;<span class="ot">?</span>php } <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-27" title="27"></a>
<a class="sourceLine" id="cb2-28" title="28">    &lt;p&gt;This is the content of &lt;strong&gt;second_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb2-29" title="29"></a>
<a class="sourceLine" id="cb2-30" title="30">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb2-31" title="31">    if <span class="ot">(</span><span class="kw">$as_json</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb2-32" title="32">        echo <span class="fu">json_encode</span><span class="ot">(</span><span class="kw">array</span><span class="ot">(</span><span class="st">&quot;page&quot;</span> =&gt; <span class="kw">$page_title</span><span class="ot">,</span> <span class="st">&quot;content&quot;</span> =&gt; <span class="fu">ob_get_clean</span><span class="ot">()));</span></a>
<a class="sourceLine" id="cb2-33" title="33">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb2-34" title="34"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb2-35" title="35">&lt;/div&gt;</a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;second_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb2-38" title="38"></a>
<a class="sourceLine" id="cb2-39" title="39">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb2-40" title="40">        include <span class="st">&quot;include/after_content.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-41" title="41">        echo <span class="st">&quot;&lt;/body&gt;</span><span class="kw">\n</span><span class="st">&lt;/html&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb2-42" title="42">    }</a>
<a class="sourceLine" id="cb2-43" title="43"><span class="kw">?&gt;</span></a></code></pre></div>
<p><strong>third_page.php</strong>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">&lt;?php</span></a>
<a class="sourceLine" id="cb3-2" title="2">    <span class="kw">$page_title</span> = <span class="st">&quot;Third page&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="kw">$page_content</span> = <span class="st">&quot;&lt;p&gt;This is the content of &lt;strong&gt;third_page.php&lt;/strong&gt;. This content is stored into a php variable.&lt;/p&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"></a>
<a class="sourceLine" id="cb3-5" title="5">    if <span class="ot">(</span><span class="kw">isset</span><span class="ot">(</span><span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">])</span> &amp;&amp; <span class="kw">$_GET</span><span class="ot">[</span><span class="st">&quot;view_as&quot;</span><span class="ot">]</span> == <span class="st">&quot;json&quot;</span><span class="ot">)</span> {</a>
<a class="sourceLine" id="cb3-6" title="6">        echo <span class="fu">json_encode</span><span class="ot">(</span><span class="kw">array</span><span class="ot">(</span><span class="st">&quot;page&quot;</span> =&gt; <span class="kw">$page_title</span><span class="ot">,</span> <span class="st">&quot;content&quot;</span> =&gt; <span class="kw">$page_content</span><span class="ot">));</span></a>
<a class="sourceLine" id="cb3-7" title="7">    } <span class="kw">else</span> {</a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb3-9" title="9">&lt;!doctype html&gt;</a>
<a class="sourceLine" id="cb3-10" title="10">&lt;html&gt;</a>
<a class="sourceLine" id="cb3-11" title="11">&lt;head&gt;</a>
<a class="sourceLine" id="cb3-12" title="12">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb3-13" title="13">        include <span class="st">&quot;include/header.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-14" title="14">        echo <span class="st">&quot;&lt;title&gt;&quot;</span> . <span class="kw">$page_title</span> . <span class="st">&quot;&lt;/title&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb3-16" title="16">&lt;/head&gt;</a>
<a class="sourceLine" id="cb3-17" title="17"></a>
<a class="sourceLine" id="cb3-18" title="18">&lt;body&gt;</a>
<a class="sourceLine" id="cb3-19" title="19"></a>
<a class="sourceLine" id="cb3-20" title="20">&lt;<span class="ot">?</span>php <span class="kw">include</span> <span class="st">&quot;include/before_content.php&quot;</span><span class="ot">;</span> <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb3-21" title="21"></a>
<a class="sourceLine" id="cb3-22" title="22">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;third_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb3-23" title="23"></a>
<a class="sourceLine" id="cb3-24" title="24">&lt;div id=<span class="st">&quot;ajax-content&quot;</span>&gt;</a>
<a class="sourceLine" id="cb3-25" title="25">&lt;<span class="ot">?</span>php <span class="kw">echo</span> <span class="kw">$page_content</span><span class="ot">;</span> <span class="kw">?&gt;</span></a>
<a class="sourceLine" id="cb3-26" title="26">&lt;/div&gt;</a>
<a class="sourceLine" id="cb3-27" title="27"></a>
<a class="sourceLine" id="cb3-28" title="28">&lt;p&gt;This paragraph is shown only when the navigation starts from &lt;strong&gt;third_page.php&lt;/strong&gt;.&lt;/p&gt;</a>
<a class="sourceLine" id="cb3-29" title="29"></a>
<a class="sourceLine" id="cb3-30" title="30">&lt;<span class="ot">?</span>php</a>
<a class="sourceLine" id="cb3-31" title="31">        include <span class="st">&quot;include/after_content.php&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-32" title="32">        echo <span class="st">&quot;&lt;/body&gt;</span><span class="kw">\n</span><span class="st">&lt;/html&gt;&quot;</span><span class="ot">;</span></a>
<a class="sourceLine" id="cb3-33" title="33">    }</a>
<a class="sourceLine" id="cb3-34" title="34"><span class="kw">?&gt;</span></a></code></pre></div>
<p><strong>css/style.css</strong>:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode css"><code class="sourceCode css"><a class="sourceLine" id="cb4-1" title="1"><span class="pp">#ajax-loader</span> {</a>
<a class="sourceLine" id="cb4-2" title="2">    position: <span class="dv">fixed</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-3" title="3">    display: <span class="dv">table</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-4" title="4">    top: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-5" title="5">    left: <span class="dv">0</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-6" title="6">    width: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-7" title="7">    height: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-8" title="8">}</a>
<a class="sourceLine" id="cb4-9" title="9"></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="pp">#ajax-loader</span> <span class="op">&gt;</span> div {</a>
<a class="sourceLine" id="cb4-11" title="11">    display: <span class="dv">table-cell</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-12" title="12">    width: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-13" title="13">    height: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-14" title="14">    vertical-align: <span class="dv">middle</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-15" title="15">    text-align: <span class="dv">center</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-16" title="16">    background-color: <span class="cn">#000000</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-17" title="17">    opacity: <span class="dv">0.65</span><span class="op">;</span></a>
<a class="sourceLine" id="cb4-18" title="18">}</a></code></pre></div>
<p><strong>include/after_content.php</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb5-1" title="1">&lt;p&gt;This is the footer. It is shared between all ajax pages.&lt;/p&gt;</a></code></pre></div>
<p><strong>include/before_content.php</strong>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb6-1" title="1">&lt;p&gt;</a>
<a class="sourceLine" id="cb6-2" title="2"><span class="ot">[</span> &lt;a <span class="kw">class</span>=<span class="st">&quot;ajax-nav&quot;</span> href=<span class="st">&quot;first_page.php&quot;</span>&gt;First example&lt;/a&gt;</a>
<a class="sourceLine" id="cb6-3" title="3">| &lt;a <span class="kw">class</span>=<span class="st">&quot;ajax-nav&quot;</span> href=<span class="st">&quot;second_page.php&quot;</span>&gt;Second example&lt;/a&gt;</a>
<a class="sourceLine" id="cb6-4" title="4">| &lt;a <span class="kw">class</span>=<span class="st">&quot;ajax-nav&quot;</span> href=<span class="st">&quot;third_page.php&quot;</span>&gt;Third example&lt;/a&gt;</a>
<a class="sourceLine" id="cb6-5" title="5">| &lt;a <span class="kw">class</span>=<span class="st">&quot;ajax-nav&quot;</span> href=<span class="st">&quot;unexisting.php&quot;</span>&gt;Unexisting page&lt;/a&gt; <span class="ot">]</span></a>
<a class="sourceLine" id="cb6-6" title="6">&lt;/p&gt;</a></code></pre></div>
<p><strong>include/header.php</strong>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode php"><code class="sourceCode php"><a class="sourceLine" id="cb7-1" title="1">&lt;meta http-equiv=<span class="st">&quot;Content-Type&quot;</span> content=<span class="st">&quot;text/html; charset=UTF-8&quot;</span> /&gt;</a>
<a class="sourceLine" id="cb7-2" title="2">&lt;script type=<span class="st">&quot;text/javascript&quot;</span> src=<span class="st">&quot;js/ajax_nav.js&quot;</span>&gt;&lt;/script&gt;</a>
<a class="sourceLine" id="cb7-3" title="3">&lt;<span class="fu">link</span> rel=<span class="st">&quot;stylesheet&quot;</span> href=<span class="st">&quot;css/style.css&quot;</span> /&gt;</a></code></pre></div>
<p><strong>js/ajax_nav.js</strong>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="st">&quot;use strict&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">const</span> ajaxRequest <span class="op">=</span> <span class="kw">new</span> (<span class="kw">function</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5">    function <span class="at">closeReq</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-6" title="6">       <span class="va"> oLoadingBox</span>.<span class="at">parentNode</span> <span class="op">&amp;&amp;</span> <span class="va">document</span>.<span class="va">body</span>.<span class="at">removeChild</span>(oLoadingBox)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-7" title="7">        bIsLoading <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-9" title="9"></a>
<a class="sourceLine" id="cb8-10" title="10">    function <span class="at">abortReq</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-11" title="11">       <span class="at"> if</span> (<span class="op">!</span>bIsLoading) <span class="op">{</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb8-12" title="12">       <span class="va"> oReq</span>.<span class="at">abort</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-13" title="13">       <span class="at"> closeReq</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-14" title="14">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-15" title="15"></a>
<a class="sourceLine" id="cb8-16" title="16">    function <span class="at">ajaxError</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-17" title="17">       <span class="at"> alert</span>(<span class="st">&quot;Unknown error.&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-18" title="18">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-19" title="19"></a>
<a class="sourceLine" id="cb8-20" title="20">    function <span class="at">ajaxLoad</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-21" title="21">        var vMsg<span class="op">,</span> nStatus <span class="op">=</span> <span class="kw">this</span>.<span class="at">status</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-22" title="22">       <span class="at"> switch</span> (nStatus) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-23" title="23">            case <span class="dv">200</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-24" title="24">                vMsg <span class="op">=</span> <span class="va">JSON</span>.<span class="at">parse</span>(<span class="kw">this</span>.<span class="at">responseText</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-25" title="25">               <span class="va"> document</span>.<span class="at">title</span> <span class="op">=</span> <span class="va">oPageInfo</span>.<span class="at">title</span> <span class="op">=</span> <span class="va">vMsg</span>.<span class="at">page</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-26" title="26">               <span class="va"> document</span>.<span class="at">getElementById</span>(sTargetId).<span class="at">innerHTML</span> <span class="op">=</span> <span class="va">vMsg</span>.<span class="at">content</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-27" title="27">               <span class="at"> if</span> (bUpdateURL) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-28" title="28">                   <span class="va"> history</span>.<span class="at">pushState</span>(oPageInfo<span class="op">,</span> <span class="va">oPageInfo</span>.<span class="at">title</span><span class="op">,</span> <span class="va">oPageInfo</span>.<span class="at">url</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-29" title="29">                    bUpdateURL <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-30" title="30">                <span class="op">}</span></a>
<a class="sourceLine" id="cb8-31" title="31">                break<span class="op">;</span></a>
<a class="sourceLine" id="cb8-32" title="32">           <span class="dt"> default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-33" title="33">                vMsg <span class="op">=</span> nStatus <span class="op">+</span> <span class="st">&quot;: &quot;</span> <span class="op">+</span> (oHTTPStatus[nStatus] <span class="op">||</span> <span class="st">&quot;Unknown&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-34" title="34">               <span class="at"> switch</span> (<span class="va">Math</span>.<span class="at">floor</span>(nStatus / <span class="dv">100</span>)) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-35" title="35">                    <span class="co">/*</span></a>
<a class="sourceLine" id="cb8-36" title="36"><span class="co">                    case 1:</span></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="co">                        // Informational 1xx</span></a>
<a class="sourceLine" id="cb8-38" title="38"><span class="co">                        console.log(&quot;Information code &quot; + vMsg);</span></a>
<a class="sourceLine" id="cb8-39" title="39"><span class="co">                        break;</span></a>
<a class="sourceLine" id="cb8-40" title="40"><span class="co">                    case 2:</span></a>
<a class="sourceLine" id="cb8-41" title="41"><span class="co">                        // Successful 2xx</span></a>
<a class="sourceLine" id="cb8-42" title="42"><span class="co">                        console.log(&quot;Successful code &quot; + vMsg);</span></a>
<a class="sourceLine" id="cb8-43" title="43"><span class="co">                        break;</span></a>
<a class="sourceLine" id="cb8-44" title="44"><span class="co">                    case 3:</span></a>
<a class="sourceLine" id="cb8-45" title="45"><span class="co">                        // Redirection 3xx</span></a>
<a class="sourceLine" id="cb8-46" title="46"><span class="co">                        console.log(&quot;Redirection code &quot; + vMsg);</span></a>
<a class="sourceLine" id="cb8-47" title="47"><span class="co">                        break;</span></a>
<a class="sourceLine" id="cb8-48" title="48"><span class="co">                    */</span></a>
<a class="sourceLine" id="cb8-49" title="49">                    case <span class="dv">4</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-50" title="50">                        <span class="co">/* Client Error 4xx */</span></a>
<a class="sourceLine" id="cb8-51" title="51">                       <span class="at"> alert</span>(<span class="st">&quot;Client Error #&quot;</span> <span class="op">+</span> vMsg)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-52" title="52">                        break<span class="op">;</span></a>
<a class="sourceLine" id="cb8-53" title="53">                    case <span class="dv">5</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-54" title="54">                        <span class="co">/* Server Error 5xx */</span></a>
<a class="sourceLine" id="cb8-55" title="55">                       <span class="at"> alert</span>(<span class="st">&quot;Server Error #&quot;</span> <span class="op">+</span> vMsg)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-56" title="56">                        break<span class="op">;</span></a>
<a class="sourceLine" id="cb8-57" title="57">                   <span class="dt"> default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-58" title="58">                        <span class="co">/* Unknown status */</span></a>
<a class="sourceLine" id="cb8-59" title="59">                       <span class="at"> ajaxError</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-60" title="60">                <span class="op">}</span></a>
<a class="sourceLine" id="cb8-61" title="61">        <span class="op">}</span></a>
<a class="sourceLine" id="cb8-62" title="62">       <span class="at"> closeReq</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-63" title="63">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-64" title="64"></a>
<a class="sourceLine" id="cb8-65" title="65">    function <span class="at">filterURL</span> (sURL<span class="op">,</span> sViewMode) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-66" title="66">        return <span class="va">sURL</span>.<span class="at">replace</span>(rSearch<span class="op">,</span> <span class="st">&quot;&quot;</span>) <span class="op">+</span> (<span class="st">&quot;?&quot;</span> <span class="op">+</span> <span class="va">sURL</span>.<span class="at">replace</span>(rHost<span class="op">,</span> <span class="st">&quot;&amp;&quot;</span>).<span class="at">replace</span>(rView<span class="op">,</span> sViewMode <span class="op">?</span> <span class="st">&quot;&amp;&quot;</span> <span class="op">+</span> sViewKey <span class="op">+</span> <span class="st">&quot;=&quot;</span> <span class="op">+</span> sViewMode : <span class="st">&quot;&quot;</span>).<span class="at">slice</span>(<span class="dv">1</span>)).<span class="at">replace</span>(rEndQstMark<span class="op">,</span> <span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-67" title="67">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-68" title="68"></a>
<a class="sourceLine" id="cb8-69" title="69">    function <span class="at">getPage</span> (sPage) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-70" title="70">       <span class="at"> if</span> (bIsLoading) <span class="op">{</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb8-71" title="71">        oReq <span class="op">=</span> <span class="kw">new</span> <span class="at">XMLHttpRequest</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-72" title="72">        bIsLoading <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-73" title="73">       <span class="va"> oReq</span>.<span class="at">onload</span> <span class="op">=</span> ajaxLoad<span class="op">;</span></a>
<a class="sourceLine" id="cb8-74" title="74">       <span class="va"> oReq</span>.<span class="at">onerror</span> <span class="op">=</span> ajaxError<span class="op">;</span></a>
<a class="sourceLine" id="cb8-75" title="75">       <span class="at"> if</span> (sPage) <span class="op">{</span> <span class="va">oPageInfo</span>.<span class="at">url</span> <span class="op">=</span> <span class="at">filterURL</span>(sPage<span class="op">,</span> <span class="kw">null</span>)<span class="op">;</span> <span class="op">}</span></a>
<a class="sourceLine" id="cb8-76" title="76">       <span class="va"> oReq</span>.<span class="at">open</span>(<span class="st">&quot;get&quot;</span><span class="op">,</span> <span class="at">filterURL</span>(<span class="va">oPageInfo</span>.<span class="at">url</span><span class="op">,</span> <span class="st">&quot;json&quot;</span>)<span class="op">,</span> <span class="kw">true</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-77" title="77">       <span class="va"> oReq</span>.<span class="at">send</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-78" title="78">       <span class="va"> oLoadingBox</span>.<span class="at">parentNode</span> <span class="op">||</span> <span class="va">document</span>.<span class="va">body</span>.<span class="at">appendChild</span>(oLoadingBox)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-79" title="79">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-80" title="80"></a>
<a class="sourceLine" id="cb8-81" title="81">    function <span class="at">requestPage</span> (sURL) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-82" title="82">       <span class="at"> if</span> (<span class="va">history</span>.<span class="at">pushState</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-83" title="83">            bUpdateURL <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-84" title="84">           <span class="at"> getPage</span>(sURL)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-85" title="85">        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-86" title="86">            <span class="co">/* Ajax navigation is not supported */</span></a>
<a class="sourceLine" id="cb8-87" title="87">           <span class="va"> location</span>.<span class="at">assign</span>(sURL)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-88" title="88">        <span class="op">}</span></a>
<a class="sourceLine" id="cb8-89" title="89">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-90" title="90"></a>
<a class="sourceLine" id="cb8-91" title="91">    function <span class="at">processLink</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-92" title="92">       <span class="at"> if</span> (<span class="kw">this</span>.<span class="at">className</span> <span class="op">===</span> sAjaxClass) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-93" title="93">           <span class="at"> requestPage</span>(<span class="kw">this</span>.<span class="at">href</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-94" title="94">            return <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-95" title="95">        <span class="op">}</span></a>
<a class="sourceLine" id="cb8-96" title="96">        return <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-97" title="97">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-98" title="98"></a>
<a class="sourceLine" id="cb8-99" title="99">    function <span class="at">init</span> () <span class="op">{</span></a>
<a class="sourceLine" id="cb8-100" title="100">       <span class="va"> oPageInfo</span>.<span class="at">title</span> <span class="op">=</span> <span class="va">document</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-101" title="101">        <span class="va">history</span>.<span class="at">replaceState</span>(oPageInfo<span class="op">,</span> <span class="va">oPageInfo</span>.<span class="at">title</span><span class="op">,</span> <span class="va">oPageInfo</span>.<span class="at">url</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-102" title="102">       <span class="at"> for</span> (<span class="kw">var</span> oLink<span class="op">,</span> nIdx <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> nLen <span class="op">=</span> <span class="va">document</span>.<span class="va">links</span>.<span class="at">length</span><span class="op">;</span> nIdx <span class="op">&lt;</span> nLen<span class="op">;</span> <span class="va">document</span>.<span class="at">links</span>[nIdx<span class="op">++</span>].<span class="at">onclick</span> <span class="op">=</span> processLink)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-103" title="103">    <span class="op">}</span></a>
<a class="sourceLine" id="cb8-104" title="104"></a>
<a class="sourceLine" id="cb8-105" title="105">    const</a>
<a class="sourceLine" id="cb8-106" title="106"></a>
<a class="sourceLine" id="cb8-107" title="107">        <span class="co">/* customizable constants */</span></a>
<a class="sourceLine" id="cb8-108" title="108">        sTargetId <span class="op">=</span> <span class="st">&quot;ajax-content&quot;</span><span class="op">,</span> sViewKey <span class="op">=</span> <span class="st">&quot;view_as&quot;</span><span class="op">,</span> sAjaxClass <span class="op">=</span> <span class="st">&quot;ajax-nav&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-109" title="109"></a>
<a class="sourceLine" id="cb8-110" title="110">        <span class="co">/* not customizable constants */</span></a>
<a class="sourceLine" id="cb8-111" title="111">        rSearch <span class="op">=</span> <span class="ss">/</span><span class="sc">\?</span><span class="ss">.</span><span class="sc">*$</span><span class="ss">/</span><span class="op">,</span> rHost <span class="op">=</span> <span class="ss">/</span><span class="sc">^[^\?]*\?*</span><span class="ss">&amp;</span><span class="sc">*</span><span class="ss">/</span><span class="op">,</span> rView <span class="op">=</span> <span class="kw">new</span> <span class="at">RegExp</span>(<span class="st">&quot;&amp;&quot;</span> <span class="op">+</span> sViewKey <span class="op">+</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">=[^&amp;]*|&amp;*$&quot;</span><span class="op">,</span> <span class="st">&quot;i&quot;</span>)<span class="op">,</span> rEndQstMark <span class="op">=</span> <span class="ss">/</span><span class="sc">\?$</span><span class="ss">/</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-112" title="112">        oLoadingBox <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span>)<span class="op">,</span> oCover <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&quot;div&quot;</span>)<span class="op">,</span> oLoadingImg <span class="op">=</span> <span class="kw">new</span> <span class="at">Image</span>()<span class="op">,</span></a>
<a class="sourceLine" id="cb8-113" title="113">        oPageInfo <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-114" title="114">           <span class="dt"> title</span><span class="op">:</span> <span class="kw">null</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-115" title="115">           <span class="dt"> url</span><span class="op">:</span> <span class="va">location</span>.<span class="at">href</span></a>
<a class="sourceLine" id="cb8-116" title="116">        <span class="op">},</span> oHTTPStatus <span class="op">=</span> <span class="co">/* http://www.iana.org/assignments/http-status-codes/http-status-codes.xml */</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-117" title="117">           <span class="dt"> 100</span><span class="op">:</span> <span class="st">&quot;Continue&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-118" title="118">           <span class="dt"> 101</span><span class="op">:</span> <span class="st">&quot;Switching Protocols&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-119" title="119">           <span class="dt"> 102</span><span class="op">:</span> <span class="st">&quot;Processing&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-120" title="120">           <span class="dt"> 200</span><span class="op">:</span> <span class="st">&quot;OK&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-121" title="121">           <span class="dt"> 201</span><span class="op">:</span> <span class="st">&quot;Created&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-122" title="122">           <span class="dt"> 202</span><span class="op">:</span> <span class="st">&quot;Accepted&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-123" title="123">           <span class="dt"> 203</span><span class="op">:</span> <span class="st">&quot;Non-Authoritative Information&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-124" title="124">           <span class="dt"> 204</span><span class="op">:</span> <span class="st">&quot;No Content&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-125" title="125">           <span class="dt"> 205</span><span class="op">:</span> <span class="st">&quot;Reset Content&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-126" title="126">           <span class="dt"> 206</span><span class="op">:</span> <span class="st">&quot;Partial Content&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-127" title="127">           <span class="dt"> 207</span><span class="op">:</span> <span class="st">&quot;Multi-Status&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-128" title="128">           <span class="dt"> 208</span><span class="op">:</span> <span class="st">&quot;Already Reported&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-129" title="129">           <span class="dt"> 226</span><span class="op">:</span> <span class="st">&quot;IM Used&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-130" title="130">           <span class="dt"> 300</span><span class="op">:</span> <span class="st">&quot;Multiple Choices&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-131" title="131">           <span class="dt"> 301</span><span class="op">:</span> <span class="st">&quot;Moved Permanently&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-132" title="132">           <span class="dt"> 302</span><span class="op">:</span> <span class="st">&quot;Found&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-133" title="133">           <span class="dt"> 303</span><span class="op">:</span> <span class="st">&quot;See Other&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-134" title="134">           <span class="dt"> 304</span><span class="op">:</span> <span class="st">&quot;Not Modified&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-135" title="135">           <span class="dt"> 305</span><span class="op">:</span> <span class="st">&quot;Use Proxy&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-136" title="136">           <span class="dt"> 306</span><span class="op">:</span> <span class="st">&quot;Reserved&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-137" title="137">           <span class="dt"> 307</span><span class="op">:</span> <span class="st">&quot;Temporary Redirect&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-138" title="138">           <span class="dt"> 308</span><span class="op">:</span> <span class="st">&quot;Permanent Redirect&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-139" title="139">           <span class="dt"> 400</span><span class="op">:</span> <span class="st">&quot;Bad Request&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-140" title="140">           <span class="dt"> 401</span><span class="op">:</span> <span class="st">&quot;Unauthorized&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-141" title="141">           <span class="dt"> 402</span><span class="op">:</span> <span class="st">&quot;Payment Required&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-142" title="142">           <span class="dt"> 403</span><span class="op">:</span> <span class="st">&quot;Forbidden&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-143" title="143">           <span class="dt"> 404</span><span class="op">:</span> <span class="st">&quot;Not Found&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-144" title="144">           <span class="dt"> 405</span><span class="op">:</span> <span class="st">&quot;Method Not Allowed&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-145" title="145">           <span class="dt"> 406</span><span class="op">:</span> <span class="st">&quot;Not Acceptable&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-146" title="146">           <span class="dt"> 407</span><span class="op">:</span> <span class="st">&quot;Proxy Authentication Required&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-147" title="147">           <span class="dt"> 408</span><span class="op">:</span> <span class="st">&quot;Request Timeout&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-148" title="148">           <span class="dt"> 409</span><span class="op">:</span> <span class="st">&quot;Conflict&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-149" title="149">           <span class="dt"> 410</span><span class="op">:</span> <span class="st">&quot;Gone&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-150" title="150">           <span class="dt"> 411</span><span class="op">:</span> <span class="st">&quot;Length Required&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-151" title="151">           <span class="dt"> 412</span><span class="op">:</span> <span class="st">&quot;Precondition Failed&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-152" title="152">           <span class="dt"> 413</span><span class="op">:</span> <span class="st">&quot;Request Entity Too Large&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-153" title="153">           <span class="dt"> 414</span><span class="op">:</span> <span class="st">&quot;Request-URI Too Long&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-154" title="154">           <span class="dt"> 415</span><span class="op">:</span> <span class="st">&quot;Unsupported Media Type&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-155" title="155">           <span class="dt"> 416</span><span class="op">:</span> <span class="st">&quot;Requested Range Not Satisfiable&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-156" title="156">           <span class="dt"> 417</span><span class="op">:</span> <span class="st">&quot;Expectation Failed&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-157" title="157">           <span class="dt"> 422</span><span class="op">:</span> <span class="st">&quot;Unprocessable Entity&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-158" title="158">           <span class="dt"> 423</span><span class="op">:</span> <span class="st">&quot;Locked&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-159" title="159">           <span class="dt"> 424</span><span class="op">:</span> <span class="st">&quot;Failed Dependency&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-160" title="160">           <span class="dt"> 425</span><span class="op">:</span> <span class="st">&quot;Unassigned&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-161" title="161">           <span class="dt"> 426</span><span class="op">:</span> <span class="st">&quot;Upgrade Required&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-162" title="162">           <span class="dt"> 427</span><span class="op">:</span> <span class="st">&quot;Unassigned&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-163" title="163">           <span class="dt"> 428</span><span class="op">:</span> <span class="st">&quot;Precondition Required&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-164" title="164">           <span class="dt"> 429</span><span class="op">:</span> <span class="st">&quot;Too Many Requests&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-165" title="165">           <span class="dt"> 430</span><span class="op">:</span> <span class="st">&quot;Unassigned&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-166" title="166">           <span class="dt"> 431</span><span class="op">:</span> <span class="st">&quot;Request Header Fields Too Large&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-167" title="167">           <span class="dt"> 500</span><span class="op">:</span> <span class="st">&quot;Internal Server Error&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-168" title="168">           <span class="dt"> 501</span><span class="op">:</span> <span class="st">&quot;Not Implemented&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-169" title="169">           <span class="dt"> 502</span><span class="op">:</span> <span class="st">&quot;Bad Gateway&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-170" title="170">           <span class="dt"> 503</span><span class="op">:</span> <span class="st">&quot;Service Unavailable&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-171" title="171">           <span class="dt"> 504</span><span class="op">:</span> <span class="st">&quot;Gateway Timeout&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-172" title="172">           <span class="dt"> 505</span><span class="op">:</span> <span class="st">&quot;HTTP Version Not Supported&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-173" title="173">           <span class="dt"> 506</span><span class="op">:</span> <span class="st">&quot;Variant Also Negotiates (Experimental)&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-174" title="174">           <span class="dt"> 507</span><span class="op">:</span> <span class="st">&quot;Insufficient Storage&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-175" title="175">           <span class="dt"> 508</span><span class="op">:</span> <span class="st">&quot;Loop Detected&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-176" title="176">           <span class="dt"> 509</span><span class="op">:</span> <span class="st">&quot;Unassigned&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-177" title="177">           <span class="dt"> 510</span><span class="op">:</span> <span class="st">&quot;Not Extended&quot;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-178" title="178">           <span class="dt"> 511</span><span class="op">:</span> <span class="st">&quot;Network Authentication Required&quot;</span></a>
<a class="sourceLine" id="cb8-179" title="179">        <span class="op">};</span></a>
<a class="sourceLine" id="cb8-180" title="180"></a>
<a class="sourceLine" id="cb8-181" title="181">    var</a>
<a class="sourceLine" id="cb8-182" title="182"></a>
<a class="sourceLine" id="cb8-183" title="183">        oReq<span class="op">,</span> bIsLoading <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> bUpdateURL <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-184" title="184"></a>
<a class="sourceLine" id="cb8-185" title="185">   <span class="va"> oLoadingBox</span>.<span class="at">id</span> <span class="op">=</span> <span class="st">&quot;ajax-loader&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-186" title="186">   <span class="va"> oCover</span>.<span class="at">onclick</span> <span class="op">=</span> abortReq<span class="op">;</span></a>
<a class="sourceLine" id="cb8-187" title="187">   <span class="va"> oLoadingImg</span>.<span class="at">src</span> <span class="op">=</span> <span class="st">&quot;data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-188" title="188">   <span class="va"> oCover</span>.<span class="at">appendChild</span>(oLoadingImg)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-189" title="189">   <span class="va"> oLoadingBox</span>.<span class="at">appendChild</span>(oCover)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-190" title="190"></a>
<a class="sourceLine" id="cb8-191" title="191">    onpopstate <span class="op">=</span> <span class="kw">function</span> (oEvent) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-192" title="192">        bUpdateURL <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-193" title="193">       <span class="va"> oPageInfo</span>.<span class="at">title</span> <span class="op">=</span> <span class="va">oEvent</span>.<span class="va">state</span>.<span class="at">title</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-194" title="194">       <span class="va"> oPageInfo</span>.<span class="at">url</span> <span class="op">=</span> <span class="va">oEvent</span>.<span class="va">state</span>.<span class="at">url</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-195" title="195">       <span class="at"> getPage</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-196" title="196">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-197" title="197"></a>
<a class="sourceLine" id="cb8-198" title="198">   <span class="va"> window</span>.<span class="at">addEventListener</span> <span class="op">?</span> <span class="at">addEventListener</span>(<span class="st">&quot;load&quot;</span><span class="op">,</span> init<span class="op">,</span> <span class="kw">false</span>) : <span class="va">window</span>.<span class="at">attachEvent</span> <span class="op">?</span> <span class="at">attachEvent</span>(<span class="st">&quot;onload&quot;</span><span class="op">,</span> init) : (onload <span class="op">=</span> init)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-199" title="199"></a>
<a class="sourceLine" id="cb8-200" title="200">    <span class="co">// Public methods</span></a>
<a class="sourceLine" id="cb8-201" title="201"></a>
<a class="sourceLine" id="cb8-202" title="202">   <span class="va"> this</span>.<span class="at">open</span> <span class="op">=</span> requestPage<span class="op">;</span></a>
<a class="sourceLine" id="cb8-203" title="203">   <span class="va"> this</span>.<span class="at">stop</span> <span class="op">=</span> abortReq<span class="op">;</span></a>
<a class="sourceLine" id="cb8-204" title="204">   <span class="va"> this</span>.<span class="at">rebuildLinks</span> <span class="op">=</span> init<span class="op">;</span></a>
<a class="sourceLine" id="cb8-205" title="205"></a>
<a class="sourceLine" id="cb8-206" title="206"><span class="op">}</span>)()<span class="op">;</span></a></code></pre></div>
<p>For more information, please see: <a href="/en-US/docs/Web/API/History_API/Working_with_the_History_API">Working with the History API</a>.</p>
<h2 id="see-also">See also</h2>
<ul>
<li>{{ domxref(“window.history”) }}</li>
<li>{{ domxref(“WindowEventHandlers.onpopstate”) }}</li>
</ul>
