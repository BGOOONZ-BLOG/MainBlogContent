<p>{{APIRef(“HTML DOM”)}}</p>
<p><strong><code>PopStateEvent</code></strong> is an event handler for the {{Event(“popstate”)}} event on the window.</p>
<p>A <code>popstate</code> event is dispatched to the window every time the active history entry changes between two history entries for the same document. If the history entry being activated was created by a call to <code>history.pushState()</code> or was affected by a call to <code>history.replaceState()</code>, the <code>popstate</code> event’s <code>state</code> property contains a copy of the history entry’s state object.</p>
<blockquote>
<p><strong>Note:</strong> Just calling <code>history.pushState()</code> or <code>history.replaceState()</code> won’t trigger a <code>popstate</code> event. The <code>popstate</code> event is only triggered by doing a browser action such as a clicking on the back button (or calling <code>history.back()</code> in JavaScript). And the event is only triggered when the user navigates between two history entries for the same document.</p>
</blockquote>
<blockquote>
<p><strong>Note:</strong> Browsers used to handle the <code>popstate</code> event differently on page load, but now they behave the same. Firefox never emitted a popstate event on page load. Chrome did until version 34, while Safari did until version 10.0.</p>
</blockquote>
<h2 id="syntax">Syntax</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="va">window</span>.<span class="at">onpopstate</span> <span class="op">=</span> funcRef<span class="op">;</span></a></code></pre></div>
<ul>
<li><code>funcRef</code> is a handler function.</li>
</ul>
<h2 id="the-popstate-event">The popstate event</h2>
<p>As an example, a page at <code>http://example.com/example.html</code> running the following code will generate alerts as indicated:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="va">window</span>.<span class="at">onpopstate</span> <span class="op">=</span> <span class="kw">function</span>(event) <span class="op">{</span></a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="at">alert</span>(<span class="st">&quot;location: &quot;</span> <span class="op">+</span> <span class="va">document</span>.<span class="at">location</span> <span class="op">+</span> <span class="st">&quot;, state: &quot;</span> <span class="op">+</span> <span class="va">JSON</span>.<span class="at">stringify</span>(<span class="va">event</span>.<span class="at">state</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="op">};</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="va">history</span>.<span class="at">pushState</span>(<span class="op">{</span><span class="dt">page</span><span class="op">:</span> <span class="dv">1</span><span class="op">},</span> <span class="st">&quot;title 1&quot;</span><span class="op">,</span> <span class="st">&quot;?page=1&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="va">history</span>.<span class="at">pushState</span>(<span class="op">{</span><span class="dt">page</span><span class="op">:</span> <span class="dv">2</span><span class="op">},</span> <span class="st">&quot;title 2&quot;</span><span class="op">,</span> <span class="st">&quot;?page=2&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="va">history</span>.<span class="at">replaceState</span>(<span class="op">{</span><span class="dt">page</span><span class="op">:</span> <span class="dv">3</span><span class="op">},</span> <span class="st">&quot;title 3&quot;</span><span class="op">,</span> <span class="st">&quot;?page=3&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="va">history</span>.<span class="at">back</span>()<span class="op">;</span> <span class="co">// alerts &quot;location: http://example.com/example.html?page=1, state: {&quot;page&quot;:1}&quot;</span></a>
<a class="sourceLine" id="cb2-9" title="9"><span class="va">history</span>.<span class="at">back</span>()<span class="op">;</span> <span class="co">// alerts &quot;location: http://example.com/example.html, state: null</span></a>
<a class="sourceLine" id="cb2-10" title="10"><span class="va">history</span>.<span class="at">go</span>(<span class="dv">2</span>)<span class="op">;</span>  <span class="co">// alerts &quot;location: http://example.com/example.html?page=3, state: {&quot;page&quot;:3}</span></a></code></pre></div>
<p>Note that even though the original history entry (for <code>http://example.com/example.html</code>) has no state object associated with it, a <code>popstate</code> event is still fired when we activate that entry after the second call to <code>history.back()</code>.</p>
<h2 id="specifications">Specifications</h2>
<p>{{Specifications}}</p>
<h2 id="browser-compatibility">Browser compatibility</h2>
<p>{{Compat}}</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="/en-US/docs/Web/API/History_API">Manipulating the browser history</a></li>
<li><a href="/en-US/docs/Web/API/History_API/Example">Ajax navigation example</a></li>
</ul>
