<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Generic Sensor API</title>
  <meta content="WD" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2016/W3C-WD" rel="stylesheet">
  <link href="https://www.w3.org/2008/site/images/favicon.ico" rel="icon">
  <meta content="Bikeshed 1.0.0" name="generator">
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">Generic Sensor API</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">W3C Working Draft, <time class="dt-updated" datetime="2016-08-30">30 August 2016</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://www.w3.org/TR/2016/WD-generic-sensor-20160830/">https://www.w3.org/TR/2016/WD-generic-sensor-20160830/</a>
     <dt>Latest published version:
     <dd><a href="https://www.w3.org/TR/generic-sensor/">https://www.w3.org/TR/generic-sensor/</a>
     <dt>Editor's Draft:
     <dd><a href="https://w3c.github.io/sensors/">https://w3c.github.io/sensors/</a>
     <dt>Previous Versions:
     <dd><a href="https://www.w3.org/TR/2016/WD-generic-sensor-20160324/" rel="previous">https://www.w3.org/TR/2016/WD-generic-sensor-20160324/</a>
     <dd><a href="https://www.w3.org/TR/2015/WD-generic-sensor-20151015/" rel="previous">https://www.w3.org/TR/2015/WD-generic-sensor-20151015/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/sensors/commits/gh-pages/index.bs">https://github.com/w3c/sensors/commits/gh-pages/index.bs</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-device-apis@w3.org?subject=%5Bgeneric-sensor%5D%20YOUR%20TOPIC%20HERE">public-device-apis@w3.org</a> with subject line “<kbd>[generic-sensor] <i data-lt="">… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-device-apis/" rel="discussion">archives</a>)</span>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/sensors/issues/">GitHub</a>
     <dd><span><a href="https://github.com/w3c/sensors/milestones/Level%201">Level 1 Issues</a></span>
     <dd><span><a href="https://github.com/w3c/sensors/milestones/Level%202">Level 2 Issues</a></span>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard" data-editor-id="78102"><a class="p-name fn u-email email" href="mailto:tobie@sensors.codespeaks.com">Tobie Langel</a> (<span class="p-org org">Intel Corporation</span>)
     <dd class="editor p-author h-card vcard" data-editor-id="50572"><span class="p-name fn">Rick Waldron</span> (<span class="p-org org">jQuery Foundation</span>)
     <dt>Bug Reports:
     <dd><span><a href="https://www.github.com/w3c/sensors/issues/new">via the w3c/sensors repository on GitHub</a></span>
     <dt>Test Suite:
     <dd><span><a href="https://github.com/w3c/web-platform-tests/tree/master/generic-sensor">web-platform-tests on GitHub</a></span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2016 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification defines a framework for exposing sensor data

to the Open Web Platform in a consistent way.
It does so by defining a blueprint for writing
specifications of concrete sensors along with an abstract Sensor interface
that can be extended to accommodate different sensor types.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of
  its publication. Other documents may supersede this document. A list of
  current W3C publications and the latest revision of this technical report
  can be found in the <a href="http://www.w3.org/TR/">W3C technical reports
  index at http://www.w3.org/TR/.</a></em> </p>
   <p> This document was published by the <a href="http://www.w3.org/2009/dap/">Device and Sensors Working Group</a> as a Working Draft. This document is intended to become a W3C Recommendation. </p>
   <p> If you wish to make comments regarding this document, please send them to <a href="mailto:public-device-apis@w3.org?Subject=%5Bgeneric-sensor%5D%20PUT%20SUBJECT%20HERE">public-device-apis@w3.org</a> (<a href="mailto:public-device-apis-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-device-apis/">archives</a>).
	When sending e-mail,
	please put the text “generic-sensor” in the subject,
	preferably like this:
	“[generic-sensor] <em>…summary of comment…</em>”.
	All comments are welcome. </p>
   <p> Publication as a Working Draft does not imply endorsement by the W3C
  Membership. This is a draft document and may be updated, replaced or
  obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#scope"><span class="secno">2</span> <span class="content">Scope</span></a>
    <li><a href="#background"><span class="secno">3</span> <span class="content">Background</span></a>
    <li><a href="#feature-detection"><span class="secno">4</span> <span class="content">A note on Feature Detection of Hardware Features</span></a>
    <li>
     <a href="#security-and-privacy"><span class="secno">5</span> <span class="content">Security and privacy considerations</span></a>
     <ol class="toc">
      <li><a href="#browsing-context"><span class="secno">5.1</span> <span class="content">Browsing Context</span></a>
      <li><a href="#secure-context"><span class="secno">5.2</span> <span class="content">Secure Context</span></a>
      <li><a href="#permissioning"><span class="secno">5.3</span> <span class="content">Obtaining Explicit User Permission</span></a>
     </ol>
    <li><a href="#concepts"><span class="secno">6</span> <span class="content">Concepts</span></a>
    <li>
     <a href="#model"><span class="secno">7</span> <span class="content">Model</span></a>
     <ol class="toc">
      <li><a href="#model-sensor-type"><span class="secno">7.1</span> <span class="content">Sensor Type</span></a>
      <li><a href="#model-sensor"><span class="secno">7.2</span> <span class="content">Sensor</span></a>
     </ol>
    <li>
     <a href="#api"><span class="secno">8</span> <span class="content">API</span></a>
     <ol class="toc">
      <li>
       <a href="#the-sensor-interface"><span class="secno">8.1</span> <span class="content">The Sensor Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-state"><span class="secno">8.1.1</span> <span class="content">Sensor.state</span></a>
        <li><a href="#sensor-reading"><span class="secno">8.1.2</span> <span class="content">Sensor.reading</span></a>
        <li><a href="#sensor-start"><span class="secno">8.1.3</span> <span class="content">Sensor.start()</span></a>
        <li><a href="#sensor-stop"><span class="secno">8.1.4</span> <span class="content">Sensor.stop()</span></a>
        <li><a href="#sensor-onerror"><span class="secno">8.1.5</span> <span class="content">Sensor.onerror</span></a>
        <li><a href="#sensor-onchange"><span class="secno">8.1.6</span> <span class="content">Sensor.onchange</span></a>
        <li><a href="#sensor-onstatechange"><span class="secno">8.1.7</span> <span class="content">Sensor.onstatechange</span></a>
        <li><a href="#event-handlers"><span class="secno">8.1.8</span> <span class="content">Event handlers</span></a>
       </ol>
      <li>
       <a href="#the-sensor-reading-interface"><span class="secno">8.2</span> <span class="content">The SensorReading Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-reading-timestamp"><span class="secno">8.2.1</span> <span class="content">SensorReading.timeStamp</span></a>
       </ol>
      <li>
       <a href="#the-sensor-reading-event-interface"><span class="secno">8.3</span> <span class="content">The SensorReadingEvent Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-reading-event-reading"><span class="secno">8.3.1</span> <span class="content">SensorReadingEvent.reading</span></a>
       </ol>
      <li>
       <a href="#the-sensor-error-event-interface"><span class="secno">8.4</span> <span class="content">The SensorErrorEvent Interface</span></a>
       <ol class="toc">
        <li><a href="#sensor-error-event-error"><span class="secno">8.4.1</span> <span class="content">SensorErrorEvent.error</span></a>
       </ol>
     </ol>
    <li>
     <a href="#abstract-operations"><span class="secno">9</span> <span class="content">Abstract Operations</span></a>
     <ol class="toc">
      <li><a href="#construct-sensor-object"><span class="secno">9.1</span> <span class="content">Construct Sensor Object</span></a>
      <li><a href="#register-a-sensor"><span class="secno">9.2</span> <span class="content">Register a Sensor</span></a>
      <li><a href="#unregister-a-sensor"><span class="secno">9.3</span> <span class="content">Unregister a Sensor</span></a>
      <li><a href="#set-sensor-settings"><span class="secno">9.4</span> <span class="content">Set Sensor Settings</span></a>
      <li><a href="#observe-a-sensor"><span class="secno">9.5</span> <span class="content">Observe a Sensor</span></a>
      <li><a href="#find-current-reporting-mode-of-a-sensor"><span class="secno">9.6</span> <span class="content">Find Current Reporting Mode of a Sensor</span></a>
      <li><a href="#find-the-polling-frequency-of-a-sensor"><span class="secno">9.7</span> <span class="content">Find the polling frequency of a Sensor</span></a>
      <li><a href="#update-state"><span class="secno">9.8</span> <span class="content">Update State</span></a>
      <li><a href="#update-current-reading"><span class="secno">9.9</span> <span class="content">Update Current Reading</span></a>
      <li><a href="#update-reading"><span class="secno">9.10</span> <span class="content">Update Reading</span></a>
      <li><a href="#handle-errors"><span class="secno">9.11</span> <span class="content">Handle Errors</span></a>
      <li><a href="#request-sensor-access"><span class="secno">9.12</span> <span class="content">Request Sensor Access</span></a>
     </ol>
    <li>
     <a href="#extensibility"><span class="secno">10</span> <span class="content">Extensibility</span></a>
     <ol class="toc">
      <li><a href="#naming"><span class="secno">10.1</span> <span class="content">Naming</span></a>
      <li><a href="#unit"><span class="secno">10.2</span> <span class="content">Unit</span></a>
      <li><a href="#high-vs-low-level"><span class="secno">10.3</span> <span class="content">Exposing High-Level vs. Low-Level Sensors</span></a>
      <li><a href="#multiple-sensors"><span class="secno">10.4</span> <span class="content">When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</span></a>
      <li><a href="#definition-reqs"><span class="secno">10.5</span> <span class="content">Definition Requirements</span></a>
      <li><a href="#permission-api"><span class="secno">10.6</span> <span class="content">Extending the Permission API</span></a>
      <li><a href="#example-webidl"><span class="secno">10.7</span> <span class="content">Example WebIDL</span></a>
     </ol>
    <li><a href="#acknowledgements"><span class="secno">11</span> <span class="content">Acknowledgements</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
      <li><a href="#conformance-classes"><span class="secno"></span> <span class="content">Conformance Classes</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>
   <p>Increasingly, sensor data is used in application development to
enable new use cases such as geolocation,
counting steps or head-tracking.
This is especially true on mobile devices where new sensors are added regularly.</p>
   <p>Exposing sensor data to the Web
has so far been both slow-paced and ad-hoc.
Few sensors are already exposed to the Web.
When they are, it is often in ways that limit their possible use cases
(for example by exposing abstractions that are too <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-1">high-level</a> and which don’t perform well enough).
APIs also vary greatly from one sensor to the next
which increases the cognitive burden of Web application developers
and slows development.</p>
   <p>The goal of the Generic Sensor API is to
promote consistency across sensor APIs,
enable advanced use cases thanks to performant <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-1">low-level</a> APIs,
and increase the pace at which new sensors can be exposed to the Web
by simplifying the specification and implementation processes.</p>
   <h2 class="heading settled" data-level="2" id="scope"><span class="secno">2. </span><span class="content">Scope</span><a class="self-link" href="#scope"></a></h2>
   <p><em>This section is non-normative</em>.</p>
   <p>The scope of this specification is currently limited
to specifying primitives
which enable expose data from local sensors.</p>
   <p>Exposing remote sensors
or sensors found on personal area networks
is out of scope.
As work in these areas mature,
it is possible that common, lower-level primitives be found,
in which case this specification will be updated accordingly.
This should have little to no effects on implementations, however.</p>
   <p>This specification also does not currently expose a
sensor discovery API.
This is because the limited number of sensors currently available to User Agents
does not warrant such an API.
Using feature detection, such as described in <a href="#feature-detection">§4 A note on Feature Detection of Hardware Features</a>,
is good enough for now.
A subsequent version of this specification might specify such an API,
and the current API has been designed with this in mind.</p>
   <h2 class="heading settled" data-level="3" id="background"><span class="secno">3. </span><span class="content">Background</span><a class="self-link" href="#background"></a></h2>
   <p><em>This section is non-normative</em>.</p>
   <p>The Generic Sensor API is designed to make the most common use cases straightforward
while still enabling more complex use cases.</p>
   <p>Most devices deployed today do not carry more than one <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-1">sensor</a> of each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-1">sensor types</a>.
This shouldn’t come as a surprise since use cases for more than
a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-2">sensor</a> of a given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-2">type</a> are rare
and generally limited to specific <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-3">sensor types</a> such as
proximity sensors.</p>
   <p>The API therefore makes it easy to interact with
the device’s default (and often unique) <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-3">sensor</a> for each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-4">type</a> simply by instantiating the corresponding <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-1">Sensor</a></code> subclass.</p>
   <p>Indeed, without specific information identifying a particular <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-4">sensor</a> of a given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-5">type</a>,
the default <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-5">sensor</a> is chosen.</p>
   <div class="example" id="example-83e37544">
    <a class="self-link" href="#example-83e37544"></a> Listening to geolocation changes: 
<pre class="highlight"><span></span><span class="kd">let</span> <span class="nx">sensor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeolocationSensor</span><span class="p">({</span> <span class="nx">accuracy</span><span class="o">:</span> <span class="s2">"high"</span> <span class="p">});</span>

<span class="nx">sensor</span><span class="p">.</span><span class="nx">onchange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">coords</span> <span class="o">=</span> <span class="p">[</span><span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">latitude</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">longitude</span><span class="p">];</span>
    <span class="nx">updateMap</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">coords</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">accuracy</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">sensor</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">updateMap</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">};</span>
</pre>
   </div>
   <p class="note" role="note">Note: extension to this specification may choose not to define a default sensor
when doing so wouldn’t make sense.
For example, it might be difficult to agree on an obvious default <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-6">sensor</a> for
proximity <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-7">sensors</a>.</p>
   <p>In cases where
multiple <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-8">sensors</a> of the same <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-6">type</a> may coexist on the same device,
specification extension will have to
define ways to uniquely identify each one.</p>
   <div class="example" id="example-6819b29f">
    <a class="self-link" href="#example-6819b29f"></a> For example checking the pressure of the left rear tire: 
<pre class="highlight"><span></span><span class="kd">let</span> <span class="nx">sensor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DirectTirePressureSensor</span><span class="p">({</span> <span class="nx">position</span><span class="o">:</span> <span class="s2">"rear"</span><span class="p">,</span> <span class="nx">side</span><span class="o">:</span> <span class="s2">"left"</span> <span class="p">});</span>
<span class="nx">sensor</span><span class="p">.</span><span class="nx">onchange</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">=></span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">pressure</span><span class="p">);</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="4" id="feature-detection"><span class="secno">4. </span><span class="content">A note on Feature Detection of Hardware Features</span><a class="self-link" href="#feature-detection"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Feature detection is an established Web development best practice.
Resources on the topic are plentiful on and offline and
the purpose of this section is not to discuss it further,
but rather to put it in the context of detecting hardware-dependent features.</p>
   <p>Consider the below feature detection examples:</p>
   <div class="example" id="example-e20db9c8">
    <a class="self-link" href="#example-e20db9c8"></a> 
<pre class="highlight"><span></span><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Gyroscope</span> <span class="o">===</span> <span class="s2">"function"</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// run in circles...</span>
<span class="p">}</span>
        
<span class="k">if</span> <span class="p">(</span><span class="s2">"ProximitySensor"</span> <span class="k">in</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// watch out!</span>
<span class="p">}</span>
        
<span class="k">if</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">AmbientLightSensor</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// go dark...</span>
<span class="p">}</span>
        
<span class="c1">// etc.</span>
</pre>
   </div>
   <p>All of these tell you something about the presence
and possible characteristics of an API.
They do not tell you anything, however, about whether
that API is actually connected to a real hardware sensor,
whether that sensor works,
if its still connected,
or even whether the user is going to allow you to access it.
Note you can check the latter using the Permissions API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a>.</p>
   <p>In an ideal world, information about the underlying status
would be available upfront.
The problem with this is twofold.
First, getting this information out of the hardware is costly,
in both performance and battery time,
and would sit in the critical path.
Secondly, the status of the underlying hardware can evolve over time.
The user can revoke permission, the connection to the sensor be severed,
the operating system may decide to limit sensor usage below a certain battery threshold,
etc.</p>
   <p>Therefore, an effective strategy is to combine feature detection,
which checks whether an API for the sought-after sensor actually exists,
and defensive programming which includes:</p>
   <ol>
    <li data-md="">
     <p>checking for error thrown when instantiating a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-2">Sensor</a></code> object,</p>
    <li data-md="">
     <p>listening to errors emitted by it,</p>
    <li data-md="">
     <p>handling all of the above graciously so that the user’s experience is
  enhanced by the possible usage of a sensor, not degraded by its
  absence.</p>
   </ol>
   <div class="example" id="example-a18661d1">
    <a class="self-link" href="#example-a18661d1"></a> 
<pre class="highlight"><span></span><span class="k">try</span> <span class="p">{</span> <span class="c1">// No need to feature detect thanks to try..catch block.</span>
    <span class="kd">let</span> <span class="nx">sensor</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GeolocationSensor</span><span class="p">({});</span>
    <span class="nx">sensor</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
    <span class="nx">sensor</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">error</span> <span class="o">=></span> <span class="nx">gracefullyDegrade</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="nx">sensor</span><span class="p">.</span><span class="nx">onchange</span> <span class="o">=</span> <span class="nx">event</span> <span class="o">=></span> <span class="nx">updatePosition</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">reading</span><span class="p">.</span><span class="nx">coords</span><span class="p">);</span>
<span class="p">}</span> <span class="k">catch</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">gracefullyDegrade</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
<span class="p">}</span>
</pre>
   </div>
   <h2 class="heading settled" data-level="5" id="security-and-privacy"><span class="secno">5. </span><span class="content">Security and privacy considerations</span><a class="self-link" href="#security-and-privacy"></a></h2>
   <p>Privacy risks can arise when <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-9">sensors</a> are used
with each other,
in combination with other functionality,
or when used over time,
specifically with the risk of correlation of data
and user identification through fingerprinting.
Web application developers using these JavaScript APIs should
consider how this information might be correlated with other information
and the privacy risks that might be created.
The potential risks of collection of such data over a longer period of time
should also be considered.</p>
   <p>Variations in <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-1">sensor readings</a> as well as event firing rates
offer the possibility of fingerprinting to identify users.
User agents may reduce the risk by
limiting event rates available to web application developers.</p>
   <p class="note" role="note">Note: do we really want this mitigation strategy?</p>
   <p>If the same JavaScript code using the API can be
used simultaneously in different window contexts on the same device
it may be possible for that code to correlate the user across those two contexts,
creating unanticipated tracking mechanisms.</p>
   <p>User agents should consider providing the user
an indication of when the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-10">sensor</a> is used
and allowing the user to disable it.</p>
   <p>Web application developers that use <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-11">sensors</a> should
perform a privacy assessment of their application
taking all aspects of their application into consideration.</p>
   <p>Ability to detect a full working set of sensors on a device can form an
identifier and could be used to fingerprinting.</p>
   <p>A combination of selected sensors can potentially be used to form an out of
band communication channel between devices.</p>
   <p>Sensors can potentially be used in cross-device linking and tracking of a user.</p>
   <h3 class="heading settled" data-level="5.1" id="browsing-context"><span class="secno">5.1. </span><span class="content">Browsing Context</span><a class="self-link" href="#browsing-context"></a></h3>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-2">Sensor readings</a> must only be available in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a> to avoid the privacy risk of
sharing the information defined in this specification
(and specifications extending it)
with contexts unfamiliar to the user.
For example, a mobile device will only fire the event on
the active tab, and not on the background tabs or within iframes.</p>
   <h3 class="heading settled" data-level="5.2" id="secure-context"><span class="secno">5.2. </span><span class="content">Secure Context</span><a class="self-link" href="#secure-context"></a></h3>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-3">Sensor readings</a> are explicitly flagged by the
Secure Contexts specification <a data-link-type="biblio" href="#biblio-powerful-features">[POWERFUL-FEATURES]</a> as a high-value target for network attackers.
As such, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-4">sensor readings</a> must only be available
within a <a data-link-type="dfn" href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">secure context</a>.</p>
   <h3 class="heading settled" data-level="5.3" id="permissioning"><span class="secno">5.3. </span><span class="content">Obtaining Explicit User Permission</span><a class="self-link" href="#permissioning"></a></h3>
   <p>Permission to access <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-5">sensor readings</a> must be obtained
through the Permissions API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a>.</p>
   <h2 class="heading settled" data-level="6" id="concepts"><span class="secno">6. </span><span class="content">Concepts</span><a class="self-link" href="#concepts"></a></h2>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-12">sensor</a> measures different physical quantities
and provide corresponding <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="raw-sensor-readings">raw sensor readings</dfn> which are a source of information about the user and their environment.</p>
   <p>Known, <em>predictable</em> discrepancies between <a data-link-type="dfn" href="#raw-sensor-readings" id="ref-for-raw-sensor-readings-1">raw sensor readings</a> and the corresponding physical quantities being measured
are corrected through <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="calibration">calibration</dfn>.</p>
   <p>Known but <em>unpredictable</em> discrepancies need to be addressed dynamically
through a process called <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-1">sensor fusion</a>.</p>
   <p><a data-link-type="dfn" href="#calibration" id="ref-for-calibration-1">Calibrated</a> <a data-link-type="dfn" href="#raw-sensor-readings" id="ref-for-raw-sensor-readings-2">raw sensor readings</a> are referred to as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-readings">sensor readings</dfn>,
whether or not they have undergone <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-2">sensor fusion</a>.</p>
   <p>Different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-7">sensor types</a> measure different physical quantities
such as temperature, air pressure, heart-rate, or luminosity.</p>
   <p>For the purpose of this specification we distinguish between <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-2">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-2">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-8">sensor types</a>.</p>
   <p><a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-9">Sensor types</a> which are characterized by their implementation
are referred to as <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="low-level">low-level</dfn> sensors.
For example a Gyroscope is a <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-3">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-10">sensor type</a>.</p>
   <p><a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-13">Sensors</a> named after their <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-6">readings</a>,
regardless of the implementation,
are said to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="high-level">high-level</dfn> sensors.
For instance, geolocation sensors provide information about the user’s location,
but the precise means by which this data is obtained
is purposefully left opaque
(it could come from a GPS chip, network cell triangulation,
wifi networks, etc. or any combination of the above)
and depends on various, implementation-specific heuristics. <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-3">High-level</a> sensors are generally the fruits of
applying algorithms to <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-4">low-level</a> sensors—<wbr>for example, a pedometer can be built using only the output of a gyroscope—<wbr>or of <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-3">sensor fusion</a>.</p>
   <p>That said, the distinction between <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-4">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-5">low-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-11">sensor types</a> is somewhat arbitrary and the line between the two is often blurred.
For instance, a barometer, which measures air pressure,
would be considered <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-6">low-level</a> for most common purposes,
even though it is the product of the <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-4">sensor fusion</a> of
resistive piezo-electric pressure and temperature sensors.
Exposing the sensors that compose it would serve no practical purpose;
who cares about the temperature of a piezo-electric sensor?
A pressure-altimeter would probably fall in the same category,
while a nondescript altimeter—<wbr>which could get its data from either a barometer or a GPS signal—<wbr>would clearly be categorized as a <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-5">high-level</a> <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-12">sensor type</a>.</p>
   <p>Because the distinction is somewhat blurry,
extensions to this specification (see <a href="#extensibility">§10 Extensibility</a>)
are encouraged to provide domain-specific definitions of <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-6">high-level</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-7">low-level</a> sensors
for the given <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-13">sensor types</a> they are targeting.</p>
   <p><a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-7">Sensor readings</a> from different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-14">sensor types</a> can be combined together
through a process called <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-fusion">sensor fusion</dfn>.
This process provides <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-7">higher-level</a> or
more accurate data (often at the cost of increased latency).
For example, the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-8">readings</a> of a three-axis magnetometer
needs to be combined with the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-9">readings</a> of an accelerometer
to provide a correct bearing.</p>
   <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="smart-sensors">Smart sensors</dfn> and <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-hubs">sensor hubs</dfn> have built-in compute resources which allow them
to carry out <a data-link-type="dfn" href="#calibration" id="ref-for-calibration-2">calibration</a> and <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-5">sensor fusion</a> at the hardware level,
freeing up CPU resources
and lowering battery consumption
in the process.</p>
   <p>But <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-6">sensor fusion</a> can also be carried out in software.
This is particularly useful when performance requirements can only be met
by relying on application-specific data.
For example, head tracking for virtual or augmented reality applications,
requires extremely low latency
to avoid causing motion sickness.
That low-latency is best provided
by using the raw output of a gyroscope,
and waiting for quick rotational movements of the head
to compensate for drift.</p>
   <p class="note" role="note">Note: <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-14">sensors</a> created through <a data-link-type="dfn" href="#sensor-fusion" id="ref-for-sensor-fusion-7">sensor fusion</a> are sometimes
called virtual or synthetic sensors.
However, the specification doesn’t make any practical differences between them,
preferring instead to differentiate <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-15">sensors</a> as to whether they describe
the kind of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-10">readings</a> produced--these are <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-8">high-level</a> sensors—<wbr>or how the sensor is implemented (<a data-link-type="dfn" href="#low-level" id="ref-for-low-level-8">low-level</a> sensors).</p>
   <p><a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-16">Sensors</a> have different <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reporting-modes">reporting modes</dfn>.
When <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-11">sensor readings</a> are reported at regular intervals,
at an ajustable <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="frequency">frequency</dfn> measured in hertz (Hz),
the <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-1">reporting mode</a> is said to be <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="periodic">periodic</dfn>.
When it is only reported upon measurable change,
the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-17">sensor</a> is said to be in <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="auto">auto</dfn> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-2">reporting mode</a>.</p>
   <p><a data-link-type="dfn" href="#auto" id="ref-for-auto-1">Auto</a> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-3">reporting mode</a> can give the user agent
more latitude to carry out power- or CPU-saving strategies
and should generally be favored. <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-1">Periodic</a> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-4">reporting mode</a>, on the other hand,
allows a much more fine-grained approach
and is essential for use cases with, for example,
low latency requirements.</p>
   <p class="note" role="note">Note: <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-5">reporting mode</a> is distinct from,
but related to, <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-12">sensor readings</a> acquisition.
If <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-18">sensors</a> are polled at regular interval,
as is generally the case, <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-6">reporting mode</a> can be either <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-2">periodic</a> or <a data-link-type="dfn" href="#auto" id="ref-for-auto-2">auto</a>.
However, when the underlying implementation itself only provides <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-13">sensor readings</a> when it measures change,
perhaps because is is relying on <a data-link-type="dfn" href="#smart-sensors" id="ref-for-smart-sensors-1">smart sensors</a> or a <a data-link-type="dfn" href="#sensor-hubs" id="ref-for-sensor-hubs-1">sensor hubs</a>,
the <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-7">reporting mode</a> cannot be <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-3">periodic</a>,
as that would require data inference.</p>
   <h2 class="heading settled" data-level="7" id="model"><span class="secno">7. </span><span class="content">Model</span><a class="self-link" href="#model"></a></h2>
   <h3 class="heading settled" data-level="7.1" id="model-sensor-type"><span class="secno">7.1. </span><span class="content">Sensor Type</span><a class="self-link" href="#model-sensor-type"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-type">sensor type</dfn> has one or many associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-19">sensors</a>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-15">sensor type</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="sensor-subclass">Sensor subclass</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-16">sensor type</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="sensorreading-subclass">SensorReading subclass</dfn>.
Attributes of the <a data-link-type="dfn" href="#sensorreading-subclass" id="ref-for-sensorreading-subclass-1">SensorReading subclass</a> subclass that
hold <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-14">sensor readings</a> must be readonly.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-17">sensor type</a> may have a <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="default-sensor">default sensor</dfn>.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-18">sensor type</a> has an associated set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="supported-reporting-modes">supported reporting modes</dfn>,
which cannot be empty and must be picked from the following: <a data-link-type="dfn" href="#auto" id="ref-for-auto-3">auto</a> and <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-4">periodic</a>.</p>
   <p>If a <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-19">sensor type</a> has more than one <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-20">sensor</a>,
it must have a set of associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="identifying-parameters">identifying parameters</dfn> to select the right <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-21">sensor</a> to associate to each new <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-3">Sensor</a></code> objects.</p>
   <p>A <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-20">sensor type</a> has an associated abstract operation to <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="Construct SensorReading Object" id="construct-sensorreading-object">construct a SensorReading object</dfn> which takes the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-15">sensor readings</a> emitted by the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-22">sensor</a> and
returns an initialized <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-1">SensorReading</a></code> object
which uses the <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-21">sensor type</a>’s associated <a data-link-type="dfn" href="#sensorreading-subclass" id="ref-for-sensorreading-subclass-2">SensorReading subclass</a>.</p>
   <h3 class="heading settled" data-level="7.2" id="model-sensor"><span class="secno">7.2. </span><span class="content">Sensor</span><a class="self-link" href="#model-sensor"></a></h3>
   <p>A <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="concept-sensor">sensor</dfn> has an associated set of <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="activated-sensor-objects">activated Sensor objects</dfn>. This set is initially empty.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-23">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-reading">current reading</dfn>,
which can initially be <code>null</code> or
be set to a <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-2">SensorReading</a></code> object, that was cached in a user-agent-specific way.</p>
   <p class="note" role="note">Note: there are additional privacy concerns when using cached <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-16">readings</a> which predate either <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">navigating</a> to resources in the current <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a>,
or being granted permission to access the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-24">sensor</a>.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-25">sensor</a> is said to <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="supports periodic reporting mode" data-noexport="" id="supports-periodic-reporting-mode">support periodic reporting mode</dfn> if
its associated <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-22">sensor type</a>’s <a data-link-type="dfn" href="#supported-reporting-modes" id="ref-for-supported-reporting-modes-1">supported reporting modes</a> contains the <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-5">periodic</a> <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-8">reporting mode</a>.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-26">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="reporting-flag">reporting flag</dfn> which is initially unset.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-27">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-reporting-mode">current reporting mode</dfn> which is initially <code>undefined</code>.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-28">sensor</a> has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="current-polling-frequency">current polling frequency</dfn> which is initially <code>null</code>.</p>
   <p>A <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-29">sensor</a> has an associated abstract operation to <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-lt="retrieve the sensor permission" id="retrieve-the-sensor-permission">retrieve its permission</dfn> which
takes a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-4">Sensor</a></code> object as input and
returns a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a> and, eventually, its <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-associated-permissiondescriptor">associated PermissionDescriptor</a>.</p>
   <h2 class="heading settled" data-level="8" id="api"><span class="secno">8. </span><span class="content">API</span><a class="self-link" href="#api"></a></h2>
   <h3 class="heading settled" data-level="8.1" id="the-sensor-interface"><span class="secno">8.1. </span><span class="content">The Sensor Interface</span><a class="self-link" href="#the-sensor-interface"></a></h3>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensor">Sensor</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org#interface-eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-sensorstate" id="ref-for-enumdef-sensorstate-1">SensorState</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-readonly="" data-type="SensorState" id="dom-sensor-state">state</dfn>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#sensorreading" id="ref-for-sensorreading-3">SensorReading</a>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-readonly="" data-type="SensorReading?" id="dom-sensor-reading">reading</dfn>;
  <span class="kt">void</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="method" data-export="" data-lt="start()" id="dom-sensor-start">start</dfn>();
  <span class="kt">void</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Sensor" data-dfn-type="method" data-export="" data-lt="stop()" id="dom-sensor-stop">stop</dfn>();
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <dfn class="nv idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onchange">onchange<a class="self-link" href="#dom-sensor-onchange"></a></dfn>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <dfn class="nv idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onstatechange">onstatechange<a class="self-link" href="#dom-sensor-onstatechange"></a></dfn>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <dfn class="nv idl-code" data-dfn-for="Sensor" data-dfn-type="attribute" data-export="" data-type="EventHandler" id="dom-sensor-onerror">onerror<a class="self-link" href="#dom-sensor-onerror"></a></dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-sensoroptions">SensorOptions</dfn> {
  <span class="kt">double</span>? <dfn class="nv dfn-paneled idl-code" data-dfn-for="SensorOptions" data-dfn-type="dict-member" data-export="" data-type="double? " id="dom-sensoroptions-frequency">frequency</dfn>;
};

<span class="kt">enum</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="enum" data-export="" id="enumdef-sensorstate">SensorState</dfn> {
  <dfn class="s dfn-paneled idl-code" data-dfn-for="SensorState" data-dfn-type="enum-value" data-export="" data-lt="&quot;idle&quot;|idle" id="dom-sensorstate-idle">"idle"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="SensorState" data-dfn-type="enum-value" data-export="" data-lt="&quot;activating&quot;|activating" id="dom-sensorstate-activating">"activating"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="SensorState" data-dfn-type="enum-value" data-export="" data-lt="&quot;active&quot;|active" id="dom-sensorstate-active">"active"</dfn>,
  <dfn class="s dfn-paneled idl-code" data-dfn-for="SensorState" data-dfn-type="enum-value" data-export="" data-lt="&quot;errored&quot;|errored" id="dom-sensorstate-errored">"errored"</dfn>
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-5">Sensor</a></code> object has an associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-30">sensor</a>.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-6">Sensor</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="state">state</dfn>,
which is one of <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-1">"idle"</a>, <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-activating" id="ref-for-dom-sensorstate-activating-1">"activating"</a>, <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-active" id="ref-for-dom-sensorstate-active-1">"active"</a>, and <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-errored" id="ref-for-dom-sensorstate-errored-1">"errored"</a>. It is initially <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-2">"idle"</a>.</p>
   <p>A <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-7">Sensor</a></code> object has an associated <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="desired-frequency">desired frequency</dfn>. It is initially <code>null</code>.</p>
   <p>Each <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-8">Sensor</a></code> object has a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a> called a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="sensor-task-source">sensor task source</dfn>, initially empty.
A <a data-link-type="dfn" href="#sensor-task-source" id="ref-for-sensor-task-source-1">sensor task source</a> can be enabled or disabled, and is initially enabled.
When enabled, the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a> must use it as one of its <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task sources</a>.
The <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">tasks</a> mentioned in this specification is the <a data-link-type="dfn" href="#sensor-task-source" id="ref-for-sensor-task-source-2">sensor task source</a>.</p>
   <p>When the <a data-link-type="dfn" href="https://w3c.github.io/page-visibility#dfn-visibility-states">visibility state</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a> in the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a> changes,
let <var>current_visibility_state</var> be the result of running the <a data-link-type="dfn" href="https://w3c.github.io/page-visibility#dfn-steps-to-determine-the-visibility-state">steps to determine the visibility state</a> of the <a data-link-type="dfn" href="https://dom.spec.whatwg.org/#concept-document">Document</a>.
If <var>current_visibility_state</var> is "visible", enable the sensor task source, otherwise, disable it.</p>
   <p class="note" role="note">Note: user agents are encouraged to stop sensor polling
when <a data-link-type="dfn" href="#sensor-task-source" id="ref-for-sensor-task-source-3">sensor task sources</a> are disabled in order
to save battery.</p>
   <h4 class="heading settled" data-level="8.1.1" id="sensor-state"><span class="secno">8.1.1. </span><span class="content">Sensor.state</span><a class="self-link" href="#sensor-state"></a></h4>
   <p>The <a class="idl-code" data-link-type="attribute" href="#dom-sensor-state" id="ref-for-dom-sensor-state-1">state</a> attribute represents a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-9">Sensor</a></code> object’s <a data-link-type="dfn" href="#state" id="ref-for-state-1">state</a>.</p>
   <h4 class="heading settled" data-level="8.1.2" id="sensor-reading"><span class="secno">8.1.2. </span><span class="content">Sensor.reading</span><a class="self-link" href="#sensor-reading"></a></h4>
   <p>When a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-10">Sensor</a></code>'s <a data-link-type="dfn" href="#state" id="ref-for-state-2">state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-active" id="ref-for-dom-sensorstate-active-2">"active"</a>,
its <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-1">reading</a> attribute must always point to the <a data-link-type="dfn" href="#current-reading" id="ref-for-current-reading-1">current reading</a> whatever the <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-1">frequency</a> so that
the <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-2">reading</a> attribute of two instances of the same <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-11">Sensor</a></code> interface
associated with the same <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-31">sensor</a> hold the same <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-4">SensorReading</a></code> during a single <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a> turn.</p>
   <h4 class="heading settled" data-level="8.1.3" id="sensor-start"><span class="secno">8.1.3. </span><span class="content">Sensor.start()</span><a class="self-link" href="#sensor-start"></a></h4>
   <div class="algorithm" data-algorithm="to start a sensor">
     The <a data-link-type="functionish" href="#dom-sensor-start" id="ref-for-dom-sensor-start-1">start()</a> method must run these steps or their <a data-link-type="dfn" href="#equivalent" id="ref-for-equivalent-1">equivalent</a>: 
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>’s <a data-link-type="dfn" href="#state" id="ref-for-state-3">state</a> is neither <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-3">"idle"</a> nor <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-errored" id="ref-for-dom-sensorstate-errored-2">"errored"</a>,</p>
      <ol>
       <li data-md="">
        <p>throw an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror">InvalidStateError</a>" exception and abort these steps.</p>
      </ol>
     <li data-md="">
      <p>Invoke the <a data-link-type="dfn" href="#update-state" id="ref-for-update-state-1">update state</a> algorithm passing <var>sensor_instance</var> and <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-activating" id="ref-for-dom-sensorstate-activating-2">"activating"</a> as the arguments.</p>
     <li data-md="">
      <p>Run these sub-steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md="">
        <p>Let <var>state</var> be the result of invoking the <a data-link-type="dfn" href="#request-sensor-access" id="ref-for-request-sensor-access-1">Request Sensor Access</a> abstract operation,
  passing it <var>sensor_instance</var> as argument.</p>
       <li data-md="">
        <p>If <var>state</var> is "granted",</p>
        <ol>
         <li data-md="">
          <p>Invoke <a data-link-type="dfn" href="#register-a-sensor" id="ref-for-register-a-sensor-1">Register a Sensor</a> passing it <var>sensor_instance</var> as argument.</p>
         <li data-md="">
          <p>Abort these sub-steps.</p>
        </ol>
       <li data-md="">
        <p>If <var>state</var> is "denied",</p>
        <ol>
         <li data-md="">
          <p>let <var>e</var> be the result of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-create-exception">creating an exception</a> named <a data-link-type="dfn" href="https://heycam.github.io/webidl/#notallowederror">NotAllowedError</a>.</p>
         <li data-md="">
          <p>Invoke the <a data-link-type="dfn" href="#handle-errors" id="ref-for-handle-errors-1">Handle Errors</a> abstract operation,
  passing it <var>e</var> and <var>sensor_instance</var> as arguments.</p>
         <li data-md="">
          <p>Abort these sub-steps.</p>
        </ol>
      </ol>
     <li data-md="">
      <p>return <code>undefined</code>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.1.4" id="sensor-stop"><span class="secno">8.1.4. </span><span class="content">Sensor.stop()</span><a class="self-link" href="#sensor-stop"></a></h4>
   <div class="algorithm" data-algorithm="to stop a sensor">
     The <a data-link-type="functionish" href="#dom-sensor-stop" id="ref-for-dom-sensor-stop-1">stop()</a> method must run these steps or their <a data-link-type="dfn" href="#equivalent" id="ref-for-equivalent-2">equivalent</a>: 
    <ol>
     <li data-md="">
      <p>If <var>sensor_instance</var>’s <a data-link-type="dfn" href="#state" id="ref-for-state-4">state</a> is either <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-4">"idle"</a> or <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-errored" id="ref-for-dom-sensorstate-errored-3">"errored"</a>, then</p>
      <ol>
       <li data-md="">
        <p>throw an "<a data-link-type="dfn" href="https://heycam.github.io/webidl/#invalidstateerror">InvalidStateError</a>" exception and abort these steps.</p>
      </ol>
     <li data-md="">
      <p>Set <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-3">reading</a> to <code>null</code>.</p>
     <li data-md="">
      <p>Invoke the <a data-link-type="dfn" href="#update-state" id="ref-for-update-state-2">update state</a> algorithm passing <var>sensor_instance</var> and <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-5">"idle"</a> as the arguments.</p>
     <li data-md="">
      <p>Run these sub-steps <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>:</p>
      <ol>
       <li data-md="">
        <p>Invoke <a data-link-type="dfn" href="#unregister-a-sensor" id="ref-for-unregister-a-sensor-1">Unregister a Sensor</a> passing it <var>sensor_instance</var> as argument.</p>
      </ol>
     <li data-md="">
      <p>return <code>undefined</code>.</p>
    </ol>
   </div>
   <h4 class="heading settled" data-level="8.1.5" id="sensor-onerror"><span class="secno">8.1.5. </span><span class="content">Sensor.onerror</span><a class="self-link" href="#sensor-onerror"></a></h4>
   <h4 class="heading settled" data-level="8.1.6" id="sensor-onchange"><span class="secno">8.1.6. </span><span class="content">Sensor.onchange</span><a class="self-link" href="#sensor-onchange"></a></h4>
   <h4 class="heading settled" data-level="8.1.7" id="sensor-onstatechange"><span class="secno">8.1.7. </span><span class="content">Sensor.onstatechange</span><a class="self-link" href="#sensor-onstatechange"></a></h4>
   <h4 class="heading settled" data-level="8.1.8" id="event-handlers"><span class="secno">8.1.8. </span><span class="content">Event handlers</span><a class="self-link" href="#event-handlers"></a></h4>
   <p>The following are the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handlers</a> (and their corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event types</a>)
that must be supported as attributes by the objects implementing the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-32">Sensor</a> interface:</p>
   <table class="simple">
    <thead>
     <tr>
      <th>event handler
      <th>event handler event type
    <tbody>
     <tr>
      <td><strong><code>onchange</code></strong>
      <td><code>change</code>
     <tr>
      <td><strong><code>onstatechange</code></strong>
      <td><code>statechange</code>
     <tr>
      <td><strong><code>onerror</code></strong>
      <td><code>error</code>
   </table>
   <h3 class="heading settled" data-level="8.2" id="the-sensor-reading-interface"><span class="secno">8.2. </span><span class="content">The SensorReading Interface</span><a class="self-link" href="#the-sensor-reading-interface"></a></h3>
<pre class="idl highlight def"><span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensorreading">SensorReading</dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="SensorReading" data-dfn-type="attribute" data-export="" data-readonly="" data-type="DOMHighResTimeStamp" id="dom-sensorreading-timestamp">timeStamp</dfn>;
};
</pre>
   <p>A <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-5">SensorReading</a></code> represents the state of a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-33">sensor</a> at a given point in time.</p>
   <h4 class="heading settled" data-level="8.2.1" id="sensor-reading-timestamp"><span class="secno">8.2.1. </span><span class="content">SensorReading.timeStamp</span><a class="self-link" href="#sensor-reading-timestamp"></a></h4>
   <p>Returns a timestamp of the time
at which the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-17">reading</a> was obtained from the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-34">sensor</a> expressed in milliseconds that passed since the <a data-link-type="dfn" href="http://w3c.github.io/hr-time/#time-origin">time origin</a>.</p>
   <p class="issue" id="issue-d41d8cd9"><a class="self-link" href="#issue-d41d8cd9"></a> <a href="https://github.com/w3c/sensors/issues/101">&lt;https://github.com/w3c/sensors/issues/101></a></p>
   <h3 class="heading settled" data-level="8.3" id="the-sensor-reading-event-interface"><span class="secno">8.3. </span><span class="content">The SensorReadingEvent Interface</span><a class="self-link" href="#the-sensor-reading-event-interface"></a></h3>
<pre class="idl highlight def">[<dfn class="nv idl-code" data-dfn-for="SensorReadingEvent" data-dfn-type="constructor" data-export="" data-lt="SensorReadingEvent(type, eventInitDict)" id="dom-sensorreadingevent-sensorreadingevent">Constructor<a class="self-link" href="#dom-sensorreadingevent-sensorreadingevent"></a></dfn>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="SensorReadingEvent/SensorReadingEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-type">type<a class="self-link" href="#dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-type"></a></dfn>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorreadingeventinit" id="ref-for-dictdef-sensorreadingeventinit-1">SensorReadingEventInit</a> <dfn class="nv idl-code" data-dfn-for="SensorReadingEvent/SensorReadingEvent(type, eventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-eventinitdict">eventInitDict<a class="self-link" href="#dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-eventinitdict"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensorreadingevent">SensorReadingEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#sensorreading" id="ref-for-sensorreading-6">SensorReading</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="SensorReading" href="#dom-sensorreadingevent-reading" id="ref-for-dom-sensorreadingevent-reading-1">reading</a>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-sensorreadingeventinit">SensorReadingEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <a class="n" data-link-type="idl-name" href="#sensorreading" id="ref-for-sensorreading-7">SensorReading</a> <dfn class="nv idl-code" data-dfn-for="SensorReadingEventInit" data-dfn-type="dict-member" data-export="" data-type="SensorReading " id="dom-sensorreadingeventinit-reading">reading<a class="self-link" href="#dom-sensorreadingeventinit-reading"></a></dfn>;
};
</pre>
   <h4 class="heading settled" data-level="8.3.1" id="sensor-reading-event-reading"><span class="secno">8.3.1. </span><span class="content">SensorReadingEvent.reading</span><a class="self-link" href="#sensor-reading-event-reading"></a></h4>
   <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="SensorReadingEvent" data-dfn-type="attribute" data-export="" id="dom-sensorreadingevent-reading">reading</dfn> attribute references
the <a data-link-type="dfn" href="#current-reading" id="ref-for-current-reading-2">current reading</a> at the time of <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event-dispatch">event dispatch</a>.</p>
   <h3 class="heading settled" data-level="8.4" id="the-sensor-error-event-interface"><span class="secno">8.4. </span><span class="content">The SensorErrorEvent Interface</span><a class="self-link" href="#the-sensor-error-event-interface"></a></h3>
<pre class="idl highlight def">[<dfn class="nv idl-code" data-dfn-for="SensorErrorEvent" data-dfn-type="constructor" data-export="" data-lt="SensorErrorEvent(type, errorEventInitDict)" id="dom-sensorerrorevent-sensorerrorevent">Constructor<a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent"></a></dfn>(<span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="SensorErrorEvent/SensorErrorEvent(type, errorEventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type">type<a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type"></a></dfn>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorerroreventinit" id="ref-for-dictdef-sensorerroreventinit-1">SensorErrorEventInit</a> <dfn class="nv idl-code" data-dfn-for="SensorErrorEvent/SensorErrorEvent(type, errorEventInitDict)" data-dfn-type="argument" data-export="" id="dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict">errorEventInitDict<a class="self-link" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict"></a></dfn>)]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="sensorerrorevent">SensorErrorEvent</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Error</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="SensorErrorEvent" data-dfn-type="attribute" data-export="" data-readonly="" data-type="Error" id="dom-sensorerrorevent-error">error</dfn>;
};

<span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-sensorerroreventinit">SensorErrorEventInit</dfn> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">Error</span> <dfn class="nv idl-code" data-dfn-for="SensorErrorEventInit" data-dfn-type="dict-member" data-export="" data-type="Error " id="dom-sensorerroreventinit-error">error<a class="self-link" href="#dom-sensorerroreventinit-error"></a></dfn>;
};
</pre>
   <h4 class="heading settled" data-level="8.4.1" id="sensor-error-event-error"><span class="secno">8.4.1. </span><span class="content">SensorErrorEvent.error</span><a class="self-link" href="#sensor-error-event-error"></a></h4>
   <h2 class="heading settled" data-level="9" id="abstract-operations"><span class="secno">9. </span><span class="content">Abstract Operations</span><a class="self-link" href="#abstract-operations"></a></h2>
   <h3 class="heading settled algorithm" data-algorithm="Construct Sensor Object" data-dfn-type="dfn" data-export="" data-level="9.1" data-lt="Construct Sensor Object" id="construct-sensor-object"><span class="secno">9.1. </span><span class="content">Construct Sensor Object</span><a class="self-link" href="#construct-sensor-object"></a></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>options</var>, a <a class="idl-code" data-link-type="dictionary" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions-1">SensorOptions</a> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-12">Sensor</a></code> object.</p>
   </dl>
   <ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#incumbent-settings-object">incumbent settings object</a> is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">secure context</a>, then:</p>
     <ol>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a SecurityError.</p>
     </ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a> is not a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>, then:</p>
     <ol>
      <li data-md="">
       <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a SecurityError.</p>
     </ol>
    <li data-md="">
     <p>Otherwise, if <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters-1">identifying parameters</a> in <var>options</var> are set, then:</p>
     <ol>
      <li data-md="">
       <p>If these <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters-2">identifying parameters</a> allow a unique <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-35">sensor</a> to be identified, then:</p>
       <ol>
        <li data-md="">
         <p>let <var>sensor</var> be that <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-36">sensor</a>,</p>
        <li data-md="">
         <p>let <var>sensor_instance</var> be a new <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-13">Sensor</a></code> object,</p>
        <li data-md="">
         <p>associate <var>sensor_instance</var> with <var>sensor</var>.</p>
       </ol>
      <li data-md="">
       <p>Otherwise, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a TypeError.</p>
     </ol>
    <li data-md="">
     <p>Otherwise, if a <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor-1">default sensor</a> exists for this <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-23">sensor type</a>:</p>
     <ol>
      <li data-md="">
       <p>let <var>sensor</var> be that <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-37">sensor</a>,</p>
      <li data-md="">
       <p>let <var>sensor_instance</var> be a new <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-14">Sensor</a></code> object,</p>
      <li data-md="">
       <p>associate <var>sensor_instance</var> with <var>sensor</var>.</p>
     </ol>
    <li data-md="">
     <p>Otherwise, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a TypeError.</p>
    <li data-md="">
     <p>Let <var>frequency</var> be the value of the <a class="idl-code" data-link-type="dict-member" href="#dom-sensoroptions-frequency" id="ref-for-dom-sensoroptions-frequency-1">frequency</a> member of <var>options</var>.</p>
    <li data-md="">
     <p>If <var>frequency</var> is not <code>null</code>,</p>
     <ol>
      <li data-md="">
       <p>If <var>sensor</var> <a data-link-type="dfn" href="#supports-periodic-reporting-mode" id="ref-for-supports-periodic-reporting-mode-1">supports periodic reporting mode</a>,</p>
       <ol>
        <li data-md="">
         <p>Set <var>sensor_instance</var>’s <a data-link-type="dfn" href="#desired-frequency" id="ref-for-desired-frequency-1">desired frequency</a> to <var>frequency</var>.</p>
       </ol>
      <li data-md="">
       <p>Otherwise,</p>
       <ol>
        <li data-md="">
         <p><a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a TypeError.</p>
       </ol>
     </ol>
    <li data-md="">
     <p>Set <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-4">reading</a> attribute to <code>null</code>.</p>
    <li data-md="">
     <p>Set <var>sensor_instance</var>’s <a data-link-type="dfn" href="#state" id="ref-for-state-5">state</a> to <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-idle" id="ref-for-dom-sensorstate-idle-6">"idle"</a>.</p>
    <li data-md="">
     <p>return <var>sensor_instance</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Register a Sensor" data-dfn-type="dfn" data-level="9.2" data-lt="Register a Sensor" data-noexport="" id="register-a-sensor"><span class="secno">9.2. </span><span class="content">Register a Sensor</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-15">Sensor</a></code> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-38">sensor</a> associated with <var>sensor_instance</var>.</p>
    <li data-md="">
     <p>Add <var>sensor_instance</var> to <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-1">activated Sensor objects</a>.</p>
    <li data-md="">
     <p>Invoke the <a data-link-type="dfn" href="#set-sensor-settings" id="ref-for-set-sensor-settings-1">Set Sensor Settings</a> abstract operation,
  passing it <var>sensor</var> as argument.</p>
    <li data-md="">
     <p>Let <var>current_reading</var> be <var>sensor</var>’s associated <a data-link-type="dfn" href="#current-reading" id="ref-for-current-reading-3">current reading</a>.</p>
    <li data-md="">
     <p>If <var>current_reading</var> is not <code>null</code> and <var>sensor_instance</var>’s state is still <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-activating" id="ref-for-dom-sensorstate-activating-3">"activating"</a>, then</p>
     <ol>
      <li data-md="">
       <p>invoke the <a data-link-type="dfn" href="#update-reading" id="ref-for-update-reading-1">Update Reading</a> operation, passing it <var>sensor_instance</var> and <var>current_reading</var> as arguments.</p>
     </ol>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Unregister a Sensor" data-dfn-type="dfn" data-level="9.3" data-lt="Unregister a Sensor" data-noexport="" id="unregister-a-sensor"><span class="secno">9.3. </span><span class="content">Unregister a Sensor</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-16">Sensor</a></code> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-39">sensor</a> associated with <var>sensor_instance</var>.</p>
    <li data-md="">
     <p>Remove <var>sensor_instance</var> from <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-2">activated Sensor objects</a>.</p>
    <li data-md="">
     <p>If <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-3">activated Sensor objects</a> is empty,</p>
     <ol>
      <li data-md="">
       <p>Set <a data-link-type="dfn" href="#current-reporting-mode" id="ref-for-current-reporting-mode-1">current reporting mode</a> to <code>undefined</code>.</p>
      <li data-md="">
       <p>Set <a data-link-type="dfn" href="#current-polling-frequency" id="ref-for-current-polling-frequency-1">current polling frequency</a> to <code>null</code>.</p>
      <li data-md="">
       <p>Update the user-agent-specific way in which <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-18">sensor readings</a> are obtained from <var>sensor</var> to no longer provide <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-19">readings</a>.</p>
      <li data-md="">
       <p>Abort these steps.</p>
     </ol>
    <li data-md="">
     <p>Invoke the <a data-link-type="dfn" href="#set-sensor-settings" id="ref-for-set-sensor-settings-2">Set Sensor Settings</a> abstract operation,
  passing it <var>sensor</var> as argument.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Set Sensor Settings" data-dfn-type="dfn" data-level="9.4" data-lt="Set Sensor Settings" data-noexport="" id="set-sensor-settings"><span class="secno">9.4. </span><span class="content">Set Sensor Settings</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-40">sensor</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Let <var>settings_changed</var> be <code>false</code>.</p>
    <li data-md="">
     <p>Let <var>mode</var> be the result of invoking the <a data-link-type="dfn" href="#find-current-reporting-mode-of-a-sensor" id="ref-for-find-current-reporting-mode-of-a-sensor-1">find current reporting mode of a sensor</a> abstract operation,
  with <var>sensor</var> as argument.</p>
    <li data-md="">
     <p>If <var>mode</var> is different from <var>sensor</var>’s <a data-link-type="dfn" href="#current-reporting-mode" id="ref-for-current-reporting-mode-2">current reporting mode</a>,</p>
     <ol>
      <li data-md="">
       <p>set <var>settings_changed</var> to <code>true</code>.</p>
      <li data-md="">
       <p>Set <a data-link-type="dfn" href="#current-reporting-mode" id="ref-for-current-reporting-mode-3">current reporting mode</a> to <var>mode</var>.</p>
     </ol>
    <li data-md="">
     <p>Let <var>frequency</var> be the result of invoking the <a data-link-type="dfn" href="#find-the-polling-frequency-of-a-sensor" id="ref-for-find-the-polling-frequency-of-a-sensor-1">Find the polling frequency of a Sensor</a> abstract operation,
  with <var>sensor</var> as argument.</p>
    <li data-md="">
     <p>If <var>frequency</var> is different from <var>sensor</var>’s <a data-link-type="dfn" href="#current-polling-frequency" id="ref-for-current-polling-frequency-2">current polling frequency</a>,</p>
     <ol>
      <li data-md="">
       <p>set <var>settings_changed</var> to <code>true</code>.</p>
      <li data-md="">
       <p>Set <a data-link-type="dfn" href="#current-polling-frequency" id="ref-for-current-polling-frequency-3">current polling frequency</a> to <var>frequency</var>.</p>
     </ol>
    <li data-md="">
     <p>If <var>settings_changed</var> is <code>true</code></p>
     <ol>
      <li data-md="">
       <p>Invoke the <a data-link-type="dfn" href="#observe-a-sensor" id="ref-for-observe-a-sensor-1">Observe a Sensor</a> abstract operation, passing it <var>sensor</var> as argument.</p>
     </ol>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Observe a Sensor" data-dfn-type="dfn" data-level="9.5" data-lt="Observe a Sensor" data-noexport="" id="observe-a-sensor"><span class="secno">9.5. </span><span class="content">Observe a Sensor</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-41">sensor</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>If <var>sensor</var>’s <a data-link-type="dfn" href="#current-reporting-mode" id="ref-for-current-reporting-mode-4">current reporting mode</a> is <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-6">periodic</a>,</p>
     <ol>
      <li data-md="">
       <p>let <var>frequency</var> be the <a data-link-type="dfn" href="#current-polling-frequency" id="ref-for-current-polling-frequency-4">current polling frequency</a>,
  capped by the upper and lower bounds of the underlying hardware.</p>
      <li data-md="">
       <p>Invoke the <a data-link-type="dfn" href="#update-current-reading" id="ref-for-update-current-reading-1">Update Current Reading</a> abstract operation
  at a <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-2">frequency</a> of <var>frequency</var> passing it <var>sensor</var> and
  the latest <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-20">sensor reading</a> as arguments.</p>
       <p class="note" role="note">Note: there is not guarantee that the <a data-link-type="dfn" href="#current-polling-frequency" id="ref-for-current-polling-frequency-5">current polling frequency</a> can be respected. The actual <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-3">frequency</a> can be calculated using <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-8">SensorReading</a></code> <a class="idl-code" data-link-type="attribute" href="#dom-sensorreading-timestamp" id="ref-for-dom-sensorreading-timestamp-1">timeStamp</a> attributes.</p>
     </ol>
    <li data-md="">
     <p>If the <a data-link-type="dfn" href="#current-reporting-mode" id="ref-for-current-reporting-mode-5">current reporting mode</a> is set to <a data-link-type="dfn" href="#auto" id="ref-for-auto-4">auto</a>,</p>
     <ol>
      <li data-md="">
       <p>the user-agent can decide on the best reporting strategy
  for this particular <var>sensor</var> and <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-24">sensor type</a>.</p>
      <li data-md="">
       <p>The user-agent must invoke the <a data-link-type="dfn" href="#update-current-reading" id="ref-for-update-current-reading-2">Update Current Reading</a> abstract operation
  at to report fresh <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-21">readings</a>,
  passing it <var>sensor</var> and the latest <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-22">sensor reading</a> as arguments.</p>
     </ol>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Find Current Reporting Mode of a Sensor" data-dfn-type="dfn" data-level="9.6" data-lt="Find Current Reporting Mode of a Sensor" data-noexport="" id="find-current-reporting-mode-of-a-sensor"><span class="secno">9.6. </span><span class="content">Find Current Reporting Mode of a Sensor</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-42">sensor</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p><var>mode</var>, a <a data-link-type="dfn" href="#reporting-modes" id="ref-for-reporting-modes-9">reporting mode</a>.</p>
   </dl>
   <ol>
    <li data-md="">
     <p>let <var>mode</var> be <a data-link-type="dfn" href="#auto" id="ref-for-auto-5">auto</a>.</p>
    <li data-md="">
     <p>For each <var>sensor_instance</var> in <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-4">activated Sensor objects</a>:</p>
     <ol>
      <li data-md="">
       <p>if <var>sensor_instance</var>’s <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-4">frequency</a> is not <code>null</code>,</p>
       <ol>
        <li data-md="">
         <p>set <var>mode</var> to <a data-link-type="dfn" href="#periodic" id="ref-for-periodic-7">periodic</a></p>
       </ol>
     </ol>
    <li data-md="">
     <p>return <var>mode</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Find the polling frequency of a Sensor" data-dfn-type="dfn" data-level="9.7" data-lt="Find the polling frequency of a Sensor" data-noexport="" id="find-the-polling-frequency-of-a-sensor"><span class="secno">9.7. </span><span class="content">Find the polling frequency of a Sensor</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-43">sensor</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p><var>frequency</var>, a <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-5">frequency</a>.</p>
   </dl>
   <ol>
    <li data-md="">
     <p>let <var>frequency</var> be <code>null</code>.</p>
    <li data-md="">
     <p>For each <var>sensor_instance</var> in <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-5">activated Sensor objects</a>:</p>
     <ol>
      <li data-md="">
       <p>let <var>f</var> be <var>sensor_instance</var>’s <a data-link-type="dfn" href="#frequency" id="ref-for-frequency-6">frequency</a>.</p>
      <li data-md="">
       <p>if <var>f</var> is not <code>null</code> and <var>f</var> is greater than <var>frequency</var>,</p>
       <ol>
        <li data-md="">
         <p>set <var>frequency</var> to <var>f</var>.</p>
       </ol>
     </ol>
    <li data-md="">
     <p>return <var>frequency</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Update State" data-dfn-type="dfn" data-level="9.8" data-lt="Update State" data-noexport="" id="update-state"><span class="secno">9.8. </span><span class="content">Update State</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-17">Sensor</a></code> object.</p>
    <dd data-md="">
     <p><var>state</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-18">Sensor</a></code> object’s <a data-link-type="dfn" href="#state" id="ref-for-state-6">state</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Set <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-state" id="ref-for-dom-sensor-state-2">state</a> to <var>state</var>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#fire-a-simple-event">fire a simple event</a> named <code>statechange</code> at <var>sensor_instance</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Update Current Reading" data-dfn-type="dfn" data-level="9.9" data-lt="Update Current Reading" data-noexport="" id="update-current-reading"><span class="secno">9.9. </span><span class="content">Update Current Reading</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor</var>, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-44">sensor</a>.</p>
    <dd data-md="">
     <p><var>reading</var>, a <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-23">sensor reading</a>.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>If <var>sensor</var>’s <a data-link-type="dfn" href="#reporting-flag" id="ref-for-reporting-flag-1">reporting flag</a> is set,</p>
     <ol>
      <li data-md="">
       <p>abort these steps.</p>
     </ol>
    <li data-md="">
     <p>Set <var>sensor</var>’s <a data-link-type="dfn" href="#reporting-flag" id="ref-for-reporting-flag-2">reporting flag</a>.</p>
    <li data-md="">
     <p>Let <var>reading_instance</var> be the result of invoking <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-25">sensor type</a>’s associated <a data-link-type="dfn" href="#construct-sensorreading-object" id="ref-for-construct-sensorreading-object-1">Construct SensorReading Object</a> operation,
  passing it <var>reading</var> as argument.</p>
    <li data-md="">
     <p>Set <var>sensor</var>’s <a data-link-type="dfn" href="#current-reading" id="ref-for-current-reading-4">current reading</a> to <var>reading_instance</var>.</p>
    <li data-md="">
     <p>For each <var>sensor_instance</var> in <var>sensor</var>’s set of <a data-link-type="dfn" href="#activated-sensor-objects" id="ref-for-activated-sensor-objects-6">activated Sensor objects</a>:</p>
     <ol>
      <li data-md="">
       <p>Invoke the <a data-link-type="dfn" href="#update-reading" id="ref-for-update-reading-2">update reading</a> algorithm passing <var>sensor_instance</var> and <var>reading_instance</var> as arguments.</p>
     </ol>
    <li data-md="">
     <p>Unset <var>sensor</var>’s <a data-link-type="dfn" href="#reporting-flag" id="ref-for-reporting-flag-3">reporting flag</a>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Update Reading" data-dfn-type="dfn" data-level="9.10" data-lt="Update Reading" data-noexport="" id="update-reading"><span class="secno">9.10. </span><span class="content">Update Reading</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-19">Sensor</a></code> object.</p>
    <dd data-md="">
     <p><var>reading</var>, a <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-9">SensorReading</a></code> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Set <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-5">reading</a> to <var>reading</var>.</p>
    <li data-md="">
     <p>If <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-state" id="ref-for-dom-sensor-state-3">state</a> is <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-activating" id="ref-for-dom-sensorstate-activating-4">"activating"</a>:</p>
     <ol>
      <li data-md="">
       <p>Invoke the <a data-link-type="dfn" href="#update-state" id="ref-for-update-state-3">update state</a> algorithm passing <var>sensor_instance</var> and <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-active" id="ref-for-dom-sensorstate-active-3">"active"</a> as the arguments.</p>
     </ol>
    <li data-md="">
     <p>Create an <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event">event</a> <var>e</var> that uses the <code class="idl"><a data-link-type="idl" href="#sensorreadingevent" id="ref-for-sensorreadingevent-1">SensorReadingEvent</a></code> interface,
  with the event type <code>reading</code>, which does not bubble, is not cancelable, is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-events-trusted">trusted</a>, and has no default action.</p>
    <li data-md="">
     <p>Let the <a class="idl-code" data-link-type="attribute" href="#dom-sensorreadingevent-reading" id="ref-for-dom-sensorreadingevent-reading-2">reading</a> attribute of <var>e</var> be initialized to <var>reading</var>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event-dispatch">dispatch</a> <var>e</var> at <var>sensor_instance</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Handle Errors" data-dfn-type="dfn" data-level="9.11" data-lt="Handle Errors" data-noexport="" id="handle-errors"><span class="secno">9.11. </span><span class="content">Handle Errors</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-20">Sensor</a></code> object.</p>
    <dd data-md="">
     <p><var>error</var>, an <a data-link-type="dfn" href="https://heycam.github.io/webidl/#error">Error</a> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p>None</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Set <var>sensor_instance</var>’s <a class="idl-code" data-link-type="attribute" href="#dom-sensor-reading" id="ref-for-dom-sensor-reading-6">reading</a> to <code>null</code>.</p>
    <li data-md="">
     <p>Invoke the <a data-link-type="dfn" href="#update-state" id="ref-for-update-state-4">update state</a> algorithm passing <var>sensor_instance</var> and <a class="idl-code" data-link-type="enum-value" href="#dom-sensorstate-errored" id="ref-for-dom-sensorstate-errored-4">"errored"</a> as the arguments.</p>
    <li data-md="">
     <p>Create an <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event">event</a> <var>e</var> that uses the <code class="idl"><a data-link-type="idl" href="#sensorerrorevent" id="ref-for-sensorerrorevent-1">SensorErrorEvent</a></code> interface,
  with the event type <code>error</code>, which does not bubble, is not cancelable, is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-events-trusted">trusted</a>, and has no default action.</p>
    <li data-md="">
     <p>Let the <a class="idl-code" data-link-type="attribute" href="#dom-sensorerrorevent-error" id="ref-for-dom-sensorerrorevent-error-1">error</a> attribute of <var>e</var> be initialized to <var>error</var>.</p>
    <li data-md="">
     <p><a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to <a data-link-type="dfn" href="https://dom.spec.whatwg.org#concept-event-dispatch">dispatch</a> <var>e</var> at <var>sensor_instance</var>.</p>
   </ol>
   <h3 class="heading settled dfn-paneled algorithm" data-algorithm="Request Sensor Access" data-dfn-type="dfn" data-level="9.12" data-lt="Request Sensor Access" data-noexport="" id="request-sensor-access"><span class="secno">9.12. </span><span class="content">Request Sensor Access</span></h3>
   <dl>
    <dt data-md="">
     <p>input</p>
    <dd data-md="">
     <p><var>sensor_instance</var>, a <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-21">Sensor</a></code> object.</p>
    <dt data-md="">
     <p>output</p>
    <dd data-md="">
     <p><var>state</var>, a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#idl-def-PermissionState">permission state</a>.</p>
   </dl>
   <ol>
    <li data-md="">
     <p>Let <var>sensor</var> be the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-45">sensor</a> associated with <var>sensor_instance</var>.</p>
    <li data-md="">
     <p>let <var>permission</var> be the result of invoking the abstract operation <a data-link-type="dfn" href="#retrieve-the-sensor-permission" id="ref-for-retrieve-the-sensor-permission-1">retrieve the sensor permission</a> associated with <var>sensor</var>,
  passing it <var>sensor_instance</var> as argument.</p>
    <li data-md="">
     <p>Let <var>state</var> be the result of <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-retrieve-the-permission-state">retrieving the permission state</a> for <var>permission</var>.</p>
    <li data-md="">
     <p>If <var>state</var> is "prompt",</p>
     <ol>
      <li data-md="">
       <p>prompt the user in a user-agent-specific manner for permission to provide access to <var>sensor</var>.</p>
      <li data-md="">
       <p>If permission is granted,</p>
       <ol>
        <li data-md="">
         <p>set <var>state</var> to "granted",</p>
       </ol>
      <li data-md="">
       <p>else,</p>
       <ol>
        <li data-md="">
         <p>set <var>state</var> to "denied".</p>
       </ol>
     </ol>
    <li data-md="">
     <p>return <var>state</var>.</p>
   </ol>
   <h2 class="heading settled" data-level="10" id="extensibility"><span class="secno">10. </span><span class="content">Extensibility</span><a class="self-link" href="#extensibility"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Its purpose is to describe
how this specification can be extended to specify APIs for
different <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-26">sensor types</a>.</p>
   <p>Extension specifications are encouraged to focus on a single <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-27">sensor type</a>,
exposing both <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-9">high</a> and <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-9">low</a> level
as appropriate.</p>
   <h3 class="heading settled" data-level="10.1" id="naming"><span class="secno">10.1. </span><span class="content">Naming</span><a class="self-link" href="#naming"></a></h3>
   <p><code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-22">Sensor</a></code> interfaces for <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-10">low-level</a> sensors should be
named after their associated <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-46">sensor</a>.
So for example, the interface associated with a gyroscope
should be simply named <code>Gyroscope</code>. <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-23">Sensor</a></code> interfaces for <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-10">high-level</a> sensors should be
named by combining the physical quantity the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-47">sensor</a> measures
with the "Sensor" suffix.
For example, a <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-48">sensor</a> measuring
the distance at which an object is from it
may see its associated interface called <code>ProximitySensor</code>.</p>
   <p>Attributes of the <code class="idl"><a data-link-type="idl" href="#sensorreading" id="ref-for-sensorreading-10">SensorReading</a></code> subclass that
hold <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-24">sensor readings</a> values
should be named after the full name of these values.
For example, the <code>TemperatureSensorReading</code> interface should hold
the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-25">sensor reading</a>’s value in
a <code>temperature</code> attribute (and not a <code>value</code> or <code>temp</code> attribute).
A good starting point for naming are the
Quantities, Units, Dimensions and Data Types Ontologies <a data-link-type="biblio" href="#biblio-qudt">[QUDT]</a>.</p>
   <h3 class="heading settled" data-level="10.2" id="unit"><span class="secno">10.2. </span><span class="content">Unit</span><a class="self-link" href="#unit"></a></h3>
   <p>Extension specification must specify the unit of <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-26">sensor readings</a>.</p>
   <p>As per the Technical Architecure Group’s (TAG) API Design Principles <a data-link-type="biblio" href="#biblio-api-design-principles">[API-DESIGN-PRINCIPLES]</a>,
all time measurement should be in milliseconds.
All other units should be specified using,
in order of preference,
and with the exception of temperature (for which Celsius should be favored over Kelvin),
the International System of Units (SI),
SI derived units, and
Non-SI units accepted for use with the SI,
as described in the SI Brochure <a data-link-type="biblio" href="#biblio-si">[SI]</a>.</p>
   <h3 class="heading settled" data-level="10.3" id="high-vs-low-level"><span class="secno">10.3. </span><span class="content">Exposing High-Level vs. Low-Level Sensors</span><a class="self-link" href="#high-vs-low-level"></a></h3>
   <p>So far, specifications exposing sensors to the Web platform
have focused on <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-11">high-level</a> sensors APIs. <a data-link-type="biblio" href="#biblio-geolocation-api">[GEOLOCATION-API]</a> <a data-link-type="biblio" href="#biblio-orientation-event">[ORIENTATION-EVENT]</a></p>
   <p>This was a reasonable approach for a number of reasons.
Indeed, <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-12">high-level</a> sensors:</p>
   <ul>
    <li data-md="">
     <p>convey developer intent clearly,</p>
    <li data-md="">
     <p>do not require intimate knowledge of how the underlying hardware sensors functions,</p>
    <li data-md="">
     <p>are easy to use,</p>
    <li data-md="">
     <p>may enable the User Agent to make significant
  performance and battery life improvements,</p>
    <li data-md="">
     <p>help avoid certain privacy and security issues by
  decreasing the amount and type of information exposed.</p>
   </ul>
   <p>However, an increasing number of use cases
such as virtual and augmented reality
require <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-11">low-level</a> access to sensors,
most notably for performance reasons.</p>
   <p>Providing <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-12">low-level</a> access
enables Web application developers to leverage domain-specific constraints
and design more performant systems.</p>
   <p>Following the precepts of the Extensible Web Manifesto <a data-link-type="biblio" href="#biblio-extennnnsible">[EXTENNNNSIBLE]</a>,
extension specifications should focus primarily on
exposing <a data-link-type="dfn" href="#low-level" id="ref-for-low-level-13">low-level</a> sensor APIs, but should also expose <a data-link-type="dfn" href="#high-level" id="ref-for-high-level-13">high-level</a> APIs when they are clear benefits in doing so.</p>
   <h3 class="heading settled" data-level="10.4" id="multiple-sensors"><span class="secno">10.4. </span><span class="content">When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</span><a class="self-link" href="#multiple-sensors"></a></h3>
   <p>TODO: provide guidance on when to:</p>
   <ul>
    <li data-md="">
     <p>allow multiple sensors of the same type to be instantiated,</p>
    <li data-md="">
     <p>create different interfaces that inherit from <code class="idl"><a data-link-type="idl" href="#sensor" id="ref-for-sensor-24">Sensor</a></code>,</p>
    <li data-md="">
     <p>add constructor parameters to tweak sensors settings (e.g. setting required accuracy).</p>
   </ul>
   <h3 class="heading settled" data-level="10.5" id="definition-reqs"><span class="secno">10.5. </span><span class="content">Definition Requirements</span><a class="self-link" href="#definition-reqs"></a></h3>
   <p>At least the following definitions must be specified in each extension specification:</p>
   <ul>
    <li data-md="">
     <p>A <a data-link-type="dfn" href="#sensor-subclass" id="ref-for-sensor-subclass-1">Sensor subclass</a> which is constructible and takes
  an optional <code class="idl"><a data-link-type="idl" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions-2">SensorOptions</a></code> dictionary as argument.</p>
    <li data-md="">
     <p>A <a data-link-type="dfn" href="#sensorreading-subclass" id="ref-for-sensorreading-subclass-3">SensorReading subclass</a> which is constructible and
  whose attributes which hold <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-27">sensor readings</a> are readonly.</p>
    <li data-md="">
     <p>A abstract operation to <a data-link-type="dfn" href="#construct-sensorreading-object" id="ref-for-construct-sensorreading-object-2">construct a SensorReading object</a> which takes the <a data-link-type="dfn" href="#sensor-readings" id="ref-for-sensor-readings-28">sensor readings</a> emitted by the <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-49">sensor</a> and
  returns an initialized <a data-link-type="dfn" href="#sensorreading-subclass" id="ref-for-sensorreading-subclass-4">SensorReading subclass</a> object.</p>
    <li data-md="">
     <p>The <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-28">sensor type</a>’s <a data-link-type="dfn" href="#supported-reporting-modes" id="ref-for-supported-reporting-modes-2">supported reporting modes</a>.</p>
    <li data-md="">
     <p>A abstract operation to <a data-link-type="dfn" href="#retrieve-the-sensor-permission" id="ref-for-retrieve-the-sensor-permission-2">retrieve sensor permission</a> which
  takes a <a data-link-type="dfn" href="#sensor-subclass" id="ref-for-sensor-subclass-2">Sensor subclass</a> object as input and
  returns a <a data-link-type="dfn" href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a> and, eventually, its <a data-link-type="dfn" href="https://w3c.github.io/permissions/#dfn-associated-permissiondescriptor">associated PermissionDescriptor</a>.</p>
   </ul>
   <p>An extension specification may specify the following defintions:</p>
   <ul>
    <li data-md="">
     <p>A <code class="idl"><a data-link-type="idl" href="#dictdef-sensoroptions" id="ref-for-dictdef-sensoroptions-3">SensorOptions</a></code> subclass.</p>
    <li data-md="">
     <p>A <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor-2">default sensor</a>. Generally, devices are equipped with a single <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-50">sensor</a> of each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-29">type</a>,
  so defining a <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor-3">default sensor</a> should be straightforward.
  For <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-30">sensor types</a> where multiple <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-51">sensors</a> are common,
  extension specifications may choose not to define a <a data-link-type="dfn" href="#default-sensor" id="ref-for-default-sensor-4">default sensor</a>,
  especially when doing so would not make sense.</p>
    <li data-md="">
     <p>A set of <a data-link-type="dfn" href="#identifying-parameters" id="ref-for-identifying-parameters-3">identifying parameters</a>. TODO: replace that by an abstract operation.</p>
   </ul>
   <h3 class="heading settled" data-level="10.6" id="permission-api"><span class="secno">10.6. </span><span class="content">Extending the Permission API</span><a class="self-link" href="#permission-api"></a></h3>
   <p>Provide guidance on how to extend the Permission API <a data-link-type="biblio" href="#biblio-permissions">[PERMISSIONS]</a> for each <a data-link-type="dfn" href="#sensor-type" id="ref-for-sensor-type-31">sensor types</a>.</p>
   <p class="issue" id="issue-d41d8cd90"><a class="self-link" href="#issue-d41d8cd90"></a> <a href="https://github.com/w3c/sensors/issues/22">&lt;https://github.com/w3c/sensors/issues/22></a></p>
   <h3 class="heading settled" data-level="10.7" id="example-webidl"><span class="secno">10.7. </span><span class="content">Example WebIDL</span><a class="self-link" href="#example-webidl"></a></h3>
   <p>Here’s example WebIDL for a possible extension of this specification
for proximity <a data-link-type="dfn" href="#concept-sensor" id="ref-for-concept-sensor-52">sensors</a>.</p>
<pre class="example" id="example-b23dffad"><a class="self-link" href="#example-b23dffad"></a>[Constructor(optional ProximitySensorOptions proximitySensorOptions)]
interface ProximitySensor : Sensor {
  readonly attribute ProximitySensorReading? reading;
};

interface ProximitySensorReading : SensorReading {
    readonly attribute unrestricted double distance;
};

dictionary ProximitySensorOptions : SensorOptions {
    double? min = -Infinity;
    double? max = Infinity;
    ProximitySensorPosition? position;
    ProximitySensorDirection? direction;
};
    
enum ProximitySensorPosition {
    "top-left",
    "top",
    "top-right",
    "middle-left",
    "middle",
    "middle-right",
    "bottom-left",
    "bottom",
    "bottom-right"
};

enum ProximitySensorDirection {
    "front",
    "rear",
    "left",
    "right",
    "top",
    "bottom"
};
</pre>
   <h2 class="heading settled" data-level="11" id="acknowledgements"><span class="secno">11. </span><span class="content">Acknowledgements</span><a class="self-link" href="#acknowledgements"></a></h2>
   <p>First and foremost, I would like to thank Anssi Kostiainen
for his continuous and dedicates support and input throughout
the development of this specification.</p>
   <p>Special thanks to Rick Waldron for
driving the discussion around a generic sensor API design for the Web,
sketching the original API on which this is based,
providing implementation feedback from his work on Johnny-Five,
and continuous input during the development of this specification.</p>
   <p>Special thanks to Boris Smus, Tim Volodine, and Rich Tibbett
for their initial work on exposing sensors to the Web with consistency.</p>
   <p>Thanks to Anne van Kesteren
for his tireless help both in person and through IRC.</p>
   <p>Thanks to Domenic Denicola and Jake Archibald for their help.</p>
   <p>Thanks also to Frederick Hirsch and Dominique Hazaël-Massieux (via the HTML5Apps project)
for both their administrative help and technical input.</p>
   <p>Thanks to Tab Atkins for making Bikeshed and taking the time to explain its subtelties.</p>
   <p>The following people have greatly contributed to this specification through extensive discussions on GitHub:
Anssi Kostiainen,
Boris Smus,
chaals,
Claes Nilsson,
Dave Raggett,
David Mark Clements,
Domenic Denicola,
Dominique Hazaël-Massieux (via the HTML5Apps project),
Francesco Iovine,
Frederick Hirsch,
gmandyam,
Jafar Husain,
Johannes Hund,
Kris Kowal,
Marcos Caceres,
Marijn Kruisselbrink,
Mark Foltz,
Mats Wichmann,
Matthew Podwysocki,
pablochacin,
Remy Sharp,
Rich Tibbett,
Rick Waldron,
Rijubrata Bhaumik,
robman,
Sean T. McBeth,
smaug----,
Tab Atkins Jr.,
Virginie Galindo,
zenparsing,
and Zoltan Kis.</p>
   <p>We’d also like to thank
Anssi Kostiainen,
Dominique Hazaël-Massieux,
Erik Wilde,
and
Michael[tm] Smith
for their editorial input.</p>
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
   <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words "MUST",
    "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
    "RECOMMENDED", "MAY", and "OPTIONAL" in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
   <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
   <p>Examples in this specification are introduced with the words "for example"
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
   <div class="example" id="example-f839f6c8">
    <a class="self-link" href="#example-f839f6c8"></a> 
    <p>This is an example of an informative example.</p>
   </div>
   <p>Because this document doesn’t itself define APIs for specific <a data-link-type="dfn" href="#sensor-type">sensor types</a>—<wbr>that is the role of extensions to this specification—<wbr>all examples are inevitably (wishful) fabrications.
    Although all of the <a data-link-type="dfn" href="#concept-sensor">sensors</a> used a examples
    would be great candidates for building atop the Generic Sensor API,
    their inclusion in this document does not imply that the relevant Working Groups
    are planning to do so. </p>
   <p>Informative notes begin with the word "Note" and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note">Note, this is an informative note.</p>
   <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
   <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
   <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="equivalent">equivalent</dfn>. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
   <h3 class="no-ref no-num heading settled" id="conformance-classes"><span class="content">Conformance Classes</span><a class="self-link" href="#conformance-classes"></a></h3>
   <p>A <dfn data-dfn-type="dfn" data-noexport="" id="conformant-user-agent">conformant user agent<a class="self-link" href="#conformant-user-agent"></a></dfn> must implement all the requirements
    listed in this specification that are applicable to user agents.</p>
  </main>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#activated-sensor-objects">activated Sensor objects</a><span>, in §7.2</span>
   <li><a href="#dom-sensorstate-activating">"activating"</a><span>, in §8.1</span>
   <li><a href="#dom-sensorstate-activating">activating</a><span>, in §8.1</span>
   <li><a href="#dom-sensorstate-active">active</a><span>, in §8.1</span>
   <li><a href="#dom-sensorstate-active">"active"</a><span>, in §8.1</span>
   <li><a href="#auto">auto</a><span>, in §6</span>
   <li><a href="#calibration">calibration</a><span>, in §6</span>
   <li><a href="#conformant-user-agent">conformant user agent</a><span>, in §Unnumbered section</span>
   <li><a href="#construct-sensor-object">Construct Sensor Object</a><span>, in §9</span>
   <li><a href="#construct-sensorreading-object">Construct SensorReading Object</a><span>, in §7.1</span>
   <li><a href="#current-polling-frequency">current polling frequency</a><span>, in §7.2</span>
   <li><a href="#current-reading">current reading</a><span>, in §7.2</span>
   <li><a href="#current-reporting-mode">current reporting mode</a><span>, in §7.2</span>
   <li><a href="#default-sensor">default sensor</a><span>, in §7.1</span>
   <li><a href="#desired-frequency">desired frequency</a><span>, in §8.1</span>
   <li><a href="#equivalent">equivalent</a><span>, in §Unnumbered section</span>
   <li>
    error
    <ul>
     <li><a href="#dom-sensorerrorevent-error">attribute for SensorErrorEvent</a><span>, in §8.4</span>
     <li><a href="#dom-sensorerroreventinit-error">dict-member for SensorErrorEventInit</a><span>, in §8.4</span>
    </ul>
   <li><a href="#dom-sensorstate-errored">"errored"</a><span>, in §8.1</span>
   <li><a href="#dom-sensorstate-errored">errored</a><span>, in §8.1</span>
   <li><a href="#find-current-reporting-mode-of-a-sensor">Find Current Reporting Mode of a Sensor</a><span>, in §9.5</span>
   <li><a href="#find-the-polling-frequency-of-a-sensor">Find the polling frequency of a Sensor</a><span>, in §9.6</span>
   <li>
    frequency
    <ul>
     <li><a href="#frequency">definition of</a><span>, in §6</span>
     <li><a href="#dom-sensoroptions-frequency">dict-member for SensorOptions</a><span>, in §8.1</span>
    </ul>
   <li><a href="#handle-errors">Handle Errors</a><span>, in §9.10</span>
   <li><a href="#high-level">high-level</a><span>, in §6</span>
   <li><a href="#identifying-parameters">identifying parameters</a><span>, in §7.1</span>
   <li><a href="#dom-sensorstate-idle">"idle"</a><span>, in §8.1</span>
   <li><a href="#dom-sensorstate-idle">idle</a><span>, in §8.1</span>
   <li><a href="#low-level">low-level</a><span>, in §6</span>
   <li><a href="#observe-a-sensor">Observe a Sensor</a><span>, in §9.4</span>
   <li><a href="#dom-sensor-onchange">onchange</a><span>, in §8.1</span>
   <li><a href="#dom-sensor-onerror">onerror</a><span>, in §8.1</span>
   <li><a href="#dom-sensor-onstatechange">onstatechange</a><span>, in §8.1</span>
   <li><a href="#periodic">periodic</a><span>, in §6</span>
   <li><a href="#raw-sensor-readings">raw sensor readings</a><span>, in §6</span>
   <li>
    reading
    <ul>
     <li><a href="#dom-sensor-reading">attribute for Sensor</a><span>, in §8.1</span>
     <li><a href="#dom-sensorreadingeventinit-reading">dict-member for SensorReadingEventInit</a><span>, in §8.3</span>
     <li><a href="#dom-sensorreadingevent-reading">attribute for SensorReadingEvent</a><span>, in §8.3.1</span>
    </ul>
   <li><a href="#register-a-sensor">Register a Sensor</a><span>, in §9.1</span>
   <li><a href="#reporting-flag">reporting flag</a><span>, in §7.2</span>
   <li><a href="#reporting-modes">reporting modes</a><span>, in §6</span>
   <li><a href="#request-sensor-access">Request Sensor Access</a><span>, in §9.11</span>
   <li><a href="#retrieve-the-sensor-permission">retrieve the sensor permission</a><span>, in §7.2</span>
   <li><a href="#sensor">Sensor</a><span>, in §8.1</span>
   <li><a href="#concept-sensor">sensor</a><span>, in §7.2</span>
   <li><a href="#sensorerrorevent">SensorErrorEvent</a><span>, in §8.4</span>
   <li><a href="#dictdef-sensorerroreventinit">SensorErrorEventInit</a><span>, in §8.4</span>
   <li><a href="#dom-sensorerrorevent-sensorerrorevent">SensorErrorEvent(type, errorEventInitDict)</a><span>, in §8.4</span>
   <li><a href="#sensor-fusion">sensor fusion</a><span>, in §6</span>
   <li><a href="#sensor-hubs">sensor hubs</a><span>, in §6</span>
   <li><a href="#dictdef-sensoroptions">SensorOptions</a><span>, in §8.1</span>
   <li><a href="#sensorreading">SensorReading</a><span>, in §8.2</span>
   <li><a href="#sensorreadingevent">SensorReadingEvent</a><span>, in §8.3</span>
   <li><a href="#dictdef-sensorreadingeventinit">SensorReadingEventInit</a><span>, in §8.3</span>
   <li><a href="#dom-sensorreadingevent-sensorreadingevent">SensorReadingEvent(type, eventInitDict)</a><span>, in §8.3</span>
   <li><a href="#sensor-readings">sensor readings</a><span>, in §6</span>
   <li><a href="#sensorreading-subclass">SensorReading subclass</a><span>, in §7.1</span>
   <li><a href="#enumdef-sensorstate">SensorState</a><span>, in §8.1</span>
   <li><a href="#sensor-subclass">Sensor subclass</a><span>, in §7.1</span>
   <li><a href="#sensor-task-source">sensor task source</a><span>, in §8.1</span>
   <li><a href="#sensor-type">sensor type</a><span>, in §7.1</span>
   <li><a href="#set-sensor-settings">Set Sensor Settings</a><span>, in §9.3</span>
   <li><a href="#smart-sensors">Smart sensors</a><span>, in §6</span>
   <li><a href="#dom-sensor-start">start()</a><span>, in §8.1</span>
   <li>
    state
    <ul>
     <li><a href="#dom-sensor-state">attribute for Sensor</a><span>, in §8.1</span>
     <li><a href="#state">definition of</a><span>, in §8.1</span>
    </ul>
   <li><a href="#dom-sensor-stop">stop()</a><span>, in §8.1</span>
   <li><a href="#supported-reporting-modes">supported reporting modes</a><span>, in §7.1</span>
   <li><a href="#supports-periodic-reporting-mode">supports periodic reporting mode</a><span>, in §7.2</span>
   <li><a href="#dom-sensorreading-timestamp">timeStamp</a><span>, in §8.2</span>
   <li><a href="#unregister-a-sensor">Unregister a Sensor</a><span>, in §9.2</span>
   <li><a href="#update-current-reading">Update Current Reading</a><span>, in §9.8</span>
   <li><a href="#update-reading">Update Reading</a><span>, in §9.9</span>
   <li><a href="#update-state">Update State</a><span>, in §9.7</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org#interface-eventtarget">EventTarget</a>
     <li><a href="https://dom.spec.whatwg.org#concept-event-dispatch">dispatch</a>
     <li><a href="https://dom.spec.whatwg.org#concept-event">event</a>
    </ul>
   <li>
    <a data-link-type="biblio">[hr-time-2]</a> defines the following terms:
    <ul>
     <li><a href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a>
     <li><a href="http://w3c.github.io/hr-time/#time-origin">time origin</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#browsing-context">browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event type</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handlers</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#event-loop">event loop</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#fire-a-simple-event">fire a simple event</a>
     <li><a href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#incumbent-settings-object">incumbent settings object</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#navigate">navigating</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#origin-2">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-task">task</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a>
     <li><a href="https://html.spec.whatwg.org/multipage/browsers.html#top-level-browsing-context">top-level browsing context</a>
     <li><a href="https://html.spec.whatwg.org/multipage/webappapis.html#concept-events-trusted">trusted</a>
    </ul>
   <li>
    <a data-link-type="biblio">[page-visibility]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/page-visibility#dfn-steps-to-determine-the-visibility-state">steps to determine the visibility state</a>
     <li><a href="https://w3c.github.io/page-visibility#dfn-visibility-states">visibility states</a>
    </ul>
   <li>
    <a data-link-type="biblio">[PERMISSIONS]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/permissions/#dfn-associated-permissiondescriptor">associated permissiondescriptor</a>
     <li><a href="https://w3c.github.io/permissions/#idl-def-Permission">permission</a>
     <li><a href="https://w3c.github.io/permissions/#idl-def-PermissionState">permission state</a>
     <li><a href="https://w3c.github.io/permissions/#dfn-retrieve-the-permission-state">retrieving the permission state</a>
    </ul>
   <li>
    <a data-link-type="biblio">[POWERFUL-FEATURES]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec/specs/powerfulfeatures/#secure-context">secure context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL-1]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#dfn-create-exception">creating an exception</a>
     <li><a href="https://heycam.github.io/webidl/#error">error</a>
     <li><a href="https://heycam.github.io/webidl/#invalidstateerror">invalidstateerror</a>
     <li><a href="https://heycam.github.io/webidl/#notallowederror">notallowederror</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WHATWG-DOM]</a> defines the following terms:
    <ul>
     <li><a href="https://dom.spec.whatwg.org/#event">Event</a>
     <li><a href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a>
     <li><a href="https://dom.spec.whatwg.org/#concept-document">document</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-hr-time-2">[HR-TIME-2]
   <dd>Ilya Grigorik; James Simonsen; Jatinder Mann. <a href="https://www.w3.org/TR/hr-time-2/">High Resolution Time Level 2</a>. 20 July 2016. WD. URL: <a href="https://www.w3.org/TR/hr-time-2/">https://www.w3.org/TR/hr-time-2/</a>
   <dt id="biblio-html">[HTML]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-page-visibility">[PAGE-VISIBILITY]
   <dd>Jatinder Mann; Arvind Jain. <a href="https://www.w3.org/TR/page-visibility/">Page Visibility (Second Edition)</a>. 29 October 2013. REC. URL: <a href="https://www.w3.org/TR/page-visibility/">https://www.w3.org/TR/page-visibility/</a>
   <dt id="biblio-permissions">[PERMISSIONS]
   <dd>Mounir Lamouri; Marcos Caceres. <a href="https://www.w3.org/TR/permissions/">The Permissions API</a>. 7 April 2015. WD. URL: <a href="https://www.w3.org/TR/permissions/">https://www.w3.org/TR/permissions/</a>
   <dt id="biblio-powerful-features">[POWERFUL-FEATURES]
   <dd>Mike West. <a href="https://www.w3.org/TR/secure-contexts/">Secure Contexts</a>. 19 July 2016. WD. URL: <a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-webidl-1">[WebIDL-1]
   <dd>Cameron McCormack; Boris Zbarsky. <a href="https://www.w3.org/TR/WebIDL-1/">WebIDL Level 1</a>. 8 March 2016. CR. URL: <a href="https://www.w3.org/TR/WebIDL-1/">https://www.w3.org/TR/WebIDL-1/</a>
   <dt id="biblio-whatwg-dom">[WHATWG-DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/">DOM Standard</a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-api-design-principles">[API-DESIGN-PRINCIPLES]
   <dd>Domenic Denicola. <a href="https://w3ctag.github.io/design-principles/">API Design Principles</a>. 29 December 2015. URL: <a href="https://w3ctag.github.io/design-principles/">https://w3ctag.github.io/design-principles/</a>
   <dt id="biblio-extennnnsible">[EXTENNNNSIBLE]
   <dd><a href="https://extensiblewebmanifesto.org/">The Extensible Web Manifesto</a>. 10 June 2013. URL: <a href="https://extensiblewebmanifesto.org/">https://extensiblewebmanifesto.org/</a>
   <dt id="biblio-geolocation-api">[GEOLOCATION-API]
   <dd>Andrei Popescu. <a href="https://www.w3.org/TR/geolocation-API/">Geolocation API Specification</a>. 28 May 2015. PER. URL: <a href="https://www.w3.org/TR/geolocation-API/">https://www.w3.org/TR/geolocation-API/</a>
   <dt id="biblio-orientation-event">[ORIENTATION-EVENT]
   <dd>Rich Tibbett; et al. <a href="https://www.w3.org/TR/orientation-event/">DeviceOrientation Event Specification</a>. 18 August 2016. CR. URL: <a href="https://www.w3.org/TR/orientation-event/">https://www.w3.org/TR/orientation-event/</a>
   <dt id="biblio-qudt">[QUDT]
   <dd>Ralph Hodgson; et al. <a href="http://www.qudt.org/">QUDT - Quantities, Units, Dimensions and Data Types Ontologies</a>. 18 March 2014. URL: <a href="http://www.qudt.org/">http://www.qudt.org/</a>
   <dt id="biblio-si">[SI]
   <dd><a href="http://www.bipm.org/en/publications/si-brochure/">SI Brochure: The International System of Units (SI), 8th edition</a>. 2014. URL: <a href="http://www.bipm.org/en/publications/si-brochure/">http://www.bipm.org/en/publications/si-brochure/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def"><span class="kt">interface</span> <a class="nv" href="#sensor">Sensor</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org#interface-eventtarget">EventTarget</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#enumdef-sensorstate">SensorState</a> <a class="nv" data-readonly="" data-type="SensorState" href="#dom-sensor-state">state</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#sensorreading">SensorReading</a>? <a class="nv" data-readonly="" data-type="SensorReading?" href="#dom-sensor-reading">reading</a>;
  <span class="kt">void</span> <a class="nv" href="#dom-sensor-start">start</a>();
  <span class="kt">void</span> <a class="nv" href="#dom-sensor-stop">stop</a>();
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onchange">onchange</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onstatechange">onstatechange</a>;
  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a> <a class="nv" data-type="EventHandler" href="#dom-sensor-onerror">onerror</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-sensoroptions">SensorOptions</a> {
  <span class="kt">double</span>? <a class="nv" data-type="double? " href="#dom-sensoroptions-frequency">frequency</a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-sensorstate">SensorState</a> {
  <a class="s" href="#dom-sensorstate-idle">"idle"</a>,
  <a class="s" href="#dom-sensorstate-activating">"activating"</a>,
  <a class="s" href="#dom-sensorstate-active">"active"</a>,
  <a class="s" href="#dom-sensorstate-errored">"errored"</a>
};

<span class="kt">interface</span> <a class="nv" href="#sensorreading">SensorReading</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="http://w3c.github.io/hr-time/#dom-domhighrestimestamp">DOMHighResTimeStamp</a> <a class="nv" data-readonly="" data-type="DOMHighResTimeStamp" href="#dom-sensorreading-timestamp">timeStamp</a>;
};

[<a class="nv" href="#dom-sensorreadingevent-sensorreadingevent">Constructor</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-type">type</a>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorreadingeventinit">SensorReadingEventInit</a> <a class="nv" href="#dom-sensorreadingevent-sensorreadingevent-type-eventinitdict-eventinitdict">eventInitDict</a>)]
<span class="kt">interface</span> <a class="nv" href="#sensorreadingevent">SensorReadingEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#sensorreading">SensorReading</a> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="SensorReading" href="#dom-sensorreadingevent-reading">reading</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-sensorreadingeventinit">SensorReadingEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <a class="n" data-link-type="idl-name" href="#sensorreading">SensorReading</a> <a class="nv" data-type="SensorReading " href="#dom-sensorreadingeventinit-reading">reading</a>;
};

[<a class="nv" href="#dom-sensorerrorevent-sensorerrorevent">Constructor</a>(<span class="kt">DOMString</span> <a class="nv" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-type">type</a>, <a class="n" data-link-type="idl-name" href="#dictdef-sensorerroreventinit">SensorErrorEventInit</a> <a class="nv" href="#dom-sensorerrorevent-sensorerrorevent-type-erroreventinitdict-erroreventinitdict">errorEventInitDict</a>)]
<span class="kt">interface</span> <a class="nv" href="#sensorerrorevent">SensorErrorEvent</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#event">Event</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">Error</span> <a class="nv" data-readonly="" data-type="Error" href="#dom-sensorerrorevent-error">error</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-sensorerroreventinit">SensorErrorEventInit</a> : <a class="n" data-link-type="idl-name" href="https://dom.spec.whatwg.org/#dictdef-eventinit">EventInit</a> {
  <span class="kt">Error</span> <a class="nv" data-type="Error " href="#dom-sensorerroreventinit-error">error</a>;
};

</pre>
  <aside class="dfn-panel" data-for="raw-sensor-readings">
   <b><a href="#raw-sensor-readings">#raw-sensor-readings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-raw-sensor-readings-1">6. Concepts</a> <a href="#ref-for-raw-sensor-readings-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="calibration">
   <b><a href="#calibration">#calibration</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-calibration-1">6. Concepts</a> <a href="#ref-for-calibration-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-readings">
   <b><a href="#sensor-readings">#sensor-readings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-readings-1">5. Security and privacy considerations</a>
    <li><a href="#ref-for-sensor-readings-2">5.1. Browsing Context</a>
    <li><a href="#ref-for-sensor-readings-3">5.2. Secure Context</a> <a href="#ref-for-sensor-readings-4">(2)</a>
    <li><a href="#ref-for-sensor-readings-5">5.3. Obtaining Explicit User Permission</a>
    <li><a href="#ref-for-sensor-readings-6">6. Concepts</a> <a href="#ref-for-sensor-readings-7">(2)</a> <a href="#ref-for-sensor-readings-8">(3)</a> <a href="#ref-for-sensor-readings-9">(4)</a> <a href="#ref-for-sensor-readings-10">(5)</a> <a href="#ref-for-sensor-readings-11">(6)</a> <a href="#ref-for-sensor-readings-12">(7)</a> <a href="#ref-for-sensor-readings-13">(8)</a>
    <li><a href="#ref-for-sensor-readings-14">7.1. Sensor Type</a> <a href="#ref-for-sensor-readings-15">(2)</a>
    <li><a href="#ref-for-sensor-readings-16">7.2. Sensor</a>
    <li><a href="#ref-for-sensor-readings-17">8.2.1. SensorReading.timeStamp</a>
    <li><a href="#ref-for-sensor-readings-18">9.3. Unregister a Sensor</a> <a href="#ref-for-sensor-readings-19">(2)</a>
    <li><a href="#ref-for-sensor-readings-20">9.5. Observe a Sensor</a> <a href="#ref-for-sensor-readings-21">(2)</a> <a href="#ref-for-sensor-readings-22">(3)</a>
    <li><a href="#ref-for-sensor-readings-23">9.9. Update Current Reading</a>
    <li><a href="#ref-for-sensor-readings-24">10.1. Naming</a> <a href="#ref-for-sensor-readings-25">(2)</a>
    <li><a href="#ref-for-sensor-readings-26">10.2. Unit</a>
    <li><a href="#ref-for-sensor-readings-27">10.5. Definition Requirements</a> <a href="#ref-for-sensor-readings-28">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="low-level">
   <b><a href="#low-level">#low-level</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-low-level-1">1. Introduction</a>
    <li><a href="#ref-for-low-level-2">6. Concepts</a> <a href="#ref-for-low-level-3">(2)</a> <a href="#ref-for-low-level-4">(3)</a> <a href="#ref-for-low-level-5">(4)</a> <a href="#ref-for-low-level-6">(5)</a> <a href="#ref-for-low-level-7">(6)</a> <a href="#ref-for-low-level-8">(7)</a>
    <li><a href="#ref-for-low-level-9">10. Extensibility</a>
    <li><a href="#ref-for-low-level-10">10.1. Naming</a>
    <li><a href="#ref-for-low-level-11">10.3. Exposing High-Level vs. Low-Level Sensors</a> <a href="#ref-for-low-level-12">(2)</a> <a href="#ref-for-low-level-13">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="high-level">
   <b><a href="#high-level">#high-level</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-high-level-1">1. Introduction</a>
    <li><a href="#ref-for-high-level-2">6. Concepts</a> <a href="#ref-for-high-level-3">(2)</a> <a href="#ref-for-high-level-4">(3)</a> <a href="#ref-for-high-level-5">(4)</a> <a href="#ref-for-high-level-6">(5)</a> <a href="#ref-for-high-level-7">(6)</a> <a href="#ref-for-high-level-8">(7)</a>
    <li><a href="#ref-for-high-level-9">10. Extensibility</a>
    <li><a href="#ref-for-high-level-10">10.1. Naming</a>
    <li><a href="#ref-for-high-level-11">10.3. Exposing High-Level vs. Low-Level Sensors</a> <a href="#ref-for-high-level-12">(2)</a> <a href="#ref-for-high-level-13">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-fusion">
   <b><a href="#sensor-fusion">#sensor-fusion</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-fusion-1">6. Concepts</a> <a href="#ref-for-sensor-fusion-2">(2)</a> <a href="#ref-for-sensor-fusion-3">(3)</a> <a href="#ref-for-sensor-fusion-4">(4)</a> <a href="#ref-for-sensor-fusion-5">(5)</a> <a href="#ref-for-sensor-fusion-6">(6)</a> <a href="#ref-for-sensor-fusion-7">(7)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="smart-sensors">
   <b><a href="#smart-sensors">#smart-sensors</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-smart-sensors-1">6. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-hubs">
   <b><a href="#sensor-hubs">#sensor-hubs</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-hubs-1">6. Concepts</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reporting-modes">
   <b><a href="#reporting-modes">#reporting-modes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reporting-modes-1">6. Concepts</a> <a href="#ref-for-reporting-modes-2">(2)</a> <a href="#ref-for-reporting-modes-3">(3)</a> <a href="#ref-for-reporting-modes-4">(4)</a> <a href="#ref-for-reporting-modes-5">(5)</a> <a href="#ref-for-reporting-modes-6">(6)</a> <a href="#ref-for-reporting-modes-7">(7)</a>
    <li><a href="#ref-for-reporting-modes-8">7.2. Sensor</a>
    <li><a href="#ref-for-reporting-modes-9">9.6. Find Current Reporting Mode of a Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="frequency">
   <b><a href="#frequency">#frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-frequency-1">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-frequency-2">9.5. Observe a Sensor</a> <a href="#ref-for-frequency-3">(2)</a>
    <li><a href="#ref-for-frequency-4">9.6. Find Current Reporting Mode of a Sensor</a>
    <li><a href="#ref-for-frequency-5">9.7. Find the polling frequency of a Sensor</a> <a href="#ref-for-frequency-6">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="periodic">
   <b><a href="#periodic">#periodic</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-periodic-1">6. Concepts</a> <a href="#ref-for-periodic-2">(2)</a> <a href="#ref-for-periodic-3">(3)</a>
    <li><a href="#ref-for-periodic-4">7.1. Sensor Type</a>
    <li><a href="#ref-for-periodic-5">7.2. Sensor</a>
    <li><a href="#ref-for-periodic-6">9.5. Observe a Sensor</a>
    <li><a href="#ref-for-periodic-7">9.6. Find Current Reporting Mode of a Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="auto">
   <b><a href="#auto">#auto</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-auto-1">6. Concepts</a> <a href="#ref-for-auto-2">(2)</a>
    <li><a href="#ref-for-auto-3">7.1. Sensor Type</a>
    <li><a href="#ref-for-auto-4">9.5. Observe a Sensor</a>
    <li><a href="#ref-for-auto-5">9.6. Find Current Reporting Mode of a Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-type">
   <b><a href="#sensor-type">#sensor-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-type-1">3. Background</a> <a href="#ref-for-sensor-type-2">(2)</a> <a href="#ref-for-sensor-type-3">(3)</a> <a href="#ref-for-sensor-type-4">(4)</a> <a href="#ref-for-sensor-type-5">(5)</a> <a href="#ref-for-sensor-type-6">(6)</a>
    <li><a href="#ref-for-sensor-type-7">6. Concepts</a> <a href="#ref-for-sensor-type-8">(2)</a> <a href="#ref-for-sensor-type-9">(3)</a> <a href="#ref-for-sensor-type-10">(4)</a> <a href="#ref-for-sensor-type-11">(5)</a> <a href="#ref-for-sensor-type-12">(6)</a> <a href="#ref-for-sensor-type-13">(7)</a> <a href="#ref-for-sensor-type-14">(8)</a>
    <li><a href="#ref-for-sensor-type-15">7.1. Sensor Type</a> <a href="#ref-for-sensor-type-16">(2)</a> <a href="#ref-for-sensor-type-17">(3)</a> <a href="#ref-for-sensor-type-18">(4)</a> <a href="#ref-for-sensor-type-19">(5)</a> <a href="#ref-for-sensor-type-20">(6)</a> <a href="#ref-for-sensor-type-21">(7)</a>
    <li><a href="#ref-for-sensor-type-22">7.2. Sensor</a>
    <li><a href="#ref-for-sensor-type-23">9.1. Construct Sensor Object</a>
    <li><a href="#ref-for-sensor-type-24">9.5. Observe a Sensor</a>
    <li><a href="#ref-for-sensor-type-25">9.9. Update Current Reading</a>
    <li><a href="#ref-for-sensor-type-26">10. Extensibility</a> <a href="#ref-for-sensor-type-27">(2)</a>
    <li><a href="#ref-for-sensor-type-28">10.5. Definition Requirements</a> <a href="#ref-for-sensor-type-29">(2)</a> <a href="#ref-for-sensor-type-30">(3)</a>
    <li><a href="#ref-for-sensor-type-31">10.6. Extending the Permission API</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-subclass">
   <b><a href="#sensor-subclass">#sensor-subclass</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-subclass-1">10.5. Definition Requirements</a> <a href="#ref-for-sensor-subclass-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensorreading-subclass">
   <b><a href="#sensorreading-subclass">#sensorreading-subclass</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensorreading-subclass-1">7.1. Sensor Type</a> <a href="#ref-for-sensorreading-subclass-2">(2)</a>
    <li><a href="#ref-for-sensorreading-subclass-3">10.5. Definition Requirements</a> <a href="#ref-for-sensorreading-subclass-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="default-sensor">
   <b><a href="#default-sensor">#default-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-default-sensor-1">9.1. Construct Sensor Object</a>
    <li><a href="#ref-for-default-sensor-2">10.5. Definition Requirements</a> <a href="#ref-for-default-sensor-3">(2)</a> <a href="#ref-for-default-sensor-4">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="supported-reporting-modes">
   <b><a href="#supported-reporting-modes">#supported-reporting-modes</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-supported-reporting-modes-1">7.2. Sensor</a>
    <li><a href="#ref-for-supported-reporting-modes-2">10.5. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="identifying-parameters">
   <b><a href="#identifying-parameters">#identifying-parameters</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-identifying-parameters-1">9.1. Construct Sensor Object</a> <a href="#ref-for-identifying-parameters-2">(2)</a>
    <li><a href="#ref-for-identifying-parameters-3">10.5. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="construct-sensorreading-object">
   <b><a href="#construct-sensorreading-object">#construct-sensorreading-object</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-construct-sensorreading-object-1">9.9. Update Current Reading</a>
    <li><a href="#ref-for-construct-sensorreading-object-2">10.5. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="concept-sensor">
   <b><a href="#concept-sensor">#concept-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-concept-sensor-1">3. Background</a> <a href="#ref-for-concept-sensor-2">(2)</a> <a href="#ref-for-concept-sensor-3">(3)</a> <a href="#ref-for-concept-sensor-4">(4)</a> <a href="#ref-for-concept-sensor-5">(5)</a> <a href="#ref-for-concept-sensor-6">(6)</a> <a href="#ref-for-concept-sensor-7">(7)</a> <a href="#ref-for-concept-sensor-8">(8)</a>
    <li><a href="#ref-for-concept-sensor-9">5. Security and privacy considerations</a> <a href="#ref-for-concept-sensor-10">(2)</a> <a href="#ref-for-concept-sensor-11">(3)</a>
    <li><a href="#ref-for-concept-sensor-12">6. Concepts</a> <a href="#ref-for-concept-sensor-13">(2)</a> <a href="#ref-for-concept-sensor-14">(3)</a> <a href="#ref-for-concept-sensor-15">(4)</a> <a href="#ref-for-concept-sensor-16">(5)</a> <a href="#ref-for-concept-sensor-17">(6)</a> <a href="#ref-for-concept-sensor-18">(7)</a>
    <li><a href="#ref-for-concept-sensor-19">7.1. Sensor Type</a> <a href="#ref-for-concept-sensor-20">(2)</a> <a href="#ref-for-concept-sensor-21">(3)</a> <a href="#ref-for-concept-sensor-22">(4)</a>
    <li><a href="#ref-for-concept-sensor-23">7.2. Sensor</a> <a href="#ref-for-concept-sensor-24">(2)</a> <a href="#ref-for-concept-sensor-25">(3)</a> <a href="#ref-for-concept-sensor-26">(4)</a> <a href="#ref-for-concept-sensor-27">(5)</a> <a href="#ref-for-concept-sensor-28">(6)</a> <a href="#ref-for-concept-sensor-29">(7)</a>
    <li><a href="#ref-for-concept-sensor-30">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-concept-sensor-31">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-concept-sensor-32">8.1.8. Event handlers</a>
    <li><a href="#ref-for-concept-sensor-33">8.2. The SensorReading Interface</a>
    <li><a href="#ref-for-concept-sensor-34">8.2.1. SensorReading.timeStamp</a>
    <li><a href="#ref-for-concept-sensor-35">9.1. Construct Sensor Object</a> <a href="#ref-for-concept-sensor-36">(2)</a> <a href="#ref-for-concept-sensor-37">(3)</a>
    <li><a href="#ref-for-concept-sensor-38">9.2. Register a Sensor</a>
    <li><a href="#ref-for-concept-sensor-39">9.3. Unregister a Sensor</a>
    <li><a href="#ref-for-concept-sensor-40">9.4. Set Sensor Settings</a>
    <li><a href="#ref-for-concept-sensor-41">9.5. Observe a Sensor</a>
    <li><a href="#ref-for-concept-sensor-42">9.6. Find Current Reporting Mode of a Sensor</a>
    <li><a href="#ref-for-concept-sensor-43">9.7. Find the polling frequency of a Sensor</a>
    <li><a href="#ref-for-concept-sensor-44">9.9. Update Current Reading</a>
    <li><a href="#ref-for-concept-sensor-45">9.12. Request Sensor Access</a>
    <li><a href="#ref-for-concept-sensor-46">10.1. Naming</a> <a href="#ref-for-concept-sensor-47">(2)</a> <a href="#ref-for-concept-sensor-48">(3)</a>
    <li><a href="#ref-for-concept-sensor-49">10.5. Definition Requirements</a> <a href="#ref-for-concept-sensor-50">(2)</a> <a href="#ref-for-concept-sensor-51">(3)</a>
    <li><a href="#ref-for-concept-sensor-52">10.7. Example WebIDL</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="activated-sensor-objects">
   <b><a href="#activated-sensor-objects">#activated-sensor-objects</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-activated-sensor-objects-1">9.2. Register a Sensor</a>
    <li><a href="#ref-for-activated-sensor-objects-2">9.3. Unregister a Sensor</a> <a href="#ref-for-activated-sensor-objects-3">(2)</a>
    <li><a href="#ref-for-activated-sensor-objects-4">9.6. Find Current Reporting Mode of a Sensor</a>
    <li><a href="#ref-for-activated-sensor-objects-5">9.7. Find the polling frequency of a Sensor</a>
    <li><a href="#ref-for-activated-sensor-objects-6">9.9. Update Current Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-reading">
   <b><a href="#current-reading">#current-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-reading-1">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-current-reading-2">8.3.1. SensorReadingEvent.reading</a>
    <li><a href="#ref-for-current-reading-3">9.2. Register a Sensor</a>
    <li><a href="#ref-for-current-reading-4">9.9. Update Current Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="supports-periodic-reporting-mode">
   <b><a href="#supports-periodic-reporting-mode">#supports-periodic-reporting-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-supports-periodic-reporting-mode-1">9.1. Construct Sensor Object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="reporting-flag">
   <b><a href="#reporting-flag">#reporting-flag</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-reporting-flag-1">9.9. Update Current Reading</a> <a href="#ref-for-reporting-flag-2">(2)</a> <a href="#ref-for-reporting-flag-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-reporting-mode">
   <b><a href="#current-reporting-mode">#current-reporting-mode</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-reporting-mode-1">9.3. Unregister a Sensor</a>
    <li><a href="#ref-for-current-reporting-mode-2">9.4. Set Sensor Settings</a> <a href="#ref-for-current-reporting-mode-3">(2)</a>
    <li><a href="#ref-for-current-reporting-mode-4">9.5. Observe a Sensor</a> <a href="#ref-for-current-reporting-mode-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="current-polling-frequency">
   <b><a href="#current-polling-frequency">#current-polling-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-current-polling-frequency-1">9.3. Unregister a Sensor</a>
    <li><a href="#ref-for-current-polling-frequency-2">9.4. Set Sensor Settings</a> <a href="#ref-for-current-polling-frequency-3">(2)</a>
    <li><a href="#ref-for-current-polling-frequency-4">9.5. Observe a Sensor</a> <a href="#ref-for-current-polling-frequency-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="retrieve-the-sensor-permission">
   <b><a href="#retrieve-the-sensor-permission">#retrieve-the-sensor-permission</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-retrieve-the-sensor-permission-1">9.12. Request Sensor Access</a>
    <li><a href="#ref-for-retrieve-the-sensor-permission-2">10.5. Definition Requirements</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor">
   <b><a href="#sensor">#sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-1">3. Background</a>
    <li><a href="#ref-for-sensor-2">4. A note on Feature Detection of Hardware Features</a>
    <li><a href="#ref-for-sensor-3">7.1. Sensor Type</a>
    <li><a href="#ref-for-sensor-4">7.2. Sensor</a>
    <li><a href="#ref-for-sensor-5">8.1. The Sensor Interface</a> <a href="#ref-for-sensor-6">(2)</a> <a href="#ref-for-sensor-7">(3)</a> <a href="#ref-for-sensor-8">(4)</a>
    <li><a href="#ref-for-sensor-9">8.1.1. Sensor.state</a>
    <li><a href="#ref-for-sensor-10">8.1.2. Sensor.reading</a> <a href="#ref-for-sensor-11">(2)</a>
    <li><a href="#ref-for-sensor-12">9.1. Construct Sensor Object</a> <a href="#ref-for-sensor-13">(2)</a> <a href="#ref-for-sensor-14">(3)</a>
    <li><a href="#ref-for-sensor-15">9.2. Register a Sensor</a>
    <li><a href="#ref-for-sensor-16">9.3. Unregister a Sensor</a>
    <li><a href="#ref-for-sensor-17">9.8. Update State</a> <a href="#ref-for-sensor-18">(2)</a>
    <li><a href="#ref-for-sensor-19">9.10. Update Reading</a>
    <li><a href="#ref-for-sensor-20">9.11. Handle Errors</a>
    <li><a href="#ref-for-sensor-21">9.12. Request Sensor Access</a>
    <li><a href="#ref-for-sensor-22">10.1. Naming</a> <a href="#ref-for-sensor-23">(2)</a>
    <li><a href="#ref-for-sensor-24">10.4. When is Enabling Multiple Sensors of the Same Type Not the Right Choice?</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-state">
   <b><a href="#dom-sensor-state">#dom-sensor-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-state-1">8.1.1. Sensor.state</a>
    <li><a href="#ref-for-dom-sensor-state-2">9.8. Update State</a>
    <li><a href="#ref-for-dom-sensor-state-3">9.10. Update Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-reading">
   <b><a href="#dom-sensor-reading">#dom-sensor-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-reading-1">8.1.2. Sensor.reading</a> <a href="#ref-for-dom-sensor-reading-2">(2)</a>
    <li><a href="#ref-for-dom-sensor-reading-3">8.1.4. Sensor.stop()</a>
    <li><a href="#ref-for-dom-sensor-reading-4">9.1. Construct Sensor Object</a>
    <li><a href="#ref-for-dom-sensor-reading-5">9.10. Update Reading</a>
    <li><a href="#ref-for-dom-sensor-reading-6">9.11. Handle Errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-start">
   <b><a href="#dom-sensor-start">#dom-sensor-start</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-start-1">8.1.3. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensor-stop">
   <b><a href="#dom-sensor-stop">#dom-sensor-stop</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensor-stop-1">8.1.4. Sensor.stop()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-sensoroptions">
   <b><a href="#dictdef-sensoroptions">#dictdef-sensoroptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-sensoroptions-1">9.1. Construct Sensor Object</a>
    <li><a href="#ref-for-dictdef-sensoroptions-2">10.5. Definition Requirements</a> <a href="#ref-for-dictdef-sensoroptions-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensoroptions-frequency">
   <b><a href="#dom-sensoroptions-frequency">#dom-sensoroptions-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensoroptions-frequency-1">9.1. Construct Sensor Object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="enumdef-sensorstate">
   <b><a href="#enumdef-sensorstate">#enumdef-sensorstate</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-enumdef-sensorstate-1">8.1. The Sensor Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorstate-idle">
   <b><a href="#dom-sensorstate-idle">#dom-sensorstate-idle</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorstate-idle-1">8.1. The Sensor Interface</a> <a href="#ref-for-dom-sensorstate-idle-2">(2)</a>
    <li><a href="#ref-for-dom-sensorstate-idle-3">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-dom-sensorstate-idle-4">8.1.4. Sensor.stop()</a> <a href="#ref-for-dom-sensorstate-idle-5">(2)</a>
    <li><a href="#ref-for-dom-sensorstate-idle-6">9.1. Construct Sensor Object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorstate-activating">
   <b><a href="#dom-sensorstate-activating">#dom-sensorstate-activating</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorstate-activating-1">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-dom-sensorstate-activating-2">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-dom-sensorstate-activating-3">9.2. Register a Sensor</a>
    <li><a href="#ref-for-dom-sensorstate-activating-4">9.10. Update Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorstate-active">
   <b><a href="#dom-sensorstate-active">#dom-sensorstate-active</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorstate-active-1">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-dom-sensorstate-active-2">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-dom-sensorstate-active-3">9.10. Update Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorstate-errored">
   <b><a href="#dom-sensorstate-errored">#dom-sensorstate-errored</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorstate-errored-1">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-dom-sensorstate-errored-2">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-dom-sensorstate-errored-3">8.1.4. Sensor.stop()</a>
    <li><a href="#ref-for-dom-sensorstate-errored-4">9.11. Handle Errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="state">
   <b><a href="#state">#state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-state-1">8.1.1. Sensor.state</a>
    <li><a href="#ref-for-state-2">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-state-3">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-state-4">8.1.4. Sensor.stop()</a>
    <li><a href="#ref-for-state-5">9.1. Construct Sensor Object</a>
    <li><a href="#ref-for-state-6">9.8. Update State</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="desired-frequency">
   <b><a href="#desired-frequency">#desired-frequency</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-desired-frequency-1">9.1. Construct Sensor Object</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensor-task-source">
   <b><a href="#sensor-task-source">#sensor-task-source</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensor-task-source-1">8.1. The Sensor Interface</a> <a href="#ref-for-sensor-task-source-2">(2)</a> <a href="#ref-for-sensor-task-source-3">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensorreading">
   <b><a href="#sensorreading">#sensorreading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensorreading-1">7.1. Sensor Type</a>
    <li><a href="#ref-for-sensorreading-2">7.2. Sensor</a>
    <li><a href="#ref-for-sensorreading-3">8.1. The Sensor Interface</a>
    <li><a href="#ref-for-sensorreading-4">8.1.2. Sensor.reading</a>
    <li><a href="#ref-for-sensorreading-5">8.2. The SensorReading Interface</a>
    <li><a href="#ref-for-sensorreading-6">8.3. The SensorReadingEvent Interface</a> <a href="#ref-for-sensorreading-7">(2)</a>
    <li><a href="#ref-for-sensorreading-8">9.5. Observe a Sensor</a>
    <li><a href="#ref-for-sensorreading-9">9.10. Update Reading</a>
    <li><a href="#ref-for-sensorreading-10">10.1. Naming</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorreading-timestamp">
   <b><a href="#dom-sensorreading-timestamp">#dom-sensorreading-timestamp</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorreading-timestamp-1">9.5. Observe a Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensorreadingevent">
   <b><a href="#sensorreadingevent">#sensorreadingevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensorreadingevent-1">9.10. Update Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-sensorreadingeventinit">
   <b><a href="#dictdef-sensorreadingeventinit">#dictdef-sensorreadingeventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-sensorreadingeventinit-1">8.3. The SensorReadingEvent Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorreadingevent-reading">
   <b><a href="#dom-sensorreadingevent-reading">#dom-sensorreadingevent-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorreadingevent-reading-1">8.3. The SensorReadingEvent Interface</a>
    <li><a href="#ref-for-dom-sensorreadingevent-reading-2">9.10. Update Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="sensorerrorevent">
   <b><a href="#sensorerrorevent">#sensorerrorevent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-sensorerrorevent-1">9.11. Handle Errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-sensorerrorevent-error">
   <b><a href="#dom-sensorerrorevent-error">#dom-sensorerrorevent-error</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-sensorerrorevent-error-1">9.11. Handle Errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-sensorerroreventinit">
   <b><a href="#dictdef-sensorerroreventinit">#dictdef-sensorerroreventinit</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-sensorerroreventinit-1">8.4. The SensorErrorEvent Interface</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="register-a-sensor">
   <b><a href="#register-a-sensor">#register-a-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-register-a-sensor-1">8.1.3. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="unregister-a-sensor">
   <b><a href="#unregister-a-sensor">#unregister-a-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-unregister-a-sensor-1">8.1.4. Sensor.stop()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="set-sensor-settings">
   <b><a href="#set-sensor-settings">#set-sensor-settings</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-set-sensor-settings-1">9.2. Register a Sensor</a>
    <li><a href="#ref-for-set-sensor-settings-2">9.3. Unregister a Sensor</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="observe-a-sensor">
   <b><a href="#observe-a-sensor">#observe-a-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-observe-a-sensor-1">9.4. Set Sensor Settings</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="find-current-reporting-mode-of-a-sensor">
   <b><a href="#find-current-reporting-mode-of-a-sensor">#find-current-reporting-mode-of-a-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-find-current-reporting-mode-of-a-sensor-1">9.4. Set Sensor Settings</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="find-the-polling-frequency-of-a-sensor">
   <b><a href="#find-the-polling-frequency-of-a-sensor">#find-the-polling-frequency-of-a-sensor</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-find-the-polling-frequency-of-a-sensor-1">9.4. Set Sensor Settings</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-state">
   <b><a href="#update-state">#update-state</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-state-1">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-update-state-2">8.1.4. Sensor.stop()</a>
    <li><a href="#ref-for-update-state-3">9.10. Update Reading</a>
    <li><a href="#ref-for-update-state-4">9.11. Handle Errors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-current-reading">
   <b><a href="#update-current-reading">#update-current-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-current-reading-1">9.5. Observe a Sensor</a> <a href="#ref-for-update-current-reading-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="update-reading">
   <b><a href="#update-reading">#update-reading</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-update-reading-1">9.2. Register a Sensor</a>
    <li><a href="#ref-for-update-reading-2">9.9. Update Current Reading</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="handle-errors">
   <b><a href="#handle-errors">#handle-errors</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-handle-errors-1">8.1.3. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-sensor-access">
   <b><a href="#request-sensor-access">#request-sensor-access</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-sensor-access-1">8.1.3. Sensor.start()</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="equivalent">
   <b><a href="#equivalent">#equivalent</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-equivalent-1">8.1.3. Sensor.start()</a>
    <li><a href="#ref-for-equivalent-2">8.1.4. Sensor.stop()</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>