<!DOCTYPE html>
<html lang="en" dir="ltr" typeof="bibo:Document w3p:CR" prefix="bibo: http://purl.org/ontology/bibo/ w3p: http://www.w3.org/2001/02pd/rec54#">
<head><meta lang="" property="dc:language" content="en">
    <meta charset="utf-8">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <title>Model for Tabular Data and Metadata on the Web</title>
    
    
    
    
    
    <style type="text/css">
      .grammar td { font-family: monospace; vertical-align: top; }
      .grammar-literal { color: gray;}
      ol.algorithm {
        counter-reset: numsection;
        list-style-type: none;
      }
      ol.algorithm > li {
        margin: 1em -1em;
        padding-right: 1em;
        text-indent: -1em;
      }
      ol.algorithm > li:before {
        font-weight: bold;
        counter-increment: numsection;
        content: counters(numsection, ".") " ";
      }
      ol.algorithm>li p, ol.algorithm>li ul {text-indent: 0em}
      ol.algorithm>li>p:first-child {position: relative; display: inline;}
      pre {overflow: auto;}
      dd a.externalDFN, p a.externalDFN, li a.externalDFN {border-bottom:  1px solid #99c; font-style: italic;}

      dl.typography dt { font-weight: normal}
      dl.typography dd { margin-bottom: 0.3em; margin-top: 0.2em;}
      dl.typography a.externalDFN { border-bottom:  1px solid #99c; font-style: italic; }
   </style>
  <style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #C83500;
}

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

@media print {
    .removeOnSave {
        display: none;
    }
}
</style><style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title , div.ednote-title, div.warning-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title, div.ednote-title { color: #2b2; }
div.warning-title { color: #f22; }
div.issue-title span, div.note-title span, div.ednote-title span, div.warning-title span {
    text-transform: uppercase;
}
div.note, div.issue, div.ednote, div.warning {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .ednote > p:first-child, .issue > p:first-child, .warning > p:first-child { margin-top: 0 }
.issue, .note, .ednote, .warning {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note , div.ednote,  div.warning {
    padding: 1em 1.2em 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.ednote, span.issue, span.warning { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note, .ednote {
    border-color: #52e052;
    background: #e9fbe9;
}

.warning {
    border-color: #f11;
    border-right-width: .2em;
    border-top-width: .2em;
    border-bottom-width: .2em;
    border-style: solid;
    background: #fbe9e9;
}

.warning-title:before{
    content: "⚠"; /*U+26A0 WARNING SIGN*/
    font-size: 3em;
    float: left;
    height: 100%;
    padding-right: .3em;
    vertical-align: top;
    margin-top: -0.5em;
}

li.task-list-item {
    list-style: none;
}

input.task-list-item-checkbox {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
}
</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/W3C-CR"><style type="text/css"></style><!--[if lt IE 9]><script src='https://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--><style type='text/css'>
.diff-old-a {
  font-size: smaller;
  color: red;
}

.diff-new { background-color: yellow; }
.diff-chg { background-color: lime; }
.diff-new:before,
.diff-new:after
    { content: "\2191" }
.diff-chg:before, .diff-chg:after
    { content: "\2195" }
.diff-old { text-decoration: line-through; background-color: #FBB; }
.diff-old:before,
.diff-old:after
    { content: "\2193" }
:focus { border: thin red solid}
</style>
</head>

<body class="h-entry" data-feedly-mini="yes" role="document" id="respecDocument">
<div class="head" role="contentinfo" id="respecHeader">
<p>
<a href="http://www.w3.org/">
<img width="72" height="48" src="https://www.w3.org/Icons/w3c_home" alt="W3C">
</a>
</p>
<h1 class="title p-name" id="title" property="dcterms:title">
Model
for
Tabular
Data
and
Metadata
on
the
Web
</h1>
<h2 id="w3c-candidate-recommendation-16-july-2015">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<del class="diff-old">Working
Draft
</del>
<ins class="diff-chg">Candidate
Recommendation
</ins><time property="dcterms:issued" class="dt-published" datetime="2015-07-16">
16
<del class="diff-old">April
</del>
<ins class="diff-chg">July
</ins>
2015
</time>
</h2>
<dl>
<dt>
This
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/2015/WD-tabular-data-model-20150416/
</del>
<a class="u-url" href="http://www.w3.org/TR/2015/CR-tabular-data-model-20150716/">
<ins class="diff-chg">http://www.w3.org/TR/2015/CR-tabular-data-model-20150716/
</ins>
</a>
</dd>
<dt>
Latest
published
version:
</dt>
<dd>
<a href="http://www.w3.org/TR/tabular-data-model/">
http://www.w3.org/TR/tabular-data-model/
</a>
</dd>
<dt>
Latest
editor's
draft:
</dt>
<dd>
<a href="http://w3c.github.io/csvw/syntax/">
http://w3c.github.io/csvw/syntax/
</a>
</dd>
<dt>
<ins class="diff-new">Test
suite:
</ins></dt><dd><a href="http://www.w3.org/2013/csvw/tests/"><ins class="diff-new">
http://www.w3.org/2013/csvw/tests/
</ins></a></dd><dt><ins class="diff-new">
Implementation
report:
</ins></dt><dd><a href="http://www.w3.org/2013/csvw/tests/reports/index.html"><ins class="diff-new">
http://www.w3.org/2013/csvw/tests/reports/index.html
</ins></a></dd><dt>
Previous
version:
</dt>
<dd>
<del class="diff-old">http://www.w3.org/TR/2015/WD-tabular-data-model-20150108/
</del>
<a rel="dcterms:replaces" href="http://www.w3.org/TR/2015/WD-tabular-data-model-20150416/">
<ins class="diff-chg">http://www.w3.org/TR/2015/WD-tabular-data-model-20150416/
</ins>
</a>
</dd>
<dt>
Editors:
</dt>
<dd class="p-author h-card vcard" property="bibo:editor" resource="_:editor0" data-editor-id="33715">
<span property="rdf:first" typeof="foaf:Person">
<span property="foaf:name" class="p-name fn">
Jeni
Tennison
</span>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://theodi.org/">
Open
Data
Institute
</a>
</span>
<span property="rdf:rest" resource="_:editor1">
</span>
</dd>
<dd class="p-author h-card vcard" resource="_:editor1" data-editor-id="44770">
<span property="rdf:first" typeof="foaf:Person">
<meta property="foaf:name" content="Gregg Kellogg">
<a class="u-url url p-name fn" property="foaf:homepage" href="http://greggkellogg.net/">
Gregg
Kellogg
</a>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://kellogg-assoc.com/">
Kellogg
Associates
</a>
</span>
<span property="rdf:rest" resource="rdf:nil">
</span>
</dd>
<dt>
Authors:
</dt>
<dd class="p-author h-card vcard" data-editor-id="33715">
<span property="dc:contributor" typeof="foaf:Person">
<span property="foaf:name" class="p-name fn">
Jeni
Tennison
</span>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://theodi.org/">
Open
Data
Institute
</a>
</span>
</dd>
<dd class="p-author h-card vcard" data-editor-id="44770">
<span property="dc:contributor" typeof="foaf:Person">
<meta property="foaf:name" content="Gregg Kellogg">
<a class="u-url url p-name fn" property="foaf:homepage" href="http://greggkellogg.net/">
Gregg
Kellogg
</a>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://kellogg-assoc.com/">
Kellogg
Associates
</a>
</span>
</dd>
<dd class="p-author h-card vcard" data-editor-id="7382">
<span property="dc:contributor" typeof="foaf:Person">
<meta property="foaf:name" content="Ivan Herman">
<a class="u-url url p-name fn" property="foaf:homepage" href="http://www.w3.org/People/Ivan/">
Ivan
Herman
</a>,
<a property="foaf:workplaceHomepage" class="p-org org h-org h-card" href="http://www.w3.org">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
</a>
</span>
</dd>
<dt>
Repository:
</dt>
<dd>
<a href="https://github.com/w3c/csvw">
We
are
on
Github
</a>
</dd>
<dd>
<a href="https://github.com/w3c/csvw">
File
a
bug
</a>
</dd>
<dt>
Changes:
</dt>
<dd>
<a href="diff-20150716.html">
Diff
to
previous
version
</a>
</dd>
<dd>
<a href="https://github.com/w3c/csvw/commits/gh-pages">
Commit
history
</a>
</dd>
</dl>
<p class="copyright">
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">
Copyright
</a>
©
2015
<a href="http://www.w3.org/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
</a>
<sup>
®
</sup>
(
<a href="http://www.csail.mit.edu/">
<abbr title="Massachusetts Institute of Technology">
MIT
</abbr>
</a>,
<a href="http://www.ercim.eu/">
<abbr title="European Research Consortium for Informatics and Mathematics">
ERCIM
</abbr>
</a>,
<a href="http://www.keio.ac.jp/">
Keio
</a>,
<a href="http://ev.buaa.edu.cn/">
Beihang
</a>
).
<abbr title="World Wide Web Consortium">
W3C
</abbr>
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">
liability
</a>,
<a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">
trademark
</a>
and
<a href="http://www.w3.org/Consortium/Legal/copyright-documents">
document
use
</a>
rules
apply.
</p>
<hr>
</div>
<section id="abstract" class="introductory" property="dc:abstract">
<h2 id="h-abstract" resource="#h-abstract">
<span property="xhv:role" resource="xhv:heading">
Abstract
</span>
</h2>
<p>
Tabular
data
is
routinely
transferred
on
the
web
in
a
variety
of
formats,
including
variants
on
CSV,
tab-delimited
files,
fixed
field
formats,
spreadsheets,
HTML
tables,
and
SQL
dumps.
This
document
outlines
a
data
model,
or
infoset,
for
tabular
data
and
metadata
about
that
tabular
data
that
can
be
used
as
a
basis
for
validation,
display,
or
creating
other
formats.
It
also
contains
some
non-normative
guidance
for
publishing
tabular
data
as
CSV
and
how
that
maps
into
the
tabular
data
model.
</p>
<p>
An
annotated
model
of
tabular
data
can
be
supplemented
by
separate
metadata
about
the
table.
This
specification
defines
how
implementations
should
locate
that
metadata,
given
a
file
containing
tabular
data.
The
standard
syntax
for
that
metadata
is
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
Note,
however,
that
applications
may
have
other
means
to
create
annotated
tables,
e.g.,
through
some
application
specific
API-s;
this
model
does
not
depend
on
the
specificities
described
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
</section>
<section id="sotd" class="introductory">
<h2 id="h-sotd" resource="#h-sotd">
<span property="xhv:role" resource="xhv:heading">
Status
of
This
Document
</span>
</h2>
<p>
<em>
This
section
describes
the
status
of
this
document
at
the
time
of
its
publication.
Other
documents
may
supersede
this
document.
A
list
of
current
<abbr title="World Wide Web Consortium">
W3C
</abbr>
publications
and
the
latest
revision
of
this
technical
report
can
be
found
in
the
<a href="http://www.w3.org/TR/">
<abbr title="World Wide Web Consortium">
W3C
</abbr>
technical
reports
index
</a>
at
http://www.w3.org/TR/.
</em>
</p>
<p>
The
CSV
on
the
Web
Working
Group
was
chartered
to
produce
a
Recommendation
"Access
methods
for
CSV
Metadata"
as
well
as
Recommendations
for
"Metadata
vocabulary
for
CSV
data"
and
"Mapping
mechanism
to
transforming
CSV
into
various
Formats
(e.g.,
RDF,
JSON,
or
XML)".
This
document
aims
to
primarily
satisfy
the
first
of
those
Recommendations
(see
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>
),
though
it
also
specifies
an
underlying
model
for
tabular
data
and
is
therefore
a
basis
for
the
other
chartered
Recommendations.
</p>
<p>
This
definition
of
CSV
used
in
this
document
is
based
on
IETF's
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
]
which
is
an
Informational
RFC.
The
working
group's
expectation
is
that
future
suggestions
to
refine
RFC
4180
will
be
relayed
to
the
IETF
(e.g.
around
encoding
and
line
endings)
and
contribute
to
its
discussions
about
moving
CSV
to
the
Standards
track.
</p>
<p>
Many
files
containing
tabular
data
embed
metadata,
for
example
in
lines
before
the
header
row
of
an
otherwise
standard
CSV
document.
This
specification
does
not
define
any
formats
for
embedding
metadata
within
CSV
files,
aside
from
the
titles
of
columns
in
the
header
row
which
is
defined
in
CSV.
We
would
encourage
groups
that
define
tabular
data
formats
to
also
define
a
mapping
into
the
annotated
tabular
data
model
defined
in
this
document.
</p>
<p>
This
document
was
published
by
the
<a href="http://www.w3.org/2013/csvw/">
CSV
on
the
Web
Working
Group
</a>
as
a
<del class="diff-old">Working
Draft.
</del>
<ins class="diff-chg">Candidate
Recommendation.
</ins>
This
document
is
intended
to
become
a
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Recommendation.
If
you
wish
to
make
comments
regarding
this
document,
please
send
them
to
<a href="mailto:public-csv-wg@w3.org">
public-csv-wg@w3.org
</a>
(
<a href="mailto:public-csv-wg-request@w3.org?subject=subscribe">
subscribe
</a>,
<a href="http://lists.w3.org/Archives/Public/public-csv-wg/">
archives
</a>
).
<abbr title="World Wide Web Consortium">
<ins class="diff-new">W3C
</ins></abbr><ins class="diff-new">
publishes
a
Candidate
Recommendation
to
indicate
that
the
document
is
believed
to
be
stable
and
to
encourage
implementation
by
the
developer
community.
This
Candidate
Recommendation
is
expected
to
advance
to
Proposed
Recommendation
no
earlier
than
30
October
2015.
</ins>
All
comments
are
welcome.
</p>
<p>
<ins class="diff-new">Please
see
the
Working
Group's
</ins><a href="http://www.w3.org/2013/csvw/tests/reports/index.html"><ins class="diff-new">
implementation
report
</ins></a>.</p><p>
Publication
as
a
<del class="diff-old">Working
Draft
</del>
<ins class="diff-chg">Candidate
Recommendation
</ins>
does
not
imply
endorsement
by
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Membership.
This
is
a
draft
document
and
may
be
updated,
replaced
or
obsoleted
by
other
documents
at
any
time.
It
is
inappropriate
to
cite
this
document
as
other
than
work
in
progress.
</p>
<p>
This
document
was
produced
by
a
group
operating
under
the
<a id="sotd_patent" property="w3p:patentRules" href="http://www.w3.org/Consortium/Patent-Policy-20040205/">
5
February
2004
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
<abbr title="World Wide Web Consortium">
W3C
</abbr>
maintains
a
<a href="http://www.w3.org/2004/01/pp-impl/68238/status" rel="disclosure">
public
list
of
any
patent
disclosures
</a>
made
in
connection
with
the
deliverables
of
the
group;
that
page
also
includes
instructions
for
disclosing
a
patent.
An
individual
who
has
actual
knowledge
of
a
patent
which
the
individual
believes
contains
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">
Essential
Claim(s)
</a>
must
disclose
the
information
in
accordance
with
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">
section
6
of
the
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Patent
Policy
</a>.
</p>
<p>
This
document
is
governed
by
the
<a id="w3c_process_revision" href="http://www.w3.org/2014/Process-20140801/">
1
August
2014
<abbr title="World Wide Web Consortium">
W3C
</abbr>
Process
Document
</a>.
</p>
</section>
<section id="toc">
<h2 class="introductory" id="h-toc" resource="#h-toc">
<span property="xhv:role" resource="xhv:heading">
Table
of
Contents
</span>
</h2>
<ul class="toc" role="directory" id="respecContents">
<li class="tocline">
<a href="#intro" class="tocxref">
<span class="secno">
1.
</span>
Introduction
</a>
</li>
<li class="tocline">
<a href="#conformance" class="tocxref">
<span class="secno">
2.
</span>
Conformance
</a>
</li>
<li class="tocline">
<a href="#typographical-conventions" class="tocxref">
<span class="secno">
3.
</span>
Typographical
conventions
</a>
</li>
<li class="tocline">
<a href="#model" class="tocxref">
<span class="secno">
4.
</span>
Tabular
Data
Models
</a>
<ul class="toc">
<li class="tocline">
<a href="#table-groups" class="tocxref">
<span class="secno">
4.1
</span>
Table
groups
</a>
</li>
<li class="tocline">
<a href="#tables" class="tocxref">
<span class="secno">
4.2
</span>
Tables
</a>
</li>
<li class="tocline">
<a href="#columns" class="tocxref">
<span class="secno">
4.3
</span>
Columns
</a>
</li>
<li class="tocline">
<a href="#rows" class="tocxref">
<span class="secno">
4.4
</span>
Rows
</a>
</li>
<li class="tocline">
<a href="#cells" class="tocxref">
<span class="secno">
4.5
</span>
Cells
</a>
</li>
<li class="tocline">
<a href="#datatypes" class="tocxref">
<span class="secno">
4.6
</span>
Datatypes
</a>
<ul class="toc">
<li class="tocline">
<a href="#length-constraints" class="tocxref">
<span class="secno">
4.6.1
</span>
Length
Constraints
</a>
</li>
<li class="tocline">
<a href="#value-constraints" class="tocxref">
<span class="secno">
4.6.2
</span>
Value
Constraints
</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="tocline">
<a href="#locating-metadata" class="tocxref">
<span class="secno">
5.
</span>
Locating
Metadata
</a>
<ul class="toc">
<li class="tocline">
<a href="#overriding-metadata" class="tocxref">
<span class="secno">
5.1
</span>
Overriding
Metadata
</a>
</li>
<li class="tocline">
<a href="#link-header" class="tocxref">
<span class="secno">
5.2
</span>
<del class="diff-old">Embedded
Metadata
5.3
</del>
Link
Header
</a>
</li>
<li class="tocline">
<a href="#site-wide-location-configuration" class="tocxref">
<span class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<del class="diff-old">Standard
File
Metadata
</del>
<ins class="diff-chg">Site-wide
Location
Configuration
</ins>
</a>
</li>
<li class="tocline">
<a href="#embedded-metadata" class="tocxref">
<span class="secno">
<del class="diff-old">5.5
</del>
<ins class="diff-chg">5.4
</ins>
</span>
<del class="diff-old">Standard
Directory
</del>
<ins class="diff-chg">Embedded
</ins>
Metadata
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#processing-tables" class="tocxref">
<span class="secno">
6.
</span>
Processing
Tables
</a>
<ul class="toc">
<li class="tocline">
<a href="#creating-annotated-tables" class="tocxref">
<span class="secno">
6.1
</span>
Creating
Annotated
Tables
</a>
</li>
<li class="tocline">
<a href="#metadata-compatibility" class="tocxref">
<span class="secno">
6.2
</span>
<ins class="diff-new">Metadata
Compatibility
</ins></a></li><li class="tocline"><a href="#url-normalization" class="tocxref"><span class="secno"><ins class="diff-new">
6.3
</ins></span><ins class="diff-new">
URL
Normalization
</ins></a></li><li class="tocline"><a href="#parsing-cells" class="tocxref"><span class="secno"><ins class="diff-new">
6.4
</ins></span>
Parsing
Cells
</a>
<ul class="toc">
<li class="tocline">
<a href="#parsing-examples" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.1
</del>
<ins class="diff-chg">6.4.1
</ins>
</span>
Parsing
examples
</a>
</li>
<li class="tocline">
<a href="#formats-for-numeric-types" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.2
</del>
<ins class="diff-chg">6.4.2
</ins>
</span>
Formats
for
numeric
types
</a>
</li>
<li class="tocline">
<a href="#formats-for-booleans" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.3
</del>
<ins class="diff-chg">6.4.3
</ins>
</span>
Formats
for
booleans
</a>
</li>
<li class="tocline">
<a href="#formats-for-dates-and-times" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.4
</del>
<ins class="diff-chg">6.4.4
</ins>
</span>
Formats
for
dates
and
times
</a>
</li>
<li class="tocline">
<a href="#formats-for-durations" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.5
</del>
<ins class="diff-chg">6.4.5
</ins>
</span>
Formats
for
durations
</a>
</li>
<li class="tocline">
<a href="#formats-for-other-types" class="tocxref">
<span class="secno">
<del class="diff-old">6.2.6
</del>
<ins class="diff-chg">6.4.6
</ins>
</span>
Formats
for
other
types
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#presenting-tables" class="tocxref">
<span class="secno">
<del class="diff-old">6.3
</del>
<ins class="diff-chg">6.5
</ins>
</span>
<del class="diff-old">Displaying
</del>
<ins class="diff-chg">Presenting
</ins>
Tables
</a>
<ul class="toc">
<li class="tocline">
<a href="#bidirectional-tables" class="tocxref">
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
Bidirectional
Tables
</a>
</li>
<li class="tocline">
<a href="#column-and-row-labelling" class="tocxref">
<span class="secno">
<ins class="diff-new">6.5.2
</ins></span><ins class="diff-new">
Column
and
row
labelling
</ins></a></li>
</ul>
</li>
<li class="tocline">
<a href="#validating-tables" class="tocxref">
<span class="secno">
<del class="diff-old">6.4
</del>
<ins class="diff-chg">6.6
</ins>
</span>
Validating
Tables
</a>
</li>
<li class="tocline">
<a href="#converting-tables" class="tocxref">
<span class="secno">
<del class="diff-old">6.5
</del>
<ins class="diff-chg">6.7
</ins>
</span>
Converting
Tables
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#syntax" class="tocxref">
<span class="secno">
7.
</span>
Best
Practice
CSV
</a>
<ul class="toc">
<li class="tocline">
<a href="#content-type" class="tocxref">
<span class="secno">
7.1
</span>
Content
Type
</a>
</li>
<li class="tocline">
<a href="#encoding" class="tocxref">
<span class="secno">
7.2
</span>
Encoding
</a>
</li>
<li class="tocline">
<a href="#line-endings" class="tocxref">
<span class="secno">
7.3
</span>
Line
Endings
</a>
</li>
<li class="tocline">
<a href="#lines" class="tocxref">
<span class="secno">
7.4
</span>
Lines
</a>
<ul class="toc">
<li class="tocline">
<a href="#headers" class="tocxref">
<span class="secno">
7.4.1
</span>
Headers
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#ebnf" class="tocxref">
<span class="secno">
7.5
</span>
Grammar
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#parsing" class="tocxref">
<span class="secno">
8.
</span>
Parsing
Tabular
Data
</a>
<ul class="toc">
<li class="tocline">
<a href="#bidirectionality-in-csv-files" class="tocxref">
<span class="secno">
8.1
</span>
Bidirectionality
in
CSV
Files
</a>
</li>
<li class="tocline">
<a href="#examples" class="tocxref">
<span class="secno">
8.2
</span>
Examples
</a>
<ul class="toc">
<li class="tocline">
<a href="#simple-example" class="tocxref">
<span class="secno">
8.2.1
</span>
Simple
Example
</a>
<ul class="toc">
<li class="tocline">
<a href="#using-overriding-metadata" class="tocxref">
<span class="secno">
8.2.1.1
</span>
Using
Overriding
Metadata
</a>
</li>
<li class="tocline">
<a href="#using-a-metadata-file" class="tocxref">
<span class="secno">
8.2.1.2
</span>
Using
a
Metadata
File
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#empty-and-quoted-cells" class="tocxref">
<span class="secno">
8.2.2
</span>
Empty
and
Quoted
Cells
</a>
</li>
<li class="tocline">
<a href="#tabular-data-embedding-annotations" class="tocxref">
<span class="secno">
8.2.3
</span>
Tabular
Data
Embedding
Annotations
</a>
<ul class="toc">
<li class="tocline">
<a href="#naive-parsing" class="tocxref">
<span class="secno">
8.2.3.1
</span>
Naive
Parsing
</a>
</li>
<li class="tocline">
<a href="#parsing-with-flags" class="tocxref">
<span class="secno">
8.2.3.2
</span>
Parsing
with
Flags
</a>
</li>
<li class="tocline">
<a href="#recognizing-tabular-data-formats" class="tocxref">
<span class="secno">
8.2.3.3
</span>
<del class="diff-old">Recognising
</del>
<ins class="diff-chg">Recognizing
</ins>
Tabular
Data
Formats
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#parsing-multiple-header-lines" class="tocxref">
<span class="secno">
8.2.4
</span>
Parsing
Multiple
Header
Lines
</a>
</li>
</ul>
</li>
</ul>
</li>
<li class="tocline">
<a href="#iana-considerations" class="tocxref">
<span class="secno">
A.
</span>
<ins class="diff-new">IANA
Considerations
</ins></a></li><li class="tocline"><a href="#standards" class="tocxref"><span class="secno"><ins class="diff-new">
B.
</ins></span>
Existing
Standards
</a>
<ul class="toc">
<li class="tocline">
<a href="#rfc" class="tocxref">
<span class="secno">
<del class="diff-old">A.1
</del>
<ins class="diff-chg">B.1
</ins>
</span>
RFC
4180
</a>
</li>
<li class="tocline">
<a href="#excel" class="tocxref">
<span class="secno">
<del class="diff-old">A.2
</del>
<ins class="diff-chg">B.2
</ins>
</span>
Excel
</a>
<ul class="toc">
<li class="tocline">
<a href="#saved-csv" class="tocxref">
<span class="secno">
<del class="diff-old">A.2.1
</del>
<ins class="diff-chg">B.2.1
</ins>
</span>
Saved
CSV
</a>
</li>
<li class="tocline">
<a href="#opened-csv" class="tocxref">
<span class="secno">
<del class="diff-old">A.2.2
</del>
<ins class="diff-chg">B.2.2
</ins>
</span>
Opened
CSV
</a>
</li>
<li class="tocline">
<a href="#imported-csv" class="tocxref">
<span class="secno">
<del class="diff-old">A.2.3
</del>
<ins class="diff-chg">B.2.3
</ins>
</span>
Imported
CSV
</a>
</li>
<li class="tocline">
<a href="#copied-tabular-data" class="tocxref">
<span class="secno">
<del class="diff-old">A.2.4
</del>
<ins class="diff-chg">B.2.4
</ins>
</span>
Copied
Tabular
Data
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#google" class="tocxref">
<span class="secno">
<del class="diff-old">A.3
</del>
<ins class="diff-chg">B.3
</ins>
</span>
Google
Spreadsheets
</a>
<ul class="toc">
<li class="tocline">
<a href="#downloading-csv" class="tocxref">
<span class="secno">
<del class="diff-old">A.3.1
</del>
<ins class="diff-chg">B.3.1
</ins>
</span>
Downloading
CSV
</a>
</li>
<li class="tocline">
<a href="#importing-csv" class="tocxref">
<span class="secno">
<del class="diff-old">A.3.2
</del>
<ins class="diff-chg">B.3.2
</ins>
</span>
Importing
CSV
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#csv-files-in-a-tabular-data-package" class="tocxref">
<span class="secno">
<del class="diff-old">A.4
</del>
<ins class="diff-chg">B.4
</ins>
</span>
CSV
Files
in
a
Tabular
Data
Package
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#acknowledgements" class="tocxref">
<span class="secno">
<del class="diff-old">B.
</del>
<ins class="diff-chg">C.
</ins>
</span>
Acknowledgements
</a>
</li>
<li class="tocline">
<a href="#changes" class="tocxref">
<span class="secno">
<del class="diff-old">C.
</del>
<ins class="diff-chg">D.
</ins></span><ins class="diff-chg">
Changes
from
previous
drafts
</ins></a><ul class="toc"><li class="tocline"><a href="#changes-since-the-working-draft-of-16-april-2015" class="tocxref"><span class="secno"><ins class="diff-chg">
D.1
</ins></span><ins class="diff-chg">
Changes
since
the
working
draft
of
16
April
2015
</ins></a></li><li class="tocline"><a href="#changes-since-the-working-draft-of-08-january-2015" class="tocxref"><span class="secno"><ins class="diff-chg">
D.2
</ins>
</span>
Changes
since
the
working
draft
of
08
January
2015
</a>
</li>
</ul>
</li>
<li class="tocline">
<a href="#references" class="tocxref">
<span class="secno">
<del class="diff-old">D.
</del>
<ins class="diff-chg">E.
</ins>
</span>
References
</a>
<ul class="toc">
<li class="tocline">
<a href="#normative-references" class="tocxref">
<span class="secno">
<del class="diff-old">D.1
</del>
<ins class="diff-chg">E.1
</ins>
</span>
Normative
references
</a>
</li>
<li class="tocline">
<a href="#informative-references" class="tocxref">
<span class="secno">
<del class="diff-old">D.2
</del>
<ins class="diff-chg">E.2
</ins>
</span>
Informative
references
</a>
</li>
</ul>
</li>
</ul>
</section>
<section id="intro" typeof="bibo:Chapter" resource="#intro" property="bibo:hasPart">
<h2 id="h-intro" resource="#h-intro">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
1.
</span>
Introduction
</span>
</h2>
<p>
<dfn title="tabular data" id="dfn-tabular-data">
Tabular
data
</dfn>
is
data
that
is
structured
into
rows,
each
of
which
contains
information
about
some
thing.
Each
row
contains
the
same
number
of
cells
(although
some
of
these
cells
may
be
empty),
which
provide
values
of
properties
of
the
thing
described
by
the
row.
In
tabular
data,
cells
within
the
same
column
provide
values
for
the
same
property
of
the
things
described
by
each
row.
This
is
what
differentiates
tabular
data
from
other
line-oriented
formats.
</p>
<p>
Tabular
data
is
routinely
transferred
on
the
web
in
a
textual
format
called
CSV,
but
the
definition
of
CSV
in
practice
is
very
loose.
Some
people
use
the
term
to
mean
any
delimited
text
file.
Others
stick
more
closely
to
the
most
standard
definition
of
CSV
that
there
is,
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
].
<a href="#standards" class="sectionRef">
Appendix
A
</a>
describes
the
various
ways
in
which
CSV
is
defined.
This
specification
refers
to
such
files,
as
well
as
tab-delimited
files,
fixed
field
formats,
spreadsheets,
HTML
tables,
and
SQL
dumps
as
<dfn title="tabular data file" id="dfn-tabular-data-file">
tabular
data
files
</dfn>.
</p>
<p>
In
<a href="#model" class="sectionRef sec-ref">
section
<span class="secno">
4.
</span>
<span class="sec-title">
Tabular
Data
Models
</span>
</a>,
this
document
defines
a
model
for
tabular
data
that
abstracts
away
from
the
varying
syntaxes
that
are
used
for
when
exchanging
tabular
data.
The
model
includes
annotations,
or
metadata,
about
collections
of
individual
tables,
rows,
columns,
and
cells.
These
annotations
are
typically
supplied
through
separate
metadata
files;
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>
defines
how
these
metadata
files
can
be
located,
while
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
]
defines
what
they
contain.
</p>
<p>
Once
an
<a href="#dfn-annotated-table" class="internalDFN">
annotated
table
</a>
has
been
created,
it
can
be
processed
in
various
ways,
such
as
display,
validation,
or
conversion
into
other
formats.
This
processing
is
described
in
<a href="#processing-tables" class="sectionRef sec-ref">
section
<span class="secno">
6.
</span>
<span class="sec-title">
Processing
Tables
</span>
</a>.
</p>
<p>
This
specification
does
not
normatively
define
a
format
for
exchanging
tabular
data.
However,
it
does
provide
some
best
practice
guidelines
for
publishing
tabular
data
as
CSV,
in
section
<a href="#syntax" class="sectionRef sec-ref">
section
<span class="secno">
7.
</span>
<span class="sec-title">
Best
Practice
CSV
</span>
</a>,
and
for
parsing
both
this
syntax
and
those
similar
to
it,
in
<a href="#parsing" class="sectionRef sec-ref">
section
<span class="secno">
8.
</span>
<span class="sec-title">
Parsing
Tabular
Data
</span>
</a>.
</p>
</section>
<section id="conformance" typeof="bibo:Chapter" resource="#conformance" property="bibo:hasPart">
<h2 id="h-conformance" resource="#h-conformance">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
2.
</span>
Conformance
</span>
</h2>
<p>
As
well
as
sections
marked
as
non-normative,
all
authoring
guidelines,
diagrams,
examples,
and
notes
in
this
specification
are
non-normative.
Everything
else
in
this
specification
is
normative.
</p>
<p id="respecRFC2119">
The
key
words
<em class="rfc2119" title="MAY">
MAY
</em>,
<em class="rfc2119" title="MUST">
MUST
</em>,
<em class="rfc2119" title="MUST NOT">
MUST
NOT
</em>,
<em class="rfc2119" title="SHOULD">
SHOULD
</em>,
and
<em class="rfc2119" title="SHOULD NOT">
SHOULD
NOT
</em>
are
to
be
interpreted
as
described
in
[
<cite>
<a class="bibref" href="#bib-RFC2119">
RFC2119
</a>
</cite>
].
</p>
<p>
This
specification
makes
use
of
the
<dfn title="compact IRI" id="dfn-compact-iri">
compact
IRI
Syntax
</dfn>
;
please
refer
to
the
<a href="http://www.w3.org/TR/json-ld/#compact-iris">
Compact
IRIs
</a>
from
[
<cite>
<a class="bibref" href="#bib-JSON-LD">
JSON-LD
</a>
</cite>
].
</p>
<p>
<del class="diff-old">Within
examples,
this
</del>
<ins class="diff-chg">This
</ins>
specification
makes
use
of
the
following
namespaces:
</p>
<dl>
<dt>
<code>
<ins class="diff-new">csvw
</ins></code>:</dt><dd><code><ins class="diff-new">
http://www.w3.org/ns/csvw#
</ins></code></dd><dt><code>
dc
</code>:
</dt>
<dd>
<code>
http://purl.org/dc/terms/
</code>
</dd>
<dt>
<code>
<ins class="diff-new">rdf
</ins></code>:</dt><dd><code><ins class="diff-new">
http://www.w3.org/1999/02/22-rdf-syntax-ns#
</ins></code></dd><dt><code>
rdfs
</code>:
</dt>
<dd>
<code>
http://www.w3.org/2000/01/rdf-schema#
</code>
</dd>
<dt>
<code>
schema
</code>:
</dt>
<dd>
<code>
http://schema.org/
</code>
</dd>
<dt>
<code>
xsd
</code>:
</dt>
<dd>
<code>
http://www.w3.org/2001/XMLSchema#
</code>
</dd>
</dl>
</section>
<section id="typographical-conventions" typeof="bibo:Chapter" resource="#typographical-conventions" property="bibo:hasPart">
<h2 id="h-typographical-conventions" resource="#h-typographical-conventions">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
3.
</span>
Typographical
conventions
</span>
</h2>
<div>
<p>
The
following
typographic
conventions
are
used
in
this
specification:
</p>
<dl class="typography">
<dt>
<code>
markup
</code>
</dt>
<dd>
Markup
(elements,
attributes,
properties),
machine
processable
values
(string,
characters,
media
types),
property
name,
or
a
file
name
is
in
red-orange
monospace
font.
</dd>
<dt>
<var>
variable
</var>
</dt>
<dd>
A
variable
in
pseudo-code
or
in
an
algorithm
description
is
in
italics.
</dd>
<dt>
<dfn id="dfn-definition">
definition
</dfn>
</dt>
<dd>
A
definition
of
a
term,
to
be
used
elsewhere
in
this
or
other
specifications,
is
in
bold
and
italics.
</dd>
<dt>
<a title="definition" href="#dfn-definition" class="internalDFN">
definition
reference
</a>
</dt>
<dd>
A
reference
to
a
definition
<em>
in
this
document
</em>
is
underlined
and
is
also
an
active
link
to
the
definition
itself.
</dd>
<dt>
<a title="definition" href="#dfn-definition" class="internalDFN">
<code>
markup
definition
reference
</code>
</a>
</dt>
<dd>
A
references
to
a
definition
<em>
in
this
document
</em>,
when
the
reference
itself
is
also
a
markup,
is
underlined,
red-orange
monospace
font,
and
is
also
an
active
link
to
the
definition
itself.
</dd>
<dt>
<a class="externalDFN">
external
definition
reference
</a>
</dt>
<dd>
A
reference
to
a
definition
<em>
in
another
document
</em>
is
underlined,
in
italics,
and
is
also
an
active
link
to
the
definition
itself.
</dd>
<dt>
<a class="externalDFN">
<code>
markup
external
definition
reference
</code>
</a>
</dt>
<dd>
A
reference
to
a
definition
<em>
in
another
document
</em>,
when
the
reference
itself
is
also
a
markup,
is
underlined,
in
italics
red-orange
monospace
font,
and
is
also
an
active
link
to
the
definition
itself.
</dd>
<dt>
<a href=".">
hyperlink
</a>
</dt>
<dd>
A
hyperlink
is
underlined
and
in
blue.
</dd>
<dt>
<a href=".">
[reference]
</a>
</dt>
<dd>
A
document
reference
(normative
or
informative)
is
enclosed
in
square
brackets
and
links
to
the
references
section.
</dd>
</dl>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note1">
<span>
Note
</span>
</div>
<p class="">
Notes
are
in
light
green
boxes
with
a
green
left
border
and
with
a
"Note"
header
in
green.
Notes
are
normative
or
informative
depending
on
the
whether
they
are
in
a
normative
or
informative
section,
respectively.
</p>
</div>
      <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example">Examples are in light khaki boxes, with khaki left border, and with a 
numbered "Example" header in khaki. Examples are always informative. 
The
content
of
the
example
is
in
monospace
font
and
may
be
syntax
colored.
</pre>
</div>
</div>
</section>
<section id="model" typeof="bibo:Chapter" resource="#model" property="bibo:hasPart">
<h2 id="h-model" resource="#h-model">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.
</span>
Tabular
Data
Models
</span>
</h2>
<p>
This
section
defines
an
<dfn id="dfn-annotated-tabular-data-model">
annotated
tabular
data
model
</dfn>:
a
model
for
tables
that
are
annotated
with
metadata.
<dfn title="annotation" id="dfn-annotation">
Annotations
</dfn>
provide
information
about
the
cells,
rows,
columns,
tables,
and
groups
of
tables
with
which
they
are
associated.
The
<dfn title="annotation value" id="dfn-annotation-value">
values
</dfn>
of
these
annotations
may
be
lists,
structured
objects,
or
atomic
values.
<dfn id="dfn-core-annotations">
Core
annotations
</dfn>
are
those
that
affect
the
behavior
of
processors
defined
in
this
specification,
but
other
annotations
may
also
be
present
on
any
of
the
components
of
the
model.
</p>
<p>
Annotations
may
be
described
directly
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
be
embedded
in
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>,
or
created
during
the
process
of
generating
an
<a href="#dfn-annotated-table" class="internalDFN">
annotated
table
</a>.
</p>
<p>
<ins class="diff-new">String
values
within
the
tabular
data
model
(such
as
column
titles
or
cell
string
values)
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
contain
only
Unicode
characters.
</ins></p>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note2">
<span>
Note
</span>
</div>
<p class="">
In
this
document,
the
term
<a href="#dfn-annotation" class="internalDFN">
annotation
</a>
refers
to
any
metadata
associated
with
an
object
in
the
annotated
tabular
data
model.
These
are
not
necessarily
web
annotations
in
the
sense
of
[
<cite>
<a class="bibref" href="#bib-annotation-model">
annotation-model
</a>
</cite>
].
</p>
</div>
<section id="table-groups" typeof="bibo:Chapter" resource="#table-groups" property="bibo:hasPart">
<h3 id="h-table-groups" resource="#h-table-groups">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.1
</span>
Table
groups
</span>
</h3>
<p>
A
<dfn id="dfn-group-of-tables">
group
of
tables
</dfn>
comprises
a
set
of
<a title="annotated table" href="#dfn-annotated-table" class="internalDFN">
annotated
tables
</a>
and
a
set
of
annotations
that
relate
to
that
group
of
tables.
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
group
of
tables
are:
</p>
<ul>
<li>
<dfn title="table group id" id="dfn-table-group-id">
id
</dfn>
—
an
identifier
for
this
group
of
tables,
or
<code>
null
</code>
if
this
is
undefined.
</li>
<li>
<dfn title="table group notes" id="dfn-table-group-notes">
notes
</dfn>
—
any
number
of
additional
annotations
on
the
group
of
tables.
This
annotation
may
be
empty.
</li>
<li>
<dfn title="table group tables" id="dfn-table-group-tables">
tables
</dfn>
—
the
list
of
<a title="table" href="#dfn-table" class="internalDFN">
tables
</a>
in
the
group
of
tables.
A
group
of
tables
<em class="rfc2119" title="MUST">
MUST
</em>
have
one
or
more
tables.
</li>
</ul>
<p>
Groups
of
tables
<em class="rfc2119" title="MAY">
MAY
</em>
in
addition
have
any
number
of
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>
which
provide
information
about
the
group
of
tables.
Annotations
on
a
group
of
tables
may
include:
</p>
<ul>
<li>
titles
or
descriptions
of
the
group
of
tables.
</li>
<li>
information
about
the
source
or
provenance
of
the
group
of
tables.
</li>
<li>
links
to
other
groups
of
tables
<del class="diff-old">(eg
</del>
<ins class="diff-chg">(e.g.
</ins>
to
those
that
provide
similar
data
from
a
different
time
period).
</li>
</ul>
<p>
When
originating
from
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
these
annotations
arise
from
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-common-property" class="externalDFN">
common
properties
</a>
defined
on
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN">
table
group
descriptions
</a>
within
metadata
documents.
</p>
</section>
<section id="tables" typeof="bibo:Chapter" resource="#tables" property="bibo:hasPart">
<h3 id="h-tables" resource="#h-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.2
</span>
Tables
</span>
</h3>
<p>
An
<dfn id="dfn-annotated-table">
annotated
table
</dfn>
is
a
<dfn id="dfn-table">
table
</dfn>
that
is
annotated
with
additional
metadata.
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
table
are:
</p>
<ul>
<li>
<dfn title="table columns" id="dfn-table-columns">
columns
</dfn>
—
the
list
of
<a title="column" href="#dfn-column" class="internalDFN">
columns
</a>
in
the
table.
A
table
<em class="rfc2119" title="MUST">
MUST
</em>
have
one
or
more
columns
and
the
order
of
the
columns
within
the
list
is
significant
and
<em class="rfc2119" title="MUST">
MUST
</em>
be
preserved
by
applications.
</li>
<li>
<dfn title="table direction" id="dfn-table-direction">
<ins class="diff-chg">table
</ins>
direction
</dfn>
—
the
direction
in
which
the
columns
in
the
table
should
be
displayed,
as
described
in
<a href="#bidirectional-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
<span class="sec-title">
Bidirectional
Tables
</span>
<del class="diff-old">.
</del>
</a>
<ins class="diff-chg">;
the
value
of
this
annotation
may
also
become
the
value
of
the
</ins><a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
on
</ins><a title="column" href="#dfn-column" class="internalDFN"><ins class="diff-chg">
columns
</ins></a><ins class="diff-chg">
and
</ins><a title="cell" href="#dfn-cell" class="internalDFN"><ins class="diff-chg">
cells
</ins></a><ins class="diff-chg">
within
the
table,
if
the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-textDirection"><code><ins class="diff-chg">
textDirection
</ins></code></a><ins class="diff-chg">
property
is
set
to
</ins><code><ins class="diff-chg">
inherit
</ins></code><ins class="diff-chg">
(the
default).
</ins>
</li>
<li>
<dfn title="table foreign keys" id="dfn-table-foreign-keys">
foreign
keys
</dfn>
—
a
list
of
foreign
keys
on
the
table,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
which
may
be
an
empty
list.
</li>
<li>
<dfn title="table id" id="dfn-table-id">
id
</dfn>
—
an
identifier
for
this
table,
or
<code>
null
</code>
if
this
is
undefined.
</li>
<li>
<dfn title="table notes" id="dfn-table-notes">
notes
</dfn>
—
any
number
of
additional
annotations
on
the
table.
This
annotation
may
be
empty.
</li>
<li>
<dfn title="table rows" id="dfn-table-rows">
rows
</dfn>
—
the
list
of
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>
in
the
table.
A
table
<em class="rfc2119" title="MUST">
MUST
</em>
have
one
or
more
rows
and
the
order
of
the
rows
within
the
list
is
significant
and
<em class="rfc2119" title="MUST">
MUST
</em>
be
preserved
by
applications.
</li>
<li>
<dfn title="table schema" id="dfn-table-schema">
schema
</dfn>
—
a
URL
referencing
a
schema
applied
to
this
table,
or
<code>
null
</code>.
</li>
<li>
<dfn title="table suppress output" id="dfn-table-suppress-output">
suppress
output
</dfn>
—
a
boolean
that
indicates
whether
or
not
this
table
should
be
suppressed
in
any
output
generated
from
<del class="diff-old">the
</del>
converting
the
<a href="#dfn-group-of-tables" class="internalDFN">
group
of
tables
</a>,
that
this
table
belongs
<del class="diff-old">to
</del>
<ins class="diff-chg">to,
</ins>
into
another
format,
as
described
in
<a href="#converting-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.5
</del>
<ins class="diff-chg">6.7
</ins>
</span>
<span class="sec-title">
Converting
Tables
</span>
</a>.
</li>
<li>
<dfn title="table transformations" id="dfn-table-transformations">
transformations
</dfn>
—
a
(possibly
empty)
list
of
specifications
for
converting
this
table
into
other
formats,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
<li>
<dfn title="table url" id="dfn-table-url">
url
</dfn>
—
the
URL
of
the
source
of
the
data
in
the
table,
or
<code>
null
</code>
if
this
is
undefined.
</li>
</ul>
<p>
The
table
<em class="rfc2119" title="MAY">
MAY
</em>
in
addition
have
any
number
of
other
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>.
Annotations
on
a
table
may
include:
</p>
<ul>
<li>
titles
or
descriptions
of
the
table,
</li>
<li>
information
about
the
source
or
provenance
of
the
data
in
the
table,
or
</li>
<li>
links
to
other
tables
<del class="diff-old">(eg
</del>
<ins class="diff-chg">(e.g.
</ins>
to
indicate
tables
that
include
related
information).
</li>
</ul>
<p>
When
originating
from
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
these
annotations
arise
from
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-common-property" class="externalDFN">
common
properties
</a>
defined
on
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-description" class="externalDFN">
table
<del class="diff-old">group
</del>
descriptions
</a>
within
metadata
documents.
</p>
</section>
<section id="columns" typeof="bibo:Chapter" resource="#columns" property="bibo:hasPart">
<h3 id="h-columns" resource="#h-columns">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.3
</span>
Columns
</span>
</h3>
<p>
A
<dfn id="dfn-column">
column
</dfn>
represents
a
vertical
arrangement
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
within
a
<a href="#dfn-table" class="internalDFN">
table
</a>.
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
column
are:
</p>
<ul>
<li>
<dfn title="column about URL" id="dfn-column-about-url">
about
URL
</dfn>
—
the
<a title="cell about URL" href="#dfn-cell-about-url" class="internalDFN">
about
URL
</a>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-uri-template-property" class="externalDFN">
URI
template
</a>
used
to
create
a
URL
identifier
for
each
<a title="annotation value" href="#dfn-annotation-value" class="internalDFN">
value
</a>
of
<a href="#dfn-cell" class="internalDFN">
cell
</a>
in
this
column
relative
to
the
<a href="#dfn-row" class="internalDFN">
row
</a>
in
which
it
is
contained,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
<li>
<dfn title="column cells" id="dfn-column-cells">
cells
</dfn>
—
the
list
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
the
column.
A
column
<em class="rfc2119" title="MUST">
MUST
</em>
contain
one
cell
from
each
<a href="#dfn-row" class="internalDFN">
row
</a>
in
the
table.
The
order
of
the
cells
in
the
list
<em class="rfc2119" title="MUST">
MUST
</em>
match
the
order
of
the
rows
in
which
they
appear
within
the
<a title="table rows" href="#dfn-table-rows" class="internalDFN">
rows
</a>
for
the
associated
<a title="column table" href="#dfn-column-table" class="internalDFN">
table
</a>.
</li>
<li>
<dfn title="column datatype" id="dfn-column-datatype">
datatype
</dfn>
—
the
expected
<a href="#dfn-datatype" class="internalDFN">
datatype
</a>
for
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
this
column,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
<li>
<dfn title="column default" id="dfn-column-default">
default
</dfn>
—
the
default
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
for
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
whose
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
is
an
empty
string.
</li>
<li>
<dfn title="column lang" id="dfn-column-lang">
lang
</dfn>
—
the
code
for
the
expected
language
for
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
this
column,
expressed
in
the
format
defined
by
[
<cite>
<a class="bibref" href="#bib-BCP47">
BCP47
</a>
</cite>
<del class="diff-old">]
</del>
<ins class="diff-chg">].
</ins>
</li>
<li>
<dfn title="column name" id="dfn-column-name">
name
</dfn>
—
the
name
of
the
column.
</li>
<li>
<dfn title="column null" id="dfn-column-null">
null
</dfn>
—
the
string
or
strings
which
cause
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
having
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
matching
any
of
these
values
to
be
<code>
null
</code>.
</li>
<li>
<dfn title="column number" id="dfn-column-number">
number
</dfn>
—
the
position
of
the
column
amongst
the
<a title="table columns" href="#dfn-table-columns" class="internalDFN">
columns
</a>
for
the
associated
<a title="column table" href="#dfn-column-table" class="internalDFN">
table
</a>,
starting
from
1.
</li>
<li>
<dfn title="column ordered" id="dfn-column-ordered">
ordered
</dfn>
—
a
boolean
that
indicates
whether
the
order
of
values
of
a
cell
should
be
preserved
or
not.
</li>
<li>
<dfn title="column property URL" id="dfn-column-property-url">
property
URL
</dfn>
—
the
expected
<a title="cell property URL" href="#dfn-cell-property-url" class="internalDFN">
property
URL
</a>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-uri-template-property" class="externalDFN">
URI
template
</a>
used
to
create
a
URL
identifier
for
the
property
of
each
<a title="annotation value" href="#dfn-annotation-value" class="internalDFN">
value
</a>
of
<a href="#dfn-cell" class="internalDFN">
cell
</a>
in
this
column
relative
to
the
<a href="#dfn-row" class="internalDFN">
row
</a>
in
which
it
is
contained,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
<li>
<dfn title="column required" id="dfn-column-required">
required
</dfn>
—
a
boolean
that
indicates
that
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
this
column
<em class="rfc2119" title="MUST NOT">
MUST
NOT
</em>
be
empty.
</li>
<li>
<dfn title="column separator" id="dfn-column-separator">
separator
</dfn>
—
a
string
value
used
to
create
multiple
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
this
column
by
splitting
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
on
the
separator.
</li>
<li>
<dfn title="column source number" id="dfn-column-source-number">
source
number
</dfn>
—
the
position
of
the
column
in
the
file
at
the
<a title="table url" href="#dfn-table-url" class="internalDFN">
url
</a>
of
the
table,
<ins class="diff-new">starting
from
1,
</ins>
or
<code>
null
</code>.
</li>
<li>
<dfn title="column suppress output" id="dfn-column-suppress-output">
suppress
output
</dfn>
—
a
boolean
that
indicates
whether
or
not
this
column
should
be
suppressed
in
any
output
generated
from
converting
the
table,
as
described
in
<a href="#converting-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.5
</del>
<ins class="diff-chg">6.7
</ins>
</span>
<span class="sec-title">
Converting
Tables
</span>
</a>.
</li>
<li>
<dfn title="column table" id="dfn-column-table">
table
</dfn>
—
the
<a href="#dfn-table" class="internalDFN">
table
</a>
in
which
the
column
appears.
</li>
<li>
<dfn title="column text direction" id="dfn-column-text-direction">
text
direction
</dfn>
—
the
indicator
of
the
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
this
column,
as
described
in
<a href="#bidirectional-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
<span class="sec-title">
Bidirectional
Tables
</span>
<del class="diff-old">.
</del>
</a>
<ins class="diff-chg">;
the
value
of
this
annotation
may
be
derived
from
the
</ins><a href="#dfn-table-direction" class="internalDFN"><ins class="diff-chg">
table
direction
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a href="#dfn-table" class="internalDFN"><ins class="diff-chg">
table
</ins></a>,<ins class="diff-chg">
if
the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-textDirection"><code><ins class="diff-chg">
textDirection
</ins></code></a><ins class="diff-chg">
property
is
set
to
</ins><code><ins class="diff-chg">
inherit
</ins></code><ins class="diff-chg">
(the
default).
</ins>
</li>
<li>
<dfn title="column titles" id="dfn-column-titles">
titles
</dfn>
—
any
number
of
human-readable
titles
for
the
column,
each
of
which
<em class="rfc2119" title="MAY">
MAY
</em>
have
an
associated
language
code
as
defined
by
[
<cite>
<a class="bibref" href="#bib-BCP47">
BCP47
</a>
</cite>
].
</li>
<li>
<dfn title="column value URL" id="dfn-column-value-url">
value
URL
</dfn>
—
the
expected
<a title="cell value URL" href="#dfn-cell-value-url" class="internalDFN">
value
URL
</a>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-uri-template-property" class="externalDFN">
URI
template
</a>
used
to
create
the
URL
identifier
for
the
<a title="annotation value" href="#dfn-annotation-value" class="internalDFN">
value
</a>
of
each
<a href="#dfn-cell" class="internalDFN">
cell
</a>
in
this,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
<li>
<dfn title="column virtual" id="dfn-column-virtual">
virtual
</dfn>
—
a
boolean
that
indicates
whether
the
column
is
a
<a href="#dfn-virtual-column" class="internalDFN">
virtual
column
</a>.
<dfn title="virtual column" id="dfn-virtual-column">
Virtual
columns
</dfn>
are
used
to
extend
the
source
data
with
additional
empty
columns
to
support
more
advanced
conversions;
when
this
annotation
is
<code>
false
</code>,
the
column
is
a
<dfn id="dfn-real-column">
real
column
</dfn>,
which
exists
in
the
source
data
for
the
table.
</li>
</ul>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note3">
<span>
<ins class="diff-new">Note
</ins></span></div><p class=""><ins class="diff-new">
Several
of
these
annotations
arise
from
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-inherited-property" class="externalDFN"><ins class="diff-new">
inherited
properties
</ins></a><ins class="diff-new">
that
may
be
defined
within
metadata
on
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN"><ins class="diff-new">
table
group
</ins></a>,<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-description" class="externalDFN"><ins class="diff-new">
table
</ins></a><ins class="diff-new">
or
individual
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-column-description" class="externalDFN"><ins class="diff-new">
column
</ins></a><ins class="diff-new">
descriptions.
</ins></p></div>
<p>
Columns
<em class="rfc2119" title="MAY">
MAY
</em>
in
addition
have
any
number
of
other
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>,
such
as
a
description.
When
originating
from
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
these
annotations
arise
from
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-common-property" class="externalDFN">
common
properties
</a>
defined
on
<del class="diff-old">table
group
</del>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-column-description" class="externalDFN">
<ins class="diff-chg">column
</ins>
descriptions
</a>
within
metadata
documents.
</p>
</section>
<section id="rows" typeof="bibo:Chapter" resource="#rows" property="bibo:hasPart">
<h3 id="h-rows" resource="#h-rows">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.4
</span>
Rows
</span>
</h3>
<p>
A
<dfn id="dfn-row">
row
</dfn>
represents
a
horizontal
arrangement
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
within
a
<a href="#dfn-table" class="internalDFN">
table
</a>.
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
row
are:
</p>
<ul>
<li>
<dfn title="row cells" id="dfn-row-cells">
cells
</dfn>
—
the
list
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
in
the
row.
A
row
<em class="rfc2119" title="MUST">
MUST
</em>
contain
one
cell
from
each
<a href="#dfn-column" class="internalDFN">
column
</a>
in
the
table.
The
order
of
the
cells
in
the
list
<em class="rfc2119" title="MUST">
MUST
</em>
match
the
order
of
the
columns
in
which
they
appear
within
the
<a href="#dfn-table-columns" class="internalDFN">
table
columns
</a>
for
the
row's
table.
</li>
<li>
<dfn title="row number" id="dfn-row-number">
number
</dfn>
—
the
position
of
the
row
amongst
the
<a title="table rows" href="#dfn-table-rows" class="internalDFN">
rows
</a>
for
the
<a title="row table" href="#dfn-row-table" class="internalDFN">
table
</a>,
starting
from
1.
</li>
<li>
<dfn title="row primary key" id="dfn-row-primary-key">
primary
key
</dfn>
—
a
possibly
empty
list
of
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
whose
values
together
provide
a
unique
identifier
for
this
row.
<ins class="diff-new">This
is
similar
to
the
</ins><a title="column name" href="#dfn-column-name" class="internalDFN"><ins class="diff-new">
name
</ins></a><ins class="diff-new">
of
a
</ins><a href="#dfn-column" class="internalDFN"><ins class="diff-new">
column
</ins></a>.
</li>
<li>
<dfn title="row titles" id="dfn-row-titles">
<ins class="diff-chg">titles
</ins></dfn><ins class="diff-chg">
—
any
number
of
human-readable
titles
for
the
row,
each
of
which
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
have
an
associated
language
code
as
defined
by
[
</ins><cite><a class="bibref" href="#bib-BCP47"><ins class="diff-chg">
BCP47
</ins></a></cite><ins class="diff-chg">
].
</ins></li><li><dfn title="row referenced rows" id="dfn-row-referenced-rows">
referenced
rows
</dfn>
—
a
possibly
empty
list
of
pairs
of
a
<a title="table foreign keys" href="#dfn-table-foreign-keys" class="internalDFN">
foreign
key
</a>
and
a
row
in
a
table
within
the
same
<a href="#dfn-group-of-tables" class="internalDFN">
group
of
tables
</a>
(which
may
be
another
row
in
the
table
in
which
this
row
appears).
</li>
<li>
<dfn title="row source number" id="dfn-row-source-number">
source
number
</dfn>
—
the
position
of
the
row
in
the
original
<a title="table url" href="#dfn-table-url" class="internalDFN">
url
</a>
of
the
table,
<ins class="diff-new">starting
from
1,
</ins>
or
<code>
null
</code>.
</li>
<li>
<dfn title="row table" id="dfn-row-table">
table
</dfn>
—
the
<a href="#dfn-table" class="internalDFN">
table
</a>
in
which
the
row
appears.
</li>
</ul>
<p>
Rows
<em class="rfc2119" title="MAY">
MAY
</em>
have
any
number
of
additional
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>.
The
annotations
on
a
row
provide
additional
metadata
about
the
information
held
in
the
row,
such
as:
</p>
<ul>
<li>
the
certainty
of
the
information
in
that
<del class="diff-old">row
</del>
<ins class="diff-chg">row.
</ins>
</li>
<li>
information
about
the
source
or
provenance
of
the
data
in
that
<del class="diff-old">row
</del>
<ins class="diff-chg">row.
</ins>
</li>
</ul>
<p>
Neither
this
specification
nor
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
]
defines
a
method
to
specify
such
annotations.
Implementations
<em class="rfc2119" title="MAY">
MAY
</em>
define
a
method
for
adding
annotations
to
rows
by
interpreting
<a title="table notes" href="#dfn-table-notes" class="internalDFN">
notes
</a>
on
the
table.
</p>
</section>
<section id="cells" typeof="bibo:Chapter" resource="#cells" property="bibo:hasPart">
<h3 id="h-cells" resource="#h-cells">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.5
</span>
Cells
</span>
</h3>
<p>
A
<dfn id="dfn-cell">
cell
</dfn>
represents
a
cell
at
the
intersection
of
a
<a href="#dfn-row" class="internalDFN">
row
</a>
and
a
<a href="#dfn-column" class="internalDFN">
column
</a>
within
a
<a href="#dfn-table" class="internalDFN">
table
</a>.
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
cell
are:
</p>
<ul>
<li>
<dfn title="cell about URL" id="dfn-cell-about-url">
about
URL
</dfn>
—
an
absolute
URL
for
the
entity
about
which
this
cell
provides
information,
or
<code>
null
</code>.
</li>
<li>
<dfn title="cell column" id="dfn-cell-column">
column
</dfn>
—
the
<a href="#dfn-column" class="internalDFN">
column
</a>
in
which
the
cell
appears;
the
cell
<em class="rfc2119" title="MUST">
MUST
</em>
be
in
the
<a title="column cells" href="#dfn-column-cells" class="internalDFN">
cells
</a>
for
that
column.
</li>
<li>
<dfn title="cell errors" id="dfn-cell-errors">
errors
</dfn>
—
a
(possibly
empty)
list
of
validation
errors
generated
while
parsing
the
value
of
the
cell.
</li>
<li>
<dfn title="cell ordered" id="dfn-cell-ordered">
ordered
</dfn>
—
a
boolean
that,
if
the
value
of
this
cell
is
a
list,
indicates
whether
the
order
of
that
list
should
be
preserved
or
not.
</li>
<li>
<dfn title="cell property URL" id="dfn-cell-property-url">
property
URL
</dfn>
—
an
absolute
URL
for
the
property
associated
with
this
cell,
or
<code>
null
</code>.
</li>
<li>
<dfn title="cell row" id="dfn-cell-row">
row
</dfn>
—
the
<a href="#dfn-row" class="internalDFN">
row
</a>
in
which
the
cell
appears;
the
cell
<em class="rfc2119" title="MUST">
MUST
</em>
be
in
the
<a title="row cells" href="#dfn-row-cells" class="internalDFN">
cells
</a>
for
that
row.
</li>
<li>
<dfn title="cell string value" id="dfn-cell-string-value">
string
value
</dfn>
—
a
string
that
is
the
original
syntactic
representation
of
the
value
of
the
cell,
<del class="diff-old">eg
</del>
<ins class="diff-chg">e.g.
</ins>
how
the
cell
appears
within
a
CSV
file;
this
may
be
an
empty
string.
</li>
<li>
<dfn title="cell table" id="dfn-cell-table">
table
</dfn>
—
the
<a href="#dfn-table" class="internalDFN">
table
</a>
in
which
the
cell
appears.
</li>
<li>
<dfn title="cell text direction" id="dfn-cell-text-direction">
text
direction
</dfn>
—
which
direction
the
text
within
the
cell
should
be
displayed,
as
described
in
<a href="#bidirectional-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
<span class="sec-title">
Bidirectional
Tables
</span>
<del class="diff-old">.
</del>
</a>
<ins class="diff-chg">;
the
value
of
this
annotation
may
be
derived
from
the
</ins><a href="#dfn-table-direction" class="internalDFN"><ins class="diff-chg">
table
direction
</ins></a><ins class="diff-chg">
annotation
on
the
</ins><a href="#dfn-table" class="internalDFN"><ins class="diff-chg">
table
</ins></a>,<ins class="diff-chg">
if
the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-textDirection"><code><ins class="diff-chg">
textDirection
</ins></code></a><ins class="diff-chg">
property
is
set
to
</ins><code><ins class="diff-chg">
inherit
</ins></code><ins class="diff-chg">
(the
default).
</ins>
</li>
<li>
<dfn title="cell value" id="dfn-cell-value">
value
</dfn>
—
the
semantic
value
of
the
cell;
this
<em class="rfc2119" title="MAY">
MAY
</em>
be
a
<dfn title="cell value list" id="dfn-cell-value-list">
list
</dfn>
of
values,
each
of
which
<em class="rfc2119" title="MAY">
MAY
</em>
have
a
<dfn title="cell value datatype" id="dfn-cell-value-datatype">
datatype
</dfn>
other
than
a
string,
<em class="rfc2119" title="MAY">
MAY
</em>
have
a
<dfn title="cell value language" id="dfn-cell-value-language">
language
</dfn>
and
<em class="rfc2119" title="MAY">
MAY
</em>
be
<code>
null
</code>.
For
example,
annotations
might
enable
a
processor
to
understand
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
of
the
cell
as
representing
a
number
or
a
date.
By
default,
if
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
is
an
empty
string,
the
semantic
value
of
the
cell
is
<code>
null
</code>.
</li>
<li>
<dfn title="cell value URL" id="dfn-cell-value-url">
value
URL
</dfn>
—
an
absolute
URL
for
this
cell's
value,
or
<code>
null
</code>.
</li>
</ul>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note4">
<span>
Note
</span>
</div>
<p class="">
There
presence
or
absence
of
quotes
around
a
value
within
a
CSV
file
is
a
syntactic
detail
that
is
not
reflected
in
the
tabular
data
model.
In
other
words,
there
is
no
distinction
in
the
model
between
the
second
value
in
<code>
a,,z
</code>
and
the
second
value
in
<code>
a,"",z
</code>.
</p>
</div>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note5">
<span>
<ins class="diff-new">Note
</ins></span></div><p class=""><ins class="diff-new">
Several
of
these
annotations
arise
from
or
are
constructed
based
on
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-inherited-property" class="externalDFN"><ins class="diff-new">
inherited
properties
</ins></a><ins class="diff-new">
that
may
be
defined
within
metadata
on
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN"><ins class="diff-new">
table
group
</ins></a>,<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-description" class="externalDFN"><ins class="diff-new">
table
</ins></a><ins class="diff-new">
or
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-column-description" class="externalDFN"><ins class="diff-new">
column
</ins></a><ins class="diff-new">
descriptions.
</ins></p></div>
<p>
Cells
<em class="rfc2119" title="MAY">
MAY
</em>
have
any
number
of
additional
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>.
The
annotations
on
a
cell
provide
metadata
about
the
value
held
in
the
cell,
particularly
when
this
overrides
the
information
provided
for
the
<a href="#dfn-column" class="internalDFN">
column
</a>
and
<a href="#dfn-row" class="internalDFN">
row
</a>
that
the
cell
falls
within.
Annotations
on
a
cell
might
be:
</p>
<ul>
<li>
notes
to
aid
the
interpretation
of
the
<del class="diff-old">value
</del>
<ins class="diff-chg">value.
</ins>
</li>
<li>
information
about
the
source
or
provenance
of
the
data
in
that
<del class="diff-old">cell
</del>
<ins class="diff-chg">cell.
</ins>
</li>
</ul>
<p>
Neither
this
specification
nor
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
]
defines
a
method
to
specify
such
annotations.
Implementations
<em class="rfc2119" title="MAY">
MAY
</em>
define
a
method
for
adding
annotations
to
cells
by
interpreting
<a title="table notes" href="#dfn-table-notes" class="internalDFN">
notes
</a>
on
the
table.
</p>
</section>
<section id="datatypes" typeof="bibo:Chapter" resource="#datatypes" property="bibo:hasPart">
<h3 id="h-datatypes" resource="#h-datatypes">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.6
</span>
Datatypes
</span>
</h3>
<p>
Columns
and
<del class="diff-old">Cells
</del>
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
<ins class="diff-chg">cell
values
</ins></a>
within
tables
may
be
annotated
with
a
<dfn id="dfn-datatype">
datatype
</dfn>
which
indicates
the
type
of
the
values
obtained
by
parsing
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
of
the
cell.
</p>
<p>
Datatypes
are
based
on
a
subset
of
those
defined
in
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
<del class="diff-old">]
with
aliases.
</del>
<ins class="diff-chg">].
</ins>
The
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
limits
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
cell
values
</a>
to
have
datatypes
as
shown
on
<a href="#fig-datatypes" class="sectionRef fig-ref">
the
diagram
</a>:
</p>
<ul>
<li>
the
datatypes
defined
in
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
]
as
derived
from
and
including
<code>
<del class="diff-old">anyAtomicType
</del>
<ins class="diff-chg">xsd:anyAtomicType
</ins></code>.
</li>
<li>
the
datatype
<code>
<del class="diff-old">xml
</del>
<ins class="diff-chg">rdf:XMLLiteral
</ins>
</code>,
a
sub-type
of
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xsd:string
</ins>
</code>,
which
indicates
the
value
is
an
XML
<del class="diff-old">fragment
</del>
<ins class="diff-chg">fragment.
</ins>
</li>
<li>
the
datatype
<code>
<del class="diff-old">html
</del>
<ins class="diff-chg">rdf:HTML
</ins>
</code>,
a
sub-type
of
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xsd:string
</ins>
</code>,
which
indicates
the
value
is
an
HTML
<del class="diff-old">fragment
</del>
<ins class="diff-chg">fragment.
</ins>
</li>
<li>
the
datatype
<code>
<del class="diff-old">json
</del>
<ins class="diff-chg">csvw:JSON
</ins>
</code>,
a
sub-type
of
<code>
<del class="diff-old">string
</del>
<ins class="diff-chg">xsd:string
</ins>
</code>,
which
indicates
the
value
is
serialized
<del class="diff-old">JSON
</del>
<ins class="diff-chg">JSON.
</ins></li><li><ins class="diff-chg">
datatypes
derived
from
any
of
these
datatypes.
</ins>
</li>
</ul>
<figure id="fig-datatypes" style="text-align:center">
<img src="datatypes.svg" style="width: 50%" alt="Built-in Datatype Hierarchy diagram" longdesc="datatypes.html#imageDescription">
<figcaption>
Fig.
<span class="figno">
1
</span>
<span class="fig-title">
Diagram
showing
the
built-in
datatypes,
based
on
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
];
names
in
<del class="diff-old">paranthesis
</del>
<ins class="diff-chg">parentheses
</ins>
denote
aliases
to
the
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
]
terms
(see
the
diagram
in
<a href="datatypes.svg">
SVG
</a>
or
<a href="datatypes.png">
PNG
</a>
formats)
</span>
</figcaption>
</figure>
<p>
The
<a href="#dfn-core-annotations" class="internalDFN">
core
annotations
</a>
of
a
datatype
are:
</p>
<ul>
<li>
<dfn title="datatype id" id="dfn-datatype-id">
<ins class="diff-chg">id
</ins></dfn><ins class="diff-chg">
—
the
absolute
URL
that
identifies
the
datatype,
or
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
if
undefined;
</ins><strong><ins class="diff-chg">
converters
</ins></strong><em class="rfc2119" title="SHOULD"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
use
this
URL
when
serializing
values
of
this
datatype.
Processors
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
use
this
annotation
to
perform
additional
validation
on
column
values
using
this
datatype.
</ins></li><li><dfn title="datatype base" id="dfn-datatype-base">
base
</dfn>
—
<del class="diff-old">a
string
representing
</del>
<ins class="diff-chg">the
absolute
URL
that
identifies
</ins>
the
datatype
<del class="diff-old">identifier
</del>
from
<ins class="diff-new">which
this
datatype
is
derived.
This
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
</ins>
the
<del class="diff-old">set
defined
above.
</del>
<ins class="diff-chg">URL
of
a
built-in
datatype
as
listed
above,
or
</ins><code><ins class="diff-chg">
null
</ins></code><ins class="diff-chg">
if
the
datatype
is
</ins><code><ins class="diff-chg">
xsd:anyAtomicType
</ins></code>.
All
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
the
datatype
<em class="rfc2119" title="MUST">
MUST
</em>
be
valid
values
of
the
base
datatype.
</li>
<li>
<dfn title="datatype format" id="dfn-datatype-format">
format
</dfn>
—
a
string
or
object
that
defines
the
format
of
a
value
of
this
type,
used
when
parsing
a
<a href="#dfn-cell-string-value" class="internalDFN">
cell
string
value
</a>
as
described
in
<a href="#parsing-cells" class="sec-ref">
<span class="secno">
<del class="diff-old">6.2
</del>
<ins class="diff-chg">6.4
</ins>
</span>
<span class="sec-title">
Parsing
Cells
</span>
</a>.
</li>
<li>
<dfn title="datatype length" id="dfn-datatype-length">
length
</dfn>
—
a
number
that
the
exact
length
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#length-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.1
</span>
<span class="sec-title">
Length
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype minimum length" id="dfn-datatype-minimum-length">
minimum
length
</dfn>
—
a
number
that
the
minimum
length
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#length-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.1
</span>
<span class="sec-title">
Length
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype maximum length" id="dfn-datatype-maximum-length">
maximum
length
</dfn>
—
a
number
that
the
maximum
length
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#length-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.1
</span>
<span class="sec-title">
Length
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype minimum" id="dfn-datatype-minimum">
minimum
</dfn>
—
a
number
that
the
minimum
valid
value
(inclusive)
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#value-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.2
</span>
<span class="sec-title">
Value
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype maximum" id="dfn-datatype-maximum">
maximum
</dfn>
—
a
number
that
the
maximum
valid
value
(inclusive)
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#value-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.2
</span>
<span class="sec-title">
Value
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype minimum exclusive" id="dfn-datatype-minimum-exclusive">
minimum
exclusive
</dfn>
—
a
number
that
the
minimum
valid
value
(exclusive)
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#value-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.2
</span>
<span class="sec-title">
Value
Constraints
</span>
</a>.
</li>
<li>
<dfn title="datatype maximum exclusive" id="dfn-datatype-maximum-exclusive">
maximum
exclusive
</dfn>
—
a
number
that
the
maximum
valid
value
(exclusive)
of
a
<a href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
value
</a>
as
described
in
<a href="#value-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.2
</span>
<span class="sec-title">
Value
Constraints
</span>
</a>.
</li>
</ul>
<p>
<ins class="diff-new">If
the
</ins><a title="datatype id" href="#dfn-datatype-id" class="internalDFN"><ins class="diff-new">
id
</ins></a><ins class="diff-new">
of
a
datatype
is
that
of
a
built-in
datatype,
the
values
of
the
other
core
annotations
listed
above
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
consistent
with
the
values
defined
in
[
</ins><cite><a class="bibref" href="#bib-xmlschema11-2"><ins class="diff-new">
xmlschema11-2
</ins></a></cite><ins class="diff-new">
]
or
above.
For
example,
if
the
</ins><a title="datatype id" href="#dfn-datatype-id" class="internalDFN"><ins class="diff-new">
id
</ins></a><ins class="diff-new">
is
</ins><code><ins class="diff-new">
xsd:integer
</ins></code><ins class="diff-new">
then
the
</ins><a title="datatype base" href="#dfn-datatype-base" class="internalDFN"><ins class="diff-new">
base
</ins></a><ins class="diff-new">
must
be
</ins><code><ins class="diff-new">
xsd:decimal
</ins></code>.</p><p>
Datatypes
<em class="rfc2119" title="MAY">
MAY
</em>
have
any
number
of
additional
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>.
The
annotations
on
a
datatype
provide
metadata
about
the
datatype
such
as
title
or
description.
These
arise
from
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-common-property" class="externalDFN">
common
properties
</a>
defined
on
datatype
descriptions
within
metadata
documents,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note6">
<span>
<ins class="diff-chg">Note
</ins></span></div><p class=""><ins class="diff-chg">
The
</ins><a title="datatype id" href="#dfn-datatype-id" class="internalDFN"><ins class="diff-chg">
id
</ins></a><ins class="diff-chg">
annotation
may
reference
an
XSD,
OWL
or
other
datatype
definition,
which
is
not
used
by
this
specification
for
validating
column
values,
but
may
be
useful
for
further
processing.
</ins></p></div><section id="length-constraints" typeof="bibo:Chapter" resource="#length-constraints" property="bibo:hasPart"><h4 id="h-length-constraints" resource="#h-length-constraints">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.6.1
</span>
Length
Constraints
</span>
</h4>
<p>
The
<a title="datatype length" href="#dfn-datatype-length" class="internalDFN">
length
</a>,
<a title="datatype minimum length" href="#dfn-datatype-minimum-length" class="internalDFN">
minimum
length
</a>
and
<a title="datatype maximum length" href="#dfn-datatype-maximum-length" class="internalDFN">
maximum
length
</a>
annotations
indicate
the
exact,
minimum
and
maximum
lengths
for
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
values
</a>.
</p>
<p>
The
length
of
a
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
is
determined
as
<ins class="diff-new">defined
in
[
</ins><cite><a class="bibref" href="#bib-xmlschema11-2"><ins class="diff-new">
xmlschema11-2
</ins></a></cite><ins class="diff-new">
],
namely
as
</ins>
follows:
</p>
<ul>
<li>
if
the
value
is
<code>
null
</code>,
its
length
is
<del class="diff-old">zero
</del>
<ins class="diff-chg">zero.
</ins>
</li>
<li>
if
the
value
is
a
string
or
one
of
its
subtypes,
its
length
is
the
number
of
characters
<ins class="diff-new">(ie
[
</ins><cite><a class="bibref" href="#bib-UNICODE"><ins class="diff-new">
UNICODE
</ins></a></cite><ins class="diff-new">
]
</ins><em><ins class="diff-new">
code
points
</ins></em><ins class="diff-new">
)
</ins>
in
the
<del class="diff-old">value
</del>
<ins class="diff-chg">value.
</ins>
</li>
<li>
if
the
value
is
of
a
binary
type,
its
length
is
the
number
of
bytes
in
the
binary
<del class="diff-old">value
</del>
<ins class="diff-chg">value.
</ins>
</li>
</ul>
<p>
<ins class="diff-new">If
the
</ins><a title="cell value" href="#dfn-cell-value" class="internalDFN"><ins class="diff-new">
value
</ins></a><ins class="diff-new">
is
a
</ins><a title="cell value list" href="#dfn-cell-value-list" class="internalDFN"><ins class="diff-new">
list
</ins></a>,<ins class="diff-new">
the
constraint
applies
to
each
element
of
the
list.
</ins></p>
</section>
<section id="value-constraints" typeof="bibo:Chapter" resource="#value-constraints" property="bibo:hasPart">
<h4 id="h-value-constraints" resource="#h-value-constraints">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
4.6.2
</span>
Value
Constraints
</span>
</h4>
<p>
The
<a title="datatype minimum" href="#dfn-datatype-minimum" class="internalDFN">
minimum
</a>,
<a title="datatype maximum" href="#dfn-datatype-maximum" class="internalDFN">
maximum
</a>,
<a title="datatype minimum exclusive" href="#dfn-datatype-minimum-exclusive" class="internalDFN">
minimum
exclusive
</a>,
and
<a title="datatype maximum exclusive" href="#dfn-datatype-maximum-exclusive" class="internalDFN">
maximum
exclusive
</a>
annotations
indicate
limits
on
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
values
</a>.
These
apply
to
numeric,
date/time,
and
duration
types.
</p>
<p>
Validation
of
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
cell
<del class="diff-old">string
</del>
values
</a>
against
these
datatypes
is
as
defined
in
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
].
<ins class="diff-new">If
the
</ins><a title="cell value" href="#dfn-cell-value" class="internalDFN"><ins class="diff-new">
value
</ins></a><ins class="diff-new">
is
a
</ins><a title="cell value list" href="#dfn-cell-value-list" class="internalDFN"><ins class="diff-new">
list
</ins></a>,<ins class="diff-new">
the
constraint
applies
to
each
element
of
the
list.
</ins>
</p>
</section>
</section>
</section>
<section id="locating-metadata" typeof="bibo:Chapter" resource="#locating-metadata" property="bibo:hasPart">
<h2 id="h-locating-metadata" resource="#h-locating-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
5.
</span>
Locating
Metadata
</span>
</h2>
<p>
As
described
in
<a href="#model" class="sectionRef sec-ref">
section
<span class="secno">
4.
</span>
<span class="sec-title">
Tabular
Data
Models
</span>
</a>,
tabular
data
may
have
a
number
of
annotations
associated
with
it.
Here
we
describe
the
different
methods
that
can
be
used
to
locate
metadata
that
provides
those
annotations.
</p>
<p>
In
<del class="diff-old">most
</del>
<ins class="diff-chg">the
</ins>
methods
of
locating
metadata
described
here,
metadata
is
provided
within
<del class="diff-old">separate
documents.
</del>
<ins class="diff-chg">a
single
document.
</ins>
The
syntax
of
<del class="diff-old">these
</del>
<ins class="diff-chg">such
</ins>
documents
is
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
<del class="diff-old">When
creating
a
set
of
annotations
from
metadata,
if
the
same
property
</del>
<ins class="diff-chg">Metadata
</ins>
is
<del class="diff-old">specified
in
two
locations
then
information
"closer"
to
the
end
user
or
interpreter
of
the
document
overrides
other
information,
and
information
"closer"
to
the
document
itself
overrides
information
"further"
from
the
document.
Explicitly,
the
</del>
<ins class="diff-chg">located
using
a
specific
</ins>
order
of
<del class="diff-old">precedence
is:
</del>
<ins class="diff-chg">precedence:
</ins>
</p>
<ol>
<li>
metadata
supplied
by
the
user
of
the
implementation
that
is
processing
the
tabular
data,
see
<a href="#overriding-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.1
</span>
<span class="sec-title">
Overriding
Metadata
</span>
<del class="diff-old">metadata
embedded
within
the
tabular
data
file
itself,
see
section
5.2
Embedded
Metadata
</del>
</a>.
</li>
<li>
metadata
in
a
document
linked
to
using
a
<code>
Link
</code>
header
associated
with
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>,
see
<a href="#link-header" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">5.2
</ins>
</span>
<span class="sec-title">
Link
Header
</span>
</a>.
</li>
<li>
<del class="diff-old">file-specific
</del>
metadata
<del class="diff-old">in
a
document
</del>
located
<del class="diff-old">based
on
the
</del>
<ins class="diff-chg">through
a
site-wide
</ins>
location
<del class="diff-old">of
the
tabular
data
file
,
</del>
<ins class="diff-chg">configuration,
</ins>
see
<a href="#site-wide-location-configuration" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Standard
File
Metadata
</del>
<ins class="diff-chg">Site-wide
Location
Configuration
</ins>
</span>
</a>.
</li>
<li>
<del class="diff-old">directory-specific
</del>
metadata
<del class="diff-old">in
a
document
located
based
on
the
location
of
</del>
<ins class="diff-chg">embedded
within
</ins>
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
<del class="diff-old">,
</del>
</a>
<ins class="diff-chg">itself,
</ins>
see
<a href="#embedded-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.5
</del>
<ins class="diff-chg">5.4
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Standard
Directory
</del>
<ins class="diff-chg">Embedded
</ins>
Metadata
</span>
</a>.
</li>
</ol>
<p>
Processors
<em class="rfc2119" title="MUST">
MUST
</em>
<del class="diff-old">always
</del>
use
<del class="diff-old">overriding
metadata
and
embedded
metadata.
If
</del>
the
<del class="diff-old">overriding
</del>
<ins class="diff-chg">first
</ins>
metadata
<del class="diff-old">does
not
originate
from
</del>
<ins class="diff-chg">found
for
processing
</ins>
a
<del class="diff-old">complete
metadata
</del>
<a href="#dfn-tabular-data-file" class="internalDFN">
<ins class="diff-chg">tabular
data
</ins>
file
<del class="diff-old">itself
(for
example,
</del>
</a>
<ins class="diff-chg">by
using
overriding
metadata,
</ins>
if
<del class="diff-old">it
is
generated
from
command-line
options
when
invoking
the
implementation),
</del>
<ins class="diff-chg">provided.
Otherwise
</ins>
processors
<em class="rfc2119" title="MUST">
MUST
</em>
attempt
to
locate
the
first
metadata
document
from
the
<code>
Link
</code>
<del class="diff-old">header,
the
file-specific
metadata,
</del>
<ins class="diff-chg">header
</ins>
or
the
<del class="diff-old">directory-specific
metadata.
The
</del>
<ins class="diff-chg">metadata
</ins>
located
<ins class="diff-new">through
site-wide
configuration.
If
no
</ins>
metadata
<ins class="diff-new">is
supplied
or
found,
processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
use
</ins><a href="#dfn-embedded-metadata" class="internalDFN"><ins class="diff-new">
embedded
metadata
</ins></a>.<ins class="diff-new">
If
the
metadata
does
not
originate
</ins>
from
<del class="diff-old">these
locations
</del>
<ins class="diff-chg">the
embedded
metadata,
</ins><a href="#dfn-validators" class="internalDFN"><ins class="diff-chg">
validators
</ins></a><em class="rfc2119" title="MUST">
MUST
</em>
<del class="diff-old">be
merged
</del>
<ins class="diff-chg">verify
that
the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN"><ins class="diff-chg">
table
group
description
</ins></a><ins class="diff-chg">
within
that
metadata
is
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-group-description-compatibility" class="externalDFN"><ins class="diff-chg">
compatible
</ins></a><ins class="diff-chg">
with
that
in
the
</ins><a href="#dfn-embedded-metadata" class="internalDFN"><ins class="diff-chg">
embedded
metadata
</ins></a>,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
<del class="diff-old">If
no
metadata
is
supplied
or
found,
then
the
following
Metadata
is
used
as
the
default
metadata
:
      {
  "@type": "TableGroup",
  "tables": []
}
</del>
<section id="overriding-metadata" typeof="bibo:Chapter" resource="#overriding-metadata" property="bibo:hasPart">
<h3 id="h-overriding-metadata" resource="#h-overriding-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
5.1
</span>
Overriding
Metadata
</span>
</h3>
<p>
Processors
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
provide
users
with
the
facility
to
provide
their
own
metadata
for
<a title="tabular data file" href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
files
</a>
that
they
process.
This
might
be
provided:
</p>
<ul>
<li>
through
processor
options,
such
as
command-line
options
for
a
command-line
implementation
or
checkboxes
in
a
<del class="diff-old">GUI
</del>
<ins class="diff-chg">GUI.
</ins>
</li>
<li>
by
enabling
the
user
to
select
an
existing
metadata
file,
which
may
be
local
or
<del class="diff-old">remote
</del>
<ins class="diff-chg">remote.
</ins>
</li>
<li>
by
enabling
the
user
to
specify
a
series
of
metadata
files,
which
are
merged
by
the
processor
and
handled
as
if
they
were
a
single
<del class="diff-old">file
</del>
<ins class="diff-chg">file.
</ins>
</li>
</ul>
<p>
For
example,
a
processor
might
be
invoked
with:
</p>
<div class="example">
<div class="example-title">
<span>
Example
2
</span>:
Command-line
CSV
processing
with
column
types
</div>
<pre class="example">
$
csvlint
data.csv
--datatypes:string,float,string,string
</pre>
</div>
<p>
to
enable
the
testing
of
the
types
of
values
in
the
columns
of
a
CSV
file,
or
with:
</p>
<div class="example">
<div class="example-title">
<span>
Example
3
</span>:
Command-line
CSV
processing
with
a
schema
</div>
<pre class="example">
$
csvlint
data.csv
--schema:schema.json
</pre>
</div>
<p>
to
supply
a
schema
that
describes
the
contents
of
the
file,
against
which
it
can
be
validated.
</p>
<p>
Metadata
supplied
in
this
way
is
called
overriding,
or
user-supplied,
metadata.
Implementations
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
define
how
any
options
they
define
are
mapped
into
the
vocabulary
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
If
the
user
selects
existing
metadata
files,
implementations
<em class="rfc2119" title="MUST NOT">
MUST
NOT
</em>
use
metadata
located
through
the
<del class="diff-old">link
</del>
<ins class="diff-chg">Link
</ins>
header
(as
described
in
<a href="#link-header" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">5.2
</ins>
</span>
<span class="sec-title">
Link
Header
</span>
</a>
<del class="diff-old">),
file-specific
metadata
(as
described
in
section
5.4
Standard
File
Metadata
</del>
)
or
<del class="diff-old">directory-specific
metadata
</del>
<ins class="diff-chg">site-wide
location
configuration
</ins>
(as
described
in
<a href="#site-wide-location-configuration" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.5
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Standard
Directory
Metadata
</del>
<ins class="diff-chg">Site-wide
Location
Configuration
</ins>
</span>
</a>
).
</p>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note7">
<del class="diff-old">5.2
Embedded
Metadata
</del>
<span>
<ins class="diff-chg">Note
</ins>
</span>
<del class="diff-old">Most
syntaxes
for
tabular
data
provide
a
facility
for
embedding
metadata
within
the
tabular
data
file
itself.
The
definition
of
a
syntax
for
tabular
data
SHOULD
include
a
description
of
how
the
syntax
maps
to
an
annotated
data
model,
and
in
particular
how
</del>
</div>
<p class="">
<ins class="diff-chg">Users
should
ensure
that
</ins>
any
<del class="diff-old">embedded
</del>
metadata
<ins class="diff-new">from
those
locations
that
they
wish
to
use
</ins>
is
<del class="diff-old">mapped
</del>
<ins class="diff-chg">explicitly
incorporated
</ins>
into
the
<del class="diff-old">vocabulary
defined
in
[
tabular-metadata
].
Parsing
based
on
the
default
dialect
for
CSV,
as
described
in
8.
Parsing
Tabular
Data
,
will
extract
column
titles
from
the
first
row
of
a
CSV
file.
        GID,On Street,Species,Trim Cycle,Inventory Date
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON
ST,Liquidambar
styraciflua,Large
Tree
Routine
Prune,6/2/2010
The
results
of
this
can
be
found
in
section
8.2.1
Simple
Example
.
For
another
example,
the
following
tab-delimited
file
contains
embedded
</del>
<ins class="diff-chg">overriding
</ins>
metadata
<del class="diff-old">where
it
is
assumed
</del>
that
<del class="diff-old">comments
may
be
added
using
a
#
,
and
that
the
column
types
may
be
indicated
using
a
#datatype
annotation:
        # publisher City of Palo Alto
# updated 12/31/2010
#name GID on_street species trim_cycle  inventory_date
#datatype string  string  string  string  date:M/D/YYYY
  GID On Street Species Trim Cycle  Inventory Date
  1 ADDISON AV  Celtis australis  Large Tree Routine Prune  10/18/2010
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010
A
processor
that
recognises
this
format
</del>
<ins class="diff-chg">they
use
to
process
tabular
data.
Processors
</ins>
may
<del class="diff-old">be
able
</del>
<ins class="diff-chg">provide
facilities
</ins>
to
<del class="diff-old">extract
and
</del>
make
<del class="diff-old">sense
of
</del>
this
<del class="diff-old">embedded
metadata.
</del>
<ins class="diff-chg">easier
by
automatically
merging
metadata
files
from
different
locations,
but
this
specification
does
not
define
how
such
merging
is
carried
out.
</ins>
</p>
</div>
</section>
<section id="link-header" typeof="bibo:Chapter" resource="#link-header" property="bibo:hasPart">
<h3 id="h-link-header" resource="#h-link-header">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">5.2
</ins>
</span>
Link
Header
</span>
</h3>
<p>
If
the
user
has
not
supplied
a
metadata
file
as
overriding
metadata,
described
in
<a href="#overriding-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.1
</span>
<span class="sec-title">
Overriding
Metadata
</span>
</a>,
then
when
retrieving
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
via
HTTP,
processors
<em class="rfc2119" title="MUST">
MUST
</em>
retrieve
the
metadata
file
referenced
by
any
<code>
Link
</code>
header
with:
</p>
<ul>
<li>
<code>
rel="describedby"
</code>,
and
</li>
<li>
<code>
type="application/csvm+json"
</code>,
<code>
type="application/ld+json"
</code>
or
<code>
type="application/json"
</code>.
</li>
</ul>
<p>
so
long
as
this
referenced
metadata
file
describes
the
retrieved
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
(ie,
contains
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-description" class="externalDFN">
table
description
</a>
whose
<code>
url
</code>
matches
the
request
URL).
</p>
<p>
If
there
is
more
than
one
valid
metadata
file
linked
to
through
multiple
<code>
Link
</code>
headers,
then
implementations
<em class="rfc2119" title="MUST">
MUST
</em>
use
the
metadata
file
referenced
by
the
last
<code>
Link
</code>
header.
</p>
<p>
For
example,
when
the
response
to
requesting
a
tab-separated
file
looks
like:
</p>
<del class="diff-old">         OK
</del>
        <div class="example"><div class="example-title"><span>Example 4</span>: HTTP response including Link headers</div><pre class="example highlight prettyprint prettyprinted"><span class="pln">HTTP</span><span class="pun">/</span><span class="lit">1.1</span><span class="pln"> </span><span class="lit">200</span><span class="pln"> OK
</span><span class="typ">Content</span><span class="pun">-</span><span class="typ">Type</span><span class="pun">:</span><span class="pln"> text</span><span class="pun">/</span><span class="pln">tab</span><span class="pun">-</span><span class="pln">separated</span><span class="pun">-</span><span class="pln">values
</span><span class="pun">...</span><span class="pln">
</span>
<span class="typ">
Link
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="pun">
&lt;
</span>
<span class="pln">
metadata
</span>
<span class="pun">.
</span>
<span class="pln">
json
</span>
<span class="pun">
&gt;;
</span>
<span class="pln">
rel
</span>
<span class="pun">
=
</span>
<span class="str">
"describedBy"
</span>
<span class="pun">
;
</span>
<span class="pln">
type
</span>
<span class="pun">
=
</span>
<span class="str">
"application/csvm+json"
</span>
</pre>
</div>
<p>
an
implementation
must
use
the
referenced
<code>
metadata.json
</code>
to
supply
metadata
for
processing
the
file.
</p>
<p>
If
the
metadata
file
found
at
this
location
does
not
explicitly
include
a
reference
to
the
requested
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
then
it
<em class="rfc2119" title="MUST">
MUST
</em>
be
ignored.
<ins class="diff-new">URLs
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
normalized
as
described
in
</ins><a href="#url-normalization" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
6.3
</ins></span><span class="sec-title"><ins class="diff-new">
URL
Normalization
</ins></span></a>.</p><div class="note"><div class="note-title" aria-level="4" role="heading" id="h-note8"><span><ins class="diff-new">
Note
</ins></span></div><div class=""><p><ins class="diff-new">
The
</ins><code><ins class="diff-new">
Link
</ins></code><ins class="diff-new">
header
of
the
</ins><em><ins class="diff-new">
metadata
file
</ins></em><em class="rfc2119" title="MAY"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
include
references
to
the
CSV
files
it
describes,
using
the
</ins><code><ins class="diff-new">
describes
</ins></code><ins class="diff-new">
relationship.
For
example,
in
the
</ins><a href="https://raw.githubusercontent.com/w3c/csvw/gh-pages/examples/countries.json"><ins class="diff-new">
countries'
metadata
example
</ins></a>,<ins class="diff-new">
the
server
might
return
the
following
headers:
</ins>
</p>
          <pre>Link: &lt;http://example.org/countries.csv&gt;; rel="describes"; type="text/csv"
<ins class="diff-new">Link:
&lt;http://example.org/country_slice.csv&gt;;
rel="describes";
type="text/csv"
</ins></pre><p><ins class="diff-new">
However,
locating
the
metadata
</ins><em class="rfc2119" title="SHOULD NOT"><ins class="diff-new">
SHOULD
NOT
</ins></em><ins class="diff-new">
depend
on
this
mechanism.
</ins></p></div></div>
</section>
<section id="site-wide-location-configuration" typeof="bibo:Chapter" resource="#site-wide-location-configuration" property="bibo:hasPart">
<h3 id="h-site-wide-location-configuration" resource="#h-site-wide-location-configuration">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<del class="diff-old">Standard
File
Metadata
</del>
<ins class="diff-chg">Site-wide
Location
Configuration
</ins>
</span>
</h3>
<p>
If
the
user
has
not
supplied
a
metadata
file
as
overriding
metadata,
described
in
<a href="#overriding-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.1
</span>
<span class="sec-title">
Overriding
Metadata
</span>
</a>,
and
no
applicable
metadata
file
has
been
discovered
through
a
<code>
Link
</code>
header,
described
in
<a href="#link-header" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">5.2
</ins>
</span>
<span class="sec-title">
Link
Header
</span>
</a>,
processors
<em class="rfc2119" title="MUST">
MUST
</em>
attempt
to
locate
a
<del class="diff-old">file-specific
</del>
metadata
<del class="diff-old">document.
This
method
</del>
<ins class="diff-chg">documents
through
site-wide
configuration.
</ins></p><p><ins class="diff-chg">
In
this
case,
processors
</ins><em class="rfc2119" title="MUST">
MUST
<del class="diff-old">NOT
</del>
</em>
<del class="diff-old">be
used
if
the
URL
of
</del>
<ins class="diff-chg">retrieve
</ins>
the
<del class="diff-old">tabular
data
</del>
file
<ins class="diff-new">from
the
well-known
URI
</ins><code><ins class="diff-new">
/.well-known/csvm
</ins></code>.<ins class="diff-new">
(Well-known
URIs
are
defined
by
[
</ins><cite><a class="bibref" href="#bib-RFC5785"><ins class="diff-new">
RFC5785
</ins>
</a>
<del class="diff-old">contains
</del>
</cite>
<ins class="diff-chg">].)
If
no
such
file
is
located
(i.e.
the
response
results
in
</ins>
a
<del class="diff-old">query
component.
</del>
<ins class="diff-chg">client
error
</ins><code><ins class="diff-chg">
4xx
</ins></code><ins class="diff-chg">
status
code
or
a
server
error
</ins><code><ins class="diff-chg">
5xx
</ins></code><ins class="diff-chg">
status
code),
processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
proceed
as
if
this
file
were
found
with
the
content:
</ins>
</p>
        <pre>{+url}-metadata.json
<ins class="diff-new">csv-metadata.json
</ins></pre>
<p>
<del class="diff-old">In
this
case,
processors
</del>
<ins class="diff-chg">The
response
to
retrieving
</ins><code><ins class="diff-chg">
/.well-known/csvm
</ins></code><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
be
cached,
subject
to
cache
control
directives.
This
includes
caching
an
unsuccessful
response
such
as
a
</ins><code><ins class="diff-chg">
404
Not
Found
</ins></code>.</p><p><ins class="diff-chg">
This
file
</ins><em class="rfc2119" title="MUST">
MUST
</em>
<del class="diff-old">construct
</del>
<ins class="diff-chg">contain
</ins>
a
<del class="diff-old">URL
for
the
file-specific
metadata
document
</del>
<ins class="diff-chg">URI
template,
as
defined
</ins>
by
<del class="diff-old">appending
</del>
<ins class="diff-chg">[
</ins><cite><a class="bibref" href="#bib-URI-TEMPLATE"><ins class="diff-chg">
URI-TEMPLATE
</ins></a></cite><ins class="diff-chg">
],
on
each
line.
Starting
with
the
first
such
URI
template,
processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em>:</p><ol><li><ins class="diff-chg">
Expand
the
URI
template,
with
the
variable
</ins>
<code>
<del class="diff-old">-metadata.json
</del>
<ins class="diff-chg">url
</ins>
</code>
<ins class="diff-new">being
set
</ins>
to
the
<del class="diff-old">location
</del>
<ins class="diff-chg">URL
</ins>
of
the
<ins class="diff-chg">requested
</ins><a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
(with
any
fragment
component
of
that
URL
<del class="diff-old">removed)
and
attempt
</del>
<ins class="diff-chg">removed).
</ins></li><li><ins class="diff-chg">
Resolve
the
resulting
URL
against
the
URL
of
the
requested
</ins><a href="#dfn-tabular-data-file" class="internalDFN"><ins class="diff-chg">
tabular
data
file
</ins></a>.</li><li><ins class="diff-chg">
Attempt
</ins>
to
retrieve
a
metadata
document
<del class="diff-old">from
</del>
<ins class="diff-chg">at
</ins>
that
<del class="diff-old">location.
</del>
<ins class="diff-chg">URL.
</ins></li><li><ins class="diff-chg">
If
no
metadata
document
is
found
at
that
location,
or
if
the
metadata
file
found
at
the
location
does
not
explicitly
include
a
reference
to
the
relevant
</ins><a href="#dfn-tabular-data-file" class="internalDFN"><ins class="diff-chg">
tabular
data
file
</ins></a>,<ins class="diff-chg">
perform
these
same
steps
on
the
next
URI
template,
otherwise
use
that
metadata
document.
</ins></li></ol>
<p>
For
example,
if
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
is
at
<code>
http://example.org/south-west/devon.csv
</code>
then
processors
must
attempt
to
locate
a
<del class="diff-old">metadata
document
at
http://example.org/south-west/devon.csv-metadata.json
.
On
the
other
hand,
if
the
tabular
data
</del>
<ins class="diff-chg">well-known
</ins>
file
<del class="diff-old">is
</del>
at
<code>
<del class="diff-old">http://example.com/index.php?file=43178.csv
then,
because
the
URL
of
the
tabular
data
</del>
<ins class="diff-chg">http://example.org/.well-known/csvm
</ins></code>.<ins class="diff-chg">
If
that
</ins>
file
<del class="diff-old">includes
a
query
component,
</del>
<ins class="diff-chg">contains:
</ins></p>        <div class="example"><div class="example-title"><span>Example 5</span></div><pre class="example">{+url}.json<ins class="diff-chg">
csvm.json
/csvm?file={url}
</ins></pre></div><p>
the
processor
<del class="diff-old">must
not
attempt
to
</del>
<ins class="diff-chg">will
first
</ins>
look
for
<del class="diff-old">a
file-specific
</del>
<code>
<ins class="diff-chg">http://example.org/south-west/devon.csv.json
</ins></code>.<ins class="diff-chg">
If
there
is
no
</ins>
metadata
<del class="diff-old">document.
</del>
<ins class="diff-chg">file
in
that
location,
it
will
then
look
for
</ins><code><ins class="diff-chg">
http://example.org/south-west/csvm.json
</ins></code>.<ins class="diff-chg">
Finally,
if
that
also
fails,
it
will
look
for
</ins><code><ins class="diff-chg">
http://example.org/csvm?file=http://example.org/south-west/devon.csv.json
</ins></code>.
</p>
<p>
If
<del class="diff-old">the
metadata
</del>
<ins class="diff-chg">no
</ins>
file
<ins class="diff-new">were
</ins>
found
at
<del class="diff-old">this
location
does
not
explicitly
include
</del>
<code>
<ins class="diff-chg">http://example.org/.well-known/csvm
</ins></code>,<ins class="diff-chg">
the
processor
will
use
the
default
locations
and
try
to
retrieve
metadata
from
</ins><code><ins class="diff-chg">
http://example.org/south-west/devon.csv-metadata.json
</ins></code><ins class="diff-chg">
and,
if
unsuccessful,
</ins><code><ins class="diff-chg">
http://example.org/south-west/csv-metadata.json
</ins></code>.</p><div class="issue atrisk" id="issue-555"><div class="issue-title" aria-level="4" role="heading" id="h-issue1"><span><ins class="diff-chg">
Feature
at
Risk
555
</ins></span></div><p class="atrisk"><ins class="diff-chg">
The
use
of
</ins>
a
<del class="diff-old">reference
</del>
<ins class="diff-chg">well-known
location
for
defining
URI
patters
used
</ins>
to
<del class="diff-old">the
relevant
tabular
data
file
then
</del>
<ins class="diff-chg">locate
metdata
files
is
at
risk.
The
Working
Group
solicits
feedback
on
whether
this
mechanism
is
useful
and
whether
</ins>
it
<del class="diff-old">MUST
be
ignored.
</del>
<ins class="diff-chg">represents
major
implementation
difficulties.
</ins>
</p>
</div>
</section>
<section id="embedded-metadata" typeof="bibo:Chapter" resource="#embedded-metadata" property="bibo:hasPart">
<h3 id="h-embedded-metadata" resource="#h-embedded-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">5.5
</del>
<ins class="diff-chg">5.4
</ins>
</span>
<del class="diff-old">Standard
Directory
</del>
<ins class="diff-chg">Embedded
</ins>
Metadata
</span>
</h3>
<p>
<del class="diff-old">If
the
user
has
not
supplied
</del>
<ins class="diff-chg">Most
syntaxes
for
tabular
data
provide
</ins>
a
<ins class="diff-new">facility
for
</ins><dfn title="embedded metadata" id="dfn-embedded-metadata"><ins class="diff-new">
embedding
</ins>
metadata
</dfn>
<ins class="diff-new">within
the
</ins><a href="#dfn-tabular-data-file" class="internalDFN"><ins class="diff-new">
tabular
data
</ins>
file
<del class="diff-old">as
overriding
metadata,
described
in
section
5.1
Overriding
Metadata
,
</del>
</a>
<ins class="diff-chg">itself.
The
definition
of
a
syntax
for
tabular
data
</ins><em class="rfc2119" title="SHOULD"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
include
a
description
of
how
the
syntax
maps
to
an
annotated
data
model,
</ins>
and
<del class="diff-old">no
applicable
</del>
<ins class="diff-chg">in
particular
how
any
embedded
</ins>
metadata
<del class="diff-old">file
has
been
discovered
through
a
Link
header,
described
</del>
<ins class="diff-chg">is
mapped
into
the
vocabulary
defined
</ins>
in
<del class="diff-old">section
5.3
Link
Header
</del>
<ins class="diff-chg">[
</ins><cite>
<del class="diff-old">,
or
from
</del>
<a class="bibref" href="#bib-tabular-metadata">
<ins class="diff-chg">tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
Parsing
based
on
</ins>
the
<del class="diff-old">standard
file
metadata
location,
</del>
<ins class="diff-chg">default
dialect
for
CSV,
as
</ins>
described
in
<del class="diff-old">section
</del>
<a href="#parsing" class="secitonRef sec-ref">
<span class="secno">
<del class="diff-old">5.4
</del>
<ins class="diff-chg">8.
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Standard
File
Metadata
</del>
<ins class="diff-chg">Parsing
Tabular
Data
</ins>
</span>
</a>,
<del class="diff-old">processors
MUST
attempt
to
locate
a
directory-level
metadata
document.
This
method
MUST
NOT
be
used
if
</del>
<ins class="diff-chg">will
extract
</ins><a href="#dfn-column-titles" class="internalDFN"><ins class="diff-chg">
column
titles
</ins></a><ins class="diff-chg">
from
</ins>
the
<del class="diff-old">URL
</del>
<ins class="diff-chg">first
row
</ins>
of
<del class="diff-old">the
tabular
data
file
contains
</del>
a
<del class="diff-old">query
component.
</del>
<ins class="diff-chg">CSV
file.
</ins>
</p>
        <div class="example"><div class="example-title"><span>Example 6</span>: http://example.org/tree-ops.csv</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date
<ins class="diff-new">1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON
ST,Liquidambar
styraciflua,Large
Tree
Routine
Prune,6/2/2010
</ins></pre></div>
<p>
<del class="diff-old">Processors
MUST
locate
and
retrieve
the
common
metadata
document
for
a
directory
by
resolving
the
relative
URL
metadata.json
against
the
base
URL
</del>
<ins class="diff-chg">The
results
</ins>
of
<del class="diff-old">the
tabular
data
file
and
fetching
the
resulting
URL.
</del>
<ins class="diff-chg">this
can
be
found
in
</ins><a href="#simple-example" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
8.2.1
</ins></span><span class="sec-title"><ins class="diff-chg">
Simple
Example
</ins></span></a>.
</p>
<p>
For
<ins class="diff-new">another
</ins>
example,
<del class="diff-old">if
</del>
the
<del class="diff-old">tabular
data
</del>
<ins class="diff-chg">following
tab-delimited
</ins>
file
<ins class="diff-chg">contains
embedded
metadata
where
it
</ins>
is
<del class="diff-old">at
http://example.org/south-west/devon.csv
then
processors
must
attempt
to
locate
</del>
<ins class="diff-chg">assumed
that
comments
may
be
added
using
</ins>
a
<del class="diff-old">metadata
file
at
</del>
<code>
<del class="diff-old">http://example.org/south-west/metadata.json
.
On
the
other
hand,
if
</del>
<ins class="diff-chg">#
</ins></code>,<ins class="diff-chg">
and
that
</ins>
the
<del class="diff-old">tabular
data
file
is
at
</del>
<ins class="diff-chg">column
types
may
be
indicated
using
a
</ins>
<code>
<del class="diff-old">http://example.com/index.php?file=43178.csv
</del>
<ins class="diff-chg">#datatype
</ins>
</code>
<del class="diff-old">then,
because
the
URL
of
the
tabular
data
file
includes
a
query
component,
the
processor
must
not
attempt
to
look
for
a
directory-level
metadata
document.
</del>
<ins class="diff-chg">annotation:
</ins>
</p>
        <div class="example"><div class="example-title"><span>Example 7</span>: Tab-separated file containing embedded metadata</div><pre class="example"># publisher City of Palo Alto
<ins class="diff-new"># updated 12/31/2010
#name GID on_street species trim_cycle  inventory_date
#datatype string  string  string  string  date:M/D/YYYY
  GID On Street Species Trim Cycle  Inventory Date
  1 ADDISON AV  Celtis australis  Large Tree Routine Prune  10/18/2010
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010
</ins></pre></div>
<p>
<del class="diff-old">If
the
metadata
file
found
at
</del>
<ins class="diff-chg">A
processor
that
recognises
</ins>
this
<del class="diff-old">location
does
not
explicitly
include
a
reference
to
the
relevant
tabular
data
file
then
it
MUST
</del>
<ins class="diff-chg">format
may
</ins>
be
<del class="diff-old">ignored.
</del>
<ins class="diff-chg">able
to
extract
and
make
sense
of
this
embedded
metadata.
</ins>
</p>
</section>
</section>
<section id="processing-tables" typeof="bibo:Chapter" resource="#processing-tables" property="bibo:hasPart">
<h2 id="h-processing-tables" resource="#h-processing-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
6.
</span>
Processing
Tables
</span>
</h2>
<p>
This
section
describes
how
particular
types
of
applications
should
process
tabular
data
and
metadata
files.
</p>
<p>
In
many
cases,
an
application
will
start
processing
from
a
metadata
file.
In
that
case,
the
initial
metadata
file
is
treated
as
<a href="#overriding-metadata">
overriding
metadata
</a>
and
the
application
<em class="rfc2119" title="MUST NOT">
MUST
NOT
</em>
continue
to
retrieve
other
available
metadata
about
each
of
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
s
referenced
by
that
initial
metadata
file
other
than
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>.
</p>
<p>
In
other
cases,
applications
will
start
from
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>,
such
as
a
CSV
file,
and
<a href="#locating-metadata">
locate
metadata
</a>
from
that
file.
This
metadata
will
be
used
to
process
the
file
as
if
the
processor
were
starting
from
that
metadata
file.
</p>
<p>
For
example,
if
a
validator
is
passed
a
locally
authored
metadata
file
<code>
spending.json
</code>,
which
contains:
</p>
<del class="diff-old">      
</del>
      <div class="example"><div class="example-title"><span>Example 8</span>: Metadata file referencing multiple tabular data files sharing a schema</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"government-spending.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tables"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
    </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/east-sussex-2015-03.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/east-sussex-2015-02.csv"</span><span class="pln">
  </span><span class="pun">},</span><span class="pln"> </span><span class="pun">...</span><span class="pln"> 
  </span><span class="pun">]</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
the
validator
would
validate
all
the
listed
tables,
using
the
locally
defined
schema
at
<code>
government-spending.csv
</code>.
It
would
also
use
the
metadata
embedded
in
the
referenced
CSV
files;
for
example,
when
processing
<code>
http://example.org/east-sussex-2015-03.csv
</code>,
it
would
use
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
within
that
<del class="diff-old">file.
</del>
<ins class="diff-chg">file
to
verify
that
the
CSV
is
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-group-description-compatibility" class="externalDFN"><ins class="diff-chg">
compatible
</ins></a><ins class="diff-chg">
with
the
metadata.
</ins>
</p>
<p>
If
a
validator
is
passed
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
<code>
http://example.org/east-sussex-2015-03.csv
</code>,
the
validator
would
use
the
metadata
located
from
the
CSV
file:
the
first
metadata
file
found
through
the
<code>
Link
</code>
headers
found
when
retrieving
that
file,
or
<del class="diff-old">at
http://example.org/east-sussex-2015-03.csv-metadata.json
or
http://example.org/metadata.json
.
</del>
<ins class="diff-chg">located
through
a
site-wide
location
configuration.
</ins>
</p>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note9">
<span>
Note
</span>
</div>
<p class="">
Starting
with
a
metadata
file
can
remove
the
need
to
perform
additional
requests
to
locate
<del class="diff-old">linked,
file-specific,
</del>
<ins class="diff-chg">linked
metadata,
</ins>
or
<del class="diff-old">directory-specific
</del>
metadata
<ins class="diff-new">retrieved
through
site-wide
location
configuration
</ins>
</p>
</div>
<section id="creating-annotated-tables" typeof="bibo:Chapter" resource="#creating-annotated-tables" property="bibo:hasPart">
<h3 id="h-creating-annotated-tables" resource="#h-creating-annotated-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
6.1
</span>
Creating
Annotated
Tables
</span>
</h3>
<p>
After
locating
metadata,
metadata
is
<del class="diff-old">merged
</del>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-normalization" class="externalDFN">
<ins class="diff-chg">normalized
</ins>
</a>
<ins class="diff-new">and
coerced
</ins>
into
a
single
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN">
table
group
description
</a>.
When
starting
with
a
metadata
file,
this
involves
<del class="diff-old">merging
</del>
<ins class="diff-chg">normalizing
</ins>
the
provided
metadata
file
<del class="diff-old">with
</del>
<ins class="diff-chg">and
verifying
that
</ins>
the
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
for
each
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
referenced
<del class="diff-old">by
that
file.
</del>
<ins class="diff-chg">from
the
metadata
is
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-group-description-compatibility" class="externalDFN"><ins class="diff-chg">
compatible
</ins></a><ins class="diff-chg">
with
the
metadata.
</ins>
When
starting
with
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
<del class="diff-old">file,
</del>
<ins class="diff-chg">file
</ins></a>,
this
involves
locating
the
first
metadata
file
as
described
in
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>
and
<del class="diff-old">merging
all
relevant
metadata
</del>
<ins class="diff-chg">normalizing
</ins>
into
a
single
descriptor.
</p>
<p>
If
processing
starts
with
a
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>,
implementations:
</p>
<ol class="algorithm">
<li>
Retrieve
the
tabular
data
file.
</li>
<li>
Retrieve
<del class="diff-old">any
metadata
supplied
by
the
user
(
UM
T
)
(see
section
5.1
Overriding
Metadata
).
If
UM
T
does
not
describe
a
table
or
group
of
tables
describing
the
tabular
data
file,
retrieve
</del>
the
first
metadata
file
(
<code>
FM
</code>
)
as
described
in
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>:
<ol class="algorithm">
<li>
metadata
<ins class="diff-new">supplied
by
the
user
(see
</ins><a href="#overriding-metadata" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.1
</ins></span><span class="sec-title"><ins class="diff-new">
Overriding
Metadata
</ins></span></a><ins class="diff-new">
).
</ins></li><li><ins class="diff-new">
metadata
</ins>
referenced
from
a
<em>
Link
Header
</em>
that
may
be
returned
when
retrieving
the
tabular
data
file
(see
<a href="#link-header" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.3
</del>
<ins class="diff-chg">5.2
</ins>
</span>
<span class="sec-title">
Link
Header
</span>
</a>
).
</li>
<li>
<del class="diff-old">file-specific
</del>
metadata
<del class="diff-old">in
a
document
located
based
on
the
location
of
the
tabular
data
file
(see
section
5.4
Standard
File
Metadata
).
directory-specific
metadata
in
</del>
<ins class="diff-chg">retrieved
through
</ins>
a
<del class="diff-old">document
located
based
on
the
</del>
<ins class="diff-chg">site-wide
</ins>
location
<del class="diff-old">of
the
tabular
data
file
</del>
<ins class="diff-chg">configuration
</ins>
(see
<a href="#site-wide-location-configuration" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.5
</del>
<ins class="diff-chg">5.3
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Standard
Directory
Metadata
</del>
<ins class="diff-chg">Site-wide
Location
Configuration
</ins>
</span>
</a>
).
</li>
<li>
<del class="diff-old">default
</del>
<a href="#dfn-embedded-metadata" class="internalDFN">
<ins class="diff-chg">embedded
</ins>
metadata
</a>
as
defined
in
<a href="#embedded-metadata" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">5.
</del>
<ins class="diff-chg">5.4
</ins>
</span>
<span class="sec-title">
<del class="diff-old">Locating
</del>
<ins class="diff-chg">Embedded
</ins>
Metadata
</span>
</a>
with
a
single
<code>
tables
</code>
entry
where
the
<code>
url
</code>
property
is
set
from
that
of
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>.
</li>
</ol>
</li>
<li>
Proceed
as
if
the
process
starts
with
<del class="diff-old">a
metadata
file
using
the
merged
metadata
UM
M
=
merge(UM
T
,
FM)
or
UM
T
if
no
</del>
<code>
FM
<del class="diff-old">is
loaded.
</del>
</code>.
</li>
</ol>
<p>
If
the
process
starts
with
a
metadata
file:
</p>
<ol class="algorithm">
<li>
Retrieve
the
metadata
file
yielding
the
metadata
<code>
UM
<del class="diff-old">M
</del>
</code>
(which
is
treated
as
overriding
metadata,
see
<a href="#overriding-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.1
</span>
<span class="sec-title">
Overriding
Metadata
</span>
</a>
).
</li>
<li>
<ins class="diff-new">Normalize
</ins><code><ins class="diff-new">
UM
</ins></code><ins class="diff-new">
using
the
process
defined
in
</ins><cite><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#normalization"><ins class="diff-new">
Normalization
</ins></a></cite><ins class="diff-new">
in
[
</ins><cite><a class="bibref" href="#bib-tabular-metadata"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
],
coercing
</ins><code><ins class="diff-new">
UM
</ins></code><ins class="diff-new">
into
a
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-group-description" class="externalDFN"><ins class="diff-new">
table
group
description
</ins></a>,<ins class="diff-new">
if
necessary.
</ins></li><li>
For
each
<a href="#dfn-table" class="internalDFN">
table
</a>
<ins class="diff-new">(
</ins><code><ins class="diff-new">
TM
</ins></code><ins class="diff-new">
)
</ins>
in
<code>
UM
<del class="diff-old">M
</del>
</code>
in
order,
create
one
or
more
<a title="annotated table" href="#dfn-annotated-table" class="internalDFN">
annotated
tables
</a>:
<ol class="algorithm">
<li>
Extract
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-descriptions">
dialect
description
</a>
(
<code>
DD
</code>
)
from
<code>
UM
<del class="diff-old">M
</del>
</code>
for
the
<a href="#dfn-table" class="internalDFN">
table
</a>
associated
with
the
tabular
data
file.
If
there
is
no
such
dialect
description,
extract
the
first
available
dialect
description
from
a
<a href="#dfn-group-of-tables" class="internalDFN">
group
of
tables
</a>
in
which
the
tabular
data
file
is
described.
Otherwise
use
the
default
dialect
description.
</li>
<li>
If
using
the
default
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-descriptions">
dialect
description
</a>,
override
default
values
in
<code>
DD
</code>
based
on
HTTP
headers
found
when
retrieving
the
tabular
data
file:
<ul>
<li>
If
the
media
type
from
the
<code>
Content-Type
</code>
header
is
<code>
text/tsv
</code>,
set
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-delimiter" class="externalDFN">
delimiter
</a>
to
<code>
TAB
</code>
in
<code>
DD
</code>.
</li>
<li>
If
the
<code>
Content-Type
</code>
header
includes
the
<code>
header
</code>
parameter
with
a
value
of
<code>
absent
</code>,
set
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-header" class="externalDFN">
header
</a>
to
<code>
false
</code>
in
<code>
DD
</code>.
</li>
<li>
If
the
<code>
Content-Type
</code>
header
includes
the
<code>
charset
</code>
parameter,
set
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-encoding" class="externalDFN">
encoding
</a>
to
this
value
in
<code>
DD
</code>.
</li>
</ul>
</li>
<li>
<p>
Parse
the
tabular
data
file,
using
<code>
DD
</code>
as
a
guide,
to
create
a
basic
tabular
data
model
(
<code>
T
</code>
)
and
extract
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
(
<code>
EM
</code>
),
for
example
from
the
<a href="#dfn-header-line" class="internalDFN">
header
line
</a>.
</p>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note10">
<span>
Note
</span>
</div>
<p class="">
This
specification
provides
a
non-normative
definition
for
parsing
CSV-based
files,
including
the
extraction
of
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>,
in
<a href="#parsing" class="sectionRef sec-ref">
section
<span class="secno">
8.
</span>
<span class="sec-title">
Parsing
Tabular
Data
</span>
</a>.
This
specification
does
not
define
any
syntax
for
embedded
metadata
beyond
this;
whatever
syntax
is
used,
it's
assumed
that
metadata
can
be
mapped
to
the
vocabulary
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
</div>
</li>
<li>
If
a
<code>
Content-Language
</code>
HTTP
header
was
found
when
retrieving
the
tabular
data
file,
and
the
value
provides
a
single
language,
set
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-language" class="externalDFN">
lang
</a>
inherited
property
to
this
value
in
<code>
<del class="diff-old">EM
.
</del>
<ins class="diff-chg">TM
</ins></code>,<ins class="diff-chg">
unless
</ins><code><ins class="diff-chg">
TM
</ins></code><ins class="diff-chg">
already
has
a
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-language" class="externalDFN"><ins class="diff-chg">
lang
</ins></a><ins class="diff-chg">
inherited
property.
</ins>
</li>
<li>
<del class="diff-old">Create
the
merged
metadata
</del>
<ins class="diff-chg">Verify
that
</ins>
<code>
<del class="diff-old">M
=
merge(UM
M
,
EM)
</del>
<ins class="diff-chg">TM
</ins></code><ins class="diff-chg">
is
compatible
with
</ins><code><ins class="diff-chg">
EM
</ins>
</code>
using
the
<del class="diff-old">merge
algorithm
</del>
<ins class="diff-chg">procedure
</ins>
defined
in
<cite>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-description-compatibility">
<ins class="diff-new">Table
Description
Compatibility
</ins></a></cite><ins class="diff-new">
in
</ins>
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
<del class="diff-old">].
</del>
<ins class="diff-chg">];
if
</ins><code><ins class="diff-chg">
TM
</ins></code><ins class="diff-chg">
is
not
compatible
with
</ins><code><ins class="diff-chg">
EM
</ins></code><ins class="diff-chg">
validators
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
raise
an
error,
other
processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
generate
a
warning
and
continue
processing.
</ins>
</li>
<li>
Use
the
metadata
<code>
<del class="diff-old">M
</del>
<ins class="diff-chg">TM
</ins>
</code>
to
add
annotations
to
the
tabular
data
model
<code>
T
</code>
as
described
in
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#annotating-tables">
Section
2
Annotating
Tables
</a>
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</li>
</ol>
</li>
</ol>
</section>
<section id="metadata-compatibility" typeof="bibo:Chapter" resource="#metadata-compatibility" property="bibo:hasPart">
<h3 id="h-metadata-compatibility" resource="#h-metadata-compatibility">
<span property="xhv:role" resource="xhv:heading">
<del class="diff-old">Note
</del>
<span class="secno">
<ins class="diff-chg">6.2
</ins></span><ins class="diff-chg">
Metadata
Compatibility
</ins>
</span>
<del class="diff-old">In
the
case
of
starting
with
</del>
</h3>
<p>
<ins class="diff-chg">When
processing
</ins>
a
<a href="#dfn-tabular-data-file" class="internalDFN">
<ins class="diff-new">tabular
data
file
</ins></a><ins class="diff-new">
using
</ins>
metadata
<del class="diff-old">file,
UM
M
</del>
<ins class="diff-chg">as
discovered
using
</ins><a href="#locating-metadata" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.
</ins></span><span class="sec-title"><ins class="diff-chg">
Locating
Metadata
</ins></span>
<del class="diff-old">will
describe
a
table
or
group
of
tables
</del>
</a>,
<del class="diff-old">and
no
other
metadata
files
will
be
retrieved.
Thus
</del>
<ins class="diff-chg">processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
ensure
that
</ins>
the
metadata
<ins class="diff-new">and
</ins><a href="#dfn-tabular-data-file" class="internalDFN"><ins class="diff-new">
tabular
data
</ins>
file
<del class="diff-old">must
provide
all
applicable
</del>
</a>
<ins class="diff-chg">are
compatible,
this
is
typically
done
by
extracting
</ins><a href="#dfn-embedded-metadata" class="internalDFN"><ins class="diff-chg">
embedded
</ins>
metadata
<del class="diff-old">aside
</del>
</a>
from
<del class="diff-old">that
embedded
within
</del>
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
<del class="diff-old">files
themselves.
</del>
<ins class="diff-chg">file
</ins></a><ins class="diff-chg">
and
determining
that
the
provided
or
discovered
metadata
is
compatible
with
the
</ins><a href="#dfn-embedded-metadata" class="internalDFN"><ins class="diff-chg">
embedded
metadata
</ins></a><ins class="diff-chg">
using
the
procedure
defined
in
</ins><cite><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-description-compatibility"><ins class="diff-chg">
Table
Compatibility
</ins></a></cite><ins class="diff-chg">
in
[
</ins><cite><a class="bibref" href="#bib-tabular-metadata"><ins class="diff-chg">
tabular-metadata
</ins></a></cite><ins class="diff-chg">
].
</ins>
</p>
</section>
<section id="url-normalization" typeof="bibo:Chapter" resource="#url-normalization" property="bibo:hasPart">
<h3 id="h-url-normalization" resource="#h-url-normalization">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-chg">6.3
</ins></span><ins class="diff-chg">
URL
Normalization
</ins></span></h3><p><ins class="diff-chg">
Metadata
Discovery
and
Compatibility
involve
comparing
URLs.
When
comparing
URLs,
processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
use
</ins><cite><a href="https://tools.ietf.org/html/rfc3986#section-6.2.2" class="externalDFN"><ins class="diff-chg">
Syntax-Based
Normalization
</ins></a></cite><ins class="diff-chg">
as
defined
in
[
</ins><cite><a class="bibref" href="#bib-RFC3968"><ins class="diff-chg">
RFC3968
</ins></a></cite><ins class="diff-chg">
].
Processors
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
perform
</ins><cite><a href="https://tools.ietf.org/html/rfc3986#section-6.2.3" class="externalDFN"><ins class="diff-chg">
Scheme-Based
Normalization
</ins></a></cite><ins class="diff-chg">
for
HTTP
(
</ins><code><ins class="diff-chg">
80
</ins></code><ins class="diff-chg">
)
and
HTTPS
(
</ins><code><ins class="diff-chg">
443
</ins></code><ins class="diff-chg">
)
and
</ins><em class="rfc2119" title="SHOULD"><ins class="diff-chg">
SHOULD
</ins></em><ins class="diff-chg">
perform
</ins><cite><a href="https://tools.ietf.org/html/rfc3986#section-6.2.3" class="externalDFN"><ins class="diff-chg">
Scheme-Based
Normalization
</ins></a></cite><ins class="diff-chg">
for
other
well-known
schems.
</ins></p>
</section>
<section id="parsing-cells" typeof="bibo:Chapter" resource="#parsing-cells" property="bibo:hasPart">
<h3 id="h-parsing-cells" resource="#h-parsing-cells">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2
</del>
<ins class="diff-chg">6.4
</ins>
</span>
Parsing
Cells
</span>
</h3>
<p>
Unlike
many
other
data
formats,
tabular
data
is
designed
to
be
read
by
humans.
For
that
reason,
it's
common
for
data
to
be
represented
within
tabular
data
in
a
human-readable
way.
The
<a title="column datatype" href="#dfn-column-datatype" class="internalDFN">
datatype
</a>,
<a title="column default" href="#dfn-column-default" class="internalDFN">
default
</a>,
<a title="column lang" href="#dfn-column-lang" class="internalDFN">
lang
</a>,
<a title="column null" href="#dfn-column-null" class="internalDFN">
null
</a>,
<a title="column required" href="#dfn-column-required" class="internalDFN">
required
</a>,
and
<a title="column separator" href="#dfn-column-separator" class="internalDFN">
separator
</a>
annotations
provide
the
information
needed
to
parse
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
of
a
cell
into
its
(semantic)
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
annotation.
This
is
used:
</p>
<ul>
<li>
by
<strong>
validators
</strong>
to
check
that
the
data
in
the
table
is
in
the
expected
format,
</li>
<li>
by
<strong>
converters
</strong>
to
parse
the
values
before
mapping
them
into
values
in
the
target
of
the
conversion,
</li>
<li>
when
<strong>
displaying
</strong>
data,
to
map
it
into
formats
that
are
meaningful
for
those
viewing
the
data
(as
opposed
to
those
publishing
it),
and
</li>
<li>
when
<strong>
inputting
</strong>
data,
to
turn
entered
values
into
representations
in
a
consistent
format.
</li>
</ul>
<p>
The
process
of
parsing
a
cell
creates
a
<a href="#dfn-cell" class="internalDFN">
cell
</a>
with
annotations
based
on
the
original
string
value,
parsed
value
and
other
<a href="#dfn-column" class="internalDFN">
column
</a>
annotations
and
adds
the
cell
to
the
list
of
<a title="row cells" href="#dfn-row-cells" class="internalDFN">
cells
</a>
in
a
<a href="#dfn-row" class="internalDFN">
row
</a>
and
<a title="column cells" href="#dfn-column-cells" class="internalDFN">
cells
</a>
in
a
<a href="#dfn-column" class="internalDFN">
column
</a>:
</p>
<ul>
<li>
The
raw
string
value
becomes
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
<li>
The
<a title="column ordered" href="#dfn-column-ordered" class="internalDFN">
ordered
</a>
annotation
on
the
<a href="#dfn-column" class="internalDFN">
column
</a>
becomes
the
<a title="cell ordered" href="#dfn-cell-ordered" class="internalDFN">
ordered
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
<li>
The
<a title="column text direction" href="#dfn-column-text-direction" class="internalDFN">
text
direction
</a>
annotation
on
the
<a href="#dfn-column" class="internalDFN">
column
</a>
becomes
the
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
<li>
The
<a href="#dfn-row" class="internalDFN">
row
</a>
becomes
the
<a title="cell row" href="#dfn-cell-row" class="internalDFN">
row
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
<li>
The
<a href="#dfn-column" class="internalDFN">
column
</a>
becomes
the
<a title="cell column" href="#dfn-cell-column" class="internalDFN">
column
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
</ul>
<p>
After
parsing,
the
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
can
be:
</p>
<ul>
<li>
<code>
null
</code>,
</li>
<li>
a
single
value
with
an
associated
optional
datatype
or
language,
or
</li>
<li>
a
sequence
of
such
values.
</li>
</ul>
<p>
The
process
of
parsing
the
string
value
into
a
single
value
or
a
list
of
values
is
as
follows:
</p>
<ol class="algorithm">
<li>
unless
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
string
</code>,
<code>
json
</code>,
<code>
xml
</code>,
<code>
html
</code>
or
<code>
anyAtomicType
</code>,
replace
all
carriage
return
(
<code>
#xD
</code>
),
line
feed
(
<code>
#xA
</code>
),
and
tab
(
<code>
#x9
</code>
)
characters
with
space
characters.
</li>
<li>
unless
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
string
</code>,
<code>
json
</code>,
<code>
xml
</code>,
<code>
html
</code>,
<code>
anyAtomicType
</code>,
or
<code>
normalizedString
</code>,
strip
leading
and
trailing
whitespace
from
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
and
replace
all
instances
of
two
or
more
whitespace
characters
with
a
single
space
character.
</li>
<li>
if
the
normalized
string
is
an
empty
string,
apply
the
remaining
steps
to
the
string
given
by
the
<a href="#dfn-column-default" class="internalDFN">
column
default
</a>
annotation.
</li>
<li>
if
the
<a href="#dfn-column-separator" class="internalDFN">
column
separator
</a>
annotation
is
not
<code>
null
</code>
and
the
normalized
string
is
an
empty
string,
the
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
is
an
empty
list.
If
the
<a href="#dfn-column-required" class="internalDFN">
column
required
</a>
annotation
is
<code>
true
</code>,
add
an
error
to
the
list
of
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
for
the
cell.
</li>
<li>
if
the
<a href="#dfn-column-separator" class="internalDFN">
column
separator
</a>
annotation
is
not
<code>
null
</code>,
the
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
is
a
list
of
values;
set
the
<a title="cell value list" href="#dfn-cell-value-list" class="internalDFN">
list
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>
to
<code>
true
</code>,
and
create
the
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
created
by:
<ol class="algorithm">
<li>
if
the
normalized
string
is
the
same
as
any
one
of
the
values
of
the
<a href="#dfn-column-null" class="internalDFN">
column
null
</a>
annotation,
then
the
resulting
value
is
<code>
null
</code>.
</li>
<li>
split
the
normalized
string
at
the
character
specified
by
the
<a href="#dfn-column-separator" class="internalDFN">
column
separator
</a>
annotation.
</li>
<li>
unless
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
string
</code>
or
<code>
anyAtomicType
</code>,
strip
leading
and
trailing
whitespace
from
these
strings.
</li>
<li>
applying
the
remaining
steps
to
each
of
the
strings
in
turn.
</li>
</ol>
</li>
<li>
if
the
string
is
an
empty
string,
apply
the
remaining
steps
to
the
string
given
by
the
<a href="#dfn-column-default" class="internalDFN">
column
default
</a>
annotation.
</li>
<li>
if
the
string
is
the
same
as
any
one
of
the
values
of
the
<a href="#dfn-column-null" class="internalDFN">
column
null
</a>
annotation,
then
the
resulting
value
is
<code>
null
</code>.
If
the
<a href="#dfn-column-separator" class="internalDFN">
column
separator
</a>
annotation
is
<code>
null
</code>
and
the
<a href="#dfn-column-required" class="internalDFN">
column
required
</a>
annotation
is
<code>
true
</code>,
add
an
error
to
the
list
of
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
for
the
cell.
</li>
<li>
parse
the
string
using
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
if
one
is
specified,
as
described
below
to
give
a
value
with
an
associated
<a title="cell value datatype" href="#dfn-cell-value-datatype" class="internalDFN">
datatype
</a>.
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
string
</code>,
or
there
is
no
<code>
datatype
</code>,
the
value
has
an
associated
<a title="cell value language" href="#dfn-cell-value-language" class="internalDFN">
language
</a>
from
the
<a href="#dfn-column-lang" class="internalDFN">
column
lang
</a>
annotation.
If
there
are
any
errors,
add
them
to
the
list
of
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
for
the
cell;
in
this
case
the
value
has
a
<a title="cell value datatype" href="#dfn-cell-value-datatype" class="internalDFN">
datatype
</a>
of
<code>
string
</code>
;
if
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
string
</code>,
or
there
is
no
<code>
datatype
</code>,
the
value
has
an
associated
<a title="cell value language" href="#dfn-cell-value-language" class="internalDFN">
language
</a>
from
the
<a href="#dfn-column-lang" class="internalDFN">
column
lang
</a>
annotation.
</li>
<li>
validate
the
value
based
on
the
length
constraints
described
in
<a href="#length-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.1
</span>
<span class="sec-title">
Length
Constraints
</span>
</a>,
the
value
constraints
described
in
<a href="#value-constraints" class="sectionRef sec-ref">
section
<span class="secno">
4.6.2
</span>
<span class="sec-title">
Value
Constraints
</span>
</a>
and
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
if
one
is
specified,
as
described
below.
If
there
are
any
errors,
add
them
to
the
list
of
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
for
the
cell.
</li>
</ol>
<p>
The
final
value
(or
values)
become
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</p>
<p>
If
there
is
a
<a title="column about URL" href="#dfn-column-about-url" class="internalDFN">
about
URL
</a>
annotation
on
the
<a href="#dfn-column" class="internalDFN">
column
</a>,
it
becomes
the
<a title="cell about URL" href="#dfn-cell-about-url" class="internalDFN">
about
URL
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>,
after
being
transformed
into
an
absolute
URL
as
described
in
<cite>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#uri-template-properties">
URI
Template
Properties
</a>
</cite>
of
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
<p>
If
there
is
a
<a title="column property URL" href="#dfn-column-property-url" class="internalDFN">
property
URL
</a>
annotation
on
the
<a href="#dfn-column" class="internalDFN">
column
</a>,
it
becomes
the
<a title="cell property URL" href="#dfn-cell-property-url" class="internalDFN">
property
URL
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>,
after
being
transformed
into
an
absolute
URL
as
described
in
<cite>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#uri-template-properties">
URI
Template
Properties
</a>
</cite>
of
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
</p>
<p>
If
there
is
a
<a title="column value URL" href="#dfn-column-value-url" class="internalDFN">
value
URL
</a>
annotation
on
the
<a href="#dfn-column" class="internalDFN">
column
</a>,
it
becomes
the
<a title="cell value URL" href="#dfn-cell-value-url" class="internalDFN">
value
URL
</a>
annotation
on
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>,
after
being
transformed
into
an
absolute
URL
as
described
in
<cite>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#uri-template-properties">
URI
Template
Properties
</a>
</cite>
of
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
The
<a title="column value URL" href="#dfn-column-value-url" class="internalDFN">
value
URL
</a>
annotation
is
<code>
null
</code>
if
the
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
is
<code>
null
</code>
and
the
<a href="#dfn-column-virtual" class="internalDFN">
column
virtual
</a>
annotation
is
<code>
false
</code>.
</p>
<section class="informative" id="parsing-examples" typeof="bibo:Chapter" resource="#parsing-examples" property="bibo:hasPart">
<h4 id="h-parsing-examples" resource="#h-parsing-examples">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.1
</del>
<ins class="diff-chg">6.4.1
</ins>
</span>
Parsing
examples
</span>
</h4>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
When
<a href="#dfn-datatype" class="internalDFN">
datatype
</a>
annotation
is
available,
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
of
a
cell
is
the
same
as
its
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>.
For
example,
a
cell
with
a
string
value
of
<code>
"99"
</code>
would
similarly
have
the
(semantic)
value
<code>
"99"
</code>.
</p>
<p>
If
a
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
provided
for
the
cell,
that
is
used
to
create
a
(semantic)
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
for
the
cell.
For
example,
if
the
metadata
contains:
</p>
<div class="example">
<div class="example-title">
<span>
Example
<del class="diff-old">8
</del>
<ins class="diff-chg">9
</ins>
</span>
</div>
<pre class="example highlight prettyprint prettyprinted">
<span class="str">
"datatype"
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="str">
"integer"
</span>
</pre>
</div>
<p>
for
the
cell
with
the
string
value
<code>
"99"
</code>
then
the
value
of
that
cell
will
be
the
integer
<code>
99
</code>.
A
cell
whose
string
value
was
not
a
valid
integer
(such
as
<code>
"one"
</code>
or
<code>
"1.0"
</code>
)
would
be
assigned
that
string
value
as
its
(semantic)
value
annotation,
but
also
have
a
validation
error
listed
in
its
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
annotation.
</p>
<p>
Sometimes
data
uses
special
codes
to
indicate
unknown
or
null
values.
For
example,
a
particular
column
might
contain
a
number
that
is
expected
to
be
between
<code>
1
</code>
and
<code>
10
</code>,
with
the
string
<code>
99
</code>
used
in
the
original
tabular
data
file
to
indicate
a
null
value.
The
metadata
for
such
a
column
would
include:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 10</span></div><pre class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="pun">},</span><span class="pln">
</span>
<span class="str">
"null"
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="str">
"99"
</span>
</pre>
</div>
<p>
In
this
case,
a
cell
with
a
string
value
of
<code>
"5"
</code>
would
have
the
(semantic)
value
of
the
integer
<code>
5
</code>
;
a
cell
with
a
string
value
of
<code>
"99"
</code>
would
have
the
value
<code>
null
</code>.
</p>
<p>
Similarly,
a
cell
may
be
assigned
a
default
value
if
the
string
value
for
the
cell
is
empty.
A
configuration
such
as:
</p>
<del class="diff-old">            
</del>
            <div class="example"><div class="example-title"><span>Example 11</span></div><pre class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="pun">},</span><span class="pln">
</span>
<span class="str">
"default"
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="str">
"5"
</span>
</pre>
</div>
<p>
In
this
case,
a
cell
whose
string
value
is
<code>
""
</code>
would
be
assigned
the
value
of
the
integer
<code>
5
</code>.
A
cell
whose
string
value
contains
whitespace,
such
as
a
single
tab
character,
would
also
be
assigned
the
value
of
the
integer
<code>
5
</code>:
when
the
datatype
is
something
other
than
<code>
string
</code>
or
<code>
anyAtomicType
</code>,
leading
and
trailing
whitespace
is
stripped
from
string
values
before
the
remainder
of
the
processing
is
carried
out.
</p>
<p>
Cells
can
contain
sequences
of
values.
For
example,
a
cell
might
have
the
string
value
<code>
"1
5
7.0"
</code>.
In
this
case,
the
separator
is
a
space
character.
The
appropriate
configuration
would
be:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 12</span></div><pre class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
  </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"integer"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"minimum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"maximum"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">10</span><span class="pln">
</span><span class="pun">},</span><span class="pln">
</span><span class="str">"default"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"5"</span><span class="pun">,</span><span class="pln">
</span>
<span class="str">
"separator"
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="str">
"
"
</span>
</pre>
</div>
<p>
and
this
would
mean
that
the
cell's
value
would
be
an
array
containing
two
integers
and
a
string:
<code>
[1,
5,
"7.0"]
</code>.
The
final
value
of
the
array
is
a
string
because
it
is
not
a
valid
integer;
the
cell's
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
annotation
will
also
contain
a
validation
error.
</p>
<p>
Also,
with
this
configuration,
if
the
string
value
of
the
cell
were
<code>
""
</code>
<del class="diff-old">(ie
</del>
<ins class="diff-chg">(i.e.
</ins>
it
was
an
empty
cell)
the
value
of
the
cell
would
be
an
empty
list.
</p>
<p>
A
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
can
be
inserted
into
a
URL
created
using
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-uri-template-property" class="externalDFN">
URI
template
property
</a>
such
as
<code>
valueUrl
</code>.
For
example,
if
a
cell
with
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
<code>
"1
5
7.0"
</code>
were
in
a
column
named
<code>
values
</code>,
defined
with:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 13</span></div><pre class="example highlight prettyprint prettyprinted"><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"decimal"</span><span class="pun">,</span><span class="pln">
</span><span class="str">"separator"</span><span class="pun">:</span><span class="pln"> </span><span class="str">" "</span><span class="pun">,</span><span class="pln">
</span>
<span class="str">
"valueUrl"
</span>
<span class="pun">:
</span>
<span class="pln">
</span>
<span class="str">
"{?values}"
</span>
</pre>
</div>
<p>
then
after
expansion
of
the
URI
template,
the
resulting
<code>
valueUrl
</code>
would
be
<code>
?values=1.0,5.0,7.0
</code>.
The
canonical
representations
of
the
decimal
values
are
used
within
the
URL.
</p>
</section>
<section id="formats-for-numeric-types" typeof="bibo:Chapter" resource="#formats-for-numeric-types" property="bibo:hasPart">
<h4 id="h-formats-for-numeric-types" resource="#h-formats-for-numeric-types">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.2
</del>
<ins class="diff-chg">6.4.2
</ins>
</span>
Formats
for
numeric
types
</span>
</h4>
<p>
<ins class="diff-new">By
default,
numeric
values
must
be
in
the
formats
defined
in
[
</ins><cite><a class="bibref" href="#bib-xmlschema11-2"><ins class="diff-new">
xmlschema11-2
</ins></a></cite><ins class="diff-new">
].
</ins>
It
is
not
uncommon
for
numbers
within
tabular
data
to
be
formatted
for
human
consumption,
which
may
involve
using
commas
for
decimal
points,
grouping
digits
in
the
number
using
commas,
or
adding
<del class="diff-old">currency
symbols
or
</del>
percent
signs
to
the
number.
</p>
<p>
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
a
numeric
type,
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
indicates
the
expected
format
for
that
number.
Its
value
<em class="rfc2119" title="MUST">
MUST
</em>
be
either
a
single
string
or
an
object
with
one
or
more
of
the
properties:
</p>
<dl>
<dt>
<dfn title="datatype format decimalChar" id="dfn-datatype-format-decimalchar">
decimalChar
</dfn>
</dt>
<dd>
A
<del class="diff-old">single
character
</del>
string
whose
value
is
used
to
represent
a
decimal
point
within
the
number.
The
default
value
is
<code>
"."
</code>.
<ins class="diff-new">If
the
supplied
value
is
not
a
string,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
and
proceed
as
if
the
property
had
not
been
specified.
</ins>
</dd>
<dt>
<dfn title="datatype format groupChar" id="dfn-datatype-format-groupchar">
groupChar
</dfn>
</dt>
<dd>
A
<del class="diff-old">single
character
</del>
string
whose
value
is
used
to
group
digits
within
the
number.
The
default
value
is
<code>
<del class="diff-old">","
</del>
<ins class="diff-chg">null
</ins>
</code>.
<ins class="diff-new">If
the
supplied
value
is
not
a
string,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
and
proceed
as
if
the
property
had
not
been
specified.
</ins>
</dd>
<dt>
<dfn title="datatype format pattern" id="dfn-datatype-format-pattern">
pattern
</dfn>
</dt>
<dd>
A
<del class="diff-old">regular
expression
string,
in
the
syntax
and
interpreted
</del>
<a href="http://www.unicode.org/reports/tr35/tr35-numbers.html#Number_Format_Patterns">
<ins class="diff-chg">number
format
pattern
</ins></a>
as
defined
<del class="diff-old">by
</del>
<ins class="diff-chg">in
</ins>
[
<cite>
<del class="diff-old">ECMASCRIPT
</del>
<a class="bibref" href="#bib-UAX35">
<ins class="diff-chg">UAX35
</ins>
</a>
</cite>
].
<del class="diff-old">Note
</del>
<ins class="diff-chg">Implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
recognise
number
format
patterns
containing
the
symbols
</ins><code><ins class="diff-chg">
0
</ins></code>,<code><ins class="diff-chg">
#
</ins></code>,<ins class="diff-chg">
the
specified
</ins><a title="datatype format decimalChar" href="#dfn-datatype-format-decimalchar" class="internalDFN"><ins class="diff-chg">
decimalChar
</ins></a><ins class="diff-chg">
(or
</ins><code><ins class="diff-chg">
"."
</ins></code><ins class="diff-chg">
if
unspecified),
the
specified
</ins><a title="datatype format groupChar" href="#dfn-datatype-format-groupchar" class="internalDFN"><ins class="diff-chg">
groupChar
</ins></a><ins class="diff-chg">
(or
</ins><code><ins class="diff-chg">
","
</ins></code><ins class="diff-chg">
if
unspecified),
</ins><code><ins class="diff-chg">
E
</ins></code>,<code><ins class="diff-chg">
+
</ins></code>,<code><ins class="diff-chg">
%
</ins></code><ins class="diff-chg">
and
</ins><code><ins class="diff-chg">
‰
</ins></code>.<ins class="diff-chg">
Implementations
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
additionally
recognise
number
format
patterns
containing
other
</ins><a href="http://www.unicode.org/reports/tr35/tr35-numbers.html#Special_Pattern_Characters"><ins class="diff-chg">
special
pattern
characters
</ins></a><ins class="diff-chg">
defined
in
[
</ins><cite>
<a class="bibref" href="#bib-UAX35">
<ins class="diff-chg">UAX35
</ins></a>
<del class="diff-old">Authors
are
encouraged
to
be
conservative
in
</del>
</cite>
<ins class="diff-chg">].
If
</ins>
the
<del class="diff-old">regular
expressions
</del>
<ins class="diff-chg">supplied
value
is
not
a
string,
or
if
it
contains
an
invalid
</ins><a href="http://www.unicode.org/reports/tr35/tr35-numbers.html#Number_Format_Patterns"><ins class="diff-chg">
number
format
pattern
</ins></a><ins class="diff-chg">
or
uses
</ins><a href="http://www.unicode.org/reports/tr35/tr35-numbers.html#Special_Pattern_Characters"><ins class="diff-chg">
special
pattern
characters
</ins></a>
that
<del class="diff-old">they
use,
sticking
to
</del>
the
<del class="diff-old">basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</del>
<ins class="diff-chg">implementation
does
not
recognise,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
issue
a
warning
and
proceed
as
if
the
property
had
not
been
specified.
</ins></dd></dl>
<p>
If
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
is
a
single
string,
this
is
interpreted
in
the
same
way
as
if
it
were
an
object
with
a
<a title="datatype format pattern" href="#dfn-datatype-format-pattern" class="internalDFN">
pattern
</a>
property
whose
value
is
that
string.
</p>
<p>
<del class="diff-old">When
</del>
<ins class="diff-chg">If
the
</ins><a title="datatype format groupChar" href="#dfn-datatype-format-groupchar" class="internalDFN"><ins class="diff-chg">
groupChar
</ins></a><ins class="diff-chg">
is
specified,
but
no
</ins><a title="datatype format pattern" href="#dfn-datatype-format-pattern" class="internalDFN"><ins class="diff-chg">
pattern
</ins></a><ins class="diff-chg">
is
supplied,
when
</ins>
parsing
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
of
a
cell
against
this
format
specification,
implementations
<em class="rfc2119" title="MUST">
MUST
</em>
recognise
and
parse
numbers
that
consist
of:
</p>
<ol>
<li>
an
optional
<code>
+
</code>
or
<code>
-
</code>
sign,
</li>
<li>
followed
by
a
decimal
digit
(
<code>
0-9
</code>
),
</li>
<li>
followed
by
any
number
of
decimal
digits
(
<code>
0-9
</code>
)
and
the
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
specified
as
the
<a title="datatype format groupChar" href="#dfn-datatype-format-groupchar" class="internalDFN">
groupChar
</a>,
</li>
<li>
followed
by
an
optional
<a title="datatype format decimalChar" href="#dfn-datatype-format-decimalchar" class="internalDFN">
decimalChar
</a>
followed
by
one
or
more
decimal
digits
(
<code>
0-9
</code>
),
</li>
<li>
followed
by
an
optional
exponent,
consisting
of
an
<code>
E
</code>
followed
by
an
optional
<code>
+
</code>
or
<code>
-
</code>
sign
followed
by
one
or
more
decimal
digits
(
<code>
0-9
</code>
),
or
</li>
<li>
followed
by
an
optional
percent
(
<code>
%
</code>
)
or
per-mille
(
<code>
‰
</code>
)
sign.
</li>
</ol>
<p>
or
that
are
one
of
the
special
values:
</p>
<ol>
<li>
<code>
NaN
</code>,
</li>
<li>
<code>
INF
</code>,
or
</li>
<li>
<code>
-INF
</code>.
</li>
</ol>
<p>
Implementations
<em class="rfc2119" title="MAY">
<ins class="diff-chg">MAY
</ins></em><ins class="diff-chg">
also
recognise
numeric
values
that
are
in
any
of
the
standard-decimal,
standard-percent
or
standard-scientific
formats
listed
in
the
</ins><a href="http://www.unicode.org/cldr/charts/latest/by_type/numbers.number_formatting_patterns.html"><ins class="diff-chg">
Unicode
Common
Locale
Data
Repository
</ins></a>.</p><p><ins class="diff-chg">
Implementations
</ins><em class="rfc2119" title="MUST">
MUST
</em>
add
a
validation
error
to
the
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
annotation
for
the
<a href="#dfn-cell" class="internalDFN">
cell
</a>,
<ins class="diff-new">and
set
the
cell
</ins><a title="cell value" href="#dfn-cell-value" class="internalDFN"><ins class="diff-new">
value
</ins>
</a>
<ins class="diff-new">to
a
string
rather
than
a
number
</ins>
if
the
string
being
parsed:
</p>
<ul>
<li>
<ins class="diff-new">is
not
in
the
format
specified
in
the
</ins><a title="datatype format pattern" href="#dfn-datatype-format-pattern" class="internalDFN"><ins class="diff-new">
pattern
</ins></a>,<ins class="diff-new">
if
one
is
defined
</ins></li><li><ins class="diff-new">
otherwise,
if
the
string
</ins><ul><li>
does
not
meet
the
numeric
format
defined
above,
</li>
<li>
contains
two
consecutive
<a title="datatype format groupChar" href="#dfn-datatype-format-groupchar" class="internalDFN">
groupChar
</a>
<del class="diff-old">characters,
</del>
<ins class="diff-chg">strings,
</ins>
</li>
<del class="diff-old">does
not
match
the
regular
expression
defined
in
the
pattern
property,
if
there
is
one,
</del>
</ul>
</li>
<li>
contains
the
<a title="datatype format decimalChar" href="#dfn-datatype-format-decimalchar" class="internalDFN">
decimalChar
</a>,
if
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
integer
</code>
or
one
of
its
<del class="diff-old">sub-values,
</del>
<ins class="diff-chg">sub-types,
</ins>
</li>
<li>
contains
an
exponent,
if
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
decimal
</code>
or
one
of
its
<del class="diff-old">sub-values,
</del>
<ins class="diff-chg">sub-types,
</ins>
or
</li>
<li>
is
one
of
the
special
values
<code>
NaN
</code>,
<code>
INF
</code>,
or
<code>
-INF
</code>,
if
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
<code>
decimal
</code>
or
one
of
its
<del class="diff-old">sub-values.
</del>
<ins class="diff-chg">sub-types.
</ins>
</li>
</ul>
<p>
Implementations
<em class="rfc2119" title="MUST">
MUST
</em>
use
the
sign,
exponent,
percent,
and
per-mille
signs
when
parsing
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
of
a
cell
to
provide
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
of
the
cell.
For
example,
the
string
value
<code>
"-25%"
</code>
must
be
interpreted
as
<code>
-0.25
</code>
and
the
string
value
<code>
"1E6"
</code>
as
<code>
1000000
</code>.
</p>
</section>
<section id="formats-for-booleans" typeof="bibo:Chapter" resource="#formats-for-booleans" property="bibo:hasPart">
<h4 id="h-formats-for-booleans" resource="#h-formats-for-booleans">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.3
</del>
<ins class="diff-chg">6.4.3
</ins>
</span>
Formats
for
booleans
</span>
</h4>
<p>
Boolean
values
may
be
represented
in
many
ways
aside
from
the
standard
<code>
1
</code>
and
<code>
0
</code>
or
<code>
true
</code>
and
<code>
false
</code>.
</p>
<p>
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
for
a
cell
is
<code>
boolean
</code>,
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
provides
the
true
<del class="diff-old">and
</del>
<ins class="diff-chg">value
followed
by
the
</ins>
false
<del class="diff-old">values
expected,
</del>
<ins class="diff-chg">value,
</ins>
separated
by
<code>
|
</code>.
For
example
if
<code>
format
</code>
is
<code>
Y|N
</code>
then
cells
must
hold
either
<code>
Y
</code>
or
<code>
N
</code>
with
<code>
Y
</code>
meaning
<code>
true
</code>
and
<code>
N
</code>
meaning
<code>
false
</code>.
<ins class="diff-new">If
the
format
does
not
follow
this
syntax,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
and
proceed
as
if
no
format
had
been
provided.
</ins>
</p>
<p>
The
resulting
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
will
be
one
or
more
boolean
<code>
true
</code>
or
<code>
false
</code>
values.
</p>
</section>
<section id="formats-for-dates-and-times" typeof="bibo:Chapter" resource="#formats-for-dates-and-times" property="bibo:hasPart">
<h4 id="h-formats-for-dates-and-times" resource="#h-formats-for-dates-and-times">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.4
</del>
<ins class="diff-chg">6.4.4
</ins>
</span>
Formats
for
dates
and
times
</span>
</h4>
<p>
<del class="diff-old">Dates
</del>
<ins class="diff-chg">By
default,
dates
</ins>
and
times
are
<del class="diff-old">commonly
represented
in
tabular
data
</del>
<ins class="diff-chg">assumed
to
be
</ins>
in
<del class="diff-old">formats
other
than
those
</del>
<ins class="diff-chg">the
format
</ins>
defined
in
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
].
<ins class="diff-new">However
dates
and
times
are
commonly
represented
in
tabular
data
in
other
formats.
</ins>
</p>
<p>
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
a
date
or
time
type,
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
indicates
the
expected
format
for
that
date
or
time.
</p>
<p>
The
supported
date
and
time
<del class="diff-old">formats
</del>
<ins class="diff-chg">format
patterns
</ins>
listed
here
are
expressed
in
terms
of
the
<a href="http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Field_Symbol_Table">
date
field
symbols
</a>
defined
in
[
<cite>
<a class="bibref" href="#bib-UAX35">
UAX35
</a>
</cite>
<del class="diff-old">]
and
</del>
<ins class="diff-chg">].
These
formats
</ins><em class="rfc2119" title="MUST">
MUST
</em>
be
<del class="diff-old">interpreted
</del>
<ins class="diff-chg">recognised
</ins>
by
implementations
<ins class="diff-new">and
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
be
interpreted
</ins>
as
defined
in
that
specification.
<ins class="diff-new">Implementations
</ins><em class="rfc2119" title="MAY"><ins class="diff-new">
MAY
</ins></em><ins class="diff-new">
additionally
recognise
other
</ins><a href="http://www.unicode.org/reports/tr35/tr35-dates.html#Date_Format_Patterns"><ins class="diff-new">
date
format
patterns
</ins></a>.<ins class="diff-new">
Implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
if
the
date
format
pattern
is
invalid
or
not
recognised
and
proceed
as
if
no
date
format
pattern
had
been
provided.
</ins></p><div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note11"><span><ins class="diff-new">
Note
</ins></span></div><p class=""><ins class="diff-new">
For
interoperability,
authors
of
metadata
documents
</ins><em class="rfc2119" title="SHOULD"><ins class="diff-new">
SHOULD
</ins></em><ins class="diff-new">
use
only
the
formats
listed
in
this
section.
</ins>
</p>
</div>
<p>
The
following
date
<del class="diff-old">formats
</del>
<ins class="diff-chg">format
patterns
</ins><em class="rfc2119" title="MUST">
MUST
</em>
be
<del class="diff-old">recognised
</del>
<ins class="diff-chg">recognized
</ins>
by
implementations:
</p>
<ul>
<li>
<code>
yyyy-MM-dd
</code>
e.g.,
<code>
2015-03-22
</code>
</li>
<li>
<code>
yyyyMMdd
</code>
e.g.,
<code>
20150322
</code>
</li>
<li>
<code>
dd-MM-yyyy
</code>
e.g.,
<code>
22-03-2015
</code>
</li>
<li>
<code>
d-M-yyyy
</code>
e.g.,
<code>
22-3-2015
</code>
</li>
<li>
<code>
MM-dd-yyyy
</code>
e.g.,
<code>
03-22-2015
</code>
</li>
<li>
<code>
M-d-yyyy
</code>
e.g.,
<code>
3-22-2015
</code>
</li>
<li>
<code>
dd/MM/yyyy
</code>
e.g.,
<code>
22/03/2015
</code>
</li>
<li>
<code>
d/M/yyyy
</code>
e.g.,
<code>
22/3/2015
</code>
</li>
<li>
<code>
MM/dd/yyyy
</code>
e.g.,
<code>
03/22/2015
</code>
</li>
<li>
<code>
M/d/yyyy
</code>
e.g.,
<code>
3/22/2015
</code>
</li>
<li>
<code>
dd.MM.yyyy
</code>
e.g.,
<code>
22.03.2015
</code>
</li>
<li>
<code>
d.M.yyyy
</code>
e.g.,
<code>
22.3.2015
</code>
</li>
<li>
<code>
MM.dd.yyyy
</code>
e.g.,
<code>
03.22.2015
</code>
</li>
<li>
<code>
M.d.yyyy
</code>
e.g.,
<code>
3.22.2015
</code>
</li>
</ul>
<p>
The
following
time
<del class="diff-old">formats
</del>
<ins class="diff-chg">format
patterns
</ins><em class="rfc2119" title="MUST">
MUST
</em>
be
<del class="diff-old">recognised
</del>
<ins class="diff-chg">recognized
</ins>
by
implementations:
</p>
<ul>
<li>
<code>
<ins class="diff-new">HH:mm:ss.S
</ins></code><ins class="diff-new">
with
one
or
more
trailing
</ins><code><ins class="diff-new">
S
</ins></code><ins class="diff-new">
characters
indicating
the
maximum
number
of
fractional
seconds
e.g.,
</ins><code><ins class="diff-new">
HH:mm:ss.SSS
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
15:02:37.143
</ins></code></li><li><code>
HH:mm:ss
</code>
e.g.,
<code>
15:02:37
</code>
</li>
<li>
<code>
HHmmss
</code>
e.g.,
<code>
150237
</code>
</li>
<li>
<code>
HH:mm
</code>
e.g.,
<code>
15:02
</code>
</li>
<li>
<code>
HHmm
</code>
e.g.,
<code>
1502
</code>
</li>
</ul>
<p>
The
following
date/time
<del class="diff-old">formats
</del>
<ins class="diff-chg">format
patterns
</ins><em class="rfc2119" title="MUST">
MUST
</em>
be
<del class="diff-old">recognised
</del>
<ins class="diff-chg">recognized
</ins>
by
implementations:
</p>
<ul>
<li>
<code>
<ins class="diff-new">yyyy-MM-ddTHH:mm:ss.S
</ins></code><ins class="diff-new">
with
one
or
more
trailing
</ins><code><ins class="diff-new">
S
</ins></code><ins class="diff-new">
characters
indicating
the
maximum
number
of
fractional
seconds
e.g.,
</ins><code><ins class="diff-new">
yyyy-MM-ddTHH:mm:ss.SSS
</ins></code><ins class="diff-new">
for
</ins><code><ins class="diff-new">
2015-03-15T15:02:37.143
</ins></code></li><li><code>
yyyy-MM-ddTHH:mm:ss
</code>
e.g.,
<code>
2015-03-15T15:02:37
</code>
</li>
<li>
<code>
yyyy-MM-ddTHH:mm
</code>
e.g.,
<code>
2015-03-15T15:02
</code>
</li>
<li>
any
of
the
date
formats
above,
followed
by
a
single
space,
followed
by
any
of
the
time
formats
above,
e.g.,
<code>
M/d/yyyy
HH:mm
</code>
for
<code>
3/22/2015
15:02
</code>
or
<code>
dd.MM.yyyy
HH:mm:ss
</code>
for
<code>
22.03.2015
15:02:37
</code>
</li>
</ul>
<p>
Implementations
<em class="rfc2119" title="MUST">
MUST
</em>
also
recognise
date,
time,
and
date/time
<del class="diff-old">formats
</del>
<ins class="diff-chg">format
patterns
</ins>
that
end
with
timezone
markers
consisting
of
between
one
and
three
<code>
x
</code>
<del class="diff-old">s
</del>
or
<code>
X
</code>
<del class="diff-old">s,
</del>
<ins class="diff-chg">characters,
</ins>
possibly
after
a
single
space.
These
<em class="rfc2119" title="MUST">
MUST
</em>
be
interpreted
as
follows:
</p>
<ul>
<li>
<code>
X
</code>
e.g.,
<code>
-08
</code>,
<code>
+0530
</code>,
or
<code>
Z
</code>
(minutes
are
optional)
</li>
<li>
<code>
XX
</code>
e.g.,
<code>
-0800
</code>,
<code>
+0530
</code>,
or
<code>
Z
</code>
</li>
<li>
<code>
XXX
</code>
e.g.,
<code>
-08:00
</code>,
<code>
+05:30
</code>,
or
<code>
Z
</code>
</li>
<li>
<code>
x
</code>
e.g.,
<code>
-08
</code>
or
<code>
+0530
</code>
(
<code>
Z
</code>
is
not
permitted)
</li>
<li>
<code>
xx
</code>
e.g.,
<code>
-0800
</code>
or
<code>
+0530
</code>
(
<code>
Z
</code>
is
not
permitted)
</li>
<li>
<code>
xxx
</code>
e.g.,
<code>
-08:00
</code>
or
<code>
+05:30
</code>
(
<code>
Z
</code>
is
not
permitted)
</li>
</ul>
<p>
For
example,
<del class="diff-old">formats
</del>
<ins class="diff-chg">date
format
patterns
</ins>
could
include
<code>
yyyy-MM-ddTHH:mm:ssXXX
</code>
for
<code>
2015-03-15T15:02:37Z
</code>
or
<code>
2015-03-15T15:02:37-05:00
</code>,
or
<code>
HH:mm
x
</code>
for
<code>
15:02
-05
</code>.
</p>
<p>
The
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
will
one
or
more
dates/time
values
extracted
using
the
<code>
format
</code>.
</p>
<div class="note">
<div class="note-title" aria-level="5" role="heading" id="h-note12">
<span>
Note
</span>
</div>
<p class="">
For
simplicity,
this
version
of
this
standard
does
not
support
abbreviated
or
full
month
or
day
names,
or
double
digit
years.
Future
versions
of
this
standard
may
support
other
date
and
time
formats,
or
general
purpose
date/time
pattern
strings.
Authors
of
schemas
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
use
appropriate
regular
expressions,
along
with
the
<code>
string
</code>
datatype,
for
dates
and
times
that
use
a
format
other
than
that
specified
here.
</p>
</div>
</section>
<section id="formats-for-durations" typeof="bibo:Chapter" resource="#formats-for-durations" property="bibo:hasPart">
<h4 id="h-formats-for-durations" resource="#h-formats-for-durations">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.5
</del>
<ins class="diff-chg">6.4.5
</ins>
</span>
Formats
for
durations
</span>
</h4>
<p>
Durations
<em class="rfc2119" title="MUST">
MUST
</em>
be
formatted
and
interpreted
as
defined
in
[
<cite>
<a class="bibref" href="#bib-xmlschema11-2">
xmlschema11-2
</a>
</cite>
],
using
the
[
<cite>
<a class="bibref" href="#bib-ISO8601">
ISO8601
</a>
</cite>
]
format
<code>
-?P
<var>
n
</var>
Y
<var>
n
</var>
M
<var>
n
</var>
DT
<var>
n
</var>
H
<var>
n
</var>
M
<var>
n
</var>
S
</code>.
For
example,
the
duration
<code>
P1Y1D
</code>
is
used
for
a
year
and
a
day;
the
duration
<code>
PT2H30M
</code>
for
2
hours
and
30
minutes.
</p>
<p>
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
a
duration
type,
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
provides
a
regular
expression
for
the
string
values,
<del class="diff-old">in
the
</del>
<ins class="diff-chg">with
</ins>
syntax
and
<del class="diff-old">processed
as
</del>
<ins class="diff-chg">processing
</ins>
defined
by
[
<cite>
<a class="bibref" href="#bib-ECMASCRIPT">
ECMASCRIPT
</a>
</cite>
].
<ins class="diff-new">If
the
supplied
value
is
not
a
valid
regular
expression,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
and
proceed
as
if
no
format
had
been
provided.
</ins>
</p>
<div class="note">
<div class="note-title" aria-level="5" role="heading" id="h-note13">
<span>
Note
</span>
</div>
<p class="">
Authors
are
encouraged
to
be
conservative
in
the
regular
expressions
that
they
use,
sticking
to
the
basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</p>
</div>
<p>
The
<a href="#dfn-cell-value" class="internalDFN">
cell
value
</a>
will
be
one
or
more
durations
extracted
using
the
<code>
format
</code>.
</p>
</section>
<section id="formats-for-other-types" typeof="bibo:Chapter" resource="#formats-for-other-types" property="bibo:hasPart">
<h4 id="h-formats-for-other-types" resource="#h-formats-for-other-types">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.2.6
</del>
<ins class="diff-chg">6.4.6
</ins>
</span>
Formats
for
other
types
</span>
</h4>
<p>
If
the
<a href="#dfn-datatype-base" class="internalDFN">
datatype
base
</a>
is
not
numeric,
<code>
boolean
</code>,
a
date/time
type,
or
a
duration
type,
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
provides
a
regular
expression
for
the
string
values,
<del class="diff-old">in
the
</del>
<ins class="diff-chg">with
</ins>
syntax
and
<del class="diff-old">processed
as
</del>
<ins class="diff-chg">processing
</ins>
defined
by
[
<cite>
<a class="bibref" href="#bib-ECMASCRIPT">
ECMASCRIPT
</a>
</cite>
].
<ins class="diff-new">If
the
supplied
value
is
not
a
valid
regular
expression,
implementations
</ins><em class="rfc2119" title="MUST"><ins class="diff-new">
MUST
</ins></em><ins class="diff-new">
issue
a
warning
and
proceed
as
if
no
format
had
been
provided.
</ins>
</p>
<div class="note">
<div class="note-title" aria-level="5" role="heading" id="h-note14">
<span>
Note
</span>
</div>
<p class="">
Authors
are
encouraged
to
be
conservative
in
the
regular
expressions
that
they
use,
sticking
to
the
basic
features
of
regular
expressions
that
are
likely
to
be
supported
across
implementations.
</p>
</div>
<p>
Values
that
are
labelled
as
<code>
html
</code>,
<code>
xml
</code>,
or
<code>
json
</code>
<em class="rfc2119" title="SHOULD NOT">
SHOULD
NOT
</em>
be
validated
against
those
formats.
</p>
<div class="note">
<div class="note-title" aria-level="5" role="heading" id="h-note15">
<span>
Note
</span>
</div>
<p class="">
Metadata
creators
who
wish
to
check
the
syntax
of
HTML,
XML,
or
JSON
within
tabular
data
should
use
the
<a href="#dfn-datatype-format" class="internalDFN">
datatype
format
</a>
annotation
to
specify
a
regular
expression
against
which
such
values
will
be
tested.
</p>
</div>
</section>
</section>
<section class="informative" id="presenting-tables" typeof="bibo:Chapter" resource="#presenting-tables" property="bibo:hasPart">
<h3 id="h-presenting-tables" resource="#h-presenting-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.3
</del>
<ins class="diff-chg">6.5
</ins>
</span>
<del class="diff-old">Displaying
</del>
<ins class="diff-chg">Presenting
</ins>
Tables
</span>
</h3>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
When
<del class="diff-old">displaying
</del>
<ins class="diff-chg">presenting
</ins>
tables,
implementations
should:
</p>
<ul>
<li>
use
the
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
annotation
on
each
<a href="#dfn-table" class="internalDFN">
table
</a>,
and
the
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
annotation
on
each
cell,
to
determine
the
ordering
of
columns
and
characters
within
cells,
as
described
in
<a href="#bidirectional-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
<span class="sec-title">
Bidirectional
Tables
</span>
</a>
</li>
<li>
use
the
<a title="column titles" href="#dfn-column-titles" class="internalDFN">
titles
</a>
annotation
on
each
<a href="#dfn-column" class="internalDFN">
column
</a>
to
provide
a
header
for
the
column,
selecting
the
first
title
in
a
language
based
on
the
user's
locale
and
<del class="diff-old">preferences
</del>
<ins class="diff-chg">preferences,
as
described
in
</ins><a href="#column-and-row-labelling" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
6.5.2
</ins></span><span class="sec-title"><ins class="diff-chg">
Column
and
row
labelling
</ins></span></a>
</li>
<li>
add
links
to
headers
based
on
the
<a title="cell property URL" href="#dfn-cell-property-url" class="internalDFN">
property
URLs
</a>
of
the
cells
in
the
first
row
of
the
table
</li>
<li>
<del class="diff-old">display
</del>
<ins class="diff-chg">present
</ins><a title="cell value" href="#dfn-cell-value" class="internalDFN">
cell
values
</a>,
particularly
boolean,
numeric
and
date/time
values,
in
a
lexical
form
based
on
the
user's
locale
and
preferences
</li>
<li>
add
links
to
the
<del class="diff-old">display
</del>
<ins class="diff-chg">presentation
</ins>
of
rows
and
cells
based
on
the
<a title="cell about URL" href="#dfn-cell-about-url" class="internalDFN">
about
URL
</a>
and
<a title="cell value URL" href="#dfn-cell-value-url" class="internalDFN">
value
URL
</a>
annotations
on
cells
</li>
<li>
highlight
or
otherwise
indicate
cells
with
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
</li>
<li>
provide
a
way
of
viewing
non-core
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>
on
table
groups,
tables,
columns,
rows
and
cells
</li>
<li>
provide
links
to
download
the
raw
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
that
is
being
displayed
</li>
</ul>
<section id="bidirectional-tables" typeof="bibo:Chapter" resource="#bidirectional-tables" property="bibo:hasPart">
<h4 id="h-bidirectional-tables" resource="#h-bidirectional-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
Bidirectional
Tables
</span>
</h4>
<p>
There
are
two
levels
of
bidirectionality
to
consider
when
displaying
tables:
the
directionality
of
the
table
(i.e.,
whether
the
columns
should
be
arranged
left-to-right
or
right-to-left)
and
the
directionality
of
the
content
of
individual
cells.
</p>
<p>
The
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
annotation
on
the
table
provides
information
about
the
desired
display
of
the
<ins class="diff-new">columns
in
the
</ins>
table.
If
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
is
<code>
ltr
</code>
then
the
first
column
should
be
displayed
on
the
left
and
the
last
column
on
the
right.
If
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
is
<code>
rtl
</code>
then
the
first
column
should
be
displayed
on
the
right
and
the
last
column
on
the
left.
</p>
<p>
If
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
is
<code>
<del class="diff-old">default
</del>
<ins class="diff-chg">auto
</ins>
</code>
then
tables
should
be
displayed
with
attention
to
the
bidirectionality
of
the
content
of
the
<del class="diff-old">file.
</del>
<ins class="diff-chg">cells
in
the
table.
</ins>
Specifically,
the
values
of
the
cells
in
the
table
should
be
scanned
breadth
first:
from
the
first
cell
in
the
first
column
through
to
the
last
cell
in
the
first
row,
down
to
the
last
cell
in
the
last
column.
If
the
first
character
in
the
table
with
a
<a href="http://unicode.org/reports/tr9/#Bidirectional_Character_Types">
strong
type
</a>
as
defined
in
[
<cite>
<a class="bibref" href="#bib-BIDI">
BIDI
</a>
</cite>
]
indicates
a
<abbr title="right-to-left">
RTL
</abbr>
directionality,
the
table
should
be
displayed
with
the
first
column
on
the
right
and
the
last
column
on
the
left.
Otherwise,
the
table
should
be
displayed
with
the
first
column
on
the
left
and
the
last
column
on
the
right.
Characters
such
as
whitespace,
quotes,
commas,
and
numbers
do
not
have
a
strong
type,
and
therefore
are
skipped
when
identifying
the
character
that
determines
the
directionality
of
the
table.
</p>
<p>
Implementations
should
enable
user
preferences
to
override
the
indicated
metadata
about
the
directionality
of
the
table.
</p>
<p>
Once
the
directionality
of
the
table
has
been
determined,
each
cell
within
the
table
should
be
considered
as
a
separate
<a href="http://unicode.org/reports/tr9/#The_Paragraph_Level">
paragraph
</a>,
as
defined
by
the
Unicode
Bidirectional
Algorithm
(
<abbr title="Unicode Bidirectional Algorithm">
UBA
</abbr>
)
in
[
<cite>
<a class="bibref" href="#bib-BIDI">
BIDI
</a>
</cite>
].
The
<del class="diff-old">default
</del>
directionality
for
the
cell
is
determined
by
looking
at
the
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
annotation
for
the
<del class="diff-old">cell.
Thus,
</del>
<ins class="diff-chg">cell,
</ins>
as
<del class="diff-old">defined
by
</del>
<ins class="diff-chg">follows:
</ins></p><ol><li><ins class="diff-chg">
If
</ins>
the
<del class="diff-old">UBA
,
if
a
cell
contains
no
characters
with
a
strong
type
(if
it's
a
number
or
date
for
example)
</del>
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
<ins class="diff-chg">text
direction
</ins></a><ins class="diff-chg">
is
</ins><code><ins class="diff-chg">
ltr
</ins></code>
then
the
<del class="diff-old">way
</del>
<ins class="diff-chg">base
direction
for
</ins>
the
cell
<ins class="diff-new">content
should
be
set
to
left-to-right.
</ins></li><li><ins class="diff-new">
If
the
</ins><a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN"><ins class="diff-new">
text
direction
</ins></a>
is
<del class="diff-old">displayed
</del>
<code>
<ins class="diff-chg">rtl
</ins></code><ins class="diff-chg">
then
the
base
direction
for
the
cell
content
</ins>
should
be
<del class="diff-old">determined
by
</del>
<ins class="diff-chg">set
to
right-to-left.
</ins></li><li><ins class="diff-chg">
If
</ins>
the
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
<del class="diff-old">annotation
of
</del>
<ins class="diff-chg">is
</ins><code><ins class="diff-chg">
auto
</ins></code><ins class="diff-chg">
then
</ins>
the
<del class="diff-old">cell.
However,
when
</del>
<ins class="diff-chg">base
direction
for
the
cell
content
should
be
set
to
the
direction
determined
by
the
first
character
in
</ins>
the
cell
<del class="diff-old">contains
characters
</del>
with
a
<a href="http://unicode.org/reports/tr9/#Bidirectional_Character_Types">
strong
type
<del class="diff-old">(such
</del>
</a>
as
<del class="diff-old">letters)
then
they
</del>
<ins class="diff-chg">defined
in
[
</ins><cite><a class="bibref" href="#bib-BIDI"><ins class="diff-chg">
BIDI
</ins></a></cite><ins class="diff-chg">
].
</ins></li></ol><div class="note"><div class="note-title" aria-level="5" role="heading" id="h-note16"><span><ins class="diff-chg">
Note
</ins></span></div><p class=""><ins class="diff-chg">
If
the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-textDirection" class="externalDFN"><ins class="diff-chg">
textDirection
</ins></a><ins class="diff-chg">
property
in
metadata
has
the
value
</ins><code><ins class="diff-chg">
"inherit"
</ins></code>,<ins class="diff-chg">
the
</ins><a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
annotation
for
a
cell
inherits
its
value
from
the
</ins><a href="#dfn-table-direction" class="internalDFN"><ins class="diff-chg">
table
direction
</ins></a><ins class="diff-chg">
annotation
on
the
table.
</ins></p></div><p><ins class="diff-chg">
When
the
</ins><a title="column titles" href="#dfn-column-titles" class="internalDFN"><ins class="diff-chg">
titles
</ins></a><ins class="diff-chg">
of
a
column
are
displayed,
these
</ins>
should
be
displayed
<del class="diff-old">according
to
</del>
<ins class="diff-chg">in
</ins>
the
<del class="diff-old">Unicode
Bidirectional
Algorithm
</del>
<ins class="diff-chg">direction
determined
by
the
first
character
in
the
title
with
a
</ins><a href="http://unicode.org/reports/tr9/#Bidirectional_Character_Types"><ins class="diff-chg">
strong
type
</ins></a>
as
<del class="diff-old">described
</del>
<ins class="diff-chg">defined
</ins>
in
[
<cite>
<a class="bibref" href="#bib-BIDI">
BIDI
</a>
</cite>
].
<ins class="diff-new">Titles
for
the
same
column
in
different
languages
may
be
displayed
in
different
directions.
</ins>
</p>
</section>
<section id="column-and-row-labelling" typeof="bibo:Chapter" resource="#column-and-row-labelling" property="bibo:hasPart">
<h4 id="h-column-and-row-labelling" resource="#h-column-and-row-labelling">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<ins class="diff-new">6.5.2
</ins></span><ins class="diff-new">
Column
and
row
labelling
</ins></span></h4><p><ins class="diff-new">
The
labelling
of
columns
and
rows
helps
those
who
are
attempting
to
understand
the
content
of
a
table
to
grasp
what
a
particular
cell
means.
Implementations
should
present
appropriate
titles
for
columns,
and
ensure
that
the
most
important
information
in
a
row
is
kept
apparent
to
the
user,
to
aid
their
understanding.
For
example:
</ins></p><ul><li><ins class="diff-new">
a
table
presented
on
the
screen
might
retain
certain
columns
in
view
so
that
readers
can
easily
glance
at
the
identifying
information
in
each
row
</ins></li><li><ins class="diff-new">
as
the
user
moves
focus
into
a
cell,
screen
readers
announce
a
label
for
the
new
column
if
the
user
has
changed
column,
or
for
the
new
row
if
the
user
has
changed
row
</ins></li></ul><p><ins class="diff-new">
When
labelling
a
column,
either
on
the
screen
or
aurally,
implementations
should
use
the
first
available
of:
</ins></p><ol><li><ins class="diff-new">
the
column's
</ins><a title="column titles" href="#dfn-column-titles" class="internalDFN"><ins class="diff-new">
titles
</ins></a><ins class="diff-new">
in
the
preferred
language
of
the
user,
or
with
an
undefined
language
if
there
is
no
title
available
in
a
preferred
language;
there
may
be
multiple
such
titles
in
which
case
all
should
be
announced
</ins></li><li><ins class="diff-new">
the
column's
</ins><a title="column name" href="#dfn-column-name" class="internalDFN"><ins class="diff-new">
name
</ins></a></li><li><ins class="diff-new">
the
column's
</ins><a title="column number" href="#dfn-column-number" class="internalDFN"><ins class="diff-new">
number
</ins></a></li></ol><p><ins class="diff-new">
When
labelling
a
row,
either
on
the
screen
or
aurally,
implementations
should
use
the
first
available
of:
</ins></p><ol><li><ins class="diff-new">
the
row's
</ins><a title="row titles" href="#dfn-row-titles" class="internalDFN"><ins class="diff-new">
titles
</ins></a><ins class="diff-new">
in
the
preferred
language
of
the
user,
or
with
an
undefined
language
if
there
is
no
title
available
in
a
preferred
language;
there
may
be
multiple
such
titles
in
which
case
all
should
be
announced
</ins></li><li><ins class="diff-new">
the
</ins><a title="cell value" href="#dfn-cell-value" class="internalDFN"><ins class="diff-new">
values
</ins></a><ins class="diff-new">
of
the
cells
in
the
row's
</ins><a title="row primary key" href="#dfn-row-primary-key" class="internalDFN"><ins class="diff-new">
primary
key
</ins></a></li><li><ins class="diff-new">
the
row's
</ins><a title="row number" href="#dfn-row-number" class="internalDFN"><ins class="diff-new">
number
</ins></a></li></ol>
</section>
</section>
<section id="validating-tables" typeof="bibo:Chapter" resource="#validating-tables" property="bibo:hasPart">
<h3 id="h-validating-tables" resource="#h-validating-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.4
</del>
<ins class="diff-chg">6.6
</ins>
</span>
Validating
Tables
</span>
</h3>
<p>
<dfn id="dfn-validators">
Validators
</dfn>
test
whether
given
<a title="tabular data file" href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
files
</a>
adhere
to
the
structure
defined
within
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-schema" class="externalDFN">
schema
</a>.
Validators
<em class="rfc2119" title="MUST">
MUST
</em>
raise
errors
<ins class="diff-new">(and
halt
processing)
and
issue
warnings
(and
continue
processing)
</ins>
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
<del class="diff-old">]
and
</del>
<ins class="diff-chg">].
In
addition,
validators
</ins><em class="rfc2119" title="MUST"><ins class="diff-chg">
MUST
</ins></em><ins class="diff-chg">
raise
errors
but
</ins><em class="rfc2119" title="MAY"><ins class="diff-chg">
MAY
</ins></em><ins class="diff-chg">
continue
validating
</ins>
in
the
following
situations:
</p>
<ul>
<li>
if
<ins class="diff-new">the
</ins><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-table-description" class="externalDFN"><ins class="diff-new">
table
description
</ins></a><ins class="diff-new">
is
not
compatible
with
the
</ins><a href="#dfn-embedded-metadata" class="internalDFN"><ins class="diff-new">
embedded
metadata
</ins></a><ins class="diff-new">
extracted
from
the
</ins><a href="#dfn-tabular-data-file" class="internalDFN"><ins class="diff-new">
tabular
data
file
</ins></a>,<ins class="diff-new">
as
defined
in
</ins><cite><a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#table-description-compatibility"><ins class="diff-new">
Table
Compatibility
</ins></a></cite><ins class="diff-new">
in
[
</ins><cite><a class="bibref" href="#bib-tabular-metadata"><ins class="diff-new">
tabular-metadata
</ins></a></cite><ins class="diff-new">
].
</ins></li><li><ins class="diff-new">
if
</ins>
there
is
more
than
one
<a href="#dfn-row" class="internalDFN">
row
</a>
with
the
same
<a title="row primary key" href="#dfn-row-primary-key" class="internalDFN">
primary
key
</a>,
that
is
where
the
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
listed
for
the
primary
key
for
the
row
have
the
same
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
as
the
cells
listed
for
the
primary
key
for
another
row,
</li>
<li>
for
each
<a href="#dfn-row" class="internalDFN">
row
</a>
that
does
not
have
a
<ins class="diff-chg">unique
</ins><a title="row referenced rows" href="#dfn-row-referenced-rows" class="internalDFN">
referenced
row
</a>
for
each
of
the
<a title="table foreign keys" href="#dfn-table-foreign-keys" class="internalDFN">
foreign
keys
</a>
on
the
<a href="#dfn-table" class="internalDFN">
table
</a>
in
which
the
row
appears,
or
</li>
<li>
for
each
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
error
</a>
on
each
<a href="#dfn-cell" class="internalDFN">
cell
</a>.
</li>
</ul>
<del class="diff-old">Processors
MAY
continue
validating
after
encountering
the
first
error.
</del>
</section>
<section id="converting-tables" typeof="bibo:Chapter" resource="#converting-tables" property="bibo:hasPart">
<h3 id="h-converting-tables" resource="#h-converting-tables">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">6.5
</del>
<ins class="diff-chg">6.7
</ins>
</span>
Converting
Tables
</span>
</h3>
<p>
Conversions
of
tabular
data
to
other
formats
operate
over
a
<a href="#dfn-annotated-table" class="internalDFN">
annotated
table
</a>
constructed
as
defined
in
<cite>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#annotating-tables">
Annotating
Tables
</a>
</cite>
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
The
mechanics
of
these
conversions
to
other
formats
are
defined
in
other
specifications
such
as
[
<cite>
<a class="bibref" href="#bib-csv2json">
csv2json
</a>
</cite>
]
and
[
<cite>
<a class="bibref" href="#bib-csv2rdf">
csv2rdf
</a>
</cite>
].
</p>
<p>
Conversion
specifications
<em class="rfc2119" title="MUST">
MUST
</em>
define
a
default
mapping
from
an
annotated
table
that
lacks
any
annotations
(i.e.,
that
is
equivalent
to
an
un-annotated
table).
</p>
<p>
Conversion
specifications
<em class="rfc2119" title="MUST">
MUST
</em>
use
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-inherited-property" class="externalDFN">
property
value
</a>
of
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#cell-propertyUrl">
<code>
propertyUrl
</code>
</a>
of
a
column
as
the
basis
for
naming
machine-readable
fields
in
the
target
format,
such
as
the
name
of
the
equivalent
element
or
attribute
in
XML,
property
in
JSON
or
property
URI
in
RDF.
</p>
<p>
Conversion
specifications
<em class="rfc2119" title="MAY">
MAY
</em>
use
any
of
the
<a title="annotation" href="#dfn-annotation" class="internalDFN">
annotations
</a>
found
on
an
annotated
table
group,
table,
column,
row
or
cell,
including
non-core
annotations,
to
adjust
the
mapping
into
another
format.
</p>
<p>
Conversion
specifications
<em class="rfc2119" title="MAY">
MAY
</em>
define
additional
annotations,
not
defined
in
this
specification,
which
are
specifically
used
when
converting
to
the
target
format
of
the
conversion.
For
example,
a
conversion
to
XML
might
specify
a
<code>
http://example.org/conversion/xml/element-or-attribute
</code>
property
on
columns
that
determines
whether
a
particular
column
is
represented
through
an
element
or
an
attribute
in
the
data.
</p>
</section>
</section>
<section id="syntax" class="informative" typeof="bibo:Chapter" resource="#syntax" property="bibo:hasPart">
<h2 id="h-syntax" resource="#h-syntax">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.
</span>
Best
Practice
CSV
</span>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
There
is
no
standard
for
CSV,
and
there
are
many
variants
of
CSV
used
on
the
web
today.
This
section
defines
a
method
for
expressing
tabular
data
adhering
to
the
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
in
CSV.
Authors
are
encouraged
to
adhere
to
the
constraints
described
in
this
section
as
implementations
should
process
such
CSV
files
consistently.
</p>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note17">
<span>
Note
</span>
</div>
<div class="">
<p>
This
syntax
is
not
compliant
with
<code>
text/csv
</code>
as
defined
in
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
]
in
that
it
permits
line
endings
other
than
<code>
CRLF
</code>.
Supporting
<code>
LF
</code>
line
endings
is
important
for
data
formats
that
are
used
on
non-Windows
platforms.
However,
all
files
that
adhere
to
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
]'s
definition
of
CSV
meet
the
constraints
described
in
this
section.
</p>
<p>
Developing
a
standard
for
CSV
is
outside
the
scope
of
the
Working
Group.
The
details
here
aim
to
help
shape
any
future
standard.
</p>
</div>
</div>
<section id="content-type" typeof="bibo:Chapter" resource="#content-type" property="bibo:hasPart">
<h3 id="h-content-type" resource="#h-content-type">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.1
</span>
Content
Type
</span>
</h3>
<p>
The
appropriate
content
type
for
a
CSV
file
is
<code>
text/csv
</code>.
For
example,
when
a
CSV
file
is
transmitted
via
HTTP,
the
HTTP
response
should
include
a
<code>
Content-Type
</code>
header
with
the
value
<code>
text/csv
</code>:
</p>
        <pre>Content-Type: text/csv
</pre>
</section>
<section id="encoding" typeof="bibo:Chapter" resource="#encoding" property="bibo:hasPart">
<h3 id="h-encoding" resource="#h-encoding">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.2
</span>
Encoding
</span>
</h3>
<p>
CSV
files
should
be
encoded
using
UTF-8.
If
a
CSV
file
is
not
encoded
using
UTF-8,
the
encoding
should
be
specified
through
the
<code>
charset
</code>
parameter
in
the
<code>
Content-Type
</code>
header:
</p>
        <pre>Content-Type: text/csv;charset=ISO-8859-1
</pre>
</section>
<section id="line-endings" typeof="bibo:Chapter" resource="#line-endings" property="bibo:hasPart">
<h3 id="h-line-endings" resource="#h-line-endings">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.3
</span>
Line
Endings
</span>
</h3>
<p>
The
ends
of
rows
in
a
CSV
file
should
be
<del class="diff-old">either
</del>
<code>
CRLF
</code>
(
<code>
U+000D
U+000A
</code>
)
<del class="diff-old">or
</del>
<ins class="diff-chg">but
may
be
</ins>
<code>
LF
</code>
(
<code>
U+000A
</code>
).
Line
endings
within
escaped
<a title="cell" href="#dfn-cell" class="internalDFN">
cells
</a>
are
not
normalised.
</p>
</section>
<section id="lines" typeof="bibo:Chapter" resource="#lines" property="bibo:hasPart">
<h3 id="h-lines" resource="#h-lines">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.4
</span>
Lines
</span>
</h3>
<p>
Each
line
of
a
CSV
file
should
contain
the
same
number
of
comma-separated
values.
</p>
<p>
Values
that
contain
commas,
line
endings,
or
double
quotes
should
be
escaped
by
having
the
entire
value
wrapped
in
double
quotes.
There
should
not
be
whitespace
before
or
after
the
double
quotes.
Within
these
escaped
cells,
any
double
quotes
should
be
escaped
with
two
double
quotes
(
<code>
""
</code>
).
</p>
<section id="headers" typeof="bibo:Chapter" resource="#headers" property="bibo:hasPart">
<h4 id="h-headers" resource="#h-headers">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.4.1
</span>
Headers
</span>
</h4>
<p>
The
first
line
of
a
CSV
file
should
contain
a
comma-separated
list
of
names
of
<a title="column" href="#dfn-column" class="internalDFN">
columns
</a>.
This
is
known
as
the
<dfn id="dfn-header-line">
header
line
</dfn>
and
provides
titles
for
the
columns.
There
are
no
constraints
on
these
titles.
</p>
<p>
If
a
CSV
file
does
not
include
a
header
line,
this
should
be
specified
using
the
<code>
header
</code>
parameter
of
the
media
type:
</p>
          <pre>Content-Type: text/csv;header=absent
</pre>
</section>
</section>
<section id="ebnf" typeof="bibo:Chapter" resource="#ebnf" property="bibo:hasPart">
<h3 id="h-ebnf" resource="#h-ebnf">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
7.5
</span>
Grammar
</span>
</h3>
<p>
This
grammar
is
a
generalization
of
that
defined
in
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
]
and
is
included
for
reference
only.
</p>
<p>
The
<abbr title="Extended Backus–Naur Form">
EBNF
</abbr>
used
here
is
defined
in
XML
1.0
[
<cite>
<a class="bibref" href="#bib-EBNF-NOTATION">
EBNF-NOTATION
</a>
</cite>
].
</p>
<div>
<table class="grammar">
<tbody id="grammar-productions">
<tr id="grammar-production-csv">
<td>
[1]
</td>
<td>
<code>
csv
</code>
</td>
<td>::=
</td>
<td>
<a href="#grammar-production-header">
header
</a>
<a href="#grammar-production-record">
record
</a>
<code>
+
</code>
</td>
</tr>
<tr id="grammar-production-header">
<td>
[2]
</td>
<td>
<code>
header
</code>
</td>
<td>::=
</td>
<td>
<a href="#grammar-production-record">
record
</a>
</td>
</tr>
<tr id="grammar-production-record">
<td>
[3]
</td>
<td>
<code>
record
</code>
</td>
<td>::=
</td>
<td>
<a href="#grammar-production-fields">
fields
</a>
<code class="grammar-char-escape">
#x0D
</code>
<code>
?
</code>
<code class="grammar-char-escape">
#x0A
</code>
</td>
</tr>
<tr id="grammar-production-fields">
<td>
[4]
</td>
<td>
<code>
fields
</code>
</td>
<td>::=
</td>
<td>
<a href="#grammar-production-field">
field
</a>
("
<code class="grammar-literal">,
</code>
"
<a href="#grammar-production-fields">
fields
</a>
)
<code>
*
</code>
</td>
</tr>
<tr id="grammar-production-field">
<td>
[5]
</td>
<td>
<code>
field
</code>
</td>
<td>::=
</td>
<td>
<a href="#grammar-production-WS">
WS
</a>
<code>
*
</code>
<a href="#grammar-production-rawfield">
rawfield
</a>
<a href="#grammar-production-WS">
WS
</a>
<code>
*
</code>
</td>
</tr>
<tr id="grammar-production-rawfield">
<td>
[6]
</td>
<td>
<code>
rawfield
</code>
</td>
<td>::=
</td>
<td>
'
<code class="grammar-literal">
"
</code>
'
<a href="#grammar-production-QCHAR">
QCHAR
</a>
<code>
*
</code>
'
<code class="grammar-literal">
"
</code>
'
<code>
|
</code>
<a href="#grammar-production-SCHAR">
SCHAR
</a>
<code>
*
</code>
</td>
</tr>
<tr id="grammar-production-QCHAR">
<td>
[7]
</td>
<td>
<code>
QCHAR
</code>
</td>
<td>::=
</td>
<td>
<code>
[
</code>
<code class="grammar-literal">
^"
</code>
<code>
]
</code>
<code>
|
</code>
'
<code class="grammar-literal">
""
</code>
'
</td>
</tr>
<tr id="grammar-production-SCHAR">
<td>
[8]
</td>
<td>
<code>
SCHAR
</code>
</td>
<td>::=
</td>
<td>
<code>
[
</code>
<code class="grammar-literal">
^",
</code>
<code class="grammar-char-escape">
#x0A
</code>
<code class="grammar-char-escape">
#x0D
</code>
<code>
]
</code>
</td>
</tr>
<tr id="grammar-production-WS">
<td>
[9]
</td>
<td>
<code>
WS
</code>
</td>
<td>::=
</td>
<td>
<code>
[
</code>
<code class="grammar-char-escape">
#x20
</code>
<code class="grammar-char-escape">
#x09
</code>
<code>
]
</code>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="parsing" class="informative" typeof="bibo:Chapter" resource="#parsing" property="bibo:hasPart">
<h2 id="h-parsing" resource="#h-parsing">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.
</span>
Parsing
Tabular
Data
</span>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
As
described
in
<a href="#syntax" class="sectionRef sec-ref">
section
<span class="secno">
7.
</span>
<span class="sec-title">
Best
Practice
CSV
</span>
</a>,
there
may
be
many
formats
which
an
application
might
interpret
into
the
tabular
data
model
described
in
<a href="#model" class="sectionRef sec-ref">
section
<span class="secno">
4.
</span>
<span class="sec-title">
Tabular
Data
Models
</span>
</a>,
including
using
different
separators
or
fixed
format
tables,
multiple
tables
within
a
single
file,
or
ones
that
have
metadata
lines
before
a
table
header.
</p>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note18">
<span>
Note
</span>
</div>
<p class="">
<del class="diff-old">Standardising
</del>
<ins class="diff-chg">Standardizing
</ins>
the
parsing
of
CSV
is
outside
the
chartered
scope
of
the
Working
Group.
This
non-normative
section
is
intended
to
help
the
creators
of
parsers
handle
the
wide
variety
of
CSV-based
formats
that
they
may
encounter
due
to
the
current
lack
of
<del class="diff-old">standardisation
</del>
<ins class="diff-chg">standardization
</ins>
of
the
format.
</p>
</div>
<p>
This
section
describes
an
algorithm
for
parsing
formats
that
do
not
adhere
to
the
constraints
described
in
<a href="#syntax" class="sectionRef sec-ref">
section
<span class="secno">
7.
</span>
<span class="sec-title">
Best
Practice
CSV
</span>
</a>,
as
well
as
those
that
do,
and
extracting
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>.
The
parsing
algorithm
uses
the
following
flags.
These
may
be
set
by
metadata
properties
found
while
<a href="#locating-metadata" class="sectionRef">
Locating
Metadata
</a>,
including
through
user
input
(see
<a href="#overriding-metadata" class="sectionRef">
Overriding
Metadata
</a>
),
or
through
the
inclusion
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>
within
a
metadata
file:
</p>
<dl>
<dt>
<dfn id="dfn-comment-prefix">
comment
prefix
</dfn>
</dt>
<dd>
A
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
that,
when
it
appears
at
the
beginning
of
a
row,
indicates
that
the
row
is
a
comment
that
should
be
associated
as
a
<a href="http://www.w3.org/TR/rdf-schema/#ch_comment">
<code>
rdfs:comment
</code>
</a>
annotation
to
the
table.
This
is
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-commentPrefix">
<code>
commentPrefix
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
null
</code>,
which
means
no
rows
are
treated
as
comments.
A
value
other
than
<code>
null
</code>
may
mean
that
the
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
numbers
</a>
of
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>
are
different
from
their
<a title="row number" href="#dfn-row-number" class="internalDFN">
numbers
</a>.
</dd>
<dt>
<dfn id="dfn-delimiter">
delimiter
</dfn>
</dt>
<dd>
The
separator
between
cells,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-delimiter">
<code>
delimiter
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>,
</code>.
</dd>
<dt>
<dfn id="dfn-encoding">
encoding
</dfn>
</dt>
<dd>
The
character
encoding
for
the
file,
one
of
the
encodings
listed
in
[
<cite>
<a class="bibref" href="#bib-encoding">
encoding
</a>
</cite>
],
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-encoding">
<code>
encoding
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
utf-8
</code>.
</dd>
<dt>
<dfn id="dfn-escape-character">
escape
character
</dfn>
</dt>
<dd>
The
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
that
is
used
to
escape
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>
within
escaped
cells,
or
<code>
null
</code>,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-doubleQuote">
<code>
doubleQuote
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
"
</code>
(such
that
<code>
""
</code>
is
used
to
escape
<code>
"
</code>
within
an
escaped
cell).
</dd>
<dt>
<dfn id="dfn-header-row-count">
header
row
count
</dfn>
</dt>
<dd>
The
number
of
<dfn title="header row" id="dfn-header-row">
header
rows
</dfn>
(following
the
skipped
rows)
in
the
file,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-header">
<code>
header
</code>
</a>
or
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-headerRowCount">
<code>
headerRowCount
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
1
</code>.
A
value
other
than
<code>
0
</code>
will
mean
that
the
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
numbers
</a>
of
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>
will
be
different
from
their
<a title="row number" href="#dfn-row-number" class="internalDFN">
numbers
</a>.
</dd>
<dt>
<dfn id="dfn-line-terminators">
line
terminators
</dfn>
</dt>
<dd>
The
<del class="diff-old">characters
</del>
<ins class="diff-chg">strings
</ins>
that
can
be
used
at
the
end
of
a
row,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-lineTerminators">
<code>
lineTerminators
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
[CRLF,
LF]
</code>.
</dd>
<dt>
<dfn id="dfn-quote-character">
quote
character
</dfn>
</dt>
<dd>
The
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
that
is
used
around
escaped
cells,
or
<code>
null
</code>,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-quoteChar">
<code>
quoteChar
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
"
</code>.
</dd>
<dt>
<dfn id="dfn-skip-blank-rows">
skip
blank
rows
</dfn>
</dt>
<dd>
Indicates
whether
to
ignore
wholly
empty
rows
<del class="diff-old">(ie
</del>
<ins class="diff-chg">(i.e.
</ins>
rows
in
which
all
the
cells
are
empty),
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-skipBlankRows">
<code>
skipBlankRows
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
false
</code>.
A
value
other
than
<code>
false
</code>
may
mean
that
the
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
numbers
</a>
of
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>
are
different
from
their
<a title="row number" href="#dfn-row-number" class="internalDFN">
numbers
</a>.
</dd>
<dt>
<dfn id="dfn-skip-columns">
skip
columns
</dfn>
</dt>
<dd>
The
number
of
columns
to
skip
at
the
beginning
of
each
row,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-skipColumns">
<code>
skipColumns
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
0
</code>.
A
value
other
than
<code>
0
</code>
will
mean
that
the
<a title="column source number" href="#dfn-column-source-number" class="internalDFN">
source
numbers
</a>
of
<a title="column" href="#dfn-column" class="internalDFN">
columns
</a>
will
be
different
from
their
<a title="column number" href="#dfn-column-number" class="internalDFN">
numbers
</a>.
</dd>
<dt>
<dfn id="dfn-skip-rows">
skip
rows
</dfn>
</dt>
<dd>
The
number
of
rows
to
skip
at
the
beginning
of
the
file,
before
a
header
row
or
tabular
data,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-skipRows">
<code>
skipRows
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
0
</code>.
A
value
greater
than
<code>
0
</code>
will
mean
that
the
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
numbers
</a>
of
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>
will
be
different
from
their
<a title="row number" href="#dfn-row-number" class="internalDFN">
numbers
</a>.
</dd>
<dt>
<dfn id="dfn-trim">
trim
</dfn>
</dt>
<dd>
Indicates
whether
to
trim
whitespace
around
cells;
may
be
<code>
true
</code>,
<code>
false
</code>,
<code>
start
</code>,
or
<code>
end
</code>,
set
by
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-skipInitialSpace">
<code>
skipInitialSpace
</code>
</a>
or
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dialect-trim">
<code>
trim
</code>
</a>
property
of
a
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
The
default
is
<code>
<del class="diff-old">false
</del>
<ins class="diff-chg">true
</ins>
</code>.
</dd>
</dl>
<p>
The
algorithm
for
using
these
flags
to
parse
a
document
containing
tabular
data
to
create
a
basic
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
and
to
extract
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
is
as
follows:
</p>
<ol class="algorithm">
<li>
Create
a
new
<a href="#dfn-table" class="internalDFN">
table
</a>
<em>
T
</em>
with
the
annotations:
<ul>
<li>
<a title="table columns" href="#dfn-table-columns" class="internalDFN">
columns
</a>
set
to
an
empty
list
</li>
<li>
<a title="table rows" href="#dfn-table-rows" class="internalDFN">
rows
</a>
set
to
an
empty
list
</li>
<li>
<a title="table id" href="#dfn-table-id" class="internalDFN">
id
</a>
set
to
<code>
null
</code>
</li>
<li>
<a title="table url" href="#dfn-table-url" class="internalDFN">
url
</a>
set
to
the
location
of
the
file,
if
known,
or
<code>
null
</code>
</li>
<li>
<a href="#dfn-table-direction" class="internalDFN">
<ins class="diff-chg">table
</ins>
direction
</a>
set
to
<code>
<del class="diff-old">ltr
</del>
<ins class="diff-chg">auto
</ins>
</code>
</li>
<li>
<a title="table suppress output" href="#dfn-table-suppress-output" class="internalDFN">
suppress
output
</a>
set
to
<code>
false
</code>
</li>
<li>
<a title="table notes" href="#dfn-table-notes" class="internalDFN">
notes
</a>
set
to
<code>
false
</code>
</li>
<li>
<a title="table foreign keys" href="#dfn-table-foreign-keys" class="internalDFN">
foreign
keys
</a>
set
to
an
empty
list
</li>
<li>
<a title="table transformations" href="#dfn-table-transformations" class="internalDFN">
transformations
</a>
set
to
an
empty
list
</li>
</ul>
</li>
<li>
Create
a
metadata
document
structure
<em>
M
</em>
that
looks
like:
<del class="diff-old">          
</del>
          <pre class="highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"rdfs:comment"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span>
</pre>
</li>
<li>
If
the
URL
of
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>
being
parsed
is
known,
set
the
<code>
url
</code>
property
on
<em>
M
</em>
to
that
URL.
</li>
<li>
Set
<dfn id="dfn-source-row-number">
source
row
number
</dfn>
to
<code>
1
</code>.
</li>
<li>
<p>
Read
the
file
using
the
<a href="#dfn-encoding" class="internalDFN">
<ins class="diff-chg">encoding
</ins></a>,<ins class="diff-chg">
as
specified
in
[
</ins><cite><a class="bibref" href="#bib-encoding">
encoding
</a>
</cite>
<ins class="diff-new">],
using
the
</ins><i><ins class="diff-new">
replacement
</ins></i><a href="http://www.w3.org/TR/encoding/#error-mode" class="externalDFN"><ins class="diff-new">
error
mode
</ins>
</a>.
<ins class="diff-new">If
the
encoding
is
not
a
Unicode
encoding,
use
a
normalizing
transcoder
to
normalize
into
Unicode
Normal
Form
C
as
defined
in
[
</ins><cite><a class="bibref" href="#bib-UAX15"><ins class="diff-new">
UAX15
</ins></a></cite><ins class="diff-new">
].
</ins></p><div class="note"><div class="note-title" aria-level="3" role="heading" id="h-note19"><span><ins class="diff-new">
Note
</ins></span></div><p class=""><ins class="diff-new">
The
</ins><i><ins class="diff-new">
replacement
</ins></i><a href="http://www.w3.org/TR/encoding/#error-mode" class="externalDFN"><ins class="diff-new">
error
mode
</ins></a><ins class="diff-new">
ensures
that
any
non-Unicode
characters
within
the
CSV
file
are
replaced
by
U+FFFD,
ensuring
that
strings
within
the
tabular
data
model
such
as
column
titles
and
cell
string
values
only
contain
valid
Unicode
characters.
</ins></p></div>
</li>
<li>
Repeat
the
following
the
number
of
times
indicated
by
<a href="#dfn-skip-rows" class="internalDFN">
skip
rows
</a>:
<ol class="algorithm">
<li>
<a href="#dfn-read-a-row" class="internalDFN">
Read
a
row
</a>
to
provide
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>.
</li>
<li>
If
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>
is
not
<code>
null
</code>
and
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
begins
with
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>,
strip
that
prefix
from
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>,
and
add
the
resulting
string
to
the
<code>
<em>
M
</em>.rdfs:comment
</code>
array.
</li>
<li>
Otherwise,
if
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
is
not
an
empty
string,
add
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
to
the
<code>
<em>
M
</em>.rdfs:comment
</code>
array.
</li>
<li>
Add
<code>
1
</code>
to
the
<a href="#dfn-source-row-number" class="internalDFN">
source
row
number
</a>.
</li>
</ol>
</li>
<li>
Repeat
the
following
the
number
of
times
indicated
by
<a href="#dfn-header-row-count" class="internalDFN">
header
row
count
</a>:
<ol class="algorithm">
<li>
<a href="#dfn-read-a-row" class="internalDFN">
Read
a
row
</a>
to
provide
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>.
</li>
<li>
If
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>
is
not
<code>
null
</code>
and
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
begins
with
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>,
strip
that
prefix
from
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>,
and
add
the
resulting
string
to
the
<code>
<em>
M
</em>.rdfs:comment
</code>
array.
</li>
<li>
Otherwise,
<a title="parse a row" href="#dfn-parse-a-row" class="internalDFN">
parse
the
row
</a>
to
provide
a
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>,
and:
<ol class="algorithm">
<li>
Remove
the
first
<a href="#dfn-skip-columns" class="internalDFN">
skip
columns
</a>
number
of
values
from
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>.
</li>
<li>
For
each
of
the
remaining
values
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>:
<ol class="algorithm">
<li>
If
the
value
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
is
an
empty
string
or
consists
only
of
whitespace,
do
nothing.
</li>
<li>
Otherwise,
if
there
is
no
column
description
object
at
index
<em>
i
</em>
in
<code>
<em>
M
</em>.tableSchema.columns
</code>,
create
a
new
one
with
a
<code>
title
</code>
property
whose
value
is
an
array
containing
a
single
value
that
is
the
value
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>.
</li>
<li>
Otherwise,
add
the
value
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
to
the
array
at
<code>
<em>
M
</em>.tableSchema.columns[
<em>
i
</em>
].title
</code>.
</li>
</ol>
</li>
</ol>
</li>
<li>
Add
<code>
1
</code>
to
the
<a href="#dfn-source-row-number" class="internalDFN">
source
row
number
</a>.
</li>
</ol>
</li>
<li>
<ins class="diff-new">If
</ins><a href="#dfn-header-row-count" class="internalDFN"><ins class="diff-new">
header
row
count
</ins></a><ins class="diff-new">
is
zero,
create
an
empty
column
description
object
in
</ins><code><em><ins class="diff-new">
M
</ins></em>.tableSchema.columns</code><ins class="diff-new">
for
each
column
in
the
current
row
after
</ins><a href="#dfn-skip-columns" class="internalDFN"><ins class="diff-new">
skip
columns
</ins></a>.</li><li>
Set
<dfn title="model row number" id="dfn-model-row-number">
row
number
</dfn>
to
<code>
1
</code>.
</li>
<li>
While
it
is
possible
to
read
another
row,
do
the
following:
<ol class="algorithm">
<li>
Set
the
<dfn id="dfn-source-column-number">
source
column
number
</dfn>
to
<code>
1
</code>.
</li>
<li>
<a href="#dfn-read-a-row" class="internalDFN">
Read
a
row
</a>
to
provide
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>.
</li>
<li>
If
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>
is
not
<code>
null
</code>
and
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
begins
with
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>,
strip
that
prefix
from
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>,
and
add
the
resulting
string
to
the
<code>
<em>
M
</em>.rdfs:comment
</code>
array.
</li>
<li>
Otherwise,
<a title="parse a row" href="#dfn-parse-a-row" class="internalDFN">
parse
the
row
</a>
to
provide
a
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>,
and:
<ol class="algorithm">
<li>
If
all
of
the
values
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
are
empty
strings,
and
<a href="#dfn-skip-blank-rows" class="internalDFN">
skip
blank
rows
</a>
is
<code>
true
</code>,
add
<code>
1
</code>
to
the
<a href="#dfn-source-row-number" class="internalDFN">
source
row
number
</a>
and
move
on
to
process
the
next
row.
</li>
<li>
Otherwise,
create
a
new
<a href="#dfn-row" class="internalDFN">
row
</a>
<em>
R
</em>,
with:
<ul>
<li>
<a title="row table" href="#dfn-row-table" class="internalDFN">
table
</a>
set
to
<em>
T
</em>
</li>
<li>
<a title="row number" href="#dfn-row-number" class="internalDFN">
number
</a>
set
to
<a title="model row number" href="#dfn-model-row-number" class="internalDFN">
row
number
</a>
</li>
<li>
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
number
</a>
set
to
<a href="#dfn-source-row-number" class="internalDFN">
source
row
number
</a>
</li>
<li>
<a title="row primary key" href="#dfn-row-primary-key" class="internalDFN">
primary
key
</a>
set
to
an
empty
list
</li>
<li>
<a title="row referenced rows" href="#dfn-row-referenced-rows" class="internalDFN">
referenced
rows
</a>
set
to
an
empty
list
</li>
<li>
<a title="row cells" href="#dfn-row-cells" class="internalDFN">
cells
</a>
set
to
an
empty
list
</li>
</ul>
</li>
<li>
Append
<em>
R
</em>
to
the
<a title="table rows" href="#dfn-table-rows" class="internalDFN">
rows
</a>
of
<a href="#dfn-table" class="internalDFN">
table
</a>
<em>
T
</em>.
</li>
<li>
Remove
the
first
<a href="#dfn-skip-columns" class="internalDFN">
skip
columns
</a>
number
of
values
from
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
and
add
that
number
to
the
<a href="#dfn-source-column-number" class="internalDFN">
source
column
number
</a>.
</li>
<li>
For
each
of
the
remaining
values
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
(where
<em>
i
</em>
starts
at
<code>
1
</code>
):
<ol class="algorithm">
<li>
Identify
the
<a href="#dfn-column" class="internalDFN">
column
</a>
<em>
C
</em>
at
index
<em>
i
</em>
within
the
<a title="table columns" href="#dfn-table-columns" class="internalDFN">
columns
</a>
of
<a href="#dfn-table" class="internalDFN">
table
</a>
<em>
T
</em>.
If
there
is
no
such
column:
<ol class="algorithm">
<li>
Create
a
new
<a href="#dfn-column" class="internalDFN">
column
</a>
<em>
C
</em>
with:
<ul>
<li>
<a title="column table" href="#dfn-column-table" class="internalDFN">
table
</a>
set
to
<em>
T
</em>
</li>
<li>
<a title="column number" href="#dfn-column-number" class="internalDFN">
number
</a>
set
to
<em>
i
</em>
</li>
<li>
<a title="column source number" href="#dfn-column-source-number" class="internalDFN">
source
number
</a>
set
to
<a href="#dfn-source-column-number" class="internalDFN">
source
column
number
</a>
</li>
<li>
<a title="column name" href="#dfn-column-name" class="internalDFN">
name
</a>
set
to
<code>
null
</code>
</li>
<li>
<a title="column titles" href="#dfn-column-titles" class="internalDFN">
titles
</a>
set
to
an
empty
list
</li>
<li>
<a title="column virtual" href="#dfn-column-virtual" class="internalDFN">
<ins class="diff-chg">virtual
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a title="column suppress output" href="#dfn-column-suppress-output" class="internalDFN"><ins class="diff-chg">
suppress
output
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a title="column datatype" href="#dfn-column-datatype" class="internalDFN">
datatype
</a>
set
to
<code>
string
</code>
</li>
<li>
<del class="diff-old">virtual
</del>
<a title="column default" href="#dfn-column-default" class="internalDFN">
<ins class="diff-chg">default
</ins></a><ins class="diff-chg">
set
to
an
empty
string
</ins></li><li><a title="column lang" href="#dfn-column-lang" class="internalDFN"><ins class="diff-chg">
lang
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
und
</ins></code></li><li><a title="column null" href="#dfn-column-null" class="internalDFN"><ins class="diff-chg">
null
</ins></a><ins class="diff-chg">
set
to
an
empty
string
</ins></li><li><a title="column ordered" href="#dfn-column-ordered" class="internalDFN"><ins class="diff-chg">
ordered
</ins>
</a>
set
to
<code>
false
</code>
</li>
<li>
<del class="diff-old">suppress
output
</del>
<a title="column required" href="#dfn-column-required" class="internalDFN">
<ins class="diff-chg">required
</ins>
</a>
set
to
<code>
false
</code>
</li>
<li>
<a title="column separator" href="#dfn-column-separator" class="internalDFN">
<ins class="diff-chg">separator
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a title="column text direction" href="#dfn-column-text-direction" class="internalDFN"><ins class="diff-chg">
text
direction
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
auto
</ins></code></li><li><a title="column about URL" href="#dfn-column-about-url" class="internalDFN"><ins class="diff-chg">
about
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a title="column property URL" href="#dfn-column-property-url" class="internalDFN"><ins class="diff-chg">
property
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a title="column value URL" href="#dfn-column-value-url" class="internalDFN"><ins class="diff-chg">
value
URL
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
null
</ins></code></li><li><a title="column cells" href="#dfn-column-cells" class="internalDFN">
cells
</a>
set
to
an
empty
list
</li>
</ul>
</li>
<li>
Append
<em>
C
</em>
to
the
<a title="table columns" href="#dfn-table-columns" class="internalDFN">
columns
</a>
of
<a href="#dfn-table" class="internalDFN">
table
</a>
<em>
T
</em>
(at
index
<em>
i
</em>
).
</li>
</ol>
</li>
<li>
Create
a
new
<a href="#dfn-cell" class="internalDFN">
cell
</a>
<em>
D
</em>,
with:
<ul>
<li>
<a title="cell table" href="#dfn-cell-table" class="internalDFN">
table
</a>
set
to
<em>
T
</em>
</li>
<li>
<a title="cell column" href="#dfn-cell-column" class="internalDFN">
column
</a>
set
to
<em>
C
</em>
</li>
<li>
<a title="cell row" href="#dfn-cell-row" class="internalDFN">
row
</a>
set
to
<em>
R
</em>
</li>
<li>
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
set
to
the
value
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
</li>
<li>
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
set
to
the
value
at
index
<em>
i
</em>
in
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
</li>
<li>
<a title="cell errors" href="#dfn-cell-errors" class="internalDFN">
errors
</a>
set
to
an
empty
list
</li>
<li>
<a title="cell text direction" href="#dfn-cell-text-direction" class="internalDFN">
text
direction
</a>
set
to
<code>
<del class="diff-old">ltr
</del>
<ins class="diff-chg">auto
</ins>
</code>
</li>
<li>
<a title="cell ordered" href="#dfn-cell-ordered" class="internalDFN">
<ins class="diff-chg">ordered
</ins></a><ins class="diff-chg">
set
to
</ins><code><ins class="diff-chg">
false
</ins></code></li><li><a title="cell about URL" href="#dfn-cell-about-url" class="internalDFN">
about
URL
</a>
set
to
<code>
null
</code>
</li>
<li>
<a title="cell property URL" href="#dfn-cell-property-url" class="internalDFN">
property
URL
</a>
set
to
<code>
null
</code>
</li>
<li>
<a title="cell value URL" href="#dfn-cell-value-url" class="internalDFN">
value
URL
</a>
set
to
<code>
null
</code>
</li>
</ul>
</li>
<li>
Append
<a href="#dfn-cell" class="internalDFN">
cell
</a>
<em>
D
</em>
to
the
<a title="column cells" href="#dfn-column-cells" class="internalDFN">
cells
</a>
of
<a href="#dfn-column" class="internalDFN">
column
</a>
<em>
C
</em>.
</li>
<li>
Append
<a href="#dfn-cell" class="internalDFN">
cell
</a>
<em>
D
</em>
to
the
<a title="row cells" href="#dfn-row-cells" class="internalDFN">
cells
</a>
of
<a href="#dfn-row" class="internalDFN">
row
</a>
<em>
R
</em>
(at
index
<em>
i
</em>
).
</li>
<li>
Add
<code>
1
</code>
to
the
<a href="#dfn-source-column-number" class="internalDFN">
source
column
number
</a>.
</li>
</ol>
</li>
</ol>
</li>
<li>
Add
<code>
1
</code>
to
the
<a href="#dfn-source-row-number" class="internalDFN">
source
row
number
</a>.
</li>
</ol>
</li>
<li>
If
<code>
<em>
M
</em>.rdfs:comment
</code>
is
an
empty
array,
remove
the
<code>
rdfs:comment
</code>
property
from
<em>
M
</em>.
</li>
<li>
Return
the
<a href="#dfn-table" class="internalDFN">
table
</a>
<em>
T
</em>
and
the
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
<em>
M
</em>.
</li>
</ol>
<p>
To
<dfn id="dfn-read-a-row">
read
a
row
</dfn>
to
provide
<dfn id="dfn-row-content">
row
content
</dfn>,
perform
the
following
steps:
</p>
<ol class="algorithm">
<li>
Set
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
to
an
empty
string.
</li>
<li>
Read
<del class="diff-old">a
character
</del>
<ins class="diff-chg">initial
characters
</ins>
and
process
as
follows:
<ol class="algorithm">
<li>
If
the
<del class="diff-old">character
is
an
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
followed
by
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
both
<del class="diff-old">characters
</del>
<ins class="diff-chg">strings
</ins>
to
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>,
and
move
on
to
process
the
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
following
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
an
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
and
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
is
not
the
same
as
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
and
the
<ins class="diff-new">single
</ins>
character
following
it
to
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
and
move
on
to
process
the
<del class="diff-old">next
</del>
<ins class="diff-chg">string
following
that
</ins>
character.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
a
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>
obtained
by
<a title="read a quoted value" href="#dfn-read-a-quoted-value" class="internalDFN">
reading
a
quoted
value
</a>
to
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
and
move
on
to
process
the
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
following
the
quoted
value.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is,
or
</del>
<ins class="diff-chg">string
</ins>
starts
<del class="diff-old">a
sequence
that
is,
a
</del>
<ins class="diff-chg">with
one
of
the
</ins><a href="#dfn-line-terminators" class="internalDFN">
line
<del class="diff-old">terminator
</del>
<ins class="diff-chg">terminators
</ins>
</a>,
return
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>.
</li>
<li>
Otherwise,
append
the
<ins class="diff-new">first
</ins>
character
to
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>
and
move
on
to
process
the
<del class="diff-old">next
</del>
<ins class="diff-chg">string
following
that
</ins>
character.
</li>
</ol>
</li>
<li>
If
there
are
no
more
characters
to
read,
return
the
<a href="#dfn-row-content" class="internalDFN">
row
content
</a>.
</li>
</ol>
<p>
To
<dfn id="dfn-read-a-quoted-value">
read
a
quoted
value
</dfn>
to
provide
a
<dfn id="dfn-quoted-value">
quoted
value
</dfn>,
perform
the
following
steps:
</p>
<ol class="algorithm">
<li>
Set
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>
to
an
empty
string.
</li>
<li>
Read
the
initial
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>
and
add
a
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>
to
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>.
</li>
<li>
Read
<del class="diff-old">a
character
</del>
<ins class="diff-chg">initial
characters
</ins>
and
process
as
follows:
<ol class="algorithm">
<li>
If
the
<del class="diff-old">character
is
an
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
followed
by
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
both
<del class="diff-old">characters
</del>
<ins class="diff-chg">strings
</ins>
to
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>,
and
move
on
to
process
the
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
following
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>.
</li>
<li>
Otherwise,
if
<ins class="diff-new">string
starts
with
</ins>
the
<del class="diff-old">character
is
an
</del>
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
and
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
is
not
the
same
as
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
and
the
character
following
it
to
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>
and
move
on
to
process
the
<del class="diff-old">next
</del>
<ins class="diff-chg">string
following
that
</ins>
character.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
a
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
return
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>.
</li>
<li>
Otherwise,
append
the
<ins class="diff-new">first
</ins>
character
to
the
<a href="#dfn-quoted-value" class="internalDFN">
quoted
value
</a>
and
move
on
to
process
the
<del class="diff-old">next
</del>
<ins class="diff-chg">string
following
that
</ins>
character.
</li>
</ol>
</li>
</ol>
<p>
To
<dfn id="dfn-parse-a-row">
parse
a
row
</dfn>
to
provide
a
<dfn id="dfn-list-of-cell-values">
list
of
cell
values
</dfn>,
perform
the
following
steps:
</p>
<ol class="algorithm">
<li>
Set
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
to
an
empty
list
and
the
<dfn id="dfn-current-cell-value">
current
cell
value
</dfn>
to
an
empty
string.
</li>
<li>
Set
the
<dfn id="dfn-quoted">
quoted
</dfn>
flag
to
<code>
false
</code>.
</li>
<li>
Read
<del class="diff-old">a
character
</del>
<ins class="diff-chg">initial
characters
</ins>
and
process
as
follows:
<ol class="algorithm">
<li>
If
the
<del class="diff-old">character
is
an
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
followed
by
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
<del class="diff-old">a
</del>
<ins class="diff-chg">the
</ins><a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>
to
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>,
and
move
on
to
process
the
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
following
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
an
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
and
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
is
not
the
same
as
the
<a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>,
append
the
character
following
the
<a href="#dfn-escape-character" class="internalDFN">
escape
character
</a>
to
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>
and
move
on
to
process
the
<del class="diff-old">next
</del>
<ins class="diff-chg">string
following
that
</ins>
character.
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
a
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-quote-character" class="internalDFN">
quote
character
</a>
then:
<ol class="algorithm">
<li>
If
<a href="#dfn-quoted" class="internalDFN">
quoted
</a>
is
<code>
false
</code>,
set
the
<a href="#dfn-quoted" class="internalDFN">
quoted
</a>
flag
to
<code>
true
</code>,
and
move
on
to
process
the
<del class="diff-old">next
character.
</del>
<ins class="diff-chg">remaining
string.
</ins>
If
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>
is
not
an
empty
string,
raise
an
error.
</li>
<li>
Otherwise,
set
<a href="#dfn-quoted" class="internalDFN">
quoted
</a>
to
<code>
false
</code>,
and
move
on
to
process
the
<del class="diff-old">next
character.
</del>
<ins class="diff-chg">remaining
string.
</ins>
If
the
<del class="diff-old">next
character
is
</del>
<ins class="diff-chg">remaining
string
does
</ins>
not
<ins class="diff-new">start
with
</ins>
the
<a href="#dfn-delimiter" class="internalDFN">
delimiter
</a>,
raise
an
error.
</li>
</ol>
</li>
<li>
Otherwise,
if
the
<del class="diff-old">character
is
a
</del>
<ins class="diff-chg">string
starts
with
the
</ins><a href="#dfn-delimiter" class="internalDFN">
delimiter
</a>,
then:
<ol class="algorithm">
<li>
If
<a href="#dfn-quoted" class="internalDFN">
quoted
</a>
is
<code>
true
</code>,
append
the
<a href="#dfn-delimiter" class="internalDFN">
delimiter
</a>
<del class="diff-old">character
</del>
<ins class="diff-chg">string
</ins>
to
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>
and
move
on
to
process
the
<del class="diff-old">next
character.
</del>
<ins class="diff-chg">remaining
string.
</ins>
</li>
<li>
Otherwise,
<a title="conditionally trim a cell value" href="#dfn-conditionally-trim-a-cell-value" class="internalDFN">
<ins class="diff-chg">conditionally
</ins>
trim
</a>
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>,
add
the
resulting
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>
to
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
and
move
on
to
process
the
<del class="diff-old">next
character.
</del>
<ins class="diff-chg">following
string.
</ins>
</li>
</ol>
</li>
<li>
Otherwise,
append
the
<ins class="diff-new">first
</ins>
character
to
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>
and
move
on
to
process
the
<del class="diff-old">next
character.
</del>
<ins class="diff-chg">remaining
string.
</ins>
</li>
</ol>
</li>
<li>
If
there
are
no
more
characters
to
read,
<a title="conditionally trim a cell value" href="#dfn-conditionally-trim-a-cell-value" class="internalDFN">
<ins class="diff-chg">conditionally
</ins>
trim
</a>
the
<a href="#dfn-current-cell-value" class="internalDFN">
current
cell
value
</a>,
add
the
resulting
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>
to
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>
and
return
the
<a href="#dfn-list-of-cell-values" class="internalDFN">
list
of
cell
values
</a>.
</li>
</ol>
<p>
To
<dfn id="dfn-conditionally-trim-a-cell-value">
<ins class="diff-chg">conditionally
</ins>
trim
a
cell
value
</dfn>
to
provide
a
<dfn id="dfn-trimmed-cell-value">
trimmed
cell
value
</dfn>,
perform
the
following
steps:
</p>
<ol class="algorithm">
<li>
Set
the
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>
to
the
provided
cell
value.
</li>
<li>
If
<a href="#dfn-trim" class="internalDFN">
trim
</a>
is
<code>
true
</code>
or
<code>
start
</code>
then
remove
any
leading
whitespace
from
the
start
of
the
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>
and
move
on
to
the
next
step.
</li>
<li>
If
<a href="#dfn-trim" class="internalDFN">
trim
</a>
is
<code>
true
</code>
or
<code>
end
</code>
then
remove
any
trailing
whitespace
from
the
end
of
the
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>
and
move
on
to
the
next
step.
</li>
<li>
Return
the
<a href="#dfn-trimmed-cell-value" class="internalDFN">
trimmed
cell
value
</a>.
</li>
</ol>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note20">
<span>
Note
</span>
</div>
<p class="">
This
parsing
algorithm
does
not
account
for
the
possibility
of
there
being
more
than
one
area
of
tabular
data
within
a
single
CSV
file.
</p>
</div>
<section class="informative" id="bidirectionality-in-csv-files" typeof="bibo:Chapter" resource="#bidirectionality-in-csv-files" property="bibo:hasPart">
<h3 id="h-bidirectionality-in-csv-files" resource="#h-bidirectionality-in-csv-files">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.1
</span>
Bidirectionality
in
CSV
Files
</span>
</h3>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
Bidirectional
content
does
not
alter
the
definition
of
rows
or
the
assignment
of
cells
to
columns.
Whether
or
not
a
CSV
file
contains
right-to-left
characters,
the
first
column's
content
is
the
first
cell
of
each
row,
which
is
the
text
prior
to
the
first
occurrence
of
a
comma
within
that
row.
</p>
<div class="example" title="Bidirectional CSV file">
<p>
For
example,
<a href="http://referendum2012.elections.eg/results/referendum-results">
Egyptian
Referendum
results
</a>
are
available
as
a
CSV
file
at
<a href="https://egelections-2011.appspot.com/Referendum2012/results/csv/EG.csv">
https://egelections-2011.appspot.com/Referendum2012/results/csv/EG.csv
</a>.
Over
the
wire
and
in
non-Unicode-aware
text
editors,
the
CSV
looks
like:
</p>
          <pre>            <bdo dir="ltr">
‌ا‌ل‌م‌ح‌ا‌ف‌ظ‌ة‌,‌ن‌س‌ب‌ة‌ ‌م‌و‌ا‌ف‌ق‌,‌ن‌س‌ب‌ة‌ ‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌,‌ع‌د‌د‌ ‌ا‌ل‌ن‌ا‌خ‌ب‌ي‌ن‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ص‌ح‌ي‌ح‌ة‌,‌ا‌ل‌أ‌ص‌و‌ا‌ت‌ ‌ا‌ل‌ب‌ا‌ط‌ل‌ة‌,‌ن‌س‌ب‌ة‌ ‌ا‌ل‌م‌ش‌ا‌ر‌ك‌ة‌,‌م‌و‌ا‌ف‌ق‌,‌غ‌ي‌ر‌ ‌م‌و‌ا‌ف‌ق‌
‌ا‌ل‌ق‌ل‌ي‌و‌ب‌ي‌ة‌,60.0,40.0,"2,639,808","853,125","15,224",32.9,"512,055","341,070"
‌ا‌ل‌ج‌ي‌ز‌ة‌,66.7,33.3,"4,383,701","1,493,092","24,105",34.6,"995,417","497,675"
‌ا‌ل‌ق‌ا‌ه‌ر‌ة‌,43.2,56.8,"6,580,478","2,254,698","36,342",34.8,"974,371","1,280,327"
‌ق‌ن‌ا‌,84.5,15.5,"1,629,713","364,509","6,743",22.8,"307,839","56,670"
...
            </bdo>
</pre>
<p>
Within
this
CSV
file,
the
first
column
appears
as
the
content
of
each
line
before
the
first
comma
and
is
named
<code>
المحافظة
</code>
(appearing
at
the
start
of
each
row
as
<code>
<bdo dir="ltr">
‌ا‌ل‌م‌ح‌ا‌ف‌ظ‌ة‌
</bdo>
</code>
in
the
example,
which
is
displaying
the
relevant
characters
from
left
to
right
in
the
order
they
appear
"on
the
wire").
</p>
<p>
The
CSV
translates
to
a
table
model
that
looks
like:
</p>
<table style="width: 100%; text-align: right">
<colgroup>
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
<col style="width: 10%">
</colgroup>
<thead>
<tr style="text-align: center">
<th>
Column
/
Row
</th>
<th>
column
1
</th>
<th>
column
2
</th>
<th>
column
3
</th>
<th>
column
4
</th>
<th>
column
5
</th>
<th>
column
6
</th>
<th>
column
7
</th>
<th>
column
8
</th>
<th>
column
9
</th>
</tr>
</thead>
<tbody>
<tr>
<th>
column
names
</th>
<th>
المحافظة
</th>
<th>
نسبة
موافق
</th>
<th>
نسبة
غير
موافق
</th>
<th>
عدد
الناخبين
</th>
<th>
الأصوات
الصحيحة
</th>
<th>
الأصوات
الباطلة
</th>
<th>
نسبة
المشاركة
</th>
<th>
موافق
</th>
<th>
غير
موافق
</th>
</tr>
<tr>
<th>
row
1
</th>
<td>
القليوبية
</td>
<td>
60.0
</td>
<td>
40.0
</td>
<td>
2,639,808
</td>
<td>
853,125
</td>
<td>
15,224
</td>
<td>
32.9
</td>
<td>
512,055
</td>
<td>
341,070
</td>
</tr>
<tr>
<th>
row
2
</th>
<td>
الجيزة
</td>
<td>
66.7
</td>
<td>
33.3
</td>
<td>
4,383,701
</td>
<td>
1,493,092
</td>
<td>
24,105
</td>
<td>
34.6
</td>
<td>
995,417
</td>
<td>
497,675
</td>
</tr>
<tr>
<th>
row
3
</th>
<td>
القاهرة
</td>
<td>
43.2
</td>
<td>
56.8
</td>
<td>
6,580,478
</td>
<td>
2,254,698
</td>
<td>
36,342
</td>
<td>
34.8
</td>
<td>
974,371
</td>
<td>
1,280,327
</td>
</tr>
<tr>
<th>
row
4
</th>
<td>
قنا
</td>
<td>
84.5
</td>
<td>
15.5
</td>
<td>
1,629,713
</td>
<td>
364,509
</td>
<td>
6,743
</td>
<td>
22.8
</td>
<td>
307,839
</td>
<td>
56,670
</td>
</tr>
</tbody>
</table>
<p>
The
fragment
identifier
<code>
#col=3
</code>
identifies
the
third
of
the
columns,
named
<code>
نسبة
غير
موافق
</code>
(appearing
as
<code>
<bdo dir="ltr">
‌ن‌س‌ب‌ة‌
‌غ‌ي‌ر‌
‌م‌و‌ا‌ف‌ق‌
</bdo>
</code>
in
the
example).
</p>
<p>
<a href="#bidirectional-tables" class="sectionRef sec-ref">
section
<span class="secno">
<del class="diff-old">6.3.1
</del>
<ins class="diff-chg">6.5.1
</ins>
</span>
<span class="sec-title">
Bidirectional
Tables
</span>
</a>
defines
how
this
table
model
should
be
displayed
by
compliant
applications,
and
how
metadata
can
affect
the
display.
The
default
is
for
the
display
to
be
determined
by
the
content
of
the
table.
For
example,
if
this
CSV
were
turned
into
an
HTML
table
for
display
into
a
web
page,
it
should
be
displayed
with
the
first
column
on
the
right
and
the
last
on
the
left,
as
follows:
</p>
<table style="width: 100%; text-align: right">
<thead>
<tr>
<th>
غير
موافق
</th>
<th>
موافق
</th>
<th>
نسبة
المشاركة
</th>
<th>
الأصوات
الباطلة
</th>
<th>
الأصوات
الصحيحة
</th>
<th>
عدد
الناخبين
</th>
<th>
نسبة
غير
موافق
</th>
<th>
نسبة
موافق
</th>
<th>
المحافظة
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
341,070
</td>
<td>
512,055
</td>
<td>
32.9
</td>
<td>
15,224
</td>
<td>
853,125
</td>
<td>
2,639,808
</td>
<td>
40.0
</td>
<td>
60.0
</td>
<td>
القليوبية
</td>
</tr>
<tr>
<td>
497,675
</td>
<td>
995,417
</td>
<td>
34.6
</td>
<td>
24,105
</td>
<td>
1,493,092
</td>
<td>
4,383,701
</td>
<td>
33.3
</td>
<td>
66.7
</td>
<td>
الجيزة
</td>
</tr>
<tr>
<td>
1,280,327
</td>
<td>
974,371
</td>
<td>
34.8
</td>
<td>
36,342
</td>
<td>
2,254,698
</td>
<td>
6,580,478
</td>
<td>
56.8
</td>
<td>
43.2
</td>
<td>
القاهرة
</td>
</tr>
<tr>
<td>
56,670
</td>
<td>
307,839
</td>
<td>
22.8
</td>
<td>
6,743
</td>
<td>
364,509
</td>
<td>
1,629,713
</td>
<td>
15.5
</td>
<td>
84.5
</td>
<td>
قنا
</td>
</tr>
</tbody>
</table>
<p>
The
fragment
identifier
<code>
#col=3
</code>
still
identifies
the
third
of
the
columns,
named
<code>
نسبة
غير
موافق
</code>,
which
appears
in
the
HTML
display
as
the
third
column
from
the
right
and
is
what
those
who
read
right-to-left
would
think
of
as
the
third
column.
</p>
<p>
Note
that
this
display
matches
that
shown
<a href="http://referendum2012.elections.eg/results/referendum-results">
on
the
original
website
</a>.
</p>
</div>
<del class="diff-old">Issue
46
An
alternative
approach
is
for
the
CSV
to
be
parsed
into
a
table
model
in
which
the
columns
are
numbered
in
the
reverse,
for
tables
which
are
either
marked
as
or
detected
to
be
right-to-left
tables.
For
example,
we
could
introduce
a
bidi=rtl
or
similar
media
type
parameter,
and
use
this
to
determine
whether
the
first
column
in
table
generated
from
the
CSV
is
the
text
before
the
first
comma
in
each
line
or
the
text
after
the
last
comma
in
the
line.
In
the
example
above,
if
the
CSV
were
served
with
bidi=rtl
,
or
the
table
was
detected
as
being
a
right-to-left
table,
then
the
column
numbering
in
the
model
would
be
reversed:
Column
/
Row
column
9
column
8
column
7
column
6
column
5
column
4
column
3
column
2
column
1
row
1
(header)
المحافظة
نسبة
موافق
نسبة
غير
موافق
عدد
الناخبين
الأصوات
الصحيحة
الأصوات
الباطلة
نسبة
المشاركة
موافق
غير
موافق
row
2
القليوبية
60.0
40.0
2,639,808
853,125
15,224
32.9
512,055
341,070
row
3
الجيزة
66.7
33.3
4,383,701
1,493,092
24,105
34.6
995,417
497,675
row
4
القاهرة
43.2
56.8
6,580,478
2,254,698
36,342
34.8
974,371
1,280,327
row
5
قنا
84.5
15.5
1,629,713
364,509
6,743
22.8
307,839
56,670
This
would
require
a
change
to
[
RFC7111
]
but
that
might
be
required
by
updates
to
the
definition
of
text/csv
in
any
case.
With
the
change,
the
fragment
identifier
#col=3
would
then
refer
to
the
third
column
from
the
right,
named
نسبة
المشاركة
.
If
the
model
were
defined
in
this
way,
there
would
be
no
need
to
determine
the
order
of
the
columns
when
displayed
using
a
metadata
property.
Columns
would
always
be
displayed
with
the
first
column
(numbered
1
in
the
model)
on
the
left.
The
final
display
in
HTML,
for
example,
would
be
exactly
as
above.
The
only
difference
would
be
that
#col=3
would
refer
to
the
third
column
from
the
left.
We
note
that
using
media
type
parameters
is
problematic
because
publishers
might
not
have
the
ability
to
set
them
on
their
servers,
and
because
they
can
easily
get
lost
as
a
file
is
republished
or
emailed
between
people.
We
invite
comment
on
the
best
way
to
approach
bidirectionality
in
CSV
files.
</del>
</section>
<section id="examples" typeof="bibo:Chapter" resource="#examples" property="bibo:hasPart">
<h3 id="h-examples" resource="#h-examples">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2
</span>
Examples
</span>
</h3>
<section id="simple-example" typeof="bibo:Chapter" resource="#simple-example" property="bibo:hasPart">
<h4 id="h-simple-example" resource="#h-simple-example">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.1
</span>
Simple
Example
</span>
</h4>
<p>
A
simple
CSV
file
that
complies
to
the
constraints
described
in
<a href="#syntax" class="sectionRef sec-ref">
section
<span class="secno">
7.
</span>
<span class="sec-title">
Best
Practice
CSV
</span>
</a>,
at
<code>
http://example.org/tree-ops.csv
</code>,
might
look
like:
</p>
<del class="diff-old">          GID,On Street,Species,Trim Cycle,Inventory Date
</del>
          <div class="example"><div class="example-title"><span>Example 14</span>: http://example.org/tree-ops.csv</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date
1,ADDISON AV,Celtis australis,Large Tree Routine Prune,10/18/2010
2,EMERSON
ST,Liquidambar
styraciflua,Large
Tree
Routine
Prune,6/2/2010
</pre>
</div>
<p>
Parsing
this
file
results
in
an
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
of
a
single
<a href="#dfn-table" class="internalDFN">
table
</a>
<var>
T
</var>
with
five
columns
and
two
rows.
The
columns
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
titles
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
1
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
GID
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
2
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
On
Street
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
3
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
Species
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
4
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
Trim
Cycle
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
5
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
Inventory
Date
</code>
</td>
</tr>
</tbody>
</table>
<p>
The
extracted
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>,
as
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
would
look
like:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 15</span>: tree-ops.csv Embedded Metadata</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"GID"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Species"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pln"> </span><span class="pun">]},</span><span class="pln">
      </span><span class="pun">{</span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pln"> </span><span class="pun">]}</span><span class="pln">
    </span><span class="pun">]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
The
rows
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="4">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
R1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
2
</td>
<td>
<var>
C1.1
</var>,
<var>
C1.2
</var>,
<var>
C1.3
</var>,
<var>
C1.4
</var>,
<var>
C1.5
</var>
</td>
</tr>
<tr>
<td>
<var>
R2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
3
</td>
<td>
<var>
C2.1
</var>,
<var>
C2.2
</var>,
<var>
C2.3
</var>,
<var>
C2.4
</var>,
<var>
C2.5
</var>
</td>
</tr>
</tbody>
</table>
<div class="note">
<div class="note-title" aria-level="5" role="heading" id="h-note21">
<span>
Note
</span>
</div>
<p class="">
The
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
number
</a>
of
each
row
is
offset
by
one
from
the
<a title="row number" href="#dfn-row-number" class="internalDFN">
number
</a>
of
each
row
because
in
the
source
CSV
file,
the
header
line
is
the
first
line.
It
is
possible
to
reconstruct
a
[
<cite>
<a class="bibref" href="#bib-RFC7111">
RFC7111
</a>
</cite>
]
compliant
reference
to
the
first
record
in
the
original
CSV
file
(
<code>
http://example.org/tree-ops.csv#row=2
</code>
)
using
the
value
of
the
row's
source
number.
This
enables
implementations
to
retain
provenance
between
the
table
model
and
the
original
file.
</p>
</div>
<p>
The
cells
have
the
annotations
shown
in
the
following
table
(note
that
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
all
the
cells
in
the
table
are
strings,
denoted
by
the
double
quotes
in
the
table
below):
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
"1"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
"2"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"6/2/2010"
</code>
</td>
<td>
<code>
"6/2/2010"
</code>
</td>
</tr>
</tbody>
</table>
<section id="using-overriding-metadata" typeof="bibo:Chapter" resource="#using-overriding-metadata" property="bibo:hasPart">
<h5 id="h-using-overriding-metadata" resource="#h-using-overriding-metadata">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.1.1
</span>
Using
Overriding
Metadata
</span>
</h5>
<p>
The
tools
that
the
consumer
of
this
data
uses
may
provide
a
mechanism
for
overriding
the
metadata
that
has
been
provided
within
the
file
itself.
For
example,
they
might
enable
the
consumer
to
add
machine-readable
names
to
the
columns,
or
to
mark
the
fifth
column
as
holding
a
date
in
the
format
<code>
M/D/YYYY
</code>.
These
facilities
are
implementation
defined;
the
code
for
invoking
a
Javascript-based
parser
might
look
like:
</p>
<del class="diff-old">          	
</del>
          	<div class="example"><div class="example-title"><span>Example 16</span>: Javascript implementation configuration</div><pre class="highlight example prettyprint prettyprinted"><span class="pln">data</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">({</span><span class="pln">
  </span><span class="str">"column-names"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">],</span><span class="pln">
  </span><span class="str">"datatypes"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">],</span><span class="pln">
  </span><span class="str">"formats"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="kwd">null</span><span class="pun">,</span><span class="str">"M/D/YYYY"</span><span class="pun">]</span><span class="pln">
</span>
<span class="pun">
});
</span>
</pre>
</div>
<p>
This
is
equivalent
to
a
metadata
file
expressed
in
the
syntax
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
],
looking
like:
</p>
<del class="diff-old">            
</del>
            <div class="example"><div class="example-title"><span>Example 17</span>: Equivalent metadata syntax</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln">
        </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
This
would
be
merged
with
the
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
found
in
the
CSV
file,
providing
the
titles
for
the
columns
to
create:
</p>
<del class="diff-old">            
</del>
            <div class="example"><div class="example-title"><span>Example 18</span>: Merged metadata</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Table"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org/tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln"> 
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln"> 
        </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
The
processor
can
then
create
an
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
that
included
<code>
name
</code>
annotations
on
the
columns,
and
<code>
datatype
</code>
annotations
on
the
cells,
and
created
cells
whose
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
were
of
appropriate
types
(in
the
case
of
this
Javascript
implementation,
the
cells
in
the
last
column
would
be
<code>
Date
</code>
objects,
for
example).
</p>
<p>
Assuming
this
kind
of
implementation-defined
parsing,
the
columns
would
then
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="7">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
name
</th>
<th>
titles
</th>
<th>
datatype
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
1
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
GID
</code>
</td>
<td>
<code>
GID
</code>
</td>
<td>
<code>
string
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
2
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
on_street
</code>
</td>
<td>
<code>
On
Street
</code>
</td>
<td>
<code>
string
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
3
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
species
</code>
</td>
<td>
<code>
Species
</code>
</td>
<td>
<code>
string
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
4
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
trim_cycle
</code>
</td>
<td>
<code>
Trim
Cycle
</code>
</td>
<td>
<code>
string
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
5
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
inventory_date
</code>
</td>
<td>
<code>
Inventory
Date
</code>
</td>
<td>
<code>
{
"base":
"date",
"format":
"M/d/yyyy"
}
</code>
</td>
</tr>
</tbody>
</table>
<p>
The
cells
have
the
annotations
shown
in
the
following
table.
Because
of
the
overrides
provided
by
the
consumer
to
guide
the
parsing,
and
the
way
the
parser
works,
the
cells
in
the
<code>
Inventory
Date
</code>
column
(cells
<var>
C1.5
</var>
and
<var>
C2.5
</var>
)
have
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
that
are
parsed
dates
rather
than
unparsed
strings.
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
"1"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
<td>
<code>
2010-10-18
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
"2"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"6/2/2010"
</code>
</td>
<td>
<code>
2010-06-02
</code>
</td>
</tr>
</tbody>
</table>
</section>
<section id="using-a-metadata-file" typeof="bibo:Chapter" resource="#using-a-metadata-file" property="bibo:hasPart">
<h5 id="h-using-a-metadata-file" resource="#h-using-a-metadata-file">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.1.2
</span>
Using
a
Metadata
File
</span>
</h5>
<p>
A
similar
set
of
annotations
could
be
provided
through
a
metadata
file,
located
as
discussed
in
<a href="#locating-metadata" class="sectionRef sec-ref">
section
<span class="secno">
5.
</span>
<span class="sec-title">
Locating
Metadata
</span>
</a>
and
defined
in
[
<cite>
<a class="bibref" href="#bib-tabular-metadata">
tabular-metadata
</a>
</cite>
].
For
example,
this
might
look
like:
</p>
<del class="diff-old">            
</del>
            <div class="example"><div class="example-title"><span>Example 19</span>: http://example.org/tree-ops.csv-metadata.json</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@language"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"en"</span><span class="pun">}],</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dc:title"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Tree Operations"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dcat:keyword"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"tree"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"street"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"maintenance"</span><span class="pun">],</span><span class="pln">
  </span><span class="str">"dc:publisher"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"schema:name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Example Municipality"</span><span class="pun">,</span><span class="pln">
    </span><span class="str">"schema:url"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@id"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://example.org"</span><span class="pun">}</span><span class="pln">
  </span><span class="pun">},</span><span class="pln">
  </span><span class="str">"dc:license"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@id"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://opendefinition.org/licenses/cc-by/"</span><span class="pun">},</span><span class="pln">
  </span><span class="str">"dc:modified"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"@value"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"2010-12-31"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"@type"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"xsd:date"</span><span class="pun">},</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"GID"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"Generic Identifier"</span><span class="pun">],</span><span class="pln">
      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"An identifier for the operation on a tree."</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"required"</span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The street that the tree is on."</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The species of the tree."</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The operation performed on the tree."</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"dc:description"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"The date of the operation that was performed."</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}],</span><span class="pln">
    </span><span class="str">"primaryKey"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
    </span><span class="str">"aboutUrl"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"#gid-{GID}"</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
The
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
generated
from
this
would
be
more
sophisticated
again.
The
<a href="#dfn-table" class="internalDFN">
table
</a>
itself
would
have
the
following
annotations:
</p>
<dl>
<dt>
<code>
dc:title
</code>
</dt>
<dd>
<code>
{"@value":
"Tree
Operations",
"@language":
"en"}
</code>
</dd>
<dt>
<code>
dcat:keyword
</code>
</dt>
<dd>
<code>
[{"@value":
"tree",
"@language",
"en"},
{"@value":
"street",
"@language":
"en"},
{"@value":
"maintenance",
"@language":
"en"}]
</code>
</dd>
<dt>
<code>
dc:publisher
</code>
</dt>
<dd>
<code>
[{
"schema:name":
"Example
Municipality",
"schema:url":
{"@id":
"http://example.org"}
}]
</code>
</dd>
<dt>
<code>
dc:license
</code>
</dt>
<dd>
<code>
{"@id":
"http://opendefinition.org/licenses/cc-by/"}
</code>
</dd>
<dt>
<code>
dc:modified
</code>
</dt>
<dd>
<code>
{"@value":
"2010-12-31",
"@type":
"date"}
</code>
</dd>
</dl>
<p>
The
columns
would
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="7">
core
annotations
</th>
<th colspan="1">
other
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
name
</th>
<th>
titles
</th>
<th>
datatype
</th>
<th>
<code>
dc:description
</code>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
1
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
GID
</code>
</td>
<td>
<code>
GID
</code>,
<code>
Generic
Identifier
</code>
</td>
<td>
<code>
string
</code>
</td>
<td>
<code>
An
identifier
for
the
operation
on
a
tree.
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
2
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
on_street
</code>
</td>
<td>
<code>
On
Street
</code>
</td>
<td>
<code>
string
</code>
</td>
<td>
<code>
The
street
that
the
tree
is
on.
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
3
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
species
</code>
</td>
<td>
<code>
Species
</code>
</td>
<td>
<code>
string
</code>
</td>
<td>
<code>
The
species
of
the
tree.
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
4
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
trim_cycle
</code>
</td>
<td>
<code>
Trim
Cycle
</code>
</td>
<td>
<code>
string
</code>
</td>
<td>
<code>
The
operation
performed
on
the
tree.
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
5
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
inventory_date
</code>
</td>
<td>
<code>
Inventory
Date
</code>
</td>
<td>
<code>
{
"base":
"date",
"format":
"M/d/yyyy"
}
</code>
</td>
<td>
<code>
The
date
of
the
operation
that
was
performed.
</code>
</td>
</tr>
</tbody>
</table>
<p>
The
rows
have
an
additional
<a title="row primary key" href="#dfn-row-primary-key" class="internalDFN">
primary
key
</a>
annotation,
as
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
primary
key
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
R1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
2
</td>
<td>
<var>
C1.1
</var>,
<var>
C1.2
</var>,
<var>
C1.3
</var>,
<var>
C1.4
</var>,
<var>
C1.5
</var>
</td>
<td>
C1.1
</td>
</tr>
<tr>
<td>
<var>
R2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
3
</td>
<td>
<var>
C2.1
</var>,
<var>
C2.2
</var>,
<var>
C2.3
</var>,
<var>
C2.4
</var>,
<var>
C2.5
</var>
</td>
<td>
C2.1
</td>
</tr>
</tbody>
</table>
<p>
Thanks
to
the
provided
metadata,
the
cells
again
have
the
annotations
shown
in
the
following
table.
The
metadata
file
has
provided
the
information
to
supplement
the
model
with
additional
annotations
but
also,
for
the
<code>
Inventory
Date
</code>
column
(cells
<var>
C1.5
</var>
and
<var>
C2.5
</var>
),
have
a
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
that
is
a
parsed
date
rather
than
an
unparsed
string.
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="6">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
<th>
about
URL
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-1
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-1
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-1
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-1
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
<td>
<code>
2010-10-18
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-1
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-2
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-2
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-2
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-2
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"6/2/2010"
</code>
</td>
<td>
<code>
2010-06-02
</code>
</td>
<td>
<code>
http://example.org/tree-ops.csv#gid-2
</code>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="empty-and-quoted-cells" typeof="bibo:Chapter" resource="#empty-and-quoted-cells" property="bibo:hasPart">
<h4 id="h-empty-and-quoted-cells" resource="#h-empty-and-quoted-cells">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.2
</span>
Empty
and
Quoted
Cells
</span>
</h4>
<p>
The
following
slightly
amended
CSV
file
contains
quoted
and
missing
cell
values:
</p>
<del class="diff-old">          GID,On Street,Species,Trim Cycle,Inventory Date
</del>
          <div class="example"><div class="example-title"><span>Example 20</span>: CSV file containing quoted and missing cell values</div><pre class="example">GID,On Street,Species,Trim Cycle,Inventory Date
1,ADDISON AV,"Celtis australis","Large Tree Routine Prune",10/18/2010
2,,"Liquidambar
styraciflua","Large
Tree
Routine
Prune",
</pre>
</div>
<p>
Parsing
this
file
similarly
results
in
an
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
of
a
single
<a href="#dfn-table" class="internalDFN">
table
</a>
<var>
T
</var>
with
five
columns
and
two
rows.
The
columns
and
rows
have
exactly
the
same
annotations
as
previously,
but
there
are
two
<code>
null
</code>
cell
values
for
<var>
C2.2
</var>
and
<var>
C2.5
</var>.
Note
that
the
quoting
of
values
within
the
CSV
makes
no
difference
to
either
the
<a title="cell string value" href="#dfn-cell-string-value" class="internalDFN">
string
value
</a>
or
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
of
the
cell.
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
"1"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
"2"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
""
</code>
</td>
<td>
<code>
null
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
""
</code>
</td>
<td>
<code>
null
</code>
</td>
</tr>
</tbody>
</table>
</section>
<section id="tabular-data-embedding-annotations" typeof="bibo:Chapter" resource="#tabular-data-embedding-annotations" property="bibo:hasPart">
<h4 id="h-tabular-data-embedding-annotations" resource="#h-tabular-data-embedding-annotations">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.3
</span>
Tabular
Data
Embedding
Annotations
</span>
</h4>
<p>
The
following
example
illustrates
some
of
the
complexities
that
can
be
involved
in
parsing
tabular
data,
how
the
flags
described
above
can
be
used,
and
how
new
tabular
data
formats
could
be
defined
that
embed
additional
annotations
into
the
tabular
data
model.
</p>
<p>
In
this
example,
the
publishers
of
the
data
are
using
an
internal
convention
to
supply
additional
metadata
about
the
tabular
data
embedded
within
the
file
itself.
They
are
also
using
a
tab
as
a
separator
rather
than
a
comma.
</p>
<del class="diff-old">	        #	publisher	City of Palo Alto
</del>
	        <div class="example"><div class="example-title"><span>Example 21</span>: Tab-separated file containing embedded metadata</div><pre class="example">#	publisher	City of Palo Alto
#	updated	12/31/2010
#name	GID	on_street	species	trim_cycle	inventory_date
#datatype	string	string	string	string	date:M/D/YYYY
	GID	On Street	Species	Trim Cycle	Inventory Date
	1	ADDISON AV	Celtis australis	Large Tree Routine Prune	10/18/2010
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010
</pre>
</div>
<section id="naive-parsing" typeof="bibo:Chapter" resource="#naive-parsing" property="bibo:hasPart">
<h5 id="h-naive-parsing" resource="#h-naive-parsing">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.3.1
</span>
Naive
Parsing
</span>
</h5>
<p>
Naive
parsing
of
the
above
data
will
assume
a
comma
separator
and
thus
results
in
a
single
<a href="#dfn-table" class="internalDFN">
table
</a>
<var>
T
</var>
with
a
single
column
and
six
rows.
The
column
has
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
titles
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
1
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>,
<var>
C3.1
</var>,
<var>
C4.1
</var>,
<var>
C5.1
</var>
</td>
<td>
<code>
#
publisher
City
of
Palo
Alto
</code>
</td>
</tr>
</tbody>
</table>
<p>
The
rows
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="4">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
R1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
2
</td>
<td>
<var>
C1.1
</var>
</td>
</tr>
<tr>
<td>
<var>
R2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
3
</td>
<td>
<var>
C2.1
</var>
</td>
</tr>
<tr>
<td>
<var>
R3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
4
</td>
<td>
<var>
C3.1
</var>
</td>
</tr>
<tr>
<td>
<var>
R4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
5
</td>
<td>
<var>
C4.1
</var>
</td>
</tr>
<tr>
<td>
<var>
R5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
6
</td>
<td>
<var>
C5.1
</var>
</td>
</tr>
<tr>
<td>
<var>
R6
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
6
</td>
<td>
7
</td>
<td>
<var>
C6.1
</var>
</td>
</tr>
</tbody>
</table>
<p>
The
cells
have
the
annotations
shown
in
the
following
table
(note
that
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
values
</a>
of
all
the
cells
in
the
table
are
strings,
denoted
by
the
double
quotes
in
the
table
below):
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"#
updated
12/31/2010"
</code>
</td>
<td>
<code>
"#
updated
12/31/2010"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"#name
GID
on_street
species
trim_cycle
inventory_date"
</code>
</td>
<td>
<code>
"#name
GID
on_street
species
trim_cycle
inventory_date"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"#datatype
string
string
string
string
date:M/D/YYYY"
</code>
</td>
<td>
<code>
"#datatype
string
string
string
string
date:M/D/YYYY"
</code>
</td>
</tr>
<tr>
<td>
<var>
C3.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R3
</var>
</td>
<td>
<code>
"
GID
On
Street
Species
Trim
Cycle
Inventory
Date"
</code>
</td>
<td>
<code>
"
GID
On
Street
Species
Trim
Cycle
Inventory
Date"
</code>
</td>
</tr>
<tr>
<td>
<var>
C4.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R4
</var>
</td>
<td>
<code>
"
1
ADDISON
AV
Celtis
australis
Large
Tree
Routine
Prune
10/18/2010"
</code>
</td>
<td>
<code>
"
1
ADDISON
AV
Celtis
australis
Large
Tree
Routine
Prune
10/18/2010"
</code>
</td>
</tr>
<tr>
<td>
<var>
C5.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R5
</var>
</td>
<td>
<code>
"
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010"
</code>
</td>
<td>
<code>
"
2
EMERSON
ST
Liquidambar
styraciflua
Large
Tree
Routine
Prune
6/2/2010"
</code>
</td>
</tr>
</tbody>
</table>
</section>
<section id="parsing-with-flags" typeof="bibo:Chapter" resource="#parsing-with-flags" property="bibo:hasPart">
<h5 id="h-parsing-with-flags" resource="#h-parsing-with-flags">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.3.2
</span>
Parsing
with
Flags
</span>
</h5>
<p>
The
consumer
of
the
data
may
use
the
flags
described
above
to
create
a
more
useful
set
of
data
from
this
file.
Specifically,
they
could
set:
</p>
<ul>
<li>
<a href="#dfn-delimiter" class="internalDFN">
delimiter
</a>
to
a
tab
character
</li>
<li>
<a href="#dfn-skip-rows" class="internalDFN">
skip
rows
</a>
to
4
</li>
<li>
<a href="#dfn-skip-columns" class="internalDFN">
skip
columns
</a>
to
1
</li>
<li>
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>
to
<code>
#
</code>
</li>
</ul>
<p>
Setting
these
is
done
in
an
implementation-defined
way.
It
could
be
done,
for
example,
by
sniffing
the
contents
of
the
file
itself,
through
command-line
options,
or
by
embedding
a
dialect
description
into
a
metadata
file
associated
with
the
tabular
data,
which
would
look
like:
</p>
<del class="diff-old">	          
</del>
	          <div class="example"><div class="example-title"><span>Example 22</span>: Dialect description</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"delimiter"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"\t"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"skipRows"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">4</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"skipColumns"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"commentPrefix"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"#"</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
With
these
flags
in
operation,
parsing
this
file
results
in
an
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
of
a
single
<a href="#dfn-table" class="internalDFN">
table
</a>
<var>
T
</var>
with
five
columns
and
two
rows
which
is
largely
the
same
as
that
created
from
the
original
simple
example
described
in
<a href="#simple-example" class="sectionRef sec-ref">
section
<span class="secno">
8.2.1
</span>
<span class="sec-title">
Simple
Example
</span>
</a>.
There
are
three
differences.
</p>
<p>
First,
because
the
four
skipped
rows
began
with
the
<a href="#dfn-comment-prefix" class="internalDFN">
comment
prefix
</a>,
the
table
itself
now
has
four
<code>
rdfs:comment
</code>
annotations,
with
the
values:
</p>
<ol>
<li>
<code>
publisher
City
of
Palo
Alto
</code>
</li>
<li>
<code>
updated
12/31/2010
</code>
</li>
<li>
<code>
name
GID
on_street
species
trim_cycle
inventory_date
</code>
</li>
<li>
<code>
datatype
string
string
string
string
date:M/D/YYYY
</code>
</li>
</ol>
<p>
Second,
because
the
first
column
has
been
skipped,
the
<a title="column source number" href="#dfn-column-source-number" class="internalDFN">
source
number
</a>
of
each
of
the
columns
is
offset
by
one
from
the
<a title="column number" href="#dfn-column-number" class="internalDFN">
number
</a>
of
each
column:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
titles
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
2
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
GID
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
3
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
On
Street
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
4
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
Species
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
5
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
Trim
Cycle
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
6
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
Inventory
Date
</code>
</td>
</tr>
</tbody>
</table>
<p>
Finally,
because
four
additional
rows
have
been
skipped,
the
<a title="row source number" href="#dfn-row-source-number" class="internalDFN">
source
number
</a>
of
each
of
the
rows
is
offset
by
five
from
the
<a href="#dfn-row-number" class="internalDFN">
row
number
</a>
(the
four
skipped
rows
plus
the
single
header
row):
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="4">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
R1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
6
</td>
<td>
<var>
C1.1
</var>,
<var>
C1.2
</var>,
<var>
C1.3
</var>,
<var>
C1.4
</var>,
<var>
C1.5
</var>
</td>
</tr>
<tr>
<td>
<var>
R2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
7
</td>
<td>
<var>
C2.1
</var>,
<var>
C2.2
</var>,
<var>
C2.3
</var>,
<var>
C2.4
</var>,
<var>
C2.5
</var>
</td>
</tr>
</tbody>
</table>
</section>
<section id="recognizing-tabular-data-formats" typeof="bibo:Chapter" resource="#recognizing-tabular-data-formats" property="bibo:hasPart">
<h5 id="h-recognizing-tabular-data-formats" resource="#h-recognizing-tabular-data-formats">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.3.3
</span>
<del class="diff-old">Recognising
</del>
<ins class="diff-chg">Recognizing
</ins>
Tabular
Data
Formats
</span>
</h5>
<p>
The
conventions
used
in
this
data
(invented
for
the
purpose
of
this
example)
are
in
fact
intended
to
create
an
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
annotated
tabular
data
model
</a>
which
includes
named
annotations
on
the
table
itself,
on
the
columns,
and
on
the
cells.
The
creator
of
these
conventions
could
create
a
specification
for
this
particular
tabular
data
syntax
and
register
a
media
type
for
it.
The
specification
would
include
statements
like:
</p>
<ul>
<li>
A
tab
delimiter
is
always
used.
</li>
<li>
The
first
column
is
always
ignored.
</li>
<li>
When
the
first
column
of
a
row
has
the
value
<code>
"#"
</code>,
the
second
column
is
the
name
of
an
annotation
on
the
table
and
the
values
of
the
remaining
columns
are
concatenated
to
create
the
value
of
that
annotation.
</li>
<li>
When
the
first
column
of
a
row
has
the
value
<code>
#name
</code>,
the
remaining
cells
in
the
row
provide
a
<code>
name
</code>
annotation
for
each
column
in
the
table.
</li>
<li>
When
the
first
column
of
a
row
has
the
value
<code>
#datatype
</code>,
the
remaining
cells
in
the
row
provide
<code>
datatype
</code>
/
<code>
format
</code>
annotations
for
the
cells
within
the
relevant
column,
and
these
are
interpreted
to
create
the
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
for
each
cell
in
that
column.
</li>
<li>
The
first
row
where
the
first
column
is
empty
is
a
row
of
headers;
these
provide
<code>
title
</code>
annotations
on
the
columns
in
the
table.
</li>
<li>
The
remaining
rows
make
up
the
data
of
the
table.
</li>
</ul>
<p>
Parsers
that
<del class="diff-old">recognised
</del>
<ins class="diff-chg">recognized
</ins>
the
format
could
then
build
a
more
sophisticated
annotated
tabular
data
model
using
only
the
embedded
information
in
the
<a href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
file
</a>.
They
would
extract
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>
looking
like:
</p>
<del class="diff-old">            
</del>
            <div class="example"><div class="example-title"><span>Example 23</span>: Embedded metadata in the format of the annotated tabular model</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"@context"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"http://www.w3.org/ns/csvw"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"url"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"tree-ops.csv"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dc:publisher"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"City of Palo Alto"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"dc:updated"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"12/31/2010"</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"GID"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pun">,</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"on_street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"On Street"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Species"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"trim_cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Trim Cycle"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"string"</span><span class="pln">
    </span><span class="pun">},</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"inventory_date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Inventory Date"</span><span class="pun">,</span><span class="pln">
      </span><span class="str">"datatype"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="str">"base"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"date"</span><span class="pun">,</span><span class="pln"> 
        </span><span class="str">"format"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"M/d/yyyy"</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
    </span><span class="pun">}]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
As
before,
the
result
would
be
a
single
<a href="#dfn-table" class="internalDFN">
table
</a>
<var>
T
</var>
with
five
columns
and
two
rows.
The
table
itself
would
have
two
annotations:
</p>
<dl>
<dt>
<code>
dc:publisher
</code>
</dt>
<dd>
<code>
{"@value":
"City
of
Palo
Alto"}
</code>
</dd>
<dt>
<code>
dc:updated
</code>
</dt>
<dd>
<code>
{"@value":
"12/31/2010"}
</code>
</dd>
</dl>
<p>
The
columns
have
the
annotations
shown
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="6">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
name
</th>
<th>
titles
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
2
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
GID
</code>
</td>
<td>
<code>
GID
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
3
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
on_street
</code>
</td>
<td>
<code>
On
Street
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
4
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
species
</code>
</td>
<td>
<code>
Species
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
5
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
trim_cycle
</code>
</td>
<td>
<code>
Trim
Cycle
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
6
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
inventory_date
</code>
</td>
<td>
<code>
Inventory
Date
</code>
</td>
</tr>
</tbody>
</table>
<p>
The
rows
have
the
annotations
shown
in
the
following
table,
exactly
as
in
previous
examples:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="4">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
R1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
6
</td>
<td>
<var>
C1.1
</var>,
<var>
C1.2
</var>,
<var>
C1.3
</var>,
<var>
C1.4
</var>,
<var>
C1.5
</var>
</td>
</tr>
<tr>
<td>
<var>
R2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
7
</td>
<td>
<var>
C2.1
</var>,
<var>
C2.2
</var>,
<var>
C2.3
</var>,
<var>
C2.4
</var>,
<var>
C2.5
</var>
</td>
</tr>
</tbody>
</table>
<p>
The
cells
have
the
annotations
shown
in
the
following
table.
Because
of
the
way
the
particular
tabular
data
format
has
been
specified,
these
include
additional
annotations
but
also,
for
the
<code>
Inventory
Date
</code>
column
(cells
<var>
C1.5
</var>
and
<var>
C2.5
</var>
),
have
a
<a title="cell value" href="#dfn-cell-value" class="internalDFN">
value
</a>
that
is
a
parsed
date
rather
than
an
unparsed
string.
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
column
</th>
<th>
row
</th>
<th>
string
value
</th>
<th>
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"1"
</code>
</td>
<td>
<code>
"1"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
<td>
<code>
"ADDISON
AV"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
<td>
<code>
"Celtis
australis"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C1.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R1
</var>
</td>
<td>
<code>
"10/18/2010"
</code>
</td>
<td>
<code>
2010-10-18
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C1
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"2"
</code>
</td>
<td>
<code>
"2"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C2
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
<td>
<code>
"EMERSON
ST"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C3
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
<td>
<code>
"Liquidambar
styraciflua"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C4
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
<td>
<code>
"Large
Tree
Routine
Prune"
</code>
</td>
</tr>
<tr>
<td>
<var>
C2.5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
<var>
C5
</var>
</td>
<td>
<var>
R2
</var>
</td>
<td>
<code>
"6/2/2010"
</code>
</td>
<td>
<code>
2010-06-02
</code>
</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="parsing-multiple-header-lines" typeof="bibo:Chapter" resource="#parsing-multiple-header-lines" property="bibo:hasPart">
<h4 id="h-parsing-multiple-header-lines" resource="#h-parsing-multiple-header-lines">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
8.2.4
</span>
Parsing
Multiple
Header
Lines
</span>
</h4>
<p>
The
following
example
shows
a
CSV
file
with
multiple
header
lines:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 24</span>: CSV file with multiple header lines</div><pre class="example highlight prettyprint prettyprinted"><span class="typ">Who</span><span class="pun">,</span><span class="typ">What</span><span class="pun">,,</span><span class="typ">Where</span><span class="pun">,</span><span class="pln">
</span><span class="typ">Organization</span><span class="pun">,</span><span class="typ">Sector</span><span class="pun">,</span><span class="typ">Subsector</span><span class="pun">,</span><span class="typ">Department</span><span class="pun">,</span><span class="typ">Municipality</span><span class="pln">
</span><span class="com">#org,#sector,#subsector,#adm1,#adm2</span><span class="pln">
UNICEF</span><span class="pun">,</span><span class="typ">Education</span><span class="pun">,</span><span class="typ">Teacher</span><span class="pln"> training</span><span class="pun">,</span><span class="typ">Choc</span><span class="pun">ó,</span><span class="typ">Quidb</span><span class="pun">ó</span><span class="pln">
UNICEF
</span>
<span class="pun">,
</span>
<span class="typ">
Education
</span>
<span class="pun">,
</span>
<span class="typ">
Teacher
</span>
<span class="pln">
training
</span>
<span class="pun">,
</span>
<span class="typ">
Choc
</span>
<span class="pun">
ó,
</span>
<span class="typ">
Bojay
</span>
<span class="pun">
á
</span>
</pre>
</div>
<p>
Here,
the
first
line
contains
some
grouping
titles
in
the
first
line,
which
are
not
particularly
helpful.
The
lines
following
those
contain
useful
titles
for
the
columns.
Thus
the
appropriate
configuration
for
a
dialect
description
is:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 25</span>: Dialect description for multiple header lines</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"skipRows"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln">
  </span><span class="str">"headerRowCount"</span><span class="pun">:</span><span class="pln"> </span><span class="lit">2</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
With
this
configuration,
the
table
model
contains
five
columns,
each
of
which
have
two
titles,
<del class="diff-old">summarised
</del>
<ins class="diff-chg">summarized
</ins>
in
the
following
table:
</p>
<table style="width: 100%; text-align: left">
<thead>
<tr>
<th rowspan="2">
id
</th>
<th colspan="5">
core
annotations
</th>
</tr>
<tr>
<th>
table
</th>
<th>
number
</th>
<th>
source
number
</th>
<th>
cells
</th>
<th>
titles
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<var>
C1
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
1
</td>
<td>
1
</td>
<td>
<var>
C1.1
</var>,
<var>
C2.1
</var>
</td>
<td>
<code>
<del class="diff-old">Organisation
</del>
<ins class="diff-chg">Organization
</ins>
</code>,
<code>
#org
</code>
</td>
</tr>
<tr>
<td>
<var>
C2
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
2
</td>
<td>
2
</td>
<td>
<var>
C1.2
</var>,
<var>
C2.2
</var>
</td>
<td>
<code>
Sector
</code>,
<code>
#sector
</code>
</td>
</tr>
<tr>
<td>
<var>
C3
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
3
</td>
<td>
3
</td>
<td>
<var>
C1.3
</var>,
<var>
C2.3
</var>
</td>
<td>
<code>
Subsector
</code>,
<code>
#subsector
</code>
</td>
</tr>
<tr>
<td>
<var>
C4
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
4
</td>
<td>
4
</td>
<td>
<var>
C1.4
</var>,
<var>
C2.4
</var>
</td>
<td>
<code>
Department
</code>,
<code>
#adm1
</code>
</td>
</tr>
<tr>
<td>
<var>
C5
</var>
</td>
<td>
<var>
T
</var>
</td>
<td>
5
</td>
<td>
5
</td>
<td>
<var>
C1.5
</var>,
<var>
C2.5
</var>
</td>
<td>
<code>
Municipality
</code>,
<code>
#adm2
</code>
</td>
</tr>
</tbody>
</table>
<p>
As
metadata,
this
would
look
like:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 26</span>: Extracted metadata</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
<del class="diff-old">       
</del>
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Organization"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#org"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Sector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#sector"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Subsector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#subsector"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Department"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#adm1"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="str">"Municipality"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"#adm2"</span><span class="pun">]</span><span class="pln"> </span><span class="pun">},</span><span class="pln"> 
    </span><span class="pun">]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
A
separate
metadata
file
could
contain
just
the
second
of
each
of
these
titles,
for
example:
</p>
<del class="diff-old">          
</del>
          <div class="example"><div class="example-title"><span>Example 27</span>: Metadata file</div><pre class="example highlight prettyprint prettyprinted"><span class="pun">{</span><span class="pln">
  </span><span class="str">"tableSchema"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="str">"columns"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span><span class="pln">
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"org"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#org" }, </span><span class="pln">
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"sector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#sector" }, </span><span class="pln">
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"subsector"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#subsector" }, </span><span class="pln">
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"adm1"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#adm1" }, </span><span class="pln">
      </span><span class="pun">{</span><span class="pln"> </span><span class="str">"name"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"adm2"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"titles"</span><span class="pun">:</span><span class="pln"> </span><span class="com">#adm2" }, </span><span class="pln">
    </span><span class="pun">]</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
</span>
<span class="pun">
}
</span>
</pre>
</div>
<p>
This
enables
people
from
multiple
jurisdictions
to
use
the
same
tabular
data
structures
without
having
to
use
exactly
the
same
titles
within
their
documents.
</p>
</section>
</section>
</section>
<section class="appendix" id="iana-considerations" typeof="bibo:Chapter" resource="#iana-considerations" property="bibo:hasPart">
<h2 id="h-iana-considerations" resource="#h-iana-considerations">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
A.
</span>
<ins class="diff-new">IANA
Considerations
</ins></span></h2><p><ins class="diff-new">
This
section
has
</ins><strong><ins class="diff-new">
not
yet
been
submitted
</ins></strong><ins class="diff-new">
to
IANA
for
review,
approval,
and
registration.
</ins></p><h2 id="x.well-known-csvm"><ins class="diff-new">
/.well-known/csvm
</ins></h2><dl><dt><ins class="diff-new">
URI
suffix:
</ins></dt><dd><ins class="diff-new">
csvm
</ins></dd><dt><ins class="diff-new">
Change
controller:
</ins></dt><dd><abbr title="World Wide Web Consortium"><ins class="diff-new">
W3C
</ins></abbr></dd><dt><ins class="diff-new">
Specification
document(s):
</ins></dt><dd><ins class="diff-new">
This
document,
</ins><a href="#site-wide-location-configuration" class="sectionRef sec-ref"><ins class="diff-new">
section
</ins><span class="secno"><ins class="diff-new">
5.3
</ins></span><span class="sec-title"><ins class="diff-new">
Site-wide
Location
Configuration
</ins></span></a></dd></dl></section><section class="appendix informative" id="standards" typeof="bibo:Chapter" resource="#standards" property="bibo:hasPart"><h2 id="h-standards" resource="#h-standards"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-new">
B.
</ins></span>
Existing
Standards
</span>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<p>
This
appendix
outlines
various
ways
in
which
CSV
is
defined.
</p>
<section id="rfc" typeof="bibo:Chapter" resource="#rfc" property="bibo:hasPart">
<h3 id="h-rfc" resource="#h-rfc">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.1
</del>
<ins class="diff-chg">B.1
</ins>
</span>
RFC
4180
</span>
</h3>
<p>
[
<cite>
<a class="bibref" href="#bib-RFC4180">
RFC4180
</a>
</cite>
]
defines
CSV
with
the
following
ABNF
grammar:
</p>
        <pre>file = [header CRLF] record *(CRLF record) [CRLF]
header = name *(COMMA name)
record = field *(COMMA field)
name = field
field = (escaped / non-escaped)
escaped = DQUOTE *(TEXTDATA / COMMA / CR / LF / 2DQUOTE) DQUOTE
non-escaped = *TEXTDATA
COMMA = %x2C
CR = %x0D
DQUOTE =  %x22
LF = %x0A
CRLF = CR LF
TEXTDATA =  %x20-21 / %x23-2B / %x2D-7E
</pre>
<p>
Of
particular
note
here
are:
</p>
<ul>
<li>
The
production
for
<code>
TEXTDATA
</code>
indicates
that
only
non-control
ASCII
characters
are
permitted
within
a
CSV
file.
This
restriction
is
routinely
ignored
in
practice,
and
is
impractical
on
the
international
web.
</li>
<li>
Lines
should
be
ended
with
<code>
CRLF
</code>.
This
makes
it
harder
to
produce
CSV
files
on
Unix-based
systems
where
the
usual
line
ending
is
<code>
LF
</code>.
</li>
<li>
The
header
line
is
optional;
a
<code>
header
</code>
parameter
on
the
media
type
indicates
whether
the
header
is
present
or
not.
</li>
<li>
Fields
may
be
escaped
by
wrapping
them
in
double
quotes;
any
double
quotes
within
the
field
must
be
escaped
with
two
double
quotes
(
<code>
""
</code>
).
</li>
</ul>
</section>
<section id="excel" typeof="bibo:Chapter" resource="#excel" property="bibo:hasPart">
<h3 id="h-excel" resource="#h-excel">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.2
</del>
<ins class="diff-chg">B.2
</ins>
</span>
Excel
</span>
</h3>
<p>
Excel
is
a
common
tool
for
both
creating
and
reading
CSV
documents,
and
therefore
the
CSV
that
it
produces
is
a
de
facto
standard.
</p>
<div class="note">
<div class="note-title" aria-level="4" role="heading" id="h-note22">
<span>
Note
</span>
</div>
<p class="">
The
following
describes
the
<del class="diff-old">behaviour
</del>
<ins class="diff-chg">behavior
</ins>
of
Microsoft
Excel
for
Mac
2011
with
an
English
locale.
Further
testing
is
needed
to
see
the
<del class="diff-old">behaviour
</del>
<ins class="diff-chg">behavior
</ins>
of
Excel
in
other
situations.
</p>
</div>
<section id="saved-csv" typeof="bibo:Chapter" resource="#saved-csv" property="bibo:hasPart">
<h4 id="h-saved-csv" resource="#h-saved-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.2.1
</del>
<ins class="diff-chg">B.2.1
</ins>
</span>
Saved
CSV
</span>
</h4>
<p>
Excel
generates
CSV
files
encoded
using
Windows-1252
with
<code>
LF
</code>
line
endings.
Characters
that
cannot
be
represented
within
Windows-1252
are
replaced
by
underscores.
Only
those
cells
that
need
escaping
<del class="diff-old">(eg
</del>
<ins class="diff-chg">(e.g.
</ins>
because
they
contain
commas
or
double
quotes)
are
escaped,
and
double
quotes
are
escaped
with
two
double
quotes.
</p>
<p>
Dates
and
numbers
are
formatted
as
displayed,
which
means
that
formatting
can
lead
to
information
being
lost
or
becoming
inconsistent.
</p>
</section>
<section id="opened-csv" typeof="bibo:Chapter" resource="#opened-csv" property="bibo:hasPart">
<h4 id="h-opened-csv" resource="#h-opened-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.2.2
</del>
<ins class="diff-chg">B.2.2
</ins>
</span>
Opened
CSV
</span>
</h4>
<p>
When
opening
CSV
files,
Excel
interprets
CSV
files
saved
in
UTF-8
as
being
encoded
as
Windows-1252
(whether
or
not
a
<a href="http://en.wikipedia.org/wiki/Byte_order_mark">
<abbr title="Byte Order Mark">
BOM
</abbr>
</a>
is
present).
It
correctly
deals
with
double
quoted
cells,
except
that
it
converts
line
breaks
within
cells
into
spaces.
It
understands
<code>
CRLF
</code>
as
a
line
break.
It
detects
dates
(formatted
as
<code>
YYYY-MM-DD
</code>
)
and
formats
them
in
the
default
date
formatting
for
files.
</p>
</section>
<section id="imported-csv" typeof="bibo:Chapter" resource="#imported-csv" property="bibo:hasPart">
<h4 id="h-imported-csv" resource="#h-imported-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.2.3
</del>
<ins class="diff-chg">B.2.3
</ins>
</span>
Imported
CSV
</span>
</h4>
<p>
Excel
provides
more
control
when
importing
CSV
files
into
Excel.
However,
it
does
not
properly
understand
UTF-8
(with
or
without
<abbr title="Byte Order Mark">
BOM
</abbr>
).
It
does
however
properly
understand
UTF-16
and
can
read
non-ASCII
characters
from
a
UTF-16-encoded
file.
</p>
<p>
A
particular
quirk
in
the
importing
of
CSV
is
that
if
a
cell
contains
a
line
break,
the
final
double
quote
that
escapes
the
cell
will
be
included
within
it.
</p>
</section>
<section id="copied-tabular-data" typeof="bibo:Chapter" resource="#copied-tabular-data" property="bibo:hasPart">
<h4 id="h-copied-tabular-data" resource="#h-copied-tabular-data">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.2.4
</del>
<ins class="diff-chg">B.2.4
</ins>
</span>
Copied
Tabular
Data
</span>
</h4>
<p>
When
tabular
data
is
copied
from
Excel,
it
is
copied
in
a
tab-delimited
format,
with
<code>
LF
</code>
line
breaks.
</p>
</section>
</section>
<section id="google" typeof="bibo:Chapter" resource="#google" property="bibo:hasPart">
<h3 id="h-google" resource="#h-google">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.3
</del>
<ins class="diff-chg">B.3
</ins>
</span>
Google
Spreadsheets
</span>
</h3>
<section id="downloading-csv" typeof="bibo:Chapter" resource="#downloading-csv" property="bibo:hasPart">
<h4 id="h-downloading-csv" resource="#h-downloading-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.3.1
</del>
<ins class="diff-chg">B.3.1
</ins>
</span>
Downloading
CSV
</span>
</h4>
<p>
Downloaded
CSV
files
are
encoded
in
UTF-8,
without
a
<a href="http://en.wikipedia.org/wiki/Byte_order_mark">
<abbr title="Byte Order Mark">
BOM
</abbr>
</a>,
and
with
<code>
LF
</code>
line
endings.
Dates
and
numbers
are
formatted
as
they
appear
within
the
spreadsheet.
</p>
</section>
<section id="importing-csv" typeof="bibo:Chapter" resource="#importing-csv" property="bibo:hasPart">
<h4 id="h-importing-csv" resource="#h-importing-csv">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.3.2
</del>
<ins class="diff-chg">B.3.2
</ins>
</span>
Importing
CSV
</span>
</h4>
<p>
CSV
files
can
be
imported
as
UTF-8
(with
or
without
<abbr title="Byte Order Mark">
BOM
</abbr>
).
<code>
CRLF
</code>
line
endings
are
correctly
<del class="diff-old">recognised.
</del>
<ins class="diff-chg">recognized.
</ins>
Dates
are
reformatted
to
the
default
date
format
on
load.
</p>
</section>
</section>
<section id="csv-files-in-a-tabular-data-package" typeof="bibo:Chapter" resource="#csv-files-in-a-tabular-data-package" property="bibo:hasPart">
<h3 id="h-csv-files-in-a-tabular-data-package" resource="#h-csv-files-in-a-tabular-data-package">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">A.4
</del>
<ins class="diff-chg">B.4
</ins>
</span>
CSV
Files
in
a
Tabular
Data
Package
</span>
</h3>
<p>
<a href="http://dataprotocols.org/tabular-data-package/#csv-files">
Tabular
Data
Packages
</a>
place
the
following
restrictions
on
CSV
files:
</p>
<blockquote>
<p>
As
a
starting
point,
CSV
files
included
in
a
Tabular
Data
Package
package
must
conform
to
the
RFC
for
CSV
(4180
-
Common
Format
and
MIME
Type
for
Comma-Separated
Values
(CSV)
Files).
In
addition:
</p>
<ul>
<li>
<p>
File
names
<em class="rfc2119" title="MUST">
MUST
</em>
end
with
<code>.csv
</code>.
</p>
</li>
<li>
<p>
Files
<em class="rfc2119" title="MUST">
MUST
</em>
be
encoded
as
UTF-8.
</p>
</li>
<li>
<p>
Files
<em class="rfc2119" title="MUST">
MUST
</em>
have
a
single
header
row.
This
row
<em class="rfc2119" title="MUST">
MUST
</em>
be
the
first
row
in
the
file.
</p>
<ul>
<li>
<p>
Terminology:
each
column
in
the
CSV
file
is
termed
a
<em>
field
</em>
and
its
<code>
name
</code>
is
the
string
in
that
column
in
the
header
row.
</p>
</li>
<li>
<p>
The
<code>
name
</code>
<em class="rfc2119" title="MUST">
MUST
</em>
be
unique
amongst
fields,
<em class="rfc2119" title="MUST">
MUST
</em>
contain
at
least
one
character,
and
<em class="rfc2119" title="MUST">
MUST
</em>
conform
to
the
character
restrictions
defined
for
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#column-name" class="externalDFN">
<code>
name
</code>
</a>
property.
</p>
</li>
</ul>
</li>
<li>
<p>
Rows
in
the
file
<em class="rfc2119" title="MUST NOT">
MUST
NOT
</em>
contain
more
fields
than
are
in
the
header
row
(though
they
may
contain
less).
</p>
</li>
<li>
<p>
Each
file
<em class="rfc2119" title="MUST">
MUST
</em>
have
an
entry
in
the
<code>
tables
</code>
array
in
the
<code>
datapackage.json
</code>
file.
</p>
</li>
<li>
<p>
The
resource
metadata
<em class="rfc2119" title="MUST">
MUST
</em>
include
a
<code>
tableSchema
</code>
attribute
whose
value
<em class="rfc2119" title="MUST">
MUST
</em>
be
a
valid
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-schema-description" class="externalDFN">
schema
description
</a>.
</p>
</li>
<li>
<p>
All
fields
in
the
CSV
files
<em class="rfc2119" title="MUST">
MUST
</em>
be
described
in
the
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-schema-description" class="externalDFN">
schema
description
</a>.
</p>
</li>
</ul>
<p>
CSV
files
generated
by
different
applications
often
vary
in
their
syntax,
e.g.
use
of
quoting
characters,
delimiters,
etc.
To
encourage
conformance,
CSV
files
in
a
CSV
files
in
a
Tabular
Data
Package
<em class="rfc2119" title="SHOULD">
SHOULD
</em>:
</p>
<ul>
<li>
Use
","
as
field
delimiters.
</li>
<li>
Use
<code>
CRLF
</code>
(
<code>
U+000D
U+000A
</code>
)
or
<code>
LF
</code>
(
<code>
U+000A
</code>
)
as
line
terminators.
</li>
</ul>
<p>
If
a
CSV
file
does
not
follow
these
rules
then
its
specific
CSV
dialect
<em class="rfc2119" title="MUST">
MUST
</em>
be
documented.
The
resource
hash
for
the
resource
in
the
<code>
datapackage.json
</code>
descriptor
<em class="rfc2119" title="MUST">
MUST
</em>:
</p>
<ul>
<li>
Include
a
<code>
dialect
</code>
key
that
conforms
to
that
described
in
the
<a href="http://dataprotocols.org/csv-dialect/">
CSV
Dialect
Description
Format
</a>.
</li>
</ul>
<p>
Applications
processing
the
CSV
file
<em class="rfc2119" title="SHOULD">
SHOULD
</em>
read
use
the
<code>
dialect
</code>
of
the
CSV
file
to
guide
parsing.
</p>
</blockquote>
</section>
<div class="note">
<div class="note-title" aria-level="3" role="heading" id="h-note23">
<span>
Note
</span>
</div>
<div class="">
<p>
To
replicate
the
findings
above,
test
files
which
include
non-ASCII
characters,
double
quotes,
and
line
breaks
within
cells
are:
</p>
<ul>
<li>
<a href="test-utf8.csv">
test-utf8.csv
</a>
</li>
<li>
<a href="test-utf8-bom.csv">
test-utf8-bom.csv
</a>
</li>
<li>
<a href="test-utf16.csv">
test-utf16.csv
</a>
</li>
<li>
<a href="test-utf16-bom.csv">
test-utf16-bom.csv
</a>
</li>
<li>
<a href="test.xlsx">
test.xslx
</a>
</li>
<li>
<a href="test.xls">
test.xsl
</a>
</li>
</ul>
</div>
</div>
</section>
<section class="appendix informative" id="acknowledgements" typeof="bibo:Chapter" resource="#acknowledgements" property="bibo:hasPart">
<h2 id="h-acknowledgements" resource="#h-acknowledgements">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">B.
</del>
<ins class="diff-chg">C.
</ins>
</span>
Acknowledgements
</span>
</h2>
<p>
<em>
This
section
is
non-normative.
</em>
</p>
<div>
At
the
time
of
publication,
the
following
individuals
had
participated
in
the
Working
Group,
in
the
order
of
their
first
name:
Adam
Retter,
Alf
Eaton,
Anastasia
Dimou,
Andy
Seaborne,
Axel
Polleres,
Christopher
Gutteridge,
Dan
Brickley,
Davide
Ceolin,
Eric
Stephan,
Erik
Mannens,
Gregg
Kellogg,
Ivan
Herman,
Jeni
Tennison,
Jeremy
Tandy,
Jürgen
Umbrich,
Rufus
Pollock,
Stasinos
Konstantopoulos,
William
Ingram,
and
Yakov
Shafranovich.
</div>
</section>
<section class="appendix" id="changes" typeof="bibo:Chapter" resource="#changes" property="bibo:hasPart">
<h2 id="h-changes" resource="#h-changes">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">C.
</del>
<ins class="diff-chg">D.
</ins></span><ins class="diff-chg">
Changes
from
previous
drafts
</ins></span></h2><section id="changes-since-the-working-draft-of-16-april-2015" typeof="bibo:Chapter" resource="#changes-since-the-working-draft-of-16-april-2015" property="bibo:hasPart"><h3 id="h-changes-since-the-working-draft-of-16-april-2015" resource="#h-changes-since-the-working-draft-of-16-april-2015"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
D.1
</ins></span><ins class="diff-chg">
Changes
since
the
working
draft
of
16
April
2015
</ins></span></h3><ul><li><ins class="diff-chg">
Merging
of
metadata
files
has
been
removed
as
it
was
determined
not
to
be
necessary.
</ins></li><li><ins class="diff-chg">
Embedded
metadata
now
used
for
compatibility
check
only,
or
as
metadata
if
no
other
is
found.
</ins></li><li><ins class="diff-chg">
The
</ins><a title="row titles" href="#dfn-row-titles" class="internalDFN"><ins class="diff-chg">
titles
</ins></a><ins class="diff-chg">
annotation
has
been
added
to
rows,
and
a
section
added
describing
the
way
in
which
screen
readers
should
announce
rows
and
columns
to
users
</ins></li><li><ins class="diff-chg">
A
Datatype
description
may
have
an
</ins><a title="datatype id" href="#dfn-datatype-id" class="internalDFN"><ins class="diff-chg">
id
</ins></a><ins class="diff-chg">
annotation
to
reference
an
external
datatype
definition
in
XSD,
OWL,
or
some
other
format.
</ins></li><li><ins class="diff-chg">
Renamed
the
direction
annotation
to
</ins><a href="#dfn-table-direction" class="internalDFN"><ins class="diff-chg">
table
direction
</ins></a>.</li><li><ins class="diff-chg">
The
built-in
locations
for
locating
metadata
files
were
removed
in
favor
of
a
site-wide
configuration
file,
which
uses
the
original
values
for
file-specific
and
directory-specific
metadata
locations
as
the
default
value.
See
</ins><a href="#site-wide-location-configuration" class="sectionRef sec-ref"><ins class="diff-chg">
section
</ins><span class="secno"><ins class="diff-chg">
5.3
</ins></span><span class="sec-title"><ins class="diff-chg">
Site-wide
Location
Configuration
</ins></span></a>.</li><li><ins class="diff-chg">
The
</ins><a title="datatype format pattern" href="#dfn-datatype-format-pattern" class="internalDFN"><ins class="diff-chg">
pattern
</ins></a><ins class="diff-chg">
for
numeric
types
is
now
a
number
format
pattern
rather
than
a
regular
expression.
</ins></li></ul></section><section id="changes-since-the-working-draft-of-08-january-2015" typeof="bibo:Chapter" resource="#changes-since-the-working-draft-of-08-january-2015" property="bibo:hasPart"><h3 id="h-changes-since-the-working-draft-of-08-january-2015" resource="#h-changes-since-the-working-draft-of-08-january-2015"><span property="xhv:role" resource="xhv:heading"><span class="secno"><ins class="diff-chg">
D.2
</ins>
</span>
Changes
since
the
working
draft
of
08
January
2015
</span>
</h3>
<p>
The
document
has
undergone
substantial
changes
since
the
last
working
draft.
Below
are
some
of
the
changes
made:
</p>
<ul>
<li>
Describe
all
core
annotations
on
a
<a href="#dfn-group-of-tables" class="internalDFN">
group
of
tables
</a>,
<a title="table" href="#dfn-table" class="internalDFN">
tables
</a>,
<a title="column" href="#dfn-column" class="internalDFN">
columns
</a>,
<a title="row" href="#dfn-row" class="internalDFN">
rows
</a>,
and
<a title="datatype" href="#dfn-datatype" class="internalDFN">
datatypes
</a>.
</li>
<li>
Removed
the
<em>
Core
Tabular
Data
Model
</em>,
as
this
can
be
derived
from
the
<a href="#dfn-annotated-tabular-data-model" class="internalDFN">
Annotated
Tabular
Data
Model
</a>
with
an
appropriate
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/#dfn-dialect-description" class="externalDFN">
dialect
description
</a>.
</li>
<li>
Describe
the
process
of
<a href="#locating-metadata">
locating
metadata
</a>,
using
this
to
create
<a href="#dfn-embedded-metadata" class="internalDFN">
embedded
metadata
</a>,
<a href="#processing-tables">
processing
</a>
<a title="tabular data file" href="#dfn-tabular-data-file" class="internalDFN">
tabular
data
files
</a>,
and
<a href="#creating-annotated-tables">
creating
annotated
tables
</a>.
</li>
<li>
Move
details
on
<a href="#datatypes">
datatypes
</a>
and
<a href="#cells">
parsing
cells
</a>.
Datatypes
include
detailed
formats
for
different
datatypes.
</li>
</ul>
</section>
</section>
<section id="references" class="appendix" typeof="bibo:Chapter" resource="#references" property="bibo:hasPart">
<h2 id="h-references" resource="#h-references">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">D.
</del>
<ins class="diff-chg">E.
</ins>
</span>
References
</span>
</h2>
<section id="normative-references" typeof="bibo:Chapter" resource="#normative-references" property="bibo:hasPart">
<h3 id="h-normative-references" resource="#h-normative-references">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">D.1
</del>
<ins class="diff-chg">E.1
</ins>
</span>
Normative
references
</span>
</h3>
<dl class="bibliography" resource="">
<dt id="bib-BCP47">
[BCP47]
</dt>
<dd>
A.
Phillips;
M.
Davis.
<a href="https://tools.ietf.org/html/bcp47" property="dc:requires">
<cite>
Tags
for
Identifying
Languages
</cite>
</a>.
September
2009.
IETF
Best
Current
Practice.
URL:
<del class="diff-old">http://tools.ietf.org/html/bcp47
</del>
<a href="https://tools.ietf.org/html/bcp47" property="dc:requires">
<ins class="diff-chg">https://tools.ietf.org/html/bcp47
</ins>
</a>
</dd>
<dt id="bib-BIDI">
[BIDI]
</dt>
<dd>
Mark
Davis;
Aharon
Lanin;
Andrew
Glass.
<a href="http://www.unicode.org/reports/tr9/" property="dc:requires">
<cite>
Unicode
Bidirectional
Algorithm
</cite>
</a>.
5
June
2014.
Unicode
Standard
Annex
#9.
URL:
<a href="http://www.unicode.org/reports/tr9/" property="dc:requires">
http://www.unicode.org/reports/tr9/
</a>
</dd>
<dt id="bib-ECMASCRIPT">
[ECMASCRIPT]
</dt>
<dd>
Allen
Wirfs-Brock.
<a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires">
<cite>
ECMA-262
<ins class="diff-new">6th
Edition,
The
</ins>
ECMAScript
<ins class="diff-new">2015
</ins>
Language
<del class="diff-old">Specification,
Edition
6
</del>
<ins class="diff-chg">Specification
</ins>
</cite>
</a>.
<del class="diff-old">Draft.
</del>
<ins class="diff-chg">June
2015.
Standard.
</ins>
URL:
<del class="diff-old">http://people.mozilla.org/~jorendorff/es6-draft.html
</del>
<a href="http://www.ecma-international.org/ecma-262/6.0/" property="dc:requires">
<ins class="diff-chg">http://www.ecma-international.org/ecma-262/6.0/
</ins>
</a>
</dd>
<dt id="bib-ISO8601">
[ISO8601]
</dt>
<dd>
<cite>
Representation
of
dates
and
times.
</cite>
International
Organization
for
Standardization.
2004.
ISO
8601:2004.
URL:
<a href="http://www.iso.org/iso/catalogue_detail?csnumber=40874" property="dc:requires">
http://www.iso.org/iso/catalogue_detail?csnumber=40874
</a>
</dd>
<dt id="bib-JSON-LD">
[JSON-LD]
</dt>
<dd>
Manu
Sporny;
Gregg
Kellogg;
Markus
Lanthaler.
<a href="http://www.w3.org/TR/json-ld/" property="dc:requires">
<cite>
JSON-LD
1.0
</cite>
</a>.
16
January
2014.
W3C
Recommendation.
URL:
<a href="http://www.w3.org/TR/json-ld/" property="dc:requires">
http://www.w3.org/TR/json-ld/
</a>
</dd>
<dt id="bib-RFC2119">
[RFC2119]
</dt>
<dd>
S.
Bradner.
<a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">
<cite>
Key
words
for
use
in
RFCs
to
Indicate
Requirement
Levels
</cite>
</a>.
March
1997.
Best
Current
Practice.
URL:
<a href="https://tools.ietf.org/html/rfc2119" property="dc:requires">
https://tools.ietf.org/html/rfc2119
</a>
</dd>
<dt id="bib-RFC3968">
<ins class="diff-new">[RFC3968]
</ins></dt><dd><ins class="diff-new">
G.
Camarillo.
</ins><a href="https://tools.ietf.org/html/rfc3968" property="dc:requires"><cite><ins class="diff-new">
The
Internet
Assigned
Number
Authority
(IANA)
Header
Field
Parameter
Registry
for
the
Session
Initiation
Protocol
(SIP)
</ins></cite></a>.<ins class="diff-new">
December
2004.
Best
Current
Practice.
URL:
</ins><a href="https://tools.ietf.org/html/rfc3968" property="dc:requires"><ins class="diff-new">
https://tools.ietf.org/html/rfc3968
</ins></a></dd>
<dt id="bib-RFC4180">
[RFC4180]
</dt>
<dd>
Y.
Shafranovich.
<a href="https://tools.ietf.org/html/rfc4180" property="dc:requires">
<cite>
Common
Format
and
MIME
Type
for
Comma-Separated
Values
(CSV)
Files
</cite>
</a>.
October
2005.
Informational.
URL:
<a href="https://tools.ietf.org/html/rfc4180" property="dc:requires">
https://tools.ietf.org/html/rfc4180
</a>
</dd>
<dt id="bib-RFC5785">
<ins class="diff-new">[RFC5785]
</ins></dt><dd><ins class="diff-new">
M.
Nottingham;
E.
Hammer-Lahav.
</ins><a href="https://tools.ietf.org/html/rfc5785" property="dc:requires"><cite><ins class="diff-new">
Defining
Well-Known
Uniform
Resource
Identifiers
(URIs)
</ins></cite></a>.<ins class="diff-new">
April
2010.
Proposed
Standard.
URL:
</ins><a href="https://tools.ietf.org/html/rfc5785" property="dc:requires"><ins class="diff-new">
https://tools.ietf.org/html/rfc5785
</ins></a></dd>
<dt id="bib-UAX35">
[UAX35]
</dt>
<dd>
Mark
Davis;
CLDR
committee
members.
<a href="http://www.unicode.org/reports/tr35/tr35-31/tr35.html" property="dc:requires">
<cite>
Unicode
Locale
Data
Markup
Language
(LDML)
</cite>
</a>.
15
March
2013.
Unicode
Standard
Annex
#35.
URL:
<a href="http://www.unicode.org/reports/tr35/tr35-31/tr35.html" property="dc:requires">
http://www.unicode.org/reports/tr35/tr35-31/tr35.html
</a>
</dd>
<del class="diff-old">[encoding]
</del>
<dt id="bib-UNICODE">
<ins class="diff-chg">[UNICODE]
</ins>
</dt>
<dd>
<del class="diff-old">Anne
van
Kesteren;
Joshua
Bell;
Addison
Phillips.
</del>
<a href="http://www.unicode.org/versions/latest/" property="dc:requires">
<cite>
<del class="diff-old">Encoding
</del>
<ins class="diff-chg">The
Unicode
Standard
</ins>
</cite>
</a>.
<del class="diff-old">16
September
2014.
W3C
Candidate
Recommendation.
</del>
URL:
<del class="diff-old">http://www.w3.org/TR/encoding/
</del>
<a href="http://www.unicode.org/versions/latest/" property="dc:requires">
<ins class="diff-chg">http://www.unicode.org/versions/latest/
</ins></a></dd><dt id="bib-URI-TEMPLATE"><ins class="diff-chg">
[URI-TEMPLATE]
</ins></dt><dd><ins class="diff-chg">
J.
Gregorio;
R.
Fielding;
M.
Hadley;
M.
Nottingham;
D.
Orchard.
</ins><a href="https://tools.ietf.org/html/rfc6570" property="dc:requires"><cite><ins class="diff-chg">
URI
Template
</ins></cite></a>.<ins class="diff-chg">
March
2012.
Proposed
Standard.
URL:
</ins><a href="https://tools.ietf.org/html/rfc6570" property="dc:requires"><ins class="diff-chg">
https://tools.ietf.org/html/rfc6570
</ins>
</a>
</dd>
<dt id="bib-tabular-metadata">
[tabular-metadata]
</dt>
<dd>
Jeni
Tennison;
Gregg
Kellogg.
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/" property="dc:requires">
<cite>
Metadata
Vocabulary
for
Tabular
Data
</cite>
</a>.
W3C
Working
Draft.
URL:
<del class="diff-old">http://www.w3.org/TR/2015/WD-tabular-metadata-20150416/
</del>
<a href="http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/" property="dc:requires">
<ins class="diff-chg">http://www.w3.org/TR/2015/CR-tabular-metadata-20150716/
</ins>
</a>
</dd>
<dt id="bib-xmlschema11-2">
[xmlschema11-2]
</dt>
<dd>
David
Peterson;
Sandy
Gao;
Ashok
Malhotra;
Michael
Sperberg-McQueen;
Henry
Thompson;
Paul
V.
Biron
et
al.
<a href="http://www.w3.org/TR/xmlschema11-2/" property="dc:requires">
<cite>
W3C
XML
Schema
Definition
Language
(XSD)
1.1
Part
2:
Datatypes
</cite>
</a>.
5
April
2012.
W3C
Recommendation.
URL:
<a href="http://www.w3.org/TR/xmlschema11-2/" property="dc:requires">
http://www.w3.org/TR/xmlschema11-2/
</a>
</dd>
</dl>
</section>
<section id="informative-references" typeof="bibo:Chapter" resource="#informative-references" property="bibo:hasPart">
<h3 id="h-informative-references" resource="#h-informative-references">
<span property="xhv:role" resource="xhv:heading">
<span class="secno">
<del class="diff-old">D.2
</del>
<ins class="diff-chg">E.2
</ins>
</span>
Informative
references
</span>
</h3>
<dl class="bibliography" resource="">
<dt id="bib-EBNF-NOTATION">
[EBNF-NOTATION]
</dt>
<dd>
Tim
Bray;
Jean
Paoli;
C.
Michael
Sperberg-McQueen;
Eve
Maler;
François
Yergau.
<a href="http://www.w3.org/TR/xml/#sec-notation" property="dc:references">
<cite>
EBNF
Notation
</cite>
</a>.
W3C
Recommendation.
URL:
<a href="http://www.w3.org/TR/xml/#sec-notation" property="dc:references">
http://www.w3.org/TR/xml/#sec-notation
</a>
</dd>
<dt id="bib-RFC7111">
[RFC7111]
</dt>
<dd>
M.
Hausenblas;
E.
Wilde;
J.
Tennison.
<a href="https://tools.ietf.org/html/rfc7111" property="dc:references">
<cite>
URI
Fragment
Identifiers
for
the
text/csv
Media
Type
</cite>
</a>.
January
2014.
Informational.
URL:
<a href="https://tools.ietf.org/html/rfc7111" property="dc:references">
https://tools.ietf.org/html/rfc7111
</a>
</dd>
<dt id="bib-UAX15">
<ins class="diff-new">[UAX15]
</ins></dt><dd><ins class="diff-new">
Mark
Davis;
Ken
Whistler.
</ins><a href="http://www.unicode.org/reports/tr15" property="dc:references"><cite><ins class="diff-new">
Unicode
Normalization
Forms
</ins></cite></a>.<ins class="diff-new">
31
August
2012.
Unicode
Standard
Annex
#15.
URL:
</ins><a href="http://www.unicode.org/reports/tr15" property="dc:references"><ins class="diff-new">
http://www.unicode.org/reports/tr15
</ins></a></dd>
<dt id="bib-annotation-model">
[annotation-model]
</dt>
<dd>
Robert
Sanderson;
Paolo
Ciccarese.
<a href="http://www.w3.org/TR/annotation-model/" property="dc:references">
<cite>
Web
Annotation
Data
Model
</cite>
</a>.
11
December
2014.
W3C
Working
Draft.
URL:
<a href="http://www.w3.org/TR/annotation-model/" property="dc:references">
http://www.w3.org/TR/annotation-model/
</a>
</dd>
<dt id="bib-csv2json">
[csv2json]
</dt>
<dd>
Jeremy
Tandy;
Ivan
Herman.
<a href="http://www.w3.org/TR/2015/CR-csv2json-20150716/" property="dc:references">
<cite>
Generating
JSON
from
Tabular
Data
on
the
Web
</cite>
</a>.
W3C
Working
Draft.
URL:
<del class="diff-old">http://www.w3.org/TR/2015/WD-csv2json-20150416/
</del>
<a href="http://www.w3.org/TR/2015/CR-csv2json-20150716/" property="dc:references">
<ins class="diff-chg">http://www.w3.org/TR/2015/CR-csv2json-20150716/
</ins>
</a>
</dd>
<dt id="bib-csv2rdf">
[csv2rdf]
</dt>
<dd>
Jeremy
Tandy;
Ivan
Herman;
Gregg
Kellogg.
<a href="http://www.w3.org/TR/2015/CR-csv2rdf-20150716/" property="dc:references">
<cite>
Generating
RDF
from
Tabular
Data
on
the
Web
</cite>
</a>.
W3C
Working
Draft.
URL:
<del class="diff-old">http://www.w3.org/TR/2015/WD-csv2rdf-20150416/
</del>
<a href="http://www.w3.org/TR/2015/CR-csv2rdf-20150716/" property="dc:references">
<ins class="diff-chg">http://www.w3.org/TR/2015/CR-csv2rdf-20150716/
</ins></a></dd><dt id="bib-encoding"><ins class="diff-chg">
[encoding]
</ins></dt><dd><ins class="diff-chg">
Anne
van
Kesteren;
Joshua
Bell;
Addison
Phillips.
</ins><a href="http://www.w3.org/TR/encoding/" property="dc:references"><cite><ins class="diff-chg">
Encoding
</ins></cite></a>.<ins class="diff-chg">
16
September
2014.
W3C
Candidate
Recommendation.
URL:
</ins><a href="http://www.w3.org/TR/encoding/" property="dc:references"><ins class="diff-chg">
http://www.w3.org/TR/encoding/
</ins>
</a>
</dd>
</dl>
</section>
</section>
</body>
</html>
