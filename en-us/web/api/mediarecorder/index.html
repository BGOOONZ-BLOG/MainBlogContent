<p>{{APIRef(“Media Recorder API”)}}</p>
<p>The <strong><code>MediaRecorder</code></strong> interface of the <a href="/en-US/docs/Web/API/MediaStream_Recording_API">MediaStream Recording API</a> provides functionality to easily record media. It is created using the {{domxref(“MediaRecorder.MediaRecorder”, “MediaRecorder()”)}} constructor.</p>
<h2 id="constructor">Constructor</h2>
<ul>
<li>{{domxref(“MediaRecorder.MediaRecorder”, “MediaRecorder()”)}}
<ul>
<li>: Creates a new <code>MediaRecorder</code> object, given a {{domxref(“MediaStream”)}} to record. Options are available to do things like set the container’s MIME type (such as <code>"video/webm"</code> or <code>"video/mp4"</code>) and the bit rates of the audio and video tracks or a single overall bit rate.</li>
</ul></li>
</ul>
<h2 id="properties">Properties</h2>
<ul>
<li>{{domxref(“MediaRecorder.mimeType”)}} {{readonlyInline}}
<ul>
<li>: Returns the MIME type that was selected as the recording container for the <code>MediaRecorder</code> object when it was created.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.state”)}} {{readonlyInline}}
<ul>
<li>: Returns the current state of the <code>MediaRecorder</code> object (<code>inactive</code>, <code>recording</code>, or <code>paused</code>.)</li>
</ul></li>
<li>{{domxref(“MediaRecorder.stream”)}} {{readonlyInline}}
<ul>
<li>: Returns the stream that was passed into the constructor when the <code>MediaRecorder</code> was created.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.ignoreMutedMedia”)}} {{deprecated_inline}} {{non-standard_inline}}
<ul>
<li>: Indicates whether the <code>MediaRecorder</code> instance will record input when the input {{domxref(“MediaStreamTrack”)}} is muted. If this attribute is <code>false</code>, <code>MediaRecorder</code> will record silence for audio and black frames for video. The default is <code>false</code>.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.videoBitsPerSecond”)}} {{readonlyInline}} {{experimental_inline}}
<ul>
<li>: Returns the video encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided).</li>
</ul></li>
<li>{{domxref(“MediaRecorder.audioBitsPerSecond”)}} {{readonlyInline}} {{experimental_inline}}
<ul>
<li>: Returns the audio encoding bit rate in use. This may differ from the bit rate specified in the constructor (if it was provided).</li>
</ul></li>
</ul>
<h2 id="methods">Methods</h2>
<ul>
<li>{{domxref(“MediaRecorder.pause()”)}}
<ul>
<li>: Pauses the recording of media.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.requestData()”)}}
<ul>
<li>: Requests a {{domxref(“Blob”)}} containing the saved data received thus far (or since the last time <code>requestData()</code> was called. After calling this method, recording continues, but in a new <code>Blob</code>.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.resume()”)}}
<ul>
<li>: Resumes recording of media after having been paused.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.start()”)}}
<ul>
<li>: Begins recording media; this method can optionally be passed a <code>timeslice</code> argument with a value in milliseconds. If this is specified, the media will be captured in separate chunks of that duration, rather than the default behavior of recording the media in a single large chunk.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.stop()”)}}
<ul>
<li>: Stops recording, at which point a {{event(“dataavailable”)}} event containing the final <code>Blob</code> of saved data is fired. No more recording occurs.</li>
</ul></li>
</ul>
<h2 id="static-methods">Static methods</h2>
<ul>
<li>{{domxref(“MediaRecorder.isTypeSupported()”)}}
<ul>
<li>: A static method which returns a <code>true</code> or <code>false</code> value indicating if the given MIME media type is supported by the current user agent.</li>
</ul></li>
</ul>
<h2 id="event-handlers">Event handlers</h2>
<ul>
<li>{{domxref(“MediaRecorder.ondataavailable”)}}
<ul>
<li>: Called to handle the {{event(“dataavailable”)}} event, which is periodically triggered each time <code>timeslice</code> milliseconds of media have been recorded (or when the entire media has been recorded, if <code>timeslice</code> wasn’t specified). The event, of type {{domxref(“BlobEvent”)}}, contains the recorded media in its {{domxref(“BlobEvent.data”, “data”)}} property. You can then collect and act upon that recorded media data using this event handler.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onerror”)}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“error”)}} event, including reporting errors that arise with media recording. These are fatal errors that stop recording. The received event is based on the {{domxref(“MediaRecorderErrorEvent”)}} interface, whose {{domxref(“MediaRecorderErrorEvent.error”, “error”)}} property contains a {{domxref(“DOMException”)}} that describes the actual error that occurred.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onpause”)}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“pause”)}} event, which occurs when media recording is paused.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onresume”)}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“resume”)}} event, which occurs when media recording resumes after being paused.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onstart”)}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“start”)}} event, which occurs when media recording starts.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onstop”)}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“stop”)}} event, which occurs when media recording ends, either when the {{domxref(“MediaStream”)}} ends — or after the {{domxref(“MediaRecorder.stop()”)}} method is called.</li>
</ul></li>
<li>{{domxref(“MediaRecorder.onwarning”)}} {{deprecated_inline}}
<ul>
<li>: An <a href="/en-US/docs/Web/Events/Event_handlers">event handler</a> called to handle the {{event(“warning”)}} event, which occurs when media recording has a non-fatal error, or after the {{domxref(“MediaRecorder.onwarning()”)}} method is called.</li>
</ul></li>
</ul>
<h2 id="events">Events</h2>
<p>Listen to these events using <code>addEventListener()</code> or by assigning an event listener to the <code>oneventname</code> property of this interface.</p>
<ul>
<li><a href="/en-US/docs/Web/API/MediaRecorder/error_event"><code>error</code></a>
<ul>
<li>: Fired when an error occurs: for example because recording wasn’t allowed or was attempted using an unsupported codec. Also available via the <a href="/en-US/docs/Web/API/MediaRecorder/onerror"><code>onerror</code></a> property.</li>
</ul></li>
<li><a href="/en-US/docs/Web/API/MediaRecorder/warning_event"><code>warning</code></a>{{deprecated_inline}}
<ul>
<li>: Fired when a problem occurs that does not halt recording. Also available via the <a href="/en-US/docs/Web/API/MediaRecorder/onwarning"><code>onwarning</code></a> property.</li>
</ul></li>
</ul>
<h2 id="example">Example</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="cf">if</span> (<span class="va">navigator</span>.<span class="at">mediaDevices</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;getUserMedia supported.&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="kw">var</span> constraints <span class="op">=</span> <span class="op">{</span> <span class="dt">audio</span><span class="op">:</span> <span class="kw">true</span> <span class="op">};</span></a>
<a class="sourceLine" id="cb1-5" title="5">  <span class="kw">var</span> chunks <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">  <span class="va">navigator</span>.<span class="va">mediaDevices</span>.<span class="at">getUserMedia</span>(constraints)</a>
<a class="sourceLine" id="cb1-8" title="8">  .<span class="at">then</span>(<span class="kw">function</span>(stream) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="kw">var</span> mediaRecorder <span class="op">=</span> <span class="kw">new</span> <span class="at">MediaRecorder</span>(stream)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-11" title="11"></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="at">visualize</span>(stream)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="va">record</span>.<span class="at">onclick</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-15" title="15">      <span class="va">mediaRecorder</span>.<span class="at">start</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-16" title="16">      <span class="va">console</span>.<span class="at">log</span>(<span class="va">mediaRecorder</span>.<span class="at">state</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-17" title="17">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;recorder started&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-18" title="18">      <span class="va">record</span>.<span class="va">style</span>.<span class="at">background</span> <span class="op">=</span> <span class="st">&quot;red&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-19" title="19">      <span class="va">record</span>.<span class="va">style</span>.<span class="at">color</span> <span class="op">=</span> <span class="st">&quot;black&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-20" title="20">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-21" title="21"></a>
<a class="sourceLine" id="cb1-22" title="22">    <span class="va">stop</span>.<span class="at">onclick</span> <span class="op">=</span> <span class="kw">function</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-23" title="23">      <span class="va">mediaRecorder</span>.<span class="at">stop</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-24" title="24">      <span class="va">console</span>.<span class="at">log</span>(<span class="va">mediaRecorder</span>.<span class="at">state</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-25" title="25">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;recorder stopped&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-26" title="26">      <span class="va">record</span>.<span class="va">style</span>.<span class="at">background</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-27" title="27">      <span class="va">record</span>.<span class="va">style</span>.<span class="at">color</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-28" title="28">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30">    <span class="va">mediaRecorder</span>.<span class="at">onstop</span> <span class="op">=</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-31" title="31">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;data available after MediaRecorder.stop() called.&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-32" title="32"></a>
<a class="sourceLine" id="cb1-33" title="33">      <span class="kw">var</span> clipName <span class="op">=</span> <span class="at">prompt</span>(<span class="st">&#39;Enter a name for your sound clip&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-34" title="34"></a>
<a class="sourceLine" id="cb1-35" title="35">      <span class="kw">var</span> clipContainer <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;article&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-36" title="36">      <span class="kw">var</span> clipLabel <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;p&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-37" title="37">      <span class="kw">var</span> audio <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;audio&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-38" title="38">      <span class="kw">var</span> deleteButton <span class="op">=</span> <span class="va">document</span>.<span class="at">createElement</span>(<span class="st">&#39;button&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-39" title="39"></a>
<a class="sourceLine" id="cb1-40" title="40">      <span class="va">clipContainer</span>.<span class="va">classList</span>.<span class="at">add</span>(<span class="st">&#39;clip&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-41" title="41">      <span class="va">audio</span>.<span class="at">setAttribute</span>(<span class="st">&#39;controls&#39;</span><span class="op">,</span> <span class="st">&#39;&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-42" title="42">      <span class="va">deleteButton</span>.<span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&quot;Delete&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-43" title="43">      <span class="va">clipLabel</span>.<span class="at">innerHTML</span> <span class="op">=</span> clipName<span class="op">;</span></a>
<a class="sourceLine" id="cb1-44" title="44"></a>
<a class="sourceLine" id="cb1-45" title="45">      <span class="va">clipContainer</span>.<span class="at">appendChild</span>(audio)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-46" title="46">      <span class="va">clipContainer</span>.<span class="at">appendChild</span>(clipLabel)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-47" title="47">      <span class="va">clipContainer</span>.<span class="at">appendChild</span>(deleteButton)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-48" title="48">      <span class="va">soundClips</span>.<span class="at">appendChild</span>(clipContainer)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-49" title="49"></a>
<a class="sourceLine" id="cb1-50" title="50">      <span class="va">audio</span>.<span class="at">controls</span> <span class="op">=</span> <span class="kw">true</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-51" title="51">      <span class="kw">var</span> blob <span class="op">=</span> <span class="kw">new</span> <span class="at">Blob</span>(chunks<span class="op">,</span> <span class="op">{</span> <span class="st">&#39;type&#39;</span> <span class="op">:</span> <span class="st">&#39;audio/ogg; codecs=opus&#39;</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-52" title="52">      chunks <span class="op">=</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb1-53" title="53">      <span class="kw">var</span> audioURL <span class="op">=</span> <span class="va">URL</span>.<span class="at">createObjectURL</span>(blob)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-54" title="54">      <span class="va">audio</span>.<span class="at">src</span> <span class="op">=</span> audioURL<span class="op">;</span></a>
<a class="sourceLine" id="cb1-55" title="55">      <span class="va">console</span>.<span class="at">log</span>(<span class="st">&quot;recorder stopped&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-56" title="56"></a>
<a class="sourceLine" id="cb1-57" title="57">      <span class="va">deleteButton</span>.<span class="at">onclick</span> <span class="op">=</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-58" title="58">        evtTgt <span class="op">=</span> <span class="va">e</span>.<span class="at">target</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-59" title="59">        <span class="va">evtTgt</span>.<span class="va">parentNode</span>.<span class="va">parentNode</span>.<span class="at">removeChild</span>(<span class="va">evtTgt</span>.<span class="at">parentNode</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-60" title="60">      <span class="op">}</span></a>
<a class="sourceLine" id="cb1-61" title="61">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-62" title="62"></a>
<a class="sourceLine" id="cb1-63" title="63">    <span class="va">mediaRecorder</span>.<span class="at">ondataavailable</span> <span class="op">=</span> <span class="kw">function</span>(e) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-64" title="64">      <span class="va">chunks</span>.<span class="at">push</span>(<span class="va">e</span>.<span class="at">data</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-65" title="65">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-66" title="66">  <span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-67" title="67">  .<span class="at">catch</span>(<span class="kw">function</span>(err) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-68" title="68">    <span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;The following error occurred: &#39;</span> <span class="op">+</span> err)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-69" title="69">  <span class="op">}</span>)</a>
<a class="sourceLine" id="cb1-70" title="70"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p><strong>Note:</strong> This code sample is inspired by the Web Dictaphone demo. Some lines have been omitted for brevity; <a href="https://github.com/mdn/web-dictaphone/">refer to the source</a> for the complete code.</p>
</blockquote>
<h2 id="specifications">Specifications</h2>
<p>{{Specifications}}</p>
<h2 id="browser-compatibility">Browser compatibility</h2>
<p>{{Compat}}</p>
<h2 id="see-also">See also</h2>
<ul>
<li><a href="/en-US/docs/Web/API/MediaStream_Recording_API/Using_the_MediaStream_Recording_API">Using the MediaRecorder API</a></li>
<li><a href="https://mdn.github.io/web-dictaphone/">Web Dictaphone</a>: MediaRecorder + getUserMedia + Web Audio API visualization demo, by <a href="https://twitter.com/chrisdavidmills">Chris Mills</a> (<a href="https://github.com/mdn/web-dictaphone/">source on Github</a>.)</li>
<li><a href="/en-US/docs/Web/API/MediaStream_Recording_API/Recording_a_media_element">Recording a media element</a></li>
<li><a href="https://simpl.info/mediarecorder/">simpl.info MediaStream Recording demo</a>, by <a href="https://twitter.com/sw12">Sam Dutton</a>.</li>
<li>{{domxref(“MediaDevices.getUserMedia”)}}</li>
<li><a href="https://github.com/chrisjohndigital/OpenLang">OpenLang</a>: HTML5 video language lab web application using MediaDevices and the MediaStream Recording API for video recording (<a href="https://github.com/chrisjohndigital/OpenLang">source on GitHub</a>)</li>
</ul>
