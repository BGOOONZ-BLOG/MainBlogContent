<p>{{DefaultAPISidebar(“Picture-in-Picture API”)}}</p>
<p>The <strong>Picture-in-Picture API</strong> allow websites to create a floating video window always on top of other windows so that users may continue consuming media while they interact with other content sites, or applications on their device.</p>
<h2 id="interfaces">Interfaces</h2>
<ul>
<li>{{DOMxRef(“PictureInPictureWindow”)}}
<ul>
<li>: Represents the floating video window; contains {{domxref(“PictureInPictureWindow/width”, “width”)}} and {{domxref(“PictureInPictureWindow/height”, “height”)}} properties, and an {{domxref(“PictureInPictureWindow/onresize”, “onresize”)}} event handler property.</li>
</ul></li>
</ul>
<h2 id="methods">Methods</h2>
<p>The Picture-in-Picture API adds methods to the {{DOMxRef(“HTMLVideoElement”)}} and {{DOMxRef(“Document”)}} interfaces to allow toggling of the floating video window.</p>
<h3 id="methods-on-the-htmlvideoelement-interface">Methods on the HTMLVideoElement interface</h3>
<ul>
<li>{{DOMxRef(“HTMLVideoElement.requestPictureInPicture()”)}}
<ul>
<li>: Requests that the user agent enters the video into picture-in-picture mode</li>
</ul></li>
</ul>
<h3 id="methods-on-the-document-interface">Methods on the Document interface</h3>
<ul>
<li>{{DOMxRef(“Document.exitPictureInPicture()”)}}
<ul>
<li>: Requests that the user agent returns the element in picture-in-picture mode back into its original box.</li>
</ul></li>
</ul>
<h2 id="properties">Properties</h2>
<p><em>The Picture-in-Picture API augments the</em> {{DOMxRef(“HTMLVideoElement”)}}, {{DOMxRef(“Document”)}}, and {{DOMxRef(“ShadowRoot”)}} <em>interfaces with properties that can be used to determine if the floating video window mode is supported and available, if picture-in-picture mode is currently active, and which video is floating.</em></p>
<h3 id="properties-on-the-htmlvideoelement-interface">Properties on the HTMLVideoElement interface</h3>
<ul>
<li>{{DOMxRef(“HTMLVideoElement.autoPictureInPicture”)}}
<ul>
<li>: The <code>autoPictureInPicture</code> property will automatically enter and leave the picture-in-picture mode for a video element when the user switches tab and/or applications.</li>
</ul></li>
<li>{{DOMxRef(“HTMLVideoElement.disablePictureInPicture”)}}
<ul>
<li>: The <code>disablePictureInPicture</code> property will provide a hint to the user agent to not suggest the picture-in-picture to users or to request it automatically.</li>
</ul></li>
</ul>
<h3 id="properties-on-the-document-interface">Properties on the Document interface</h3>
<ul>
<li>{{DOMxRef(“Document.pictureInPictureEnabled”)}}
<ul>
<li>: The <code>pictureInPictureEnabled</code> property tells you whether or not it is possible to engage picture-in-picture mode. This is <code>false</code> if picture-in-picture mode is not available for any reason (e.g. the <a href="/en-US/docs/Web/HTTP/Headers/Feature-Policy/picture-in-picture"><code>"picture-in-picture"</code> feature</a> has been disallowed, or picture-in-picture mode is not supported).</li>
</ul></li>
</ul>
<h3 id="properties-on-the-document-or-shadowroot-interfaces">Properties on the Document or ShadowRoot interfaces</h3>
<ul>
<li>{{DOMxRef(“Document.pictureInPictureElement”)}} / {{DOMxRef(“ShadowRoot.pictureInPictureElement”)}}
<ul>
<li>: The <code>pictureInPictureElement</code> property tells you which {{DOMxRef(“Element”)}} is currently being displayed in the floating window (or in the shadow DOM). If this is <code>null</code>, the document (or shadow DOM) has no node currently in picture-in-picture mode.</li>
</ul></li>
</ul>
<h2 id="events">Events</h2>
<p><em>The Picture-in-Picture API defines three events, which can be used to detect when picture-in-picture mode is toggled and when the floating video window is resized.</em></p>
<ul>
<li>{{domxref(“HTMLVideoElement.enterpictureinpicture_event”, “enterpictureinpicture”)}}
<ul>
<li>: Sent to a {{DOMxRef(“HTMLVideoElement”)}} when it enters picture-in-picture mode. The associated event handler is {{DOMxRef(“HTMLVideoElement.onenterpictureinpicture”)}}</li>
</ul></li>
<li>{{domxref(“HTMLVideoElement.leavepictureinpicture_event”, “leavepictureinpicture”)}}
<ul>
<li>: Sent to a {{DOMxRef(“HTMLVideoElement”)}} when it leaves picture-in-picture mode. The associated event handler is {{DOMxRef(“HTMLVideoElement.onleavepictureinpicture”)}}</li>
</ul></li>
<li>{{domxref(“PictureInPictureWindow.resize_event”, “resize”)}}
<ul>
<li>: Sent to a {{DOMxRef(“PictureInPictureWindow”)}} when it changes size. The associated event handler is {{DOMxRef(“PictureInPictureWindow.onresize”)}}</li>
</ul></li>
</ul>
<h2 id="controlling-styling">Controlling styling</h2>
<p>The <a href="/en-US/docs/Web/CSS/:picture-in-picture"><code>:picture-in-picture</code></a> <a href="/en-US/docs/Web/CSS">CSS</a> <a href="/en-US/docs/Web/CSS/Pseudo-classes">pseudo-class</a> matches the video element currently in picture-in-picture mode, allowing you to configure your stylesheets to automatically adjust the size, style, or layout of content when a video switches back and forth between picture-in-picture and traditional presentation modes.</p>
<h2 id="controlling-access">Controlling access</h2>
<p>The availability of picture-in-picture mode can be controlled using <a href="/en-US/docs/Web/HTTP/Feature_Policy">Feature Policy</a>. The full-screen mode feature is identified by the string <code>"picture-in-picture"</code>, with a default allow-list value of <code>"self"</code>, meaning that picture-in-picture mode is permitted in top-level document contexts, as well as to nested browsing contexts loaded from the same origin as the top-most document.</p>
<p>See <a href="/en-US/docs/Web/HTTP/Feature_Policy/Using_Feature_Policy">Using Feature Policy</a> to learn more about using Feature Policy to control access to an API.</p>
<h2 id="examples">Examples</h2>
<p>In this example, a video is presented in a web page. Clicking the button below lets the user toggle the floating video window.</p>
<p>{{EmbedGHLiveSample(“dom-examples/picture-in-picture/index.html”, ‘100%’, 350)}}</p>
<h3 id="toggling-picture-in-picture-mode">Toggling picture-in-picture mode</h3>
<p>This code is called by a click handler when the user clicks the “Toggle Picture-in-Picture” button:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">function</span> <span class="at">togglePictureInPicture</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="cf">if</span> (<span class="va">document</span>.<span class="at">pictureInPictureElement</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-3" title="3">      <span class="va">document</span>.<span class="at">exitPictureInPicture</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4">  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-5" title="5">    <span class="cf">if</span> (<span class="va">document</span>.<span class="at">pictureInPictureEnabled</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">      <span class="va">video</span>.<span class="at">requestPictureInPicture</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="op">}</span></a>
<a class="sourceLine" id="cb1-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">}</span></a></code></pre></div>
<p>This block starts by looking at the value of the {{DOMxRef(“Document”, “document”)}}’s <code>pictureInPictureElement</code> attribute. If the value is <code>null</code>, no video is in the floating window. so we can request a video to enter the picture-in-picture mode; otherwise, it’s the element that’s currently in picture-in-picture mode. Switching to picture-in-picture mode is done by calling {{DOMxRef(“HTMLVideoElement.requestPictureInPicture()”)}} on the {{HTMLElement(“video”)}} element.</p>
<p>If a video is in the floating window (<code>pictureInPictureElement</code> is not <code>null</code>), we call {{DOMxRef(“Document.exitPictureInPicture”, “exitPictureInPicture()”)}} on the <code>document</code> to bring the video back into its initial box.</p>
<h2 id="specifications">Specifications</h2>
<table>
<thead>
<tr class="header">
<th>Specification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><a href="https://w3c.github.io/picture-in-picture/">Picture-in-Picture</a></td>
</tr>
</tbody>
</table>
<h2 id="browser-compatibility">Browser compatibility</h2>
<h3 id="htmlvideoelement.requestpictureinpicture"><code>HTMLVideoElement.requestPictureInPicture</code></h3>
<p>{{Compat(“api.HTMLVideoElement.requestPictureInPicture”)}}</p>
<h3 id="htmlvideoelement.autopictureinpicture"><code>HTMLVideoElement.autoPictureInPicture</code></h3>
<p>{{Compat(“api.HTMLVideoElement.autoPictureInPicture”)}}</p>
<h3 id="htmlvideoelement.disablepictureinpicture"><code>HTMLVideoElement.disablePictureInPicture</code></h3>
<p>{{Compat(“api.HTMLVideoElement.disablePictureInPicture”)}}</p>
<h3 id="document.pictureinpictureenabled"><code>Document.pictureInPictureEnabled</code></h3>
<p>{{Compat(“api.Document.pictureInPictureEnabled”)}}</p>
<h3 id="document.exitpictureinpicture"><code>Document.exitPictureInPicture</code></h3>
<p>{{Compat(“api.Document.exitPictureInPicture”)}}</p>
<h3 id="document.pictureinpictureelement"><code>Document.pictureInPictureElement</code></h3>
<p>{{Compat(“api.Document.pictureInPictureElement”)}}</p>
<h3 id="pictureinpicturewindow"><code>PictureInPictureWindow</code></h3>
<p>{{Compat(“api.PictureInPictureWindow”)}}</p>
<h2 id="see-also">See also</h2>
<ul>
<li>{{DOMxRef(“HTMLVideoElement.requestPictureInPicture()”)}}</li>
<li>{{DOMxRef(“HTMLVideoElement.autoPictureInPicture”)}}</li>
<li>{{DOMxRef(“HTMLVideoElement.disablePictureInPicture”)}}</li>
<li>{{DOMxRef(“Document.pictureInPictureEnabled”)}}</li>
<li>{{DOMxRef(“Document.exitPictureInPicture()”)}}</li>
<li>{{DOMxRef(“Document.pictureInPictureElement”)}}</li>
<li>{{CSSxRef(“:picture-in-picture”)}}</li>
</ul>
