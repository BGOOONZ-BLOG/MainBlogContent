<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
<head>
  <meta content="HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org" name="generator" />
  <link type="text/css" rel="stylesheet" href="getusermedia.css" />
  <link type="text/css" rel="stylesheet" href="ReSpec.js/css/respec.css" />

  <title>getusermedia: Getting access to local devices that can generate multimedia streams</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<!--  
      === NOTA BENE ===
      For the three scripts below, if your spec resides on dev.w3 you can check them
      out in the same tree and use relative links so that they'll work offline.

      To generate the dated version of the specification:

           Open this doc in Mozilla. 

           Do a CTRL-ALT-SHIFT-S

           Select "XHMTL( source)" from dialog box. This will pop a new tab with
           genreated version of the document.

           This will open a new tab with generated html. Copy and paste this to
           a new file. Note if you use Chrome or Safari, this step will not
           work. What will happen is the paste will have th original document,
           not what was displayed in the window that you did the copy on.

           Rename the new file to the correct day such as
           getusermedia-20111003.html then search for and edit the links for
           "This version" and "Previos version". Add the new file into git and
           check in. 

           Once everyone is happy, the getusermedia.html and
           getusermedia-20111003.html files can be coppied to
           getusermedia.html and getusermedia-20111003.html
           respectively in the ../editor/. W3C directory. 

      -->


  

  
<style type="text/css">
/*****************************************************************
 * ReSpec CSS
 * Robin Berjon (robin at berjon dot com)
 * v0.05 - 2009-07-31
 *****************************************************************/


/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

code {
    color:  #ff4500;
}


/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID {
    font-weight:    bold;
    color:  #005a9c;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.attributes dd, .methods dd, .constants dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}

/* --- TOC --- */
.toc a {
    text-decoration:    none;
}

a .secno {
    color:  #000;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}

/* --- EXAMPLES --- */
pre.example {
    border-top: 1px solid #ff4500;
    border-bottom: 1px solid #ff4500;
    padding:    1em;
    margin-top: 1em;
}

pre.example::before {
    content:    "Example";
    display:    block;
    width:      150px;
    background: #ff4500;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

/* --- EDITORIAL NOTES --- */
.issue {
    padding:    1em;
    margin: 1em 0em 0em;
    border: 1px solid #f00;
    background: #ffc;
}

.issue::before {
    content:    "Issue";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #f00;
    background: #fff;
    padding:    3px 1em;
}

.note {
    margin: 1em 0em 0em;
    padding:    1em;
    border: 2px solid #cff6d9;
    background: #e2fff0;
}

.note::before {
    content:    "Note";
    display:    block;
    width:  150px;
    margin: -1.5em 0 0.5em 0;
    font-weight:    bold;
    border: 1px solid #cff6d9;
    background: #fff;
    padding:    3px 1em;
}

/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
}

span.practicelab   { background: #dfffff; }

span.practicelab {
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}

/* --- SYNTAX HIGHLIGHTING --- */
pre.sh_sourceCode {
  background-color: white;
  color: black;
  font-style: normal;
  font-weight: normal;
}

pre.sh_sourceCode .sh_keyword { color: #005a9c; font-weight: bold; }           /* language keywords */
pre.sh_sourceCode .sh_type { color: #666; }                            /* basic types */
pre.sh_sourceCode .sh_usertype { color: teal; }                             /* user defined types */
pre.sh_sourceCode .sh_string { color: red; font-family: monospace; }        /* strings and chars */
pre.sh_sourceCode .sh_regexp { color: orange; font-family: monospace; }     /* regular expressions */
pre.sh_sourceCode .sh_specialchar { color: 	#ffc0cb; font-family: monospace; }  /* e.g., \n, \t, \\ */
pre.sh_sourceCode .sh_comment { color: #A52A2A; font-style: italic; }         /* comments */
pre.sh_sourceCode .sh_number { color: purple; }                             /* literal numbers */
pre.sh_sourceCode .sh_preproc { color: #00008B; font-weight: bold; }       /* e.g., #include, import */
pre.sh_sourceCode .sh_symbol { color: blue; }                            /* e.g., *, + */
pre.sh_sourceCode .sh_function { color: black; font-weight: bold; }         /* function calls and declarations */
pre.sh_sourceCode .sh_cbracket { color: red; }                              /* block brackets (e.g., {, }) */
pre.sh_sourceCode .sh_todo { font-weight: bold; background-color: #00FFFF; }   /* TODO and FIXME */

/* Predefined variables and functions (for instance glsl) */
pre.sh_sourceCode .sh_predef_var { color: #00008B; }
pre.sh_sourceCode .sh_predef_func { color: #00008B; font-weight: bold; }

/* for OOP */
pre.sh_sourceCode .sh_classname { color: teal; }

/* line numbers (not yet implemented) */
pre.sh_sourceCode .sh_linenum { display: none; }

/* Internet related */
pre.sh_sourceCode .sh_url { color: blue; text-decoration: underline; font-family: monospace; }

/* for ChangeLog and Log files */
pre.sh_sourceCode .sh_date { color: blue; font-weight: bold; }
pre.sh_sourceCode .sh_time, pre.sh_sourceCode .sh_file { color: #00008B; font-weight: bold; }
pre.sh_sourceCode .sh_ip, pre.sh_sourceCode .sh_name { color: #006400; }

/* for Prolog, Perl... */
pre.sh_sourceCode .sh_variable { color: #006400; }

/* for LaTeX */
pre.sh_sourceCode .sh_italics { color: #006400; font-style: italic; }
pre.sh_sourceCode .sh_bold { color: #006400; font-weight: bold; }
pre.sh_sourceCode .sh_underline { color: #006400; text-decoration: underline; }
pre.sh_sourceCode .sh_fixed { color: green; font-family: monospace; }
pre.sh_sourceCode .sh_argument { color: #006400; }
pre.sh_sourceCode .sh_optionalargument { color: purple; }
pre.sh_sourceCode .sh_math { color: orange; }
pre.sh_sourceCode .sh_bibtex { color: blue; }

/* for diffs */
pre.sh_sourceCode .sh_oldfile { color: orange; }
pre.sh_sourceCode .sh_newfile { color: #006400; }
pre.sh_sourceCode .sh_difflines { color: blue; }

/* for css */
pre.sh_sourceCode .sh_selector { color: purple; }
pre.sh_sourceCode .sh_property { color: blue; }
pre.sh_sourceCode .sh_value { color: #006400; font-style: italic; }

/* other */
pre.sh_sourceCode .sh_section { color: black; font-weight: bold; }
pre.sh_sourceCode .sh_paren { color: red; }
pre.sh_sourceCode .sh_attribute { color: #006400; }

</style><link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet" type="text/css" charset="utf-8" /></head>

<body style="display: inherit;"><div class="head"><p><a href="http://www.w3.org/"><img width="72" height="48" alt="W3C" src="http://www.w3.org/Icons/w3c_home" /></a></p><h1 id="title" class="title">getusermedia: Getting access to local devices that can generate multimedia streams</h1><h2 id="w3c-editor-s-draft-30-november-2011"><acronym title="World Wide Web Consortium">W3C</acronym> Editor's Draft 30 November 2011</h2><dl><dt>This version:</dt><dd><a href="http://dev.w3.org/2011/webrtc/editor/getusermedia-20111130.html">http://dev.w3.org/2011/webrtc/editor/getusermedia-20111130.html</a></dd><dt>Latest published version:</dt><dd><a href="http://www.w3.org/TR/getusermedia/">http://www.w3.org/TR/getusermedia/</a></dd><dt>Latest editor's draft:</dt><dd><a href="http://dev.w3.org/2011/webrtc/editor/getusermedia.html">http://dev.w3.org/2011/webrtc/editor/getusermedia.html</a></dd><dt>Previous version:</dt><dd>none</dd><dt>Editors:</dt><dd><span>Daniel C. Burnett</span>, Voxeo</dd>
<dd><span>Anant Narayanan</span>, Mozilla</dd>
</dl><p class="copyright">Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br /> © Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p> <p class="copyright">All subsequent changes since 26 July 2011 done by the <acronym title="World Wide Web Consortium">W3C</acronym> WebRTC Working Group are under the following <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>:<br />© 2011 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. <a href="http://www.w3.org/Consortium/Legal/copyright-documents">Document use</a>  rules apply.</p> <p class="copyright">For the entire publication on the <acronym title="World Wide Web Consortium">W3C</acronym> site the <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a> and <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> rules apply.</p><hr /></div>
  <div id="abstract" class="introductory section"><h2>Abstract</h2>

    <p>This document defines a set of APIs that allow local media,
    including audio and video, to be requested from a platform.
    </p>
  </div><div class="introductory section" id="sotd"><h2>Status of This Document</h2><p><em>This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the latest revision of this technical report can be found in the <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports index</a> at http://www.w3.org/TR/.</em></p>
   <p>This document is not complete.
   It is subject to major changes and, while early experimentations are
   encouraged, it is therefore not intended for implementation. The API
   is based on preliminary work done in the WHATWG. The Media Capture 
   Task Force expects this specification to evolve
   significantly based on:</p>
  <ul>
    <li>Privacy issues that arise when exposing local capabilities and
    local streams.</li>
    <li>Technical discussions within the task force.</li>
    <li>Experience gained through early experimentations.</li>
    <li>Feedback received from other groups and individuals.</li>
  </ul>
  
<p>This document was published by the <a href="-">Media Capture TF</a> as an Editor's Draft. If you wish to make comments regarding this document, please send them to <a href="mailto:public-media-capture@w3.org@w3.org">public-media-capture@w3.org@w3.org</a> (<a href="mailto:public-media-capture@w3.org-request@w3.org?subject=subscribe">subscribe</a>, <a href="http://lists.w3.org/Archives/Public/public-media-capture@w3.org/">archives</a>). All feedback is welcome.</p><p>Publication as an Editor's Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership. This is a draft document and may be updated, replaced or obsoleted by other documents at any time. It is inappropriate to cite this document as other than work in progress.</p><p>This document was produced by a group operating under the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>. <acronym title="World Wide Web Consortium">W3C</acronym> maintains a <a rel="disclosure" href="">public list of any patent disclosures</a> made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.</p></div><div id="toc" class="section"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a href="#intro" class="tocxref"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a href="#local-content" class="tocxref"><span class="secno">2. </span>Obtaining local multimedia content</a><ul class="toc"><li class="tocline"><a href="#local-content-definition" class="tocxref"><span class="secno">2.1 </span>Definition</a><ul class="toc"><li class="tocline"><a href="#navigatorusermedia" class="tocxref"><span class="secno">2.1.1 </span>NavigatorUserMedia</a><ul class="toc"><li class="tocline"><a href="#methods" class="tocxref"><span class="secno">2.1.1.1 </span>Methods</a></li></ul></li><li class="tocline"><a href="#mediastreamoptions" class="tocxref"><span class="secno">2.1.2 </span>MediaStreamOptions</a><ul class="toc"><li class="tocline"><a href="#dictionary-mediastreamoptions-members" class="tocxref"><span class="secno">2.1.2.1 </span>Dictionary <span class="idlType formerLink idlType"><code>MediaStreamOptions</code></span> Members</a></li></ul></li><li class="tocline"><a href="#navigatorusermediasuccesscallback" class="tocxref"><span class="secno">2.1.3 </span>NavigatorUserMediaSuccessCallback</a><ul class="toc"><li class="tocline"><a href="#methods-1" class="tocxref"><span class="secno">2.1.3.1 </span>Methods</a></li></ul></li><li class="tocline"><a href="#navigatorusermediaerror-and-navigatorusermediaerrorcallback" class="tocxref"><span class="secno">2.1.4 </span>NavigatorUserMediaError and NavigatorUserMediaErrorCallback</a><ul class="toc"><li class="tocline"><a href="#attributes" class="tocxref"><span class="secno">2.1.4.1 </span>Attributes</a></li><li class="tocline"><a href="#constants" class="tocxref"><span class="secno">2.1.4.2 </span>Constants</a></li><li class="tocline"><a href="#methods-2" class="tocxref"><span class="secno">2.1.4.3 </span>Methods</a></li></ul></li></ul></li><li class="tocline"><a href="#examples" class="tocxref"><span class="secno">2.2 </span>Examples</a></li></ul></li><li class="tocline"><a href="#garbage-collection" class="tocxref"><span class="secno">3. </span>Garbage collection</a></li><li class="tocline"><a href="#event-definitions" class="tocxref"><span class="secno">4. </span>Event definitions</a></li><li class="tocline"><a href="#event-summary" class="tocxref"><span class="secno">5. </span>Event summary</a><ul class="toc"><li class="tocline"><a href="#change-log" class="tocxref"><span class="secno">5.1 </span>Change Log</a></li><li class="tocline"><a href="#acknowledgements" class="tocxref"><span class="secno">5.2 </span>Acknowledgements</a></li></ul></li><li class="tocline"><a href="#references" class="tocxref"><span class="secno">A. </span>References</a><ul class="toc"><li class="tocline"><a href="#normative-references" class="tocxref"><span class="secno">A.1 </span>Normative references</a></li><li class="tocline"><a href="#informative-references" class="tocxref"><span class="secno">A.2 </span>Informative references</a></li></ul></li></ul></div>

  

  <div class="informative section" id="intro">
  
<!-- OddPage -->
<h2><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>

  <p>Access to multimedia streams (video, audio, or both) from local devices (video
    cameras, microphones, Web cams) can have a number of uses, such as real-time 
    communication, recording, surveillance.</p>

  <p>This document defines the APIs used to get access to local devices (video
    cameras, microphones, Web cams) that can generate multimedia stream data. </p>
  </div>

  <div id="local-content" class="section">
  
<!-- OddPage -->
<h2><span class="secno">2. </span>Obtaining local multimedia content</h2>

  <div id="local-content-definition" class="section">
  <h3><span class="secno">2.1 </span>Definition</h3>

  <div id="navigatorusermedia" class="section">
  <h4><span class="secno">2.1.1 </span>NavigatorUserMedia</h4>

  <pre class="idl"><span id="idl-def-NavigatorUserMedia" class="idlInterface">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMedia</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-NavigatorUserMedia-getUserMedia-void-MediaStreamOptions-options-NavigatorUserMediaSuccessCallback-successCallback-NavigatorUserMediaErrorCallback-errorCallback">getUserMedia</a></span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a>?</span> <span class="idlParamName">options</span></span>, <span class="idlParam"><span class="idlParamType"><a href="#idl-def-NavigatorUserMediaSuccessCallback" class="idlType"><code>NavigatorUserMediaSuccessCallback</code></a>?</span> <span class="idlParamName">successCallback</span></span>, <span class="idlParam">optional <span class="idlParamType"><a href="#idl-def-NavigatorUserMediaErrorCallback" class="idlType"><code>NavigatorUserMediaErrorCallback</code></a>?</span> <span class="idlParamName">errorCallback</span></span>);</span>
};</span>
</pre><div id="methods" class="section"><h5><span class="secno">2.1.1.1 </span>Methods</h5><dl class="methods"><dt id="widl-NavigatorUserMedia-getUserMedia-void-MediaStreamOptions-options-NavigatorUserMediaSuccessCallback-successCallback-NavigatorUserMediaErrorCallback-errorCallback"><code>getUserMedia</code></dt><dd>
      <p>Prompts the user for permission to use their Web cam or other video or audio
      input.</p>

      <p>The <var>options</var> argument is an object of type
      <code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code>.
      </p>

     
      <p>If the user accepts, the <var>successCallback</var> is invoked, with a
      suitable <code><a href="webrtc.html#localmediastream">LocalMediaStream</a></code> object [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBRTC10">WEBRTC10</a></cite>] as
      its argument.</p>

      <p>If the user declines, the <var>errorCallback</var> (if any) is
      invoked.</p>

      <p>When the <a href="#widl-NavigatorUserMedia-getUserMedia-void-DOMString-options-NavigatorUserMediaSuccessCallback-successCallback-NavigatorUserMediaErrorCallback-errorCallback">
      <code>getUserMedia()</code></a> method is called, the user agent <em class="rfc2119" title="must">must</em> run the
      following steps:</p>

      <ol>
        <li>
          <p>Let <var>options</var> be the method's first argument.</p>
        </li>

        <li>
          <p>Let <var>successCallback</var> be the callback indicated by the
          method's second argument.</p>
        </li>

        <li>
          <p>Let <var>errorCallback</var> be the callback indicated by the
          method's third argument, if any, or null otherwise.</p>
        </li>

        <li>
          <p>If <var>successCallback</var> is null, abort these steps.</p>
        </li>
<!--  we could throw an exception instead (that's
   why the method doesn't return until later: so that we can add an
   exception here, or for /options/ below, without changing the
   algorithm)  -->


        <li>
          <p>For each member of the <code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code> dictionary
             create a local representation and set it to false.</p>
        </li>


        <li>
          <p>For each property in <var>options</var> that is 
          present and set to true, let the corresponding local representation be true.</p>
        </li>


        <li>
          <p>If none of the local representations of the <code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code>
          dictionary members is set to true, then throw a <code>NOT_SUPPORTED_ERR</code>
          exception and abort these steps.</p>
        </li>

        <li>
          <p>Return, and run the remaining steps asynchronously.</p>
        </li>

        <li>
          <p>Optionally, e.g. based on a previously-established user preference, for
          security reasons, or due to platform limitations, jump to the step labeled
          <em>failure</em> below.</p>
        </li>

        <li>
          <p>Prompt the user in a user-agent-specific manner for permission to provide
          the entry script's origin with a <code><a href="webrtc.html#localmediastream">LocalMediaStream</a></code> object [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBRTC10">WEBRTC10</a></cite>] representing a media
          stream.</p>

          <p>The provided media <em class="rfc2119" title="should">should</em> include a track for each local representation
          of the <code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code> dictionary members that is set to true.</p>

          <p>The provided media <em class="rfc2119" title="must not">must not</em> include a track for any of the local representation
          of the <code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code> dictionary members that is not set to true.</p>

          <p>User agents are encouraged to default to using the user's primary or system
          default camera and/or microphone (as appropriate) to generate the media stream.
          User agents <em class="rfc2119" title="may">may</em> allow users to use any media source, including pre-recorded
          media files.</p>

          <p>User agents <em class="rfc2119" title="may">may</em> wish to offer the user more control over the provided media.
          For example, a user agent could offer to enable a camera light or flash, or to
          change settings such as the frame rate or shutter speed.</p>

          <p>If the user grants permission to use local recording devices, user agents
          are encouraged to include a prominent indicator that the devices are &quot;hot&quot;
          (i.e. an &quot;on-air&quot; or &quot;recording&quot; indicator).</p>

          <p>If the user denies permission, jump to the step labeled <em>failure</em>
          below. If the user never responds, this algorithm stalls on this step.</p>
        </li>

        <li>
          <p>Let <var>stream</var> be the <code><a href="webrtc.html#localmediastream">LocalMediaStream</a></code> object [<cite><a class="bibref" rel="biblioentry" href="#bib-WEBRTC10">WEBRTC10</a></cite>] for which the user
          granted permission.</p>
        </li>

        <li>
          <p>Queue a task to invoke <var>successCallback</var> with
          <var>stream</var> as its argument.</p>
        </li>

        <li>
          <p>Abort these steps.</p>
        </li>

        <li>
          <p><em>Failure</em>: If <var>errorCallback</var> is null, abort these
          steps.</p>
        </li>

        <li>
          <p>Let <var>error</var> be a new <code><a href="#navigatorusermediaerror">NavigatorUserMediaError</a></code> object whose
          <code title="dom-NavigatorUserMediaError-code"><a href="#dom-navigatorusermediaerror-code">code</a></code> attribute has the numeric
          value 1 (<code title="dom-NavigatorUserMediaError-PERMISSION_DENIED"><a href="#dom-navigatorusermediaerror-permission_denied">PERMISSION_DENIED</a></code>).</p>
        </li>

        <li>
          <p>Queue a task to invoke <var>errorCallback</var> with
          <var>error</var> as its argument.</p>
        </li>
      </ol>

      <p>The task source for these <span title="concept-task">tasks</span>
      is the user interaction task source.</p>
    <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">options</td><td class="prmType"><code><a href="#idl-def-MediaStreamOptions" class="idlType"><code>MediaStreamOptions</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr><tr><td class="prmName">successCallback</td><td class="prmType"><code><a href="#idl-def-NavigatorUserMediaSuccessCallback" class="idlType"><code>NavigatorUserMediaSuccessCallback</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr><tr><td class="prmName">errorCallback</td><td class="prmType"><code><a href="#idl-def-NavigatorUserMediaErrorCallback" class="idlType"><code>NavigatorUserMediaErrorCallback</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc"></td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>

  <pre class="idl"><span class="idlImplements"><a>Navigator</a> implements <a href="#idl-def-NavigatorUserMedia" class="idlType"><code>NavigatorUserMedia</code></a>;</span></pre><div class="idlImplementsDesc"><p>All instances of the <code><a>Navigator</a></code> type are defined to also implement the <a href="#idl-def-NavigatorUserMedia" class="idlType"><code>NavigatorUserMedia</code></a> interface.</p></div>
  </div>

  <div id="mediastreamoptions" class="section">
  <h4><span class="secno">2.1.2 </span>MediaStreamOptions</h4>

  <pre class="idl"><span id="idl-def-MediaStreamOptions" class="idlDictionary">dictionary <span class="idlDictionaryID">MediaStreamOptions</span> {
<span class="idlMember">    <span class="idlMemberType"><a>boolean</a></span> <span class="idlMemberName"><a href="#widl-MediaStreamOptions-audio">audio</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>boolean</a></span> <span class="idlMemberName"><a href="#widl-MediaStreamOptions-video">video</a></span>;</span>
};</span>
</pre><div id="dictionary-mediastreamoptions-members" class="section"><h5><span class="secno">2.1.2.1 </span>Dictionary <a class="idlType" href="#idl-def-MediaStreamOptions"><code>MediaStreamOptions</code></a> Members</h5><dl class="dictionary-members"><dt id="widl-MediaStreamOptions-audio"><code>audio</code> of type <span class="idlMemberType"><a>boolean</a></span></dt><dd>Set to true if an audio track is requested, default is false</dd><dt id="widl-MediaStreamOptions-video"><code>video</code> of type <span class="idlMemberType"><a>boolean</a></span></dt><dd>Set to true if a video track is requested, default is false</dd></dl></div>
  </div>

  <div id="navigatorusermediasuccesscallback" class="section">
  <h4><span class="secno">2.1.3 </span>NavigatorUserMediaSuccessCallback</h4>

  <pre class="idl"><span id="idl-def-NavigatorUserMediaSuccessCallback" class="idlInterface">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMediaSuccessCallback</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-NavigatorUserMediaSuccessCallback-handleEvent-void-LocalMediaStream-stream">handleEvent</a></span> (<span class="idlParam"><span class="idlParamType"><a>LocalMediaStream</a></span> <span class="idlParamName">stream</span></span>);</span>
};</span>
</pre><div id="methods-1" class="section"><h5><span class="secno">2.1.3.1 </span>Methods</h5><dl class="methods"><dt id="widl-NavigatorUserMediaSuccessCallback-handleEvent-void-LocalMediaStream-stream"><code>handleEvent</code></dt><dd>(Explanation of handleEvent TBD)<table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">stream</td><td class="prmType"><code><a>LocalMediaStream</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
  </div>

  <div id="navigatorusermediaerror-and-navigatorusermediaerrorcallback" class="section">
  <h4><span class="secno">2.1.4 </span>NavigatorUserMediaError and NavigatorUserMediaErrorCallback</h4>

  <pre class="idl"><span id="idl-def-NavigatorUserMediaError" class="idlInterface">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMediaError</span> {
<span class="idlConst">    const <span class="idlConstType"><a>unsigned short</a></span> <span class="idlConstName"><a href="#widl-NavigatorUserMediaError-PERMISSION_DENIED">PERMISSION_DENIED</a></span> = <span class="idlConstValue">1</span>;</span>
<span class="idlAttribute">    readonly attribute <span class="idlAttrType"><a>unsigned short</a></span> <span class="idlAttrName"><a href="#widl-NavigatorUserMediaError-code">code</a></span>;</span>
};</span>
</pre><div id="attributes" class="section"><h5><span class="secno">2.1.4.1 </span>Attributes</h5><dl class="attributes"><dt id="widl-NavigatorUserMediaError-code"><code>code</code> of type <span class="idlAttrType"><a>unsigned short</a></span>, readonly</dt><dd>Returns the current error's error code. At this time, this will always be 1, for
    which the constant <code title="dom-NavigatorUserMediaError-PERMISSION_DENIED"><a href="#dom-navigatorusermediaerror-permission_denied">PERMISSION_DENIED</a></code> is
    defined.<div><em>No exceptions.</em></div></dd></dl></div><div id="constants" class="section"><h5><span class="secno">2.1.4.2 </span>Constants</h5><dl class="constants"><dt id="widl-NavigatorUserMediaError-PERMISSION_DENIED"><code>PERMISSION_DENIED</code> of type <span class="idlConstType"><a>unsigned short</a></span></dt><dd>The user denied the page permission to use the user's media devices.</dd></dl></div>

  <pre class="idl"><span id="idl-def-NavigatorUserMediaErrorCallback" class="idlInterface">[<span class="extAttr">Callback=FunctionOnly, NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMediaErrorCallback</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-NavigatorUserMediaErrorCallback-handleEvent-void-NavigatorUserMediaError-error">handleEvent</a></span> (<span class="idlParam"><span class="idlParamType"><a href="#idl-def-NavigatorUserMediaError" class="idlType"><code>NavigatorUserMediaError</code></a></span> <span class="idlParamName">error</span></span>);</span>
};</span>
</pre><div id="methods-2" class="section"><h5><span class="secno">2.1.4.3 </span>Methods</h5><dl class="methods"><dt id="widl-NavigatorUserMediaErrorCallback-handleEvent-void-NavigatorUserMediaError-error"><code>handleEvent</code></dt><dd>(Explanation of handleEvent TBD)<table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">error</td><td class="prmType"><code><a href="#idl-def-NavigatorUserMediaError" class="idlType"><code>NavigatorUserMediaError</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>No exceptions.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></div>
  </div>
  </div>

  <div id="examples" class="section">
  <h3><span class="secno">2.2 </span>Examples</h3>

  <div class="example">
    <p>A voice chat feature in a game could attempt to get access to the user's
    microphone by calling the API as follows:</p>
    <pre>&lt;script&gt;
 navigator.getUserMedia({audio: true}, gotAudio);
 function gotAudio(stream) {
   // ... use 'stream' ...
 }
&lt;/script&gt;
</pre>
  </div>

  <div class="example">
    <p>A video-conferencing system would ask for both audio and video:</p>
    <pre>&lt;script&gt;
   navigator.getUserMedia({audio: true, video: true}, gotStream);
 }
 function gotStream(stream) {
   // ... use 'stream' ...
 }
&lt;/script&gt;
</pre>
  </div>
  </div>
  </div>

  <div id="garbage-collection" class="section">
  
<!-- OddPage -->
<h2><span class="secno">3. </span>Garbage collection</h2>


  </div>

  <div id="event-definitions" class="section">
  
<!-- OddPage -->
<h2><span class="secno">4. </span>Event definitions</h2>

-
  </div>

  <div class="informative section" id="event-summary">
  
<!-- OddPage -->
<h2><span class="secno">5. </span>Event summary</h2><p><em>This section is non-normative.</em></p>


  <div id="change-log" class="section">
  <h3><span class="secno">5.1 </span>Change Log</h3>
  <p> This section will be removed before publication. </p>

  <h3 id="to-do-items"> To Do Items </h3>
  <p> - </p>

  <h3 id="dec-21-2011"> Dec 21 2011</h3>
  <ol>
    <li> Changed to make wanted media opt in (rather than opt out). Minor edits.</li>
 </ol>


  <h3 id="nov-29-2011"> Nov 29 2011</h3>
  <ol>
    <li> Changed examples to use MediaStreamOptions objects rather than strings. Minor edits.</li>
 </ol>


  <h3 id="nov-15-2011"> Nov 15 2011</h3>
  <ol>
    <li> Removed MediaStream stuff. Refers to webrtc 1.0 spec for that part instead. </li>
 </ol>


  <h3 id="nov-9-2011"> Nov 9 2011</h3>
  <ol>
    <li> Created first version by copying the webrtc spec and ripping out stuff. Put it on github. </li>
 </ol>
  
  </div>

 
  <div class="appendix section" id="acknowledgements">
  <h3><span class="secno">5.2 </span>Acknowledgements</h3>


  </div>


</div><div id="references" class="appendix section">
<!-- OddPage -->
<h2><span class="secno">A. </span>References</h2><div id="normative-references" class="section"><h3><span class="secno">A.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-WEBRTC10">[WEBRTC10]</dt><dd>A Bergkvist; D Burnett; C Jennings; A Narayanan. <a href="http://www.w3.org/TR/2011/WD-webrtc-20111027/"><cite>WebRTC 1.0.</cite></a> 27 October 2011. W3C Working Draft. (Work in progress.) URL: <a href="http://www.w3.org/TR/2011/WD-webrtc-20111027/">http://www.w3.org/TR/2011/WD-webrtc-20111027/</a> 
</dd></dl></div><div id="informative-references" class="section"><h3><span class="secno">A.2 </span>Informative references</h3><p>No informative references.</p></div></div></body></html>
