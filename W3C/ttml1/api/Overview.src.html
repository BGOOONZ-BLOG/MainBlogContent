<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>TTML API Level 1</title>
<script src='http://www.w3.org/Tools/respec/respec-w3c-common' class=remove async></script>
<script class=remove>
respecConfig = {
    // specification status (e.g. WD, LCWD, NOTE, etc.). If in doubt use ED.
    specStatus:           "ED",

    // the specification's short name, as in http://www.w3.org/TR/short-name/
    shortName:            "ttml1-api",

    // use respec source as current ED uri
    edDraftURI: "http://dvcs.w3.org/hg/ttml/raw-file/default/ttml1-api/Overview.html",

    // editors, add as many as you like
    // only "name" is required
    editors:  [
        { name: "Glenn Adams",
          company: "Cox Communications, Inc.", companyURL: "http://www.cox.com/" },
    ],

    // name of the WG
    wg:           "Timed Text Working Group",

    // URI of the public WG page
    wgURI:        "http://www.w3.org/AudioVideo/TT/",

    // name (without the @w3c.org) of the public mailing to which comments are due
    wgPublicList: "public-tt",

    // URI of the patent status for this WG, for Rec-track documents
    // !!!! IMPORTANT !!!!
    // This is important for Rec-track documents, do not copy a patent URI from a random
    // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
    // Team Contact.
    wgPatentURI: "http://www.w3.org/2004/01/pp-impl/34314/status",

    noRecTrack: false,

    localBiblio: {
      "HTML5" : "R. Berjon et al., Eds. <a href='http://www.w3.org/html/wg/drafts/html/master/Overview.html'><cite>HTML 5.1 Nightly</cite></a>, W3C Editor's Draft, URL: <a href='http://www.w3.org/html/wg/drafts/html/master/Overview.html'>http://www.w3.org/html/wg/drafts/html/master/Overview.html</a>",
      "TTML1" : "G. Adams et al., Eds. <a href='http://www.w3.org/TR/2013/REC-ttml1-20130924/'><cite>Timed Text Markup Language 1 (TTML1) (Second Edition)</cite></a>, W3C Recommendation, URL: <a href='http://www.w3.org/TR/2013/REC-ttml1-20130924/'>http://www.w3.org/TR/2013/REC-ttml1-20130924/</a>",
      "WEBIDL" : "C. McCormack et al., Eds. <a href='http://dev.w3.org/2006/webapi/WebIDL/'><cite>HTML 5.1 Nightly</cite></a>, W3C Editor's Draft, URL: <a href='http://dev.w3.org/2006/webapi/WebIDL/'>http://dev.w3.org/2006/webapi/WebIDL/</a>",
    },

};
function term(doc, content) {
    // perform transformations to make it render and prettier
    return '<span class="ttmlTerm">' + doc._esc(content) + '</span>';
}
function template(doc, content) {
    // perform transformations to make it render and prettier
    return '<div class="template">' + content + '</div>';
}
var examples = 0;
function example(doc, content) {
    // perform transformations to make it render and prettier
    var prefix = examples < 9 ? "E000" : "E00";
    return '<div class=numbered title=' + prefix + (++examples) + '>' + content + '</div>';
}
</script>
</head>
<body>
<section id='abstract'>
<p>This document defines a Level 1 API for exposing raw Timed Text Markup Language (TTML) content to <a title='Web application'>Web applications</a>.</p>
</section>
<section id='sotd'>
<p><b>This document is an editor's draft that has no official standing.</b></p>
</section>
<section id='introduction'>
<h2>Introduction</h2>
<p><em>This section is non-normative.</em></p>
<p>This document defines a Level 1 API for exposing raw Timed Text Markup Language (TTML) content to <a title='Web application'>Web applications</a>. It is expected
that a Level 2 API will be defined that builds upon this API in order to expose parsed Timed Text Markup Language (TTML) content
to <a title='Web application'>Web applications</a>.</p>
</section>
<section id='use-cases'>
<h2>Use Cases</h2>
<p><em>This section is non-normative.</em></p>
<p>This section describes common use cases for the TTML API Level 1.</p>
<section>
<h3>Web Application Rendering of Raw In-band TTML Content</h3>
<p>Some <a title='user agent'>HTML user agents</a> do not parse or render <a>TTML content</a> that is embedded in a media resource and potentially exposed to
<a title='Web application'>Web applications</a> as a <a>media-resource-specific text track</a> (i.e., <em>in-band</em> text track).
In such cases, it is possible for a <a>Web application</a> to parse and render this
content by making use of client-side script provided the <a>TTML content</a> is exposed by some well defined API.</p>
</section>
<section>
<h3>Web Application Use of Metadata in Raw In-band TTML Content</h3>
<p>Authors of <a>TTML content</a> may include a variety of arbitrary metadata that provide additional layers of information about that content. For example, the
<a href='https://dvcs.w3.org/hg/ttml/raw-file/default/ttml1/spec/ttml1.html#metadata-attribute-agent'><code>ttp:agent</code></a> attribute may be used to specify the
agent(s) involved in the performance (production) of content (such as '<code>James Bond</code>', '<code>Doctor No</code>', etc.), and the
<a href='https://dvcs.w3.org/hg/ttml/raw-file/default/ttml1/spec/ttml1.html#metadata-attribute-role'><code>ttp:role</code></a> attribute may be used to
specify the role(s) of content (such as <code>action</code>, <code>dialog</code>, <code>music</code>, etc.),
and so forth. In such cases, it is possible for a <a>Web application</a> to parse and utilize this metadata
by making use of client-side script provided the <a>TTML content</a> containing the metadata is exposed by some well defined API.</p>
<p>An example of utilizing this metadata would be providing a client script generated user interface to search for <a>TTML content</a> associated with particular
agents or roles, or automatically provide links from content so marked to other Web content or explanatory material.</p>
</section>
</section>
<section id='terminology'>
<h2>Definitions</h2>
<section id='terminology'>
<h3>Terminology</h3>
<dl>
<dt id='terms-raw-ttml-content'>[raw TTML content]</dt>
<dd>An unparsed form of <a>TTML content</a> suitable for representation as a string data type.</dd>
</dd>
</dl>
</section>
<section id='externals'>
<h3>External Definitions</h3>
<p>This specification relies upon the certain concepts and APIs defined in other specifications as follows:</p>
<dl>
<dt>DOM</dt>
<dd>The concept
<a href='http://dom.spec.whatwg.org#concept-throw'><dfn>throw</dfn></a>,
and the exception
<a href='http://dom.spec.whatwg.org#syntaxerror'><dfn><code>SyntaxError</code></dfn></a>.
</dd>
<dt>HTML</dt>
<dd>The concepts
<a href='http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#interactive'><dfn>interactive browsers</dfn></a>,
<a href='http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#media-resource-specific-text-track'><dfn>media-resource-specific text track</dfn></a>,
<a href='http://www.w3.org/html/wg/drafts/html/master/infrastructure.html#non-interactive'><dfn>non-interactive browsers</dfn></a>, and
<a href='http://www.w3.org/html/wg/drafts/html/master/introduction.html#a-quick-introduction-to-html'><dfn>user agent</dfn></a>,
<a href='http://www.w3.org/html/wg/drafts/html/master/introduction.html#background'><dfn>Web application</dfn></a>,
and the interface
<a href='http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#texttrackcue'><dfn><code>TextTrackCue</code></dfn></a>.
[[!HTML5]]</dd>
<dt>TTML</dt>
<dd>The concepts
<a href='http://dvcs.w3.org/hg/ttml/raw-file/default/ttml1/spec/ttml1.html#ttml-content-doctype'><dfn>TTML content</dfn></a>,
<a href='http://dvcs.w3.org/hg/ttml/raw-file/default/ttml1/spec/ttml1.html#semantics-region-layout-step-1'><dfn>TTML intermediate synchronic document</dfn></a>, and
<a href='https://dvcs.w3.org/hg/ttml/raw-file/default/ttml1/spec/ttml1.html#time-expression-semantics-media'><dfn>TTML media time</dfn></a>.
[[!TTML1]]</dd>
<dt>WebIDL</dt>
<dd>The generic semantics that apply to IDL specifications. [[!WEBIDL]]</dd>
</dl>
</section>
</section>
<section id='conformance'>
<p>An <a title='user agent'>HTML user agent</a> that claims to support any profile of [[!TTML1]], or any subsequent version thereof, MUST implement
support for the TTML Level 1 API defined herein, and, if it exposes <a>TTML content</a> to <a title='Web application'>Web applications</a> in any fashion,
then it also MUST expose that content to <a title='Web application'>Web applications</a> using this API.</p>
<p class='note'>The above conformance requirement is not intended to proscribe exposing <a>TTML content</a> to a <a>Web application</a> using an alternative mechanism to that defined herein. That is, <a>TTML content</a> may be exposed to a <a>Web application</a> in multiple ways, provided one of those ways is the mechanism defined here.</p>
</section>
<section id='apis'>
<h2>API Definitions</h2>
<section id='RawTTMLCue'>
<h2>RawTTMLCue Interface</h2>
<p class='issue'>Need to cite definitions of <em>well-formed</em> and <em>UTF-16 encoded XML serialization</em>.</p>
<dl class='idl' title='[Constructor(double startTime, double endTime, DOMString text)] interface RawTTMLCue : TextTrackCue'>
<dt>attribute DOMString text</dt>
<dd>Access text representation of cue. Upon read, returns UTF-16 encoded XML serialization of the <a>TTML intermediate synchronic document</a> associated with cue.
Upon write, if specified value is a well-formed UTF-16 encoded XML serialization of a <a>TTML intermediate synchronic document</a>, then the content of the cue is
set to the new value; otherwise, <a>throw</a> a <a><code>SyntaxError</code></a> exception.</dd>
</dl>
<section>
<h3>Constructors</h3>
<dl class='constructors'>
<dt id='widl-RawTTMLCue-RawTTMLCue-double-startTime-double-endTime-DOMString-text'><code>RawTTMLCue</code></dt>
<dd>
<table class='parameters'>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Nullable</th>
<th>Optional</th>
<th>Description</th>
</tr>
<tr>
<td class='prmName'>startTime</td>
<td class='prmType'><code><a>double</a></code></td>
<td class='prmNullFalse'>✘</td>
<td class='prmOptFalse'>✘</td>
<td class='prmDesc'>
A <a>TTML media time</a> relative cue starting time, as further defined by
<a href='http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-TextTrackCue-startTime'><dfn><code>startTime</code></dfn></a> [[!HTML5]].
</td>
</tr>
<tr>
<td class='prmName'>endTime</td>
<td class='prmType'><code><a>double</a></code></td>
<td class='prmNullFalse'>✘</td>
<td class='prmOptFalse'>✘</td>
<td class='prmDesc'>
A <a>TTML media time</a> relative cue ending time, as further defined by
<a href='http://www.w3.org/html/wg/drafts/html/master/embedded-content-0.html#dom-TextTrackCue-endTime'><dfn><code>endTime</code></dfn></a> [[!HTML5]].
</td>
</tr>
<tr>
<td class='prmName'>text</td>
<td class='prmType'><code><a>DOMString</a></code></td>
<td class='prmNullFalse'>✘</td>
<td class='prmOptFalse'>✘</td>
<td class='prmDesc'>
A non-empty string representing a well-formed UTF-16 encoded XML serialization of a <a>TTML intermediate synchronic document</a>.
</td>
</tr>
</table>
<p>If the <code>endTime</code> parameter is less than <code>startTime</code>, then set the cue's end time to <code>startTime</code>.</p>
<p class='note'>The value of the <code>text</code> parameter may be an empty string, in which case the constructed cue object represents
a <dfn>cue with no content</dfn>.</p>
</dd>
</dl>
</section>
</section>
</section>
</body>
</html>
