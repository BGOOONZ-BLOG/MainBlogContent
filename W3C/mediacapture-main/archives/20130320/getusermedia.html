<!DOCTYPE html>
<html lang="en-us">
<head>
  <meta name="generator" content="HTML Tidy for HTML5 (experimental) for Linux https://github.com/w3c/tidy-html5/tree/68a9e74">
  <style>/* --- EXAMPLES --- */
div.example-title {
    min-width: 7.5em;
    color: #b9ab2d;
}
div.example-title span {
    text-transform: uppercase;   
}
aside.example, div.example, div.illegal-example {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
div.illegal-example { color: red }
div.illegal-example p { color: black }
aside.example, div.example {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
    border-color: #e0cb52;
    background: #fcfaee;    
}

aside.example div.example {
    border-left-width: .1em;
    border-color: #999;
    background: #fff;
}
aside.example div.example div.example-title {
    color: #999;
}
</style><style>/* --- ISSUES/NOTES --- */
div.issue-title, div.note-title {
    padding-right:  1em;
    min-width: 7.5em;
    color: #b9ab2d;
}
div.issue-title { color: #e05252; }
div.note-title { color: #52e052; }
div.issue-title span, div.note-title span {
    text-transform: uppercase;
}
div.note, div.issue {
    margin-top: 1em;
    margin-bottom: 1em;
}
.note > p:first-child, .issue > p:first-child { margin-top: 0 }
.issue, .note {
    padding: .5em;
    border-left-width: .5em;
    border-left-style: solid;
}
div.issue, div.note {
    padding: 0.5em;
    margin: 1em 0;
    position: relative;
    clear: both;
}
span.note, span.issue { padding: .1em .5em .15em; }

.issue {
    border-color: #e05252;
    background: #fbe9e9;
}
.note {
    border-color: #52e052;
    background: #e9fbe9;
}


</style><style>/* HIGHLIGHTS */
code.prettyprint {
    color:  inherit;
}

/* this from google-code-prettify */
.pln{color:#000}@media screen{.str{color:#080}.kwd{color:#008}.com{color:#800}.typ{color:#606}.lit{color:#066}.pun,.opn,.clo{color:#660}.tag{color:#008}.atn{color:#606}.atv{color:#080}.dec,.var{color:#606}.fun{color:red}}@media print,projection{.str{color:#060}.kwd{color:#006;font-weight:bold}.com{color:#600;font-style:italic}.typ{color:#404;font-weight:bold}.lit{color:#044}.pun,.opn,.clo{color:#440}.tag{color:#006;font-weight:bold}.atn{color:#404}.atv{color:#060}}ol.linenums{margin-top:0;margin-bottom:0}li.L0,li.L1,li.L2,li.L3,li.L5,li.L6,li.L7,li.L8{list-style-type:none}li.L1,li.L3,li.L5,li.L7,li.L9{background:#eee}
</style><style>/* --- Best Practices --- */
div.practice {
    border: solid #bebebe 1px;
    margin: 2em 1em 1em 2em;
}

span.practicelab {
    margin: 1.5em 0.5em 1em 1em;
    font-weight: bold;
    font-style: italic;
    background: #dfffff;
    position: relative;
    padding: 0 0.5em;
    top: -1.5em;
}

p.practicedesc {
    margin: 1.5em 0.5em 1em 1em;
}

@media screen {
    p.practicedesc {
        position: relative;
        top: -2em;
        padding: 0;
        margin: 1.5em 0.5em -1em 1em;
    }
}
</style><style>/* --- WEB IDL --- */
pre.idl {
    border-top: 1px solid #90b8de;
    border-bottom: 1px solid #90b8de;
    padding:    1em;
    line-height:    120%;
}

pre.idl::before {
    content:    "WebIDL";
    display:    block;
    width:      150px;
    background: #90b8de;
    color:  #fff;
    font-family:    initial;
    padding:    3px;
    font-weight:    bold;
    margin: -1em 0 1em -1em;
}

.idlType {
    color:  #ff4500;
    font-weight:    bold;
    text-decoration:    none;
}

/*.idlModule*/
/*.idlModuleID*/
/*.idlInterface*/
.idlInterfaceID, .idlDictionaryID, .idlCallbackID, .idlEnumID {
    font-weight:    bold;
    color:  #005a9c;
}
a.idlEnumItem {
    color:  #000;
    border-bottom:  1px dotted #ccc;
    text-decoration: none;
}

.idlSuperclass {
    font-style: italic;
    color:  #005a9c;
}

/*.idlAttribute*/
.idlAttrType, .idlFieldType, .idlMemberType {
    color:  #005a9c;
}
.idlAttrName, .idlFieldName, .idlMemberName {
    color:  #ff4500;
}
.idlAttrName a, .idlFieldName a, .idlMemberName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlMethod*/
.idlMethType, .idlCallbackType {
    color:  #005a9c;
}
.idlMethName {
    color:  #ff4500;
}
.idlMethName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlCtor*/
.idlCtorName {
    color:  #ff4500;
}
.idlCtorName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlParam*/
.idlParamType {
    color:  #005a9c;
}
.idlParamName, .idlDefaultValue {
    font-style: italic;
}

.extAttr {
    color:  #666;
}

/*.idlSectionComment*/
.idlSectionComment {
    color: gray;
}

/*.idlConst*/
.idlConstType {
    color:  #005a9c;
}
.idlConstName {
    color:  #ff4500;
}
.idlConstName a {
    color:  #ff4500;
    border-bottom:  1px dotted #ff4500;
    text-decoration: none;
}

/*.idlException*/
.idlExceptionID {
    font-weight:    bold;
    color:  #c00;
}

.idlTypedefID, .idlTypedefType {
    color:  #005a9c;
}

.idlRaises, .idlRaises a.idlType, .idlRaises a.idlType code, .excName a, .excName a code {
    color:  #c00;
    font-weight:    normal;
}

.excName a {
    font-family:    monospace;
}

.idlRaises a.idlType, .excName a.idlType {
    border-bottom:  1px dotted #c00;
}

.excGetSetTrue, .excGetSetFalse, .prmNullTrue, .prmNullFalse, .prmOptTrue, .prmOptFalse {
    width:  45px;
    text-align: center;
}
.excGetSetTrue, .prmNullTrue, .prmOptTrue { color:  #0c0; }
.excGetSetFalse, .prmNullFalse, .prmOptFalse { color:  #c00; }

.idlImplements a {
    font-weight:    bold;
}

dl.attributes, dl.methods, dl.constants, dl.constructors, dl.fields, dl.dictionary-members {
    margin-left:    2em;
}

.attributes dt, .methods dt, .constants dt, .constructors dt, .fields dt, .dictionary-members dt {
    font-weight:    normal;
}

.attributes dt code, .methods dt code, .constants dt code, .constructors dt code, .fields dt code, .dictionary-members dt code {
    font-weight:    bold;
    color:  #000;
    font-family:    monospace;
}

.attributes dt code, .fields dt code, .dictionary-members dt code {
    background:  #ffffd2;
}

.attributes dt .idlAttrType code, .fields dt .idlFieldType code, .dictionary-members dt .idlMemberType code {
    color:  #005a9c;
    background:  transparent;
    font-family:    inherit;
    font-weight:    normal;
    font-style: italic;
}

.methods dt code {
    background:  #d9e6f8;
}

.constants dt code {
    background:  #ddffd2;
}

.constructors dt code {
    background:  #cfc;
}

.attributes dd, .methods dd, .constants dd, .constructors dd, .fields dd, .dictionary-members dd {
    margin-bottom:  1em;
}

table.parameters, table.exceptions {
    border-spacing: 0;
    border-collapse:    collapse;
    margin: 0.5em 0;
    width:  100%;
}
table.parameters { border-bottom:  1px solid #90b8de; }
table.exceptions { border-bottom:  1px solid #deb890; }

.parameters th, .exceptions th {
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
    font-family:    initial;
    font-weight:    normal;
    text-shadow:    #666 1px 1px 0;
}
.parameters th { background: #90b8de; }
.exceptions th { background: #deb890; }

.parameters td, .exceptions td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
    vertical-align: top;
}

.parameters tr:first-child td, .exceptions tr:first-child td {
    border-top: none;
}

.parameters td.prmName, .exceptions td.excName, .exceptions td.excCodeName {
    width:  100px;
}

.parameters td.prmType {
    width:  120px;
}

table.exceptions table {
    border-spacing: 0;
    border-collapse:    collapse;
    width:  100%;
}
</style><link href="getusermedia.css" rel="stylesheet" type="text/css">

  <title>Media Capture and Streams</title>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <!--
   To publish this document, see instructions in README
   -->

  
  
<style>/*****************************************************************
 * ReSpec 3 CSS
 * Robin Berjon - http://berjon.com/
 *****************************************************************/

/* --- INLINES --- */
em.rfc2119 { 
    text-transform:     lowercase;
    font-variant:       small-caps;
    font-style:         normal;
    color:              #900;
}

h1 acronym, h2 acronym, h3 acronym, h4 acronym, h5 acronym, h6 acronym, a acronym,
h1 abbr, h2 abbr, h3 abbr, h4 abbr, h5 abbr, h6 abbr, a abbr {
    border: none;
}

dfn {
    font-weight:    bold;
}

a.internalDFN {
    color:  inherit;
    border-bottom:  1px solid #99c;
    text-decoration:    none;
}

a.externalDFN {
    color:  inherit;
    border-bottom:  1px dotted #ccc;
    text-decoration:    none;
}

a.bibref {
    text-decoration:    none;
}

cite .bibref {
    font-style: normal;
}

code {
    color:  #ff4500;
}


/* --- --- */
ol.algorithm { counter-reset:numsection; list-style-type: none; }
ol.algorithm li { margin: 0.5em 0; }
ol.algorithm li:before { font-weight: bold; counter-increment: numsection; content: counters(numsection, ".") ") "; }

/* --- TOC --- */
.toc a, .tof a {
    text-decoration:    none;
}

a .secno, a .figno {
    color:  #000;
}

ul.tof, ol.tof {
    list-style: none outside none;
}

.caption {
    margin-top: 0.5em;
    font-style:   italic;
}

/* --- TABLE --- */
table.simple {
    border-spacing: 0;
    border-collapse:    collapse;
    border-bottom:  3px solid #005a9c;
}

.simple th {
    background: #005a9c;
    color:  #fff;
    padding:    3px 5px;
    text-align: left;
}

.simple th[scope="row"] {
    background: inherit;
    color:  inherit;
    border-top: 1px solid #ddd;
}

.simple td {
    padding:    3px 10px;
    border-top: 1px solid #ddd;
}

.simple tr:nth-child(even) {
    background: #f0f6ff;
}

/* --- DL --- */
.section dd > p:first-child {
    margin-top: 0;
}

.section dd > p:last-child {
    margin-bottom: 0;
}

.section dd {
    margin-bottom:  1em;
}

.section dl.attrs dd, .section dl.eldef dd {
    margin-bottom:  0;
}
</style><link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet"><!--[if lt IE 9]><script src='http://www.w3.org/2008/site/js/html5shiv.js'></script><![endif]--></head>

<body><div class="head">
  <p>
    
      <a href="http://www.w3.org/"><img src="http://www.w3.org/Icons/w3c_home" alt="W3C" height="48" width="72"></a>
    
  </p>
  <h1 class="title" id="title">Media Capture and Streams</h1>
  
  <h2 id="w3c-editor-s-draft-19-march-2013"><acronym title="World Wide Web Consortium">W3C</acronym> Editor's Draft 20 March 2013</h2>
  <dl>
    
      <dt>This version:</dt>
      <dd><a href="http://dev.w3.org/2011/webrtc/editor/archives/20130320/getusermedia.html">http://dev.w3.org/2011/webrtc/editor/archives/20130320/getusermedia.html</a></dd>
      <dt>Latest published version:</dt>
      <dd><a href="http://www.w3.org/TR/mediacapture-streams/">http://www.w3.org/TR/mediacapture-streams/</a></dd>
    
    
      <dt>Latest editor's draft:</dt>
      <dd><a href="http://dev.w3.org/2011/webrtc/editor/getusermedia.html">http://dev.w3.org/2011/webrtc/editor/getusermedia.html</a></dd>
    
    
    
    
      
        <dt>Previous editor's draft:</dt>
        <dd><a href="http://dev.w3.org/2011/webrtc/editor/archives/20121212/getusermedia.html">http://dev.w3.org/2011/webrtc/editor/archives/20121212/getusermedia.html</a></dd>
      
    
    
    
    <dt>Editors:</dt>
    <dd><span>Daniel C. Burnett</span>, Voxeo</dd>
<dd><span>Adam Bergkvist</span>, Ericsson</dd>
<dd><span>Cullen Jennings</span>, Cisco</dd>
<dd><span>Anant Narayanan</span>, Mozilla (until November 2012)</dd>

    
  </dl>
  
  
  
  
    
      <p class="copyright">Initial Author of this Specification was Ian Hickson, Google Inc., with the following copyright statement:<br> © Copyright 2004-2011 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA. You are granted a license to use, reproduce and create derivative works of this document.</p> <p class="copyright">All subsequent changes since 26 July 2011 done by the <acronym title="World Wide Web Consortium">W3C</acronym> WebRTC Working Group and the Device APIs Working Group are under the following <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>:<br>© 2011-2013 <a href="http://www.w3.org/"><acronym title="World Wide Web Consortium">W3C</acronym></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><acronym title="Massachusetts Institute of Technology">MIT</acronym></a>, <a href="http://www.ercim.eu/"><acronym title="European Research Consortium for Informatics and Mathematics">ERCIM</acronym></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>), All Rights Reserved. <a href="http://www.w3.org/Consortium/Legal/copyright-documents">Document use</a>  rules apply.</p> <p class="copyright">For the entire publication on the <acronym title="World Wide Web Consortium">W3C</acronym> site the <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a> and <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> rules apply.</p>
    
  
  <hr>
</div>
  <section class="introductory" id="abstract"><h2>Abstract</h2>
    <p>This document defines a set of JavaScript APIs that allow local media,
    including audio and video, to be requested from a platform.</p>
  </section><section id="sotd" class="introductory"><h2>Status of This Document</h2>
  
    
      
        <p>
          <em>This section describes the status of this document at the time of its publication. Other
          documents may supersede this document. A list of current <acronym title="World Wide Web Consortium">W3C</acronym> publications and the latest revision
          of this technical report can be found in the <a href="http://www.w3.org/TR/"><acronym title="World Wide Web Consortium">W3C</acronym> technical reports
          index</a> at http://www.w3.org/TR/.</em>
        </p>
        
    <p>This document is not complete. It is subject to major changes and, while
    early experimentations are encouraged, it is therefore not intended for
    implementation. The API is based on preliminary work done in the WHATWG.
    The Media Capture Task Force expects this specification to evolve
    significantly based on:</p>

    <ul>
      <li>Privacy issues that arise when exposing local capabilities and local
      streams.</li>

      <li>Technical discussions within the task force.</li>

      <li>Experience gained through early experimentations.</li>

      <li>Feedback received from other groups and individuals.</li>
    </ul>
  
        <p>
          This document was published by the <a href="http://www.w3.org/2011/04/webrtc/">Web Real-Time Communication Working Group</a> and <a href="http://www.w3.org/2009/dap">Device APIs Working Group</a> as an Editor's Draft.
          
          
          If you wish to make comments regarding this document, please send them to 
          <a href="mailto:public-media-capture@w3.org">public-media-capture@w3.org</a> 
          (<a href="mailto:public-media-capture-request@w3.org?subject=subscribe">subscribe</a>,
          <a href="http://lists.w3.org/Archives/Public/public-media-capture/">archives</a>).
          
          
          
          
        All comments are welcome.
        
        
          </p><p>
            Publication as an Editor's Draft does not imply endorsement by the <acronym title="World Wide Web Consortium">W3C</acronym> Membership.
            This is a draft document and may be updated, replaced or obsoleted by other documents at 
            any time. It is inappropriate to cite this document as other than work in progress.
          </p>
        
        
        <p>
          
            This document was produced by a group operating under the 
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.
          
          
          
            
              <acronym title="World Wide Web Consortium">W3C</acronym> maintains a public list of any patent disclosures (<a href="http://www.w3.org/2004/01/pp-impl/47318/status" rel="disclosure">Web Real-Time Communication Working Group</a>, <a href="http://www.w3.org/2004/01/pp-impl/43696/status" rel="disclosure">Device APIs Working Group</a>)
            
            made in connection with the deliverables of the group; that page also includes instructions for 
            disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains
            <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the
            information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
            6 of the <acronym title="World Wide Web Consortium">W3C</acronym> Patent Policy</a>.
          
          
        </p>
        
      
    
  
</section><section id="toc"><h2 class="introductory">Table of Contents</h2><ul class="toc"><li class="tocline"><a class="tocxref" href="#intro"><span class="secno">1. </span>Introduction</a></li><li class="tocline"><a class="tocxref" href="#conformance"><span class="secno">2. </span>Conformance</a></li><li class="tocline"><a class="tocxref" href="#terminology"><span class="secno">3. </span>Terminology</a></li><li class="tocline"><a class="tocxref" href="#stream-api"><span class="secno">4. </span>Stream API</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#introduction"><span class="secno">4.1 </span>Introduction</a></li><li class="tocline"><a class="tocxref" href="#mediastream"><span class="secno">4.2 </span>MediaStream</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes"><span class="secno">4.2.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#methods"><span class="secno">4.2.2 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediastreamtrack"><span class="secno">4.3 </span>MediaStreamTrack</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-1"><span class="secno">4.3.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#methods-1"><span class="secno">4.3.2 </span>Methods</a></li><li class="tocline"><a class="tocxref" href="#track-source-types"><span class="secno">4.3.3 </span>Track Source Types</a></li></ul></li><li class="tocline"><a class="tocxref" href="#video-and-audio-tracks"><span class="secno">4.4 </span>Video and Audio Tracks</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#videostreamtrack-interface"><span class="secno">4.4.1 </span>VideoStreamTrack interface</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-2"><span class="secno">4.4.1.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#methods-2"><span class="secno">4.4.1.2 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#photo-related-event-definitions"><span class="secno">4.4.2 </span>Photo-related Event Definitions</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-3"><span class="secno">4.4.2.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#dictionary-blobeventinit-members"><span class="secno">4.4.2.2 </span>Dictionary <span class="formerLink"><code>BlobEventInit</code></span> Members</a></li></ul></li><li class="tocline"><a class="tocxref" href="#audiostreamtrack"><span class="secno">4.4.3 </span>AudioStreamTrack</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-3"><span class="secno">4.4.3.1 </span>Methods</a></li></ul></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#url"><span class="secno">5. </span>URL</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-4"><span class="secno">5.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediastreams-as-media-elements"><span class="secno">6. </span>MediaStreams as Media Elements</a></li><li class="tocline"><a class="tocxref" href="#event-summary"><span class="secno">7. </span>Event summary</a></li><li class="tocline"><a class="tocxref" href="#local-content"><span class="secno">8. </span>Obtaining local multimedia content</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#navigatorusermedia"><span class="secno">8.1 </span>NavigatorUserMedia</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#methods-5"><span class="secno">8.1.1 </span>Methods</a></li></ul></li><li class="tocline"><a class="tocxref" href="#mediastreamconstraints"><span class="secno">8.2 </span>MediaStreamConstraints</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-mediastreamconstraints-members"><span class="secno">8.2.1 </span>Dictionary <span class="formerLink"><code>MediaStreamConstraints</code></span> Members</a></li><li class="tocline"><a class="tocxref" href="#dictionary-mediatrackconstraints-members"><span class="secno">8.2.2 </span>Dictionary <span class="formerLink"><code>MediaTrackConstraints</code></span> Members</a></li></ul></li><li class="tocline"><a class="tocxref" href="#navigatorusermediasuccesscallback"><span class="secno">8.3 </span>NavigatorUserMediaSuccessCallback</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#callback-navigatorusermediasuccesscallback-parameters"><span class="secno">8.3.1 </span>Callback <span class="formerLink"><code>NavigatorUserMediaSuccessCallback</code></span> Parameters</a></li></ul></li><li class="tocline"><a class="tocxref" href="#navigatorusermediaerror-and-navigatorusermediaerrorcallback"><span class="secno">8.4 </span>NavigatorUserMediaError and NavigatorUserMediaErrorCallback</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#attributes-4"><span class="secno">8.4.1 </span>Attributes</a></li><li class="tocline"><a class="tocxref" href="#callback-navigatorusermediaerrorcallback-parameters"><span class="secno">8.4.2 </span>Callback <span class="formerLink"><code>NavigatorUserMediaErrorCallback</code></span> Parameters</a></li></ul></li><li class="tocline"><a class="tocxref" href="#implementation-suggestions"><span class="secno">8.5 </span>Implementation Suggestions</a></li></ul></li><li class="tocline"><a class="tocxref" href="#examples"><span class="secno">9. </span>Examples</a></li><li class="tocline"><a class="tocxref" href="#iana-registrations"><span class="secno">10. </span>IANA Registrations</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#constraint-registrations"><span class="secno">10.1 </span>Constraint Registrations</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#dictionary-minmaxconstraint-members"><span class="secno">10.1.1 </span>Dictionary <span class="formerLink"><code>MinMaxConstraint</code></span> Members</a></li></ul></li></ul></li><li class="tocline"><a class="tocxref" href="#change-log"><span class="secno">11. </span>Change Log</a></li><li class="tocline"><a class="tocxref" href="#acknowledgements"><span class="secno">A. </span>Acknowledgements</a></li><li class="tocline"><a class="tocxref" href="#references"><span class="secno">B. </span>References</a><ul class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><span class="secno">B.1 </span>Normative references</a></li></ul></li></ul></section>

  

  <section class="informative" id="intro">
    <!--OddPage--><h2><span class="secno">1. </span>Introduction</h2><p><em>This section is non-normative.</em></p>

    <p>Access to multimedia streams (video, audio, or both) from local devices
    (video cameras, microphones, Web cams) can have a number of uses, such as
    real-time communication, recording, and surveillance.</p>

    <p>This document defines the APIs used to get access to local devices that
    can generate multimedia stream data. This document also defines the stream
    API by which JavaScript is able to manipulate the stream data or otherwise
    process it.</p>
  </section>

<section id="conformance"><!--OddPage--><h2><span class="secno">2. </span>Conformance</h2>
<p>
  As well as sections marked as non-normative, all authoring guidelines, diagrams, examples,
  and notes in this specification are non-normative. Everything else in this specification is
  normative.
</p>
<p>
  The key words <em title="MUST" class="rfc2119">MUST</em>, <em title="MUST NOT" class="rfc2119">MUST NOT</em>, <em title="REQUIRED" class="rfc2119">REQUIRED</em>, <em title="SHOULD" class="rfc2119">SHOULD</em>, <em title="SHOULD NOT" class="rfc2119">SHOULD NOT</em>, <em title="RECOMMENDED" class="rfc2119">RECOMMENDED</em>, <em title="MAY" class="rfc2119">MAY</em>,
  and <em title="OPTIONAL" class="rfc2119">OPTIONAL</em> in this specification are to be interpreted as described in [<cite><a href="#bib-RFC2119" class="bibref">RFC2119</a></cite>].
</p>

      <p>
        This specification defines conformance criteria that apply to a single
        product: the <dfn id="dfn-user-agent">user agent</dfn> that implements the
        interfaces that it contains.
      </p>
      <p>
        Implementations that use ECMAScript to implement the APIs defined in
        this specification must implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [<cite><a href="#bib-WEBIDL" class="bibref">WEBIDL</a></cite>],
        as this specification uses that specification and terminology.
      </p>
    </section>
    <section id="terminology">
      <!--OddPage--><h2><span class="secno">3. </span>Terminology</h2>
      <p>
        The <code><a href="http://dev.w3.org/html5/spec/webappapis.html#eventhandler">
        EventHandler</a></code> interface represents a callback used for event
        handlers as defined in [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>].
      </p>
      <p>
        The concepts <dfn id="dfn-queue-a-task"><a href="http://dev.w3.org/html5/spec/webappapis.html#queue-a-task">
        queue a task</a></dfn> and
        <dfn id="dfn-fires-a-simple-event"><a href="http://dev.w3.org/html5/spec/webappapis.html#fire-a-simple-event">
        fires a simple event</a></dfn> are defined in [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>].
      </p>

      <p>
        The terms <dfn id="dfn-event-handlers"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handlers">
        event handlers</a></dfn> and
        <dfn id="dfn-event-handler-event-types"><a href="http://dev.w3.org/html5/spec/webappapis.html#event-handler-event-type">
        event handler event types</a></dfn> are defined in [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>].
      </p>

      <div class="note"><div class="note-title"><span>Note</span></div><p class="">The following paragraphs need to be spread out
      to make them easier to read.  Also, descriptions for "source
      states" and "capabilities" need to be added.</p></div>

      <p>A <dfn id="dfn-source">source</dfn> is the "thing" providing the source of a
      media stream track. The source is the broadcaster of the media
      itself. A source can be a physical webcam, microphone, local
      video or audio file from the user's hard drive, network
      resource, or static image.  Some sources have an identifier
      which <em title="must" class="rfc2119">must</em> be unique to
      the application (un-guessable by another application) and
      persistent between application sessions (e.g., the identifier
      for a given source device/application must stay the same, but
      not be guessable by another application). Sources that must have
      an identifier are camera and microphone sources; local file
      sources are not required to have an identifier. Source
      identifiers let the application save, identify the availability
      of, and directly request specific sources.  Other than the
      identifier, other bits of source identify
      are <strong>never</strong> directly available to the application
      until the user agent connects a source to a track. Once a source
      has been "released" to the application (either via a permissions
      UI, pre-configured allow-list, or some other release mechanism)
      the application will be able discover additional source-specific
      capabilities.  When a source is connected to a track, it must
      conform to the constraints present on that track (or set of
      tracks).  Sources will be released (un-attached) from a track
      when the track is ended for any reason.  On
      the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object, sources are
      represented by a <code><a>sourceType</a></code> attribute. The
      behavior of APIs associated with the source's capabilities and
      state change depending on the source type.  [[Sources
      have <code><a>capabilities</a></code>
      and <code><a>state</a></code>. The capabilities and state are
      "owned" by the source and are common to any [multiple] tracks
      that happen to be using the same source (e.g., if two different
      tracks objects bound to the same source ask for the same
      capability or state information, they will get back the same
      answer).]]</p>
      <p><dfn title="constraints" id="dfn-constraints">Constraints</dfn> are an optional feature
      for restricting the range of allowed variability on a
      source. Without provided constraints, implementations are free
      to select a source's state from the full range of its supported
      capabilities, and to adjust that state at any time for any
      reason.  Constraints may be optional or mandatory. Optional
      constraints are represented by an ordered list, mandatory
      constraints are an unordered set. The order of the optional
      constraints is from most important (at the head of the list) to
      least important (at the tail of the list).  Constraints are
      stored on the track object, not the source. Each track can be
      optionally initialized with constraints, or constraints can be
      added afterward through the constraint APIs defined in this
      spec.  Applying track level constraints to a source is
      conditional based on the type of source. For example, read-only
      sources will ignore any specified constraints on the track.  It
      is possible for two tracks that share a unique source to apply
      contradictory constraints. Under such contradictions, the
      implementation will mute both tracks and notify them that they
      are over-constrained.  Events are available that allow the
      application to know when constraints cannot be met by the user
      agent. These typically occur when the application applies
      constraints beyond the capability of a source, contradictory
      constraints, or in some cases when a source cannot sustain
      itself in over-constrained scenarios (overheating, etc.).
      Constraints that are intended for video sources will be ignored
      by audio sources and vice-versa. Similarly, constraints that are
      not recognized will be preserved in the constraint structure,
      but ignored by the application. This will allow future
      constraints to be defined in a backward compatible manner.  A
      correspondingly-named constraint exists for each corresponding
      source state name and capability name.  In general, user agents
      will have more flexibility to optimize the media streaming
      experience the fewer constraints are applied.</p>
    </section>

  <section id="stream-api">
    <!--OddPage--><h2><span class="secno">4. </span>Stream API</h2>

    <section id="introduction">
      <h3><span class="secno">4.1 </span>Introduction</h3>

      <p>The <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> interface is used to represent
      streams of media data, typically (but not necessarily) of audio and/or
      video content, e.g. from a local camera. The data from a
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object does not necessarily have a
      canonical binary form; for example, it could just be "the video currently
      coming from the user’s video camera". This allows user agents to
      manipulate media streams in whatever fashion is most suitable on the
      user’s platform.</p>

      <p>Each <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object can contain zero or more
      tracks, in particular audio and video tracks. All tracks in a MediaStream
      are intended to be synchronized when rendered. Different MediaStreams do
      not need to be synchronized.</p>

      <p>Each track in a MediaStream object has a corresponding
      <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object.</p>

      <p>A <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> represents content comprising
      one or more channels, where the channels have a defined well known
      relationship to each other (such as a stereo or 5.1 audio signal).</p>

      <p>A channel is the smallest unit considered in this API
      specification.</p>

      <p>A <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object has an input and an output.
      The input depends on how the object was created: a
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object generated by a <code><a href="#dom-navigator-getusermedia">getUserMedia()</a></code> call (which is
      described later in this document), for instance, might take its input
      from the user’s local camera. The output of the object controls how the
      object is used, e.g., what is saved if the object is written to a file or
      what is displayed if the object is used in a <code>video</code>
      element.</p>

      <p>Each track in a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object can be
      disabled, meaning that it is muted in the object’s output. All tracks are
      initially enabled.</p>

      <p>A <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> can be <a class="internalDFN" href="#dfn-finished">finished</a>, indicating
      that its inputs have forever stopped providing data.</p>

      <p>The output of a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object <em title="MUST" class="rfc2119">MUST</em> correspond
      to the tracks in its input. Muted audio tracks <em title="MUST" class="rfc2119">MUST</em> be replaced with
      silence. Muted video tracks <em title="MUST" class="rfc2119">MUST</em> be replaced with blackness.</p>

      <p>A new <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object can be created from
      accessible media sources (that does not require any additional
      permissions) using the <code><a href="#dom-mediastream">MediaStream()</a>
      </code> constructor. The constructor argument can either be an existing
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object, in which case the given stream is
      cloned, or an array of <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects. The
      latter from makes it possible to compose a stream from different source
      streams.</p>

      <p><img alt="A MediaStream" src="images/media-stream.png" width="40%"></p>

      <p>The ability to duplicate a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>,
      specifically creating a new <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>
      object using another stream as input, allows for greater control
      since separate
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> instances can be manipulated and
      <a class="internalDFN" href="#dfn-consumer" title="consumer">consumed</a> individually.</p>

      <p>When a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object is being generated
      from a local file (as opposed to a live audio/video source), the user
      agent <em title="SHOULD" class="rfc2119">SHOULD</em> stream the data from the file in real time, not all at once.
      The <code>MediaStream</code> object is also used in contexts outside
      <code>getUserMedia</code>, such as [<cite><a href="#bib-WEBRTC10" class="bibref">WEBRTC10</a></cite>]. In both cases, ensuring
      a realtime stream reduces the ease with which pages can distinguish live
      video from pre-recorded video, which can help protect the user’s
      privacy.</p>
    </section>

    <section id="mediastream">
      <h3><span class="secno">4.2 </span>MediaStream</h3>

      <p>The <dfn id="dom-mediastream"> <code>MediaStream()</code></dfn>
      constructor takes zero or one argument. If the argument is supplied, it
      <em title="MUST" class="rfc2119">MUST</em> either be of type <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> or an array of
      <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects. When the constructor is
      invoked, the UA must run the following steps:</p>

      <ol>
        <li>
          <p>Let <var>stream</var> be a newly constructed <code>
          <a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object.</p>
        </li>

        <li>
          <p>Initialize <var>stream’s</var> <code><a href="#dom-mediastream-id">id</a></code> attribute to a newly generated
          value.</p>
        </li>

        <li>
          <p>If the constructor’s argument is present, run the sub steps that
          corresponds to the argument type.</p>

          <ul>
            <li>
              <p><code>Array</code> of <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
              objects:</p>

              <p>Run the following sub steps for each <code>
              <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> in the array:</p>

              <ol>
                <li>
                  <p><em>Add track</em>: Let <var>track</var> be the <code>
                  <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>  about to be processed.</p>
                </li>

                <li>
                  <p>If <var>track</var> has <a class="internalDFN" href="#event-mediastreamtrack-ended">ended</a> or if there is already
                  a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> contained within
                  <var>stream</var> that has the same underlying source as
                  <var>track</var>, then abort these steps and continue with the
                  next track (if any).</p>
                </li>

                <li>
                  <p>Create a new <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object
                  and let it inherit <var>track’s</var> underlying source,
                  <code><a href="#dom-mediastreamtrack-kind">kind</a></code> and
                  <code><a href="#dom-mediastreamtrack-label">label</a></code>
                  attributes. Add the new <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
                  </code> to <var>stream</var>’s <a href="#track-set">track
                  set</a>.</p>
                </li>
              </ol>

            </li>

            <li>
              <p><code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>:</p>

              <p>Run the sub steps labeled <em>Add track</em> (above) for every
              <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> in the argument stream’s
              <a href="#track-set">track set</a>.
              </p>
            </li>
          </ul>
        </li>

        <li>
          <p>Return <var>stream</var>.</p>
        </li>
      </ol>

      <p>A <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> can have multiple audio and video
      sources (e.g. because the user has multiple microphones, or because the
      real source of the stream is a media resource with many media tracks).
      The stream represented by a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> thus has zero
      or more tracks.</p>

      <p>The tracks of a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> are stored in a
      <dfn id="track-set">track set</dfn>. The track set <em title="MUST" class="rfc2119">MUST</em> contain the
      <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects that correspond
      to the tracks of the stream. The relative order of the tracks in the set
      is user agent defined and the API will never put any requirements on the
      order. The proper way to find a specific <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
      </code> object in the set is to look it up by its
      <code><a href="#dom-mediastreamtrack-id">id</a></code>.</p>

      <p>An object that reads data from the output of a
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> is referred to as a
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> <dfn id="dfn-consumer">consumer</dfn>. The list of
      <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> consumers currently includes the media
      elements and the <code><a>PeerConnection</a></code> API specified in
      [<cite><a href="#bib-WEBRTC10" class="bibref">WEBRTC10</a></cite>].</p>

      <div class="note"><div class="note-title"><span>Note</span></div><p class=""><code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> consumers must be able to
      handle tracks being added and removed. This behavior is specified per
      consumer.</p></div>

      <p>A <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object is said to be
      <dfn id="dfn-finished">finished</dfn> when all tracks belonging to the stream have
      <a class="internalDFN" href="#event-mediastreamtrack-ended">ended</a>. When this happens for any reason other than the
      <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method being
      invoked, the user agent <em title="MUST" class="rfc2119">MUST</em> queue a task that runs the following
      steps:</p>

      <ol>
        <li>
          <p>If the object’s <code><a href="#dom-mediastream-ended">ended</a></code> attribute has the value
          true already, then abort these steps. (The <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method was probably called
          just before the stream stopped for other reasons, e.g. the user
          clicked an in-page stop button and then the user agent provided stop
          button.)</p>
        </li>

        <li>
          <p>Set the object’s <code><a href="#dom-mediastream-ended">ended</a></code> attribute to true.</p>
        </li>

        <li>
          <p>Fire a simple event named <code title="event-MediaStream-ended"><a href="#event-mediastream-ended">ended</a></code> at the object.</p>
        </li>
      </ol>

      <p>If the end of the stream was reached due to a user request, the task
      source for this <span title="concept-task">task</span> is the user
      interaction task source. Otherwise the task source for this <span title="concept-task">task</span> is the networking task source.</p>

      <!-- The "[]" in MediaStreamTrack[] breaks rendering if added directly to
      the constructor declaration -->
      <pre class="idl"><span class="idlTypedef" id="idl-def-MediaStreamTrackArray">typedef <span class="idlTypedefType"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span>[] <span class="idlTypedefID">MediaStreamTrackArray</span>;</span></pre><div class="idlTypedefDesc">Throughout this specification, the identifier <span class="idlTypedefID">MediaStreamTrackArray</span> is used to refer to the array of <span class="idlTypedefType"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span> type.</div>

      <pre class="idl"><span class="idlInterface" id="idl-def-MediaStream">[<span class="extAttr">Constructor (),
        Constructor (MediaStream stream),
        Constructor (MediaStreamTrackArray tracks)</span>]
interface <span class="idlInterfaceID">MediaStream</span> : <span class="idlSuperclass"><a>EventTarget</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>    <span class="idlAttrName"><a href="#widl-MediaStream-id">id</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType">sequence&lt;<a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlMethName"><a href="#widl-MediaStream-getAudioTracks-sequence-MediaStreamTrack">getAudioTracks</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType">sequence&lt;<a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>&gt;</span> <span class="idlMethName"><a href="#widl-MediaStream-getVideoTracks-sequence-MediaStreamTrack">getVideoTracks</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>?</span>          <span class="idlMethName"><a href="#widl-MediaStream-getTrackById-MediaStreamTrack-DOMString-trackId">getTrackById</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">trackId</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                       <span class="idlMethName"><a href="#widl-MediaStream-addTrack-void-MediaStreamTrack-track">addTrack</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                       <span class="idlMethName"><a href="#widl-MediaStream-removeTrack-void-MediaStreamTrack-track">removeTrack</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span> <span class="idlParamName">track</span></span>);</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>boolean</a></span>      <span class="idlAttrName"><a href="#widl-MediaStream-ended">ended</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span> <span class="idlAttrName"><a href="#widl-MediaStream-onended">onended</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span> <span class="idlAttrName"><a href="#widl-MediaStream-onaddtrack">onaddtrack</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span> <span class="idlAttrName"><a href="#widl-MediaStream-onremovetrack">onremovetrack</a></span>;</span>
};</span></pre><section id="attributes"><h4><span class="secno">4.2.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-MediaStream-ended"><code>ended</code> of type <span class="idlAttrType"><a>boolean</a></span>,            </dt><dd>
          <p>The <dfn id="dom-mediastream-ended"><code>MediaStream.ended</code></dfn>
          attribute <em title="MUST" class="rfc2119">MUST</em> return true if the <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> has
          <a class="internalDFN" href="#dfn-finished">finished</a>, and false otherwise.</p>

          <p>When a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object is created, its
          <code><a href="#dom-mediastream-ended">ended</a></code> attribute
          <em title="MUST" class="rfc2119">MUST</em> be set to false, unless it is being created using the
          <code><a href="#dom-mediastream">MediaStream()</a></code> constructor
          whose arguments are lists of <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
          objects that are all <a class="internalDFN" href="#event-mediastreamtrack-ended">ended</a>, in which case the
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object <em title="MUST" class="rfc2119">MUST</em> be created with its
          <code><a href="#dom-mediastream-ended">ended</a></code> attribute set
          to true.</p>
        </dd><dt id="widl-MediaStream-id"><code>id</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>
          <p>When a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object is created, the
          user agent <em title="MUST" class="rfc2119">MUST</em> generate a globally unique identifier string, and
          <em title="MUST" class="rfc2119">MUST</em> initialize the object’s <code><a href="#dom-mediastream-id">id</a></code> attribute to that string.
          Such strings <em title="MUST" class="rfc2119">MUST</em> only use characters in the ranges U+0021, U+0023 to
          U+0027, U+002A to U+002B, U+002D to U+002E, U+0030 to U+0039, U+0041
          to U+005A, U+005E to U+007E, and <em title="MUST" class="rfc2119">MUST</em> be 36 characters long.</p>
          <!-- UUIDs have 36 characters
      including hyphens; the ranges above comes from RFC4574 (the a=label:
      thing in SDP) -->
          <!-- described below -->

          <p>The <dfn id="dom-mediastream-id"><code>id</code></dfn>
          attribute <em title="MUST" class="rfc2119">MUST</em> return the value to which it was initialized when the
          object was created.</p>
        </dd><dt id="widl-MediaStream-onaddtrack"><code>onaddtrack</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastream-addtrack">addtrack</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by
        all objects implementing the <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> interface.
        </dd><dt id="widl-MediaStream-onended"><code>onended</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastream-ended">ended</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by all
        objects implementing the <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>
        interface.</dd><dt id="widl-MediaStream-onremovetrack"><code>onremovetrack</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastream-removetrack">removetrack</a></code>, <em title="MUST" class="rfc2119">MUST</em> be
        supported by all objects implementing the <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a>
        </code> interface.</dd></dl></section><section id="methods"><h4><span class="secno">4.2.2 </span>Methods</h4><dl class="methods"><dt id="widl-MediaStream-addTrack-void-MediaStreamTrack-track"><code>addTrack</code></dt><dd>
          <p>Adds the given <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> to this
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>.</p>

          <p>When the <dfn id="dom-mediastream-addtrack"><code>addTrack()</code></dfn> method is
          invoked, the user agent <em title="MUST" class="rfc2119">MUST</em> run the following steps:</p>

          <ol>
            <li>
              <p>Let <var>track</var> be the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> argument and <var>stream</var> this <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>
              object.</p>
            </li>

            <li>
              <p>If <var>stream</var> is <a class="internalDFN" href="#dfn-finished">finished</a>, throw an
              <code>INVALID_STATE_ERR</code> exception.</p>
            </li>

            <li>
              <p>If <var>track</var> is already in <var>stream’s</var>
              <a href="#track-set">track set</a>, then abort these steps.</p>
            </li>

            <li>
              <p>Create a new <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object
              and let it inherit <var>track’s</var> underlying source,
              <code><a href="#dom-mediastreamtrack-kind">kind</a></code> and
              <code><a href="#dom-mediastreamtrack-label">label</a></code>
              attributes. Add the new <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> to <var>stream</var>’s <a href="#track-set">track
              set</a>.</p>
            </li>
          </ol>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">track</td><td class="prmType"><code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-MediaStream-getAudioTracks-sequence-MediaStreamTrack"><code>getAudioTracks</code></dt><dd>
          <p>Returns a sequence of <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects
          representing the audio tracks in this stream.</p>

          <p>The <dfn id="dom-mediastream-getaudiotracks"><code>getAudioTracks()</code></dfn>
          method <em title="MUST" class="rfc2119">MUST</em> return a sequence that represents a snapshot of all the
          <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects in this stream’s
          <a href="#track-set">track set</a> whose <code>
          <a href="#dom-mediastreamtrack-kind">kind</a></code> is equal to
          "<code>audio</code>". The conversion from the <a href="#track-set">track set</a> to the sequence is user agent defined and
          the order does not have to stable between calls.</p>
        <div><em>No parameters.</em></div><div><em>Return type: </em><code>sequence&lt;<a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>&gt;</code></div></dd><dt id="widl-MediaStream-getTrackById-MediaStreamTrack-DOMString-trackId"><code>getTrackById</code></dt><dd>
          <p>The <dfn id="dom-mediastream-gettrackbyid"><code>getTrackById()</code></dfn>
          method <em title="MUST" class="rfc2119">MUST</em> return the first <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
          object in this stream’s <a href="#track-set">track set</a> whose
          <code><a href="#dom-mediastreamtrack-id">id</a></code> is equal to
          <var>trackId</var>. The method <em title="MUST" class="rfc2119">MUST</em> return null if no track matches
          the <var>trackId</var> argument.</p>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">trackId</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>, nullable</div></dd><dt id="widl-MediaStream-getVideoTracks-sequence-MediaStreamTrack"><code>getVideoTracks</code></dt><dd>
          <p>Returns a sequence of <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects
          representing the video tracks in this stream.</p>

          <p>The <dfn id="dom-mediastream-getvideotracks"><code>getVideoTracks()</code></dfn>
          method <em title="MUST" class="rfc2119">MUST</em> return a sequence that represents a snapshot of all the
          <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> objects in this stream’s
          <a href="#track-set">track set</a> whose <code>
          <a href="#dom-mediastreamtrack-kind">kind</a></code> is equal to
          "<code>video</code>". The conversion from the <a href="#track-set">track set</a> to the sequence is user agent defined and
          the order does not have to stable between calls.</p>
        <div><em>No parameters.</em></div><div><em>Return type: </em><code>sequence&lt;<a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>&gt;</code></div></dd><dt id="widl-MediaStream-removeTrack-void-MediaStreamTrack-track"><code>removeTrack</code></dt><dd>
          <p>Removes the given <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> from this
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>.</p>

          <p>When the <dfn id="dom-mediastream-removetrack"><code>removeTrack()</code></dfn> method
          is invoked, the user agent <em title="MUST" class="rfc2119">MUST</em> run the following steps:</p>

          <ol>
            <li>
              <p>Let <var>track</var> be the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> argument and <var>stream</var> this <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>
              object.</p>
            </li>

            <li>
              <p>If <var>stream</var> is <a class="internalDFN" href="#dfn-finished">finished</a>, throw an
              <code>INVALID_STATE_ERR</code> exception.</p>
            </li>

            <li>
              <p>If <var>track</var> is not in <var>stream</var>’s
              <a href="#track-set">track set</a>, abort these steps.</p>
            </li>

            <li>
              <p>Remove <var>track</var> from <var>stream’s</var>
              <a href="#track-set">track set</a>.</p>
            </li>
          </ol>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">track</td><td class="prmType"><code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></section>
    </section>

    <section id="mediastreamtrack">
      <h3><span class="secno">4.3 </span>MediaStreamTrack</h3>

      <p>A <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object represents a media
      source in the user agent. Several <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
      objects can represent the same media source, e.g., when the user chooses
      the same camera in the UI shown by two consecutive calls to
      <code><a href="#dom-navigator-getusermedia">getUserMedia()</a></code>
      .</p>

      <p>Note that a web application can revoke all given permissions
      with <code><a href="#dom-mediastreamtrack-stop">MediaStreamTrack.stop()</a></code>.</p>

      <p>A <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object is said to <em>end</em>
      when the user agent learns that no more data will ever be forthcoming for
      this track.</p>

      <p>When a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object ends for any reason
      (e.g., because the user rescinds the permission for the page to use the
      local camera, or because the data comes from a finite file and the file’s
      end has been reached and the user has not requested that it be looped, or
      because the UA has instructed the track to end for any reason, or because
      the reference count of the track’s underlying media source has reached
      zero, it is said to be <dfn id="dfn-ended">ended</dfn>. When track instance
      <var>track</var> ends for any reason other than the <code><a href="#dom-mediastreamtrack-stop">stop()</a></code> method being invoked on the
      <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object that represents
      <var>track</var>, the user agent <em title="MUST" class="rfc2119">MUST</em> queue a task that runs the
      following steps:</p>

      <ol>
        <li>
          <p>If the track’s <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute
          has the value <code>ended</code> already, then abort these steps.</p>
        </li>

        <li>
          <p>Set <var>track’s</var> <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute to
          <code>ended</code>.</p>
        </li>

        <li>
          <p>Fire a simple event named <code><a href="#event-mediastreamtrack-ended">ended</a></code> at the object.</p>
        </li>
      </ol>

      <p>If the end of the stream was reached due to a user request, the event
      source for this event is the user interaction event source.</p>

      <p>Constraints are independent of sources. **** Add note about
      potential effects of readonly and remote flags ****</p>

      <p>Whether <code><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></code> were provided at
      track initialization time or need to be established later at
      runtime, the APIs defined below allow the retrieval and
      manipulation of the constraints currently established on a
      track.</p>

      <p>Each track maintains an internal version of
      the <code><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></code> structure, namely a
      mandatory set of constraints (no duplicates), and an optional
      ordered list of individual constraint objects (may contain
      duplicates). The internal stored constraint structure is only
      exposed to the application using the existing
      <code><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></code>,
      <code><a>MediaTrackConstraintSet</a></code>, <code><a>MediaTrackConstraint</a></code>,
      and similarly-derived-type dictionary objects.</p>

      <p>When track constraints change, a user agent <em title="must" class="rfc2119">must</em> queue a task to evaluate those changes
      when the task queue is next serviced. Similarly, if
      the <a class="internalDFN" href="#dfn-sourcetype">sourceType</a>
      changes, then the user agent should perform the same actions to
      re-evaluate the constraints of each track affected by that
      source change.</p>

      <pre class="idl"><span class="idlInterface" id="idl-def-MediaStreamTrack">interface <span class="idlInterfaceID">MediaStreamTrack</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>             <span class="idlAttrName"><a href="#widl-MediaStreamTrack-kind">kind</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>             <span class="idlAttrName"><a href="#widl-MediaStreamTrack-id">id</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>             <span class="idlAttrName"><a href="#widl-MediaStreamTrack-label">label</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>boolean</a></span>               <span class="idlAttrName"><a href="#widl-MediaStreamTrack-enabled">enabled</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaStreamTrackState"><code>MediaStreamTrackState</code></a></span> <span class="idlAttrName"><a href="#widl-MediaStreamTrack-readyState">readyState</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a class="idlType" href="#idl-def-SourceTypeEnum"><code>SourceTypeEnum</code></a></span>        <span class="idlAttrName"><a href="#widl-MediaStreamTrack-sourceType">sourceType</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>             <span class="idlAttrName"><a href="#widl-MediaStreamTrack-sourceId">sourceId</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>          <span class="idlAttrName"><a href="#widl-MediaStreamTrack-onstarted">onstarted</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>          <span class="idlAttrName"><a href="#widl-MediaStreamTrack-onmute">onmute</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>          <span class="idlAttrName"><a href="#widl-MediaStreamTrack-onunmute">onunmute</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>          <span class="idlAttrName"><a href="#widl-MediaStreamTrack-onended">onended</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>any</a></span>                    <span class="idlMethName"><a href="#widl-MediaStreamTrack-getConstraint-any-DOMString-constraintName-boolean-mandatory">getConstraint</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">constraintName</span></span>, <span class="idlParam">optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">mandatory</span> = <span class="idlDefaultValue">false</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                   <span class="idlMethName"><a href="#widl-MediaStreamTrack-setConstraint-void-DOMString-constraintName-any-constraintValue-boolean-mandatory">setConstraint</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">constraintName</span></span>, <span class="idlParam"><span class="idlParamType"><a>any</a></span> <span class="idlParamName">constraintValue</span></span>, <span class="idlParam">optional <span class="idlParamType"><a>boolean</a></span> <span class="idlParamName">mandatory</span> = <span class="idlDefaultValue">false</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a>?</span> <span class="idlMethName"><a href="#widl-MediaStreamTrack-constraints-MediaTrackConstraints">constraints</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                   <span class="idlMethName"><a href="#widl-MediaStreamTrack-applyConstraints-void-MediaTrackConstraints-constraints">applyConstraints</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></span> <span class="idlParamName">constraints</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                   <span class="idlMethName"><a href="#widl-MediaStreamTrack-prependConstraint-void-DOMString-constraintName-any-constraintValue">prependConstraint</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">constraintName</span></span>, <span class="idlParam"><span class="idlParamType"><a>any</a></span> <span class="idlParamName">constraintValue</span></span>);</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                   <span class="idlMethName"><a href="#widl-MediaStreamTrack-appendConstraint-void-DOMString-constraintName-any-constraintValue">appendConstraint</a></span> (<span class="idlParam"><span class="idlParamType"><a>DOMString</a></span> <span class="idlParamName">constraintName</span></span>, <span class="idlParam"><span class="idlParamType"><a>any</a></span> <span class="idlParamName">constraintValue</span></span>);</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span>          <span class="idlAttrName"><a href="#widl-MediaStreamTrack-onoverconstrained">onoverconstrained</a></span>;</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                   <span class="idlMethName"><a href="#widl-MediaStreamTrack-stop-void">stop</a></span> ();</span>
};</span></pre><section id="attributes-1"><h4><span class="secno">4.3.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-MediaStreamTrack-enabled"><code>enabled</code> of type <span class="idlAttrType"><a>boolean</a></span>,            </dt><dd>
          <p>The <dfn id="dom-mediastreamtrack-enabled"><code>MediaStreamTrack.enabled</code></dfn>
          attribute, on getting, <em title="MUST" class="rfc2119">MUST</em> return the last value to which it was
          set. On setting, it <em title="MUST" class="rfc2119">MUST</em> be set to the new value, and then, if the
          <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object is still associated with
          a track, <em title="MUST" class="rfc2119">MUST</em> enable the track if the new value is true, and disable
          it otherwise.</p>

          <div class="note"><div class="note-title"><span>Note</span></div><p class="">Thus, after a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> is
          disassociated from its track, its <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attribute still
          changes value when set; it just doesn’t do anything with that new
          value.</p></div>
        </dd><dt id="widl-MediaStreamTrack-id"><code>id</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>
          <p>Unless a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object is created as
          a part a of special purpose algorithm that specifies how the track id
          must be initialized, the user agent <em title="MUST" class="rfc2119">MUST</em> generate a globally unique
          identifier string and initialize the object’s <code><a href="#dom-mediastreamtrack-id">id</a></code> attribute to that string.</p>

          <p>An example of an algorithm that specifies how the track id must be
          initialized is the algorithm to represent an incoming network
          component with a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object.
          [<cite><a href="#bib-WEBRTC10" class="bibref">WEBRTC10</a></cite>]</p>

          <p><dfn id="dom-mediastreamtrack-id">
          <code>MediaStreamTrack.id</code></dfn> attribute <em title="MUST" class="rfc2119">MUST</em> return the value
          to which it was initialized when the object was created.</p>
        </dd><dt id="widl-MediaStreamTrack-kind"><code>kind</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>
          <p>The <dfn id="dom-mediastreamtrack-kind"><code>MediaStreamTrack.kind</code></dfn>
          attribute <em title="MUST" class="rfc2119">MUST</em> return the string "<code>audio</code>" if the object
          represents an audio track or "<code>video</code>" if object represents
          a video track.</p>
        </dd><dt id="widl-MediaStreamTrack-label"><code>label</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>
          <p>User agents <em title="MAY" class="rfc2119">MAY</em> label audio and video sources (e.g., "Internal
          microphone" or "External USB Webcam"). The <dfn id="dom-mediastreamtrack-label"><code>MediaStreamTrack.label</code></dfn>
          attribute <em title="MUST" class="rfc2119">MUST</em> return the label of the object’s corresponding track,
          if any. If the corresponding track has or had no label, the attribute
          <em title="MUST" class="rfc2119">MUST</em> instead return the empty string.</p>

          <div class="note"><div class="note-title"><span>Note</span></div><p class="">Thus the <code><a href="#dom-mediastreamtrack-kind">kind</a></code> and <code title="dom-MediaStreamTrack-label"><a href="#dom-mediastreamtrack-label">label</a></code> attributes do not
          change value, even if the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object
          is disassociated from its corresponding track.</p></div>
        </dd><dt id="widl-MediaStreamTrack-onended"><code>onended</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastreamtrack-ended">ended</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by
        all objects implementing the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
        interface.</dd><dt id="widl-MediaStreamTrack-onmute"><code>onmute</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastreamtrack-muted">muted</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by
        all objects implementing the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
        interface.</dd><dt id="widl-MediaStreamTrack-onoverconstrained"><code>onoverconstrained</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastreamtrack-overconstrained">overconstrained</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by
        all objects implementing the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
        interface.</dd><dt id="widl-MediaStreamTrack-onstarted"><code>onstarted</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastreamtrack-started">started</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported by
        all objects implementing the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
        interface.</dd><dt id="widl-MediaStreamTrack-onunmute"><code>onunmute</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>This event handler, of type <code><a href="#event-mediastreamtrack-unmuted">unmuted</a></code>, <em title="MUST" class="rfc2119">MUST</em> be supported
        by all objects implementing the <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
        interface.</dd><dt id="widl-MediaStreamTrack-readyState"><code>readyState</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-MediaStreamTrackState"><code>MediaStreamTrackState</code></a></span>, readonly   </dt><dd>
          <p>The <dfn id="dom-mediastreamtrack-readystate"><code>readyState</code></dfn>
          attribute represents the state of the track. It <em title="MUST" class="rfc2119">MUST</em> return the value
          to which the user agent last set it.

          </p><p>When a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object is created via <code><a href="#dom-navigator-getusermedia">getUserMedia()</a></code>, its
          <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> is either
          <code>live</code> or <code>muted</code>, depending on the state of
          the track's underlying media source. For example, a track in a
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> created with <code><a href="#dom-navigator-getusermedia">getUserMedia()</a></code> <em title="MUST" class="rfc2119">MUST</em>
          initially have its <code><a href="#dom-mediastreamtrack-readystate">readyState</a></code> attribute
          set to <code>live</code>.
          </p>
        </dd><dt id="widl-MediaStreamTrack-sourceId"><code>sourceId</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>The application-unique identifier for this source. The
        same identifier must be valid between sessions of this
        application, but must also be different for other
        applications. Some sort of GUID is recommended for the
        identifier.</dd><dt id="widl-MediaStreamTrack-sourceType"><code>sourceType</code> of type <span class="idlAttrType"><a class="idlType" href="#idl-def-SourceTypeEnum"><code>SourceTypeEnum</code></a></span>, readonly   </dt><dd>Returns the type information associated with the currently
        attached source (if any).</dd></dl></section><section id="methods-1"><h4><span class="secno">4.3.2 </span>Methods</h4><dl class="methods"><dt id="widl-MediaStreamTrack-appendConstraint-void-DOMString-constraintName-any-constraintValue"><code>appendConstraint</code></dt><dd>
          

          <p>Appends (at the end of the list) the provided constraint
          name and value. This method does not consider whether a
          same-named constraint already exists in the optional
          constraints list.</p>
          <p>This method applies exclusively to optional constraints;
          it does not modify mandatory constraints.</p>
          <p>This method is a convenience API for programmatically
          building constraint structures.</p>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraintName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The name of the constraint to
              append to the list of optional constraints.</td></tr><tr><td class="prmName">constraintValue</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Either a primitive value
              (float/DOMString/etc), or a <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a>
              dictionary.</td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-MediaStreamTrack-applyConstraints-void-MediaTrackConstraints-constraints"><code>applyConstraints</code></dt><dd>
          

          <p>This API will replace all existing constraints with the
          provided constraints (if existing constraints
          exist). Otherwise, it will apply the newly provided
          constraints to the track.</p>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraints</td><td class="prmType"><code><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">A new constraint structure to apply
              to this track.</td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-MediaStreamTrack-constraints-MediaTrackConstraints"><code>constraints</code></dt><dd>
          Returns the complete constraints object associated with the
          track. If no mandatory constraints have been defined,
          the <code>mandatory</code> field will not be present (it will be
          undefined). If no optional constraints have been defined,
          the <code>optional</code> field will not be present (it will be
          undefined). If neither optional, nor mandatory constraints have been
          created, the value <code>null</code> is returned.
        <div><em>No parameters.</em></div><div><em>Return type: </em><code><a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a></code>, nullable</div></dd><dt id="widl-MediaStreamTrack-getConstraint-any-DOMString-constraintName-boolean-mandatory"><code>getConstraint</code></dt><dd>
          

          <p>Retrieves a specific named constraint value from the
          track. The named constraints are the same names used for
          the <a class="internalDFN" href="#dfn-capabilities">capabilities</a> API, and also are
          the same names used for the source's <a class="internalDFN" href="#dfn-state">state</a> attributes.</p>

          <p>Returns one of the following types:</p>
          <dl>
            <dt><strong>null</strong></dt>
            <dd>If no constraint matching the provided constraintName
            exists in the respective optional or mandatory set on this
            track.</dd>
            <dt><strong>sequence&lt;MediaTrackConstraint&gt;</strong></dt>
            <dd>
              <p>If the mandatory flag is false and there is at least
              one optional matching constraint name defined on this
              track.
              </p><p>Each MediaTrackConstraint result in the list will
              contain a key which matches the
              requested <a>constraintName</a> parameter, and whose
              value will either be a primitive value, or
              a <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a>
              object.</p>
              <p>The returned list will be ordered from most
              important-to-satisfy at index <code>0</code>, to the
              least-important-to-satisfy optional constraint.</p>
              <div class="note"><div class="note-title"><span>Note</span></div><div class="">
                <p><strong>Example: </strong>Given a track with an
                internal constraint structure:
<tt style="white-space: pre;">
{
  <code>mandatory</code>: {
    width: { min: 640 },
    height: { min: 480 }
  },
  <code>optional</code>: [
    { width: 650 },
    { width: { min: 650 }},
    { frameRate: 60 },
    { width: { max: 800 }},
    { fillLightMode: "off" },
    { facingMode: "user" }
  ]
}                                
</tt>
                and a request for <code>getConstraint("width")</code>, the following list would be returned:
<tt style="white-space: pre;">
[
    { width: 650 },
    { width: { min: 650 }}
    { width: { max: 800 }}
]
</tt>
                </p>
              </div></div>
            </dd>
            <dt><strong>MinMaxConstraint</strong></dt>
            <dd>If the mandatory flag is true, and the requested
            constraint is defined in the
            mandatory <code>MediaTrackConstraintSet</code> associated
            with this track, and the value of the constraint is a
            min/max range object.</dd>
            <dt><strong><em>primitive_value</em></strong></dt>
            <dd>If the mandatory flag is true, and the requested
            constraint is defined in the
            mandatory <code>MediaTrackConstraintSet</code> associated
            with this track, and the value of the constraint is a
            primitive value (DOMString, unsigned long, float,
            etc.).</dd>
          </dl>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraintName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The name of the setting for which the current value of that setting should be returned</td></tr><tr><td class="prmName">mandatory</td><td class="prmType"><code><a>boolean</a> = false</code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc"><code>true</code> to indicate that
              the constraint should be looked up in the mandatory set
              of constraints, otherwise, the constraintName should be
              retrieved from the optional list of constraints.</td></tr></table><div><em>Return type: </em><code><a>any</a></code></div></dd><dt id="widl-MediaStreamTrack-prependConstraint-void-DOMString-constraintName-any-constraintValue"><code>prependConstraint</code></dt><dd>
          

          <p>Prepends (inserts before the start of the list) the
          provided constraint name and value. This method does not
          consider whether a same-named constraint already exists in
          the optional constraints list.</p>
          <p>This method applies exclusively to optional constraints;
          it does not modify mandatory constraints.</p>
          <p>This method is a convenience API for programmatically
          building constraint structures.</p>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraintName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The name of the constraint to
              prepend to the list of optional constraints.</td></tr><tr><td class="prmName">constraintValue</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Either a primitive value
              (float/DOMString/etc), or a <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a>
              dictionary.</td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-MediaStreamTrack-setConstraint-void-DOMString-constraintName-any-constraintValue-boolean-mandatory"><code>setConstraint</code></dt><dd>
          

          <p>This method updates the value of a same-named existing
          constraint (if found) in either the mandatory or optional
          list, and otherwise sets the new constraint.</p>
          <p>This method searches the list of optional constraints
          from index <code>0</code> (highest priority) to the end of
          the list (lowest priority) looking for matching
          constraints. Therefore, for multiple same-named optional
          constraints, this method will only update the value of the
          highest-priority matching constraint.</p>
          <p>If the <code>mandatory</code> flag is <code>false</code>
          and the constraint is not found in the list of optional
          constraints, then a new optional constraint is created and
          appended to the end of the list (thus having lowest
          priority).</p>
          <div class="note"><div class="note-title"><span>Note</span></div><div class="">
            <p><strong>Note: </strong>This behavior allows applications to iteratively call <code>setConstraint</code> and have their constraints added in the order specified in the source.</p>
          </div></div>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraintName</td><td class="prmType"><code><a>DOMString</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">The name of the constraint to set.</td></tr><tr><td class="prmName">constraintValue</td><td class="prmType"><code><a>any</a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc">Either a primitive value
              (float/DOMString/etc), or a <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a>
              dictionary.</td></tr><tr><td class="prmName">mandatory</td><td class="prmType"><code><a>boolean</a> = false</code></td><td class="prmNullFalse">✘</td><td class="prmOptTrue">✔</td><td class="prmDesc">A flag indicating whether this constraint should be applied to the optional or mandatory constraints.</td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd><dt id="widl-MediaStreamTrack-stop-void"><code>stop</code></dt><dd>
          <p>When a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
          object’s <dfn id="dom-mediastreamtrack-stop"><code>stop()</code></dfn> method
          is invoked, if no source is attached
          (e.g., <code><a>sourceType</a></code> is "none"), then this
          call returns immediately (e.g., is a no-op).  Otherwise, the
          user agent <em title="MUST" class="rfc2119">MUST</em> queue a task that runs the following steps:</p>

          <ol>
            <li>
              <p>Let <var>track</var> be the current
              <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object.</p>
            </li>

            <li>
              <p><a class="internalDFN" href="#event-mediastreamtrack-ended" title="ended">End</a> <var>track</var>. The track starts
              outputting only silence and/or blackness, as appropriate.</p>
            </li>

            <li>
              <p>Permanently stop the generation of data for <var>track</var>'s
              source. If the data is being generated from a live source (e.g.,
              a microphone or camera), then the user agent <em title="SHOULD" class="rfc2119">SHOULD</em> remove any
              active "on-air" indicator for that source. If the data is being
              generated from a prerecorded source (e.g. a video file), any
              remaining content in the file is ignored.</p>
            </li>
          </ol>

          <p>The task source for the <span title="concept-task">tasks</span>
          queued for the <code><a href="#dom-mediastreamtarck-stop">stop()</a></code> method is the DOM
          manipulation task source.</p>
        <div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></section>

      <pre class="idl"><span class="idlEnum" id="idl-def-MediaStreamTrackState">enum <span class="idlEnumID">MediaStreamTrackState</span> {
    "<a href="#idl-def-MediaStreamTrackState.new" class="idlEnumItem">new</a>",
    "<a href="#idl-def-MediaStreamTrackState.live" class="idlEnumItem">live</a>",
    "<a href="#idl-def-MediaStreamTrackState.muted" class="idlEnumItem">muted</a>",
    "<a href="#idl-def-MediaStreamTrackState.ended" class="idlEnumItem">ended</a>"
};</span></pre><table class="simple"><tr><th colspan="2">Enumeration description</th></tr><tr><td><code id="idl-def-MediaStreamTrackState.new">new</code></td><td>The track type is new and has not been initialized
          (connected to a source of any kind). This state implies that
          the track's label will be the empty string.</td></tr><tr><td><code id="idl-def-MediaStreamTrackState.live">live</code></td><td>
          <p>The track is active (the track’s underlying media source is making
          a best-effort attempt to provide data in real time).</p>

          <p>The output of a track in the <code>live</code> state can be
          switched on and off with the <code><a href="#dom-mediastreamtrack-enabled">enabled</a></code> attribute.</p>
        </td></tr><tr><td><code id="idl-def-MediaStreamTrackState.muted">muted</code></td><td>
          <p>The track is muted (the track’s underlying media source is
          temporarily unable to provide data).</p>

          <p>A <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> in a
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> may be muted if the user
          temporarily revokes the web application's permission to use a media
          input device.</p>

          <p>Also, the "muted" state can be entered when a track becomes over-constrained.</p>
        </td></tr><tr><td><code id="idl-def-MediaStreamTrackState.ended">ended</code></td><td>
          <p>The track has <a class="internalDFN" href="#event-mediastreamtrack-ended">ended</a> (the track's underlying media source is
          no longer providing data, and will never provide more data for this
          track).  Once a track enters this state, it never exits it.</p>

          <p>For example, a video track in a
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> ends if the user unplugs the
          USB web camera that acts as the track's media source.</p>
        </td></tr></table>

      <section id="track-source-types">
        <h4><span class="secno">4.3.3 </span>Track Source Types</h4>

        <pre class="idl"><span class="idlEnum" id="idl-def-SourceTypeEnum">enum <span class="idlEnumID">SourceTypeEnum</span> {
    "<a href="#idl-def-SourceTypeEnum.none" class="idlEnumItem">none</a>",
    "<a href="#idl-def-SourceTypeEnum.camera" class="idlEnumItem">camera</a>",
    "<a href="#idl-def-SourceTypeEnum.microphone" class="idlEnumItem">microphone</a>",
    "<a href="#idl-def-SourceTypeEnum.photo-camera" class="idlEnumItem">photo-camera</a>"
};</span></pre><table class="simple"><tr><th colspan="2">Enumeration description</th></tr><tr><td><code id="idl-def-SourceTypeEnum.none">none</code></td><td>This track has no source. This is the case when the track is in the <code>"new"</code> or <code>"ended"</code> <code><a class="internalDFN" href="#dom-mediastreamtrack-readystate">readyState</a></code>.</td></tr><tr><td><code id="idl-def-SourceTypeEnum.camera">camera</code></td><td>A valid source type only for <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code>s. The source is a local video-producing camera source (without special photo-mode support).</td></tr><tr><td><code id="idl-def-SourceTypeEnum.microphone">microphone</code></td><td>A valid source type only for <code><a class="idlType" href="#idl-def-AudioStreamTrack"><code>AudioStreamTrack</code></a></code>s. The source is a local audio-producing microphone source.</td></tr><tr><td><code id="idl-def-SourceTypeEnum.photo-camera">photo-camera</code></td><td>A valid source type only for <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code>s. The source is a local video-producing camera source which supports high-resolution photo-mode and its related <code><a>state</a></code> attributes.</td></tr></table>
      </section>

    </section>

    <section id="video-and-audio-tracks">
      <h3><span class="secno">4.4 </span>Video and Audio Tracks</h3>

      <p>The <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> object cannot be
      instantiated directly. To create an instance of
      a <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>, one of its derived track
      types may be instantiated. These derived types are defined in
      this section.</p>

      <p>Note that the camera's <q>green light</q> doesn't come on
      when a new track is created; nor does the user get prompted to
      enable the camera/microphone. Those actions only happen after
      the developer has requested that a media stream
      containing <code>"new"</code> tracks be bound to a source
      via <code><a class="internalDFN" href="#dom-navigator-getusermedia">getUserMedia()</a></code>. Until that point tracks
      are inert.</p>

      <section id="videostreamtrack-interface">
        <h4><span class="secno">4.4.1 </span>VideoStreamTrack interface</h4>

        <p>Video tracks may be instantiated with optional media track
        constraints. These constraints can be later modified on the
        track as needed by the application, or created after-the-fact
        if the initial constraints are unknown to the application.</p>

        <div class="note"><div class="note-title"><span>Note</span></div><div class="">
          <p><strong>Example: </strong> <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code>
          objects are instantiated in JavaScript using the new
          operator: <br>
          <tt><b>new</b> <code>VideoStreamTrack</code>();</tt><br>
          or<br>
          <tt><b>new</b> <code>VideoStreamTrack</code>( { optional: [ { <code>sourceId</code>: "20983-20o198-109283-098-09812" }, { <code>width</code>: { min: 800, max: 1200 }}, { <code>height</code>: { min: 600 }}] });</tt>
          </p></div></div>

        <pre class="idl"><span class="idlInterface" id="idl-def-VideoStreamTrack">[<span class="extAttr">Constructor(optional MediaTrackConstraints videoConstraints)</span>]
interface <span class="idlInterfaceID">VideoStreamTrack</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span> {
<span class="idlMethod">    static <span class="idlMethType">sequence&lt;<a>DOMString</a>&gt;</span> <span class="idlMethName"><a href="#widl-VideoStreamTrack-getSourceIds-sequence-DOMString">getSourceIds</a></span> ();</span>
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span>                       <span class="idlMethName"><a href="#widl-VideoStreamTrack-takePhoto-void">takePhoto</a></span> ();</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span> <span class="idlAttrName"><a href="#widl-VideoStreamTrack-onphoto">onphoto</a></span>;</span>
<span class="idlAttribute">                attribute <span class="idlAttrType"><a>EventHandler</a></span> <span class="idlAttrName"><a href="#widl-VideoStreamTrack-onphotoerror">onphotoerror</a></span>;</span>
};</span></pre><section id="attributes-2"><h5><span class="secno">4.4.1.1 </span>Attributes</h5><dl class="attributes"><dt id="widl-VideoStreamTrack-onphoto"><code>onphoto</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>Register/unregister for "photo" events. The handler should expect to get a BlobEvent object as its first parameter.

            <div class="note"><div class="note-title"><span>Note</span></div><div class="">
              <p>The BlobEvent returns a photo (as a Blob) in a
              compressed format (for example: PNG/JPEG) rather than a
              raw ImageData object due to the expected large,
              uncompressed size of the resulting photos.</p></div></div>
          </dd><dt id="widl-VideoStreamTrack-onphotoerror"><code>onphotoerror</code> of type <span class="idlAttrType"><a>EventHandler</a></span>,            </dt><dd>In the event of an error taking the photo, a
          "photoerror" event will be dispatched instead of a "photo"
          event.  The "photoerror" is a simple event of type
          Event.</dd></dl></section><section id="methods-2"><h5><span class="secno">4.4.1.2 </span>Methods</h5><dl class="methods"><dt id="widl-VideoStreamTrack-getSourceIds-sequence-DOMString"><code>getSourceIds</code>, static</dt><dd>
            <p>Returns an array of application-unique source
            identifiers. This list will be populated only with local
            sources whose <code><a>sourceType</a></code>
            is <code>"camera"</code> or <code>"photo-camera"</code>
            [and if allowed by the user-agent, <code>"readonly"</code>
            variants of the former two types]. The video source ids
            returned in the list constitute those sources that the
            user agent can identify at the time the API is called (the
            list can grow/shrink over time as sources may be added or
            removed). As a static
            method, <code><a>getSourceIds</a></code> can be queried
            without instantiating
            any <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code> objects or
            without calling <code><a class="internalDFN" href="#dom-navigator-getusermedia">getUserMedia()</a></code>.</p>

            <div class="issue"><div class="issue-title"><span>Issue 1</span></div><div class="">
              <p><strong>Issue: </strong> This information
              deliberately adds to the fingerprinting surface of the
              UA. However, this information will not be identifiable
              outside the scope of this application and could also be
              obtained via other round-about techniques
              using <code><a class="internalDFN" href="#dom-navigator-getusermedia">getUserMedia()</a></code>.</p>
            </div></div>
          <div><em>No parameters.</em></div><div><em>Return type: </em><code>sequence&lt;<a>DOMString</a>&gt;</code></div></dd><dt id="widl-VideoStreamTrack-takePhoto-void"><code>takePhoto</code></dt><dd>
            <p>If the <code><a>sourceType</a></code>'s value is
            anything other than <code>"photo-camera"</code>, this
            method returns immediately and does nothing.  If
            the <code><a>sourceType</a></code>
            is <code>"photo-camera"</code>, then this method
            temporarily (asynchronously) switches the source into
            "high resolution photo mode", applies the
            configured <a>photoWidth</a>, <a>photoHeight</a>, <a>exposureMode</a>,
            and <a>isoMode</a> <a>state</a> to the stream, and
            records/encodes an image (using a user-agent determined
            format) into a <code>Blob</code> object. Finally, a task
            is queued to fire a "photo" event with the resulting
            recorded/encoded data. In case of a failure for any
            reason, a "photoerror" event is queued instead and no
            "photo" event is dispatched.</p>

            <div class="issue"><div class="issue-title"><span>Issue 2</span></div><div class="">
              <p><strong>Issue: </strong> We could consider providing a hint or setting for the desired photo format? There could be some alignment opportunity with the Recoding proposal...</p></div></div>
          <div><em>No parameters.</em></div><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></section>
      </section>

      <section id="photo-related-event-definitions">
        <h4><span class="secno">4.4.2 </span>Photo-related Event Definitions</h4>

        <pre class="idl"><span class="idlInterface" id="idl-def-BlobEvent">[<span class="extAttr">Constructor(DOMString type, optional BlobEventInit blobInitDict)</span>]
interface <span class="idlInterfaceID">BlobEvent</span> : <span class="idlSuperclass"><a>Event</a></span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>Blob</a></span> <span class="idlAttrName"><a href="#widl-BlobEvent-data">data</a></span>;</span>
};</span></pre><section id="attributes-3"><h5><span class="secno">4.4.2.1 </span>Attributes</h5><dl class="attributes"><dt id="widl-BlobEvent-data"><code>data</code> of type <span class="idlAttrType"><a>Blob</a></span>, readonly   </dt><dd>Returns a Blob object whose type attribute indicates the
          encoding of the blob data. An implementation must return a
          Blob in a format that is capable of being viewed in an
          HTML <code>&lt;img&gt;</code> tag.</dd></dl></section>

        <pre class="idl"><span class="idlDictionary" id="idl-def-BlobEventInit">dictionary <span class="idlDictionaryID">BlobEventInit</span> : <span class="idlSuperclass"><a>EventInit</a></span> {
<span class="idlMember">    <span class="idlMemberType"><a>Blob</a></span> <span class="idlMemberName"><a href="#widl-BlobEventInit-data">data</a></span>;</span>
};</span></pre><section id="dictionary-blobeventinit-members"><h5><span class="secno">4.4.2.2 </span>Dictionary <a href="#idl-def-BlobEventInit" class="idlType"><code>BlobEventInit</code></a> Members</h5><dl class="dictionary-members"><dt id="widl-BlobEventInit-data"><code>data</code> of type <span class="idlMemberType"><a>Blob</a></span></dt><dd>A Blob object containing the data to deliver via this event.</dd></dl></section>
      </section>
                    
      <section id="audiostreamtrack">
        <h4><span class="secno">4.4.3 </span>AudioStreamTrack</h4>
                
          <div class="note"><div class="note-title"><span>Note</span></div><div class="">
            <p><strong>Example: </strong><code><a class="idlType" href="#idl-def-AudioStreamTrack"><code>AudioStreamTrack</code></a></code> objects are instantiated in JavaScript using the new operator: <br>
              <tt><b>new</b> <code>AudioStreamTrack</code>();</tt><br>
              or<br>
              <tt><b>new</b> <code>AudioStreamTrack</code>( { optional: [ { <code>sourceId</code>: "64815-wi3c89-1839dk-x82-392aa" }, { <code>gain</code>: 0.5 }] });</tt>
            </p></div></div>

          <pre class="idl"><span class="idlInterface" id="idl-def-AudioStreamTrack">[<span class="extAttr">Constructor(optional MediaTrackConstraints audioConstraints)</span>]
interface <span class="idlInterfaceID">AudioStreamTrack</span> : <span class="idlSuperclass"><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></span> {
<span class="idlMethod">    static <span class="idlMethType">sequence&lt;<a>DOMString</a>&gt;</span> <span class="idlMethName"><a href="#widl-AudioStreamTrack-getSourceIds-sequence-DOMString">getSourceIds</a></span> ();</span>
};</span></pre><section id="methods-3"><h5><span class="secno">4.4.3.1 </span>Methods</h5><dl class="methods"><dt id="widl-AudioStreamTrack-getSourceIds-sequence-DOMString"><code>getSourceIds</code>, static</dt><dd>See definition of <code><a>getSourceIds</a></code> on
            the <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code> object. Note that
            the list of source ids
            for <code><a class="idlType" href="#idl-def-AudioStreamTrack"><code>AudioStreamTrack</code></a></code> will be populated
            only with local sources
            whose <code><a>sourceType</a></code>
            is <code>"microphone"</code> [and if allowed by the
            user-agent, <code>"readonly"</code> microphone
            variants].<div><em>No parameters.</em></div><div><em>Return type: </em><code>sequence&lt;<a>DOMString</a>&gt;</code></div></dd></dl></section>
        </section>
      </section>
    </section>

    <section id="url">
      <!--OddPage--><h2><span class="secno">5. </span>URL</h2>

      <pre class="idl"><span class="idlInterface" id="idl-def-URL">partial interface <span class="idlInterfaceID">URL</span> {
<span class="idlMethod">    static <span class="idlMethType"><a>DOMString</a></span> <span class="idlMethName"><a href="#widl-URL-createObjectURL-DOMString-MediaStream-stream">createObjectURL</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></span> <span class="idlParamName">stream</span></span>);</span>
};</span></pre><section id="methods-4"><h3><span class="secno">5.1 </span>Methods</h3><dl class="methods"><dt id="widl-URL-createObjectURL-DOMString-MediaStream-stream"><code>createObjectURL</code>, static</dt><dd>
          <p>Mints a <a href="#blob-url">Blob URL</a> to refer to the given
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>.</p>

          <p>When the <dfn id="dom-url-createobjecturl"><code>createObjectURL()</code></dfn> method
          is called with a <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> argument, the user
          agent <em title="MUST" class="rfc2119">MUST</em> return a unique <a href="#blob-url">Blob URL</a> for the
          given <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code>. [<cite><a href="#bib-FILE-API" class="bibref">FILE-API</a></cite>]</p>

          <p>For audio and video streams, the data exposed on that stream <em title="MUST" class="rfc2119">MUST</em>
          be in a format supported by the user agent for use in
          <code>audio</code> and <code>video</code> elements.</p>

          <p class="bookkeeping">A <dfn id="blob-url">Blob URL</dfn> is the
          same as what the File API specification calls a Blob URI, except that
          anything in the definition of that feature that refers to
          <code>File</code> and <code>Blob</code> objects is hereby extended to
          also apply to <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> objects.</p>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">stream</td><td class="prmType"><code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a>DOMString</a></code></div></dd></dl></section>
    </section>

    <section id="mediastreams-as-media-elements">
      <!--OddPage--><h2><span class="secno">6. </span>MediaStreams as Media Elements</h2>

      <p>A <code>MediaStream</code> may be assigned to media elements as defined in <a href="http://www.w3.org/TR/html5/media-elements.html#media-elements">HTML5</a> [<cite><a href="#bib-HTML5" class="bibref">HTML5</a></cite>]
      by calling <code><a>createObjectURL</a></code> to obtain a URL for the <code>MediaStream</code> and then
      setting the media elements <code>src</code> attribute to that URL. A <code>MediaStream</code> is
      not preloadable or seekable and represents a simple, potentially infinite,
      linear media timeline. The timeline starts at 0 and increments linearly
      in real time as long as the <code>MediaStream</code> is playing. The timeline does not
      increment when the <code>MediaStream</code> is paused.</p>

      <div class="issue"><div class="issue-title"><span>Issue 3</span></div><p class="">Do we also need to support direct assignment and access
      of the underlying stream?</p></div>

      <p>The nature of the <code>MediaStream</code> places certain restrictions on the
      behavior and attribute values of the associated media element and on the
      operations that can be performed on it, as shown below:</p>

      <ul>
        <li>Whenever the user agent runs the <a href="http://www.w3.org/TR/html5/media-elements.html#media-element-load-algorithm">
          media element load algorithm</a>, reaches the <a href="http://www.w3.org/TR/html5/media-elements.html#concept-media-load-resource">
          resource fetch phase</a> of this algorithm and determines that the
          media resource in question is a MediaStream, it <em title="MUST" class="rfc2119">MUST</em> immediately abort the <a href="http://www.w3.org/TR/html5/media-elements.html#concept-media-load-algorithm">
          resource selection algorithm</a>, setting the <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-readystate">
          <code>media.readystate</code></a> to HAVE_ENOUGH_DATA.
        </li>

        <li>The UA <em title="MUST NOT" class="rfc2119">MUST NOT</em> buffer data
        from a MediaStream. When playing, the UA <em title="MUST" class="rfc2119">MUST</em> always play the current data from the stream.</li>
      </ul>

      <table summary="Legal values for the properties of a media element bound to a MediaStream" class="simple">
        <thead>
          <tr>
            <th scope="col">Attribute Name</th>

            <th scope="col">Attribute Type</th>

            <th scope="col">Valid Values</th>

            <th scope="col">Additional considerations</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-src" class="externalDFN"><code>src</code></a>
            </td>

            <td><code>DOMString</code></td>

            <td>a local URI referencing a MediaStream</td>

            <td>N.B. Revocation of the URI does not count as a change to this
            field.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-currentsrc" class="externalDFN"><code>currentSrc</code></a>
            </td>

            <td><code>DOMString</code></td>

            <td>a local URI referencing a MediaStream</td>

            <td>-</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#attr-media-preload" class="externalDFN"><code>preload</code></a>
            </td>

            <td><code>DOMString</code></td>

            <td><code>none</code></td>

            <td>A MediaStream cannot be preloaded.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-buffered" class="externalDFN"><code>buffered</code></a>
            </td>

            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#timeranges" class="externalDFN"><code>TimeRanges</code></a>
            </td>

            <td><code>buffered.length</code> <em title="MUST" class="rfc2119">MUST</em> return <code>1</code>.<br>
            <code>buffered.start(0)</code> <em title="MUST" class="rfc2119">MUST</em> return <code>0</code>.<br>
            <code>buffered.end(0)</code> <em title="MUST" class="rfc2119">MUST</em> return <code>0</code>.<br></td>

            <td>A MediaStream cannot be preloaded. Therefore, the amount
            buffered is always an empty TimeRange.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-currenttime" class="externalDFN"><code>currentTime</code></a>
            </td>

            <td><code>double</code></td>

            <td>Any positive integer. The initial value is 0 and the values
            increments linearly in real time whenever the stream is
            playing.</td>

            <td>The value is the current stream position, in seconds. The UA
            <em title="MUST" class="rfc2119">MUST</em> ignore attempts to set
            this attribute.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-duration" class="externalDFN"><code>duration</code></a>
            </td>

            <td><code>double</code></td>

            <td>Infinity</td>

            <td>
              A MediaStream does not have a pre-defined duration.

              <p>If the underlying MediaStream is destroyed, the UA <em title="MUST" class="rfc2119">MUST</em> set this property to the value
              of the last known <code>currentTime</code>.</p>
            </td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-seeking" class="externalDFN"><code>seeking</code></a>
            </td>

            <td><code>boolean</code></td>

            <td>false</td>

            <td>A MediaStream is not seekable. Therefore, this attribute
            <em title="MUST" class="rfc2119">MUST</em> always have the value
            <code>false</code>.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-defaultplaybackrate" class="externalDFN"><code>defaultPlaybackRate</code></a>
            </td>

            <td><code>double</code></td>

            <td>1.0</td>

            <td>A MediaStream is not seekable. Therefore, this attribute
            <em title="MUST" class="rfc2119">MUST</em> always have the value
            <code>1.0</code> and any attempt to alter it <em title="MUST" class="rfc2119">MUST</em> fail.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-playbackrate" class="externalDFN"><code>playbackRate</code></a>
            </td>

            <td><code>double</code></td>

            <td>1.0</td>

            <td>A MediaStream is not seekable. Therefore, this attribute
            <em title="MUST" class="rfc2119">MUST</em> always have the value
            <code>1.0</code> and any attempt to alter it <em title="MUST" class="rfc2119">MUST</em> fail.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-played" class="externalDFN"><code>played</code></a>
            </td>

            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#timeranges" class="externalDFN"><code>TimeRanges</code></a>
            </td>

            <td>
              <code>played.length</code> <em title="MUST" class="rfc2119">MUST</em> return <code>1</code>.<br>
              <code>played.start(0)</code> <em title="MUST" class="rfc2119">MUST</em> return <code>0</code>.<br>
              <code>played.end(0)</code> <em title="MUST" class="rfc2119">MUST</em> return the last known <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-currenttime" class="externalDFN"><code>currentTime</code></a>.
            </td>

            <td>A MediaStream's timeline always consists of a single range,
            starting at 0 and extending up to the currentTime.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-seekable" class="externalDFN"><code>seekable</code></a>
            </td>

            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#timeranges" class="externalDFN"><code>TimeRanges</code></a>
            </td>

            <td>
              <code>seekable.length</code> <em title="MUST" class="rfc2119">MUST</em> return <code>0</code>.<br>
              <code>seekable.start()</code> <em title="MUST" class="rfc2119">MUST</em> return <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-currenttime" class="externalDFN"><code>currentTime</code></a>.<br>
              <code>seekable.end()</code> <em title="MUST" class="rfc2119">MUST</em> return <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-currenttime" class="externalDFN"><code>currentTime</code></a>.
            </td>

            <td>A MediaStream is not seekable.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-startoffsettime" class="externalDFN"><code>startOffsetTime</code></a>
            </td>

            <td><code>Date</code></td>

            <td>Not-a-Number (NaN)</td>

            <td>A MediaStream does not specify a timeline offset.</td>
          </tr>

          <tr>
            <td>
              <a href="http://www.w3.org/TR/html5/media-elements.html#dom-media-loop" class="externalDFN"><code>loop</code></a>
            </td>

            <td><code>boolean</code></td>

            <td>false</td>

            <td>A MediaStream has no defined end and therefore cannot be
            looped.</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section id="event-summary" class="informative">
      <!--OddPage--><h2><span class="secno">7. </span>Event summary</h2><p><em>This section is non-normative.</em></p>

      <p>The following event fires on <code>
          <a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a>
        </code> objects:</p>

      <table>
        <tbody><tr>
          <th>Event name</th>

          <th>Interface</th>

          <th>Fired when...</th>
        </tr>

        </tbody><tbody>
          <tr>
            <td>
              <dfn id="event-mediastream-ended">
                <code>ended</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>The <code>
                <a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a>
              </code> <a class="internalDFN" href="#dfn-finished">finished</a> as a result of all tracks in the <code>
                <a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a>
              </code> <a class="internalDFN" href="#event-mediastreamtrack-ended" title="ended">ending</a>.</td>
          </tr>

          <tr>
            <td>
              <dfn id="event-mediastream-addtrack"><code>addtrack</code></dfn>
            </td>

            <td>
              <code>
                <a>MediaStreamTrackEvent</a>
              </code>
            </td>

            <td>A new <code> <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a> </code> has been added to
            this stream.</td>
          </tr>

          <tr>
            <td>
              <dfn id="event-mediastream-removetrack"><code>removetrack</code>
              </dfn>
            </td>

            <td>
              <code>
                <a>MediaStreamTrackEvent</a>
              </code>
            </td>

            <td>A <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code> has been removed from
            this stream.</td>
          </tr>
        </tbody>
      </table>

      <p>The following event fires on <code>
          <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
        </code> objects:</p>

      <table>
        <tbody><tr>
          <th>Event name</th>

          <th>Interface</th>

          <th>Fired when...</th>
        </tr>

        </tbody><tbody>
          <tr>
            <td>
              <dfn id="event-mediastreamtrack-started">
                <code>started</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>The <code><a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a></code>
              object has just transitioned from the
              "new" <code><a class="internalDFN" href="#dom-mediastreamtrack-readystate">readyState</a></code> to another state.
              This event fires before any other corresponding events
              such as "ended" or "statechanged".</td>
          </tr>

          <tr>
            <td>
              <dfn id="event-mediastreamtrack-muted">
                <code>muted</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>The <code>
                <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> object's source is temporarily unable to provide
            data.</td>
          </tr>

          <tr>
            <td>
              <dfn id="event-mediastreamtrack-unmuted">
                <code>unmuted</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>The <code>
                <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> object's source is live again after having been
            temporarily unable to provide data.</td>
          </tr>

          <tr>
            <td>
              <dfn id="event-mediastreamtrack-overconstrained">
                <code>overconstrained</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>
              <p>This event fires asynchronously for each affected
              track (when multiple tracks share the same source) after
              the user agent has evaluated the current constraints
              against a given <code><a>sourceId</a></code> and is not
              able to configure the source within the limitations
              established by the union of imposed constraints.</p>
              <p>This event may also fire
              when <code><a>takePhoto</a></code> is called and the
              source cannot record/encode an image due to
              over-constrained or conflicting constraints of those
              uniquely related to <code><a>sourceType</a></code>s of
              type <code>"photo-camera"</code>.</p>
              <p>Due to being over-constrained, the user
              agent must mute each affected track.</p>
              <p>The affected track(s) will remain un-usable (in
              the <code>"muted"</code> <a class="internalDFN" href="#dom-mediastreamtrack-readystate">readyState</a>) until the
              application adjusts the constraints to accommodate the
              source's capabilities.</p>
              <p>The "overconstrained" event is a simple event of
              type <code>Event</code>; it carries no information about
              which constraints caused the source to be
              over-constrained (the application has all the necessary
              APIs to figure it out).</p>
            </td>
          </tr>


          <tr>
            <td>
              <dfn id="event-mediastreamtrack-ended">
                <code>ended</code>
              </dfn>
            </td>

            <td>
              <code>Event</code>
            </td>

            <td>The <code>
                <a class="idlType" href="#idl-def-MediaStreamTrack"><code>MediaStreamTrack</code></a>
              </code> object's source will no longer provide any data, either
            because the user revoked the permissions, or because the source
            device has been ejected, or because the remote peer stopped
            sending data, or because the <code>
                <a href="#dom-mediastream-stop">stop()</a>
              </code> method was invoked.</td>
          </tr>
        </tbody>
      </table>
    </section>
  

  <section id="local-content">
    <!--OddPage--><h2><span class="secno">8. </span>Obtaining local multimedia content</h2>

    <section id="navigatorusermedia">
      <h3><span class="secno">8.1 </span>NavigatorUserMedia</h3>

      <pre class="idl"><span class="idlInterface" id="idl-def-NavigatorUserMedia">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMedia</span> {
<span class="idlMethod">    <span class="idlMethType"><a>void</a></span> <span class="idlMethName"><a href="#widl-NavigatorUserMedia-getUserMedia-void-MediaStreamConstraints-constraints-NavigatorUserMediaSuccessCallback-successCallback-NavigatorUserMediaErrorCallback-errorCallback">getUserMedia</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaStreamConstraints"><code>MediaStreamConstraints</code></a>?</span> <span class="idlParamName">constraints</span></span>, <span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-NavigatorUserMediaSuccessCallback"><code>NavigatorUserMediaSuccessCallback</code></a></span> <span class="idlParamName">successCallback</span></span>, <span class="idlParam">optional <span class="idlParamType"><a class="idlType" href="#idl-def-NavigatorUserMediaErrorCallback"><code>NavigatorUserMediaErrorCallback</code></a>?</span> <span class="idlParamName">errorCallback</span></span>);</span>
};</span></pre><section id="methods-5"><h4><span class="secno">8.1.1 </span>Methods</h4><dl class="methods"><dt id="widl-NavigatorUserMedia-getUserMedia-void-MediaStreamConstraints-constraints-NavigatorUserMediaSuccessCallback-successCallback-NavigatorUserMediaErrorCallback-errorCallback"><code>getUserMedia</code></dt><dd>
          <p>Prompts the user for permission to use their Web cam or other
          video or audio input.</p>

          <div class="issue"><div class="issue-title"><span>Issue 4</span></div><p class="">The syntax for getUserMedia() is still
          under discussion.  Some questions are: whether it creates
          media streams or just initializes ones already created;
          whether it creates streams synchronously (immediate return
          of MediaStream with callback later when user grants
          permission) or asynchronously (MediaStream available only
          upon callback).</p></div>

          <p>The <var>constraints</var> argument is an object of type
          <code><a class="idlType" href="#idl-def-MediaStreamConstraints"><code>MediaStreamConstraints</code></a></code>.</p>

          <p>The <var>successCallback</var> will be invoked with a suitable
          <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object as its argument if the
          user accepts valid tracks as described below.</p>

          <p>The <var>errorCallback</var> (if any) will be invoked if there is
          a failure in finding valid tracks or if the user denies permission,
          both as described below.</p>

          <p>When the <dfn id="dom-navigator-getusermedia"><code>getUserMedia()</code></dfn> method
          is called, the user agent <em title="MUST" class="rfc2119">MUST</em> run the following steps:</p>

          <ol>
            <li>
              <p>Let <var>constraints</var> be the method's first argument.</p>
            </li>

            <li>
              <p>Let <var>successCallback</var> be the callback indicated by
              the method's second argument.</p>
            </li>

            <li>
              <p>Let <var>errorCallback</var> be the callback indicated by the
              method's third argument, if any, or null otherwise.</p>
            </li>

            <li>
              <p>Let <var>requestedMediaTypes</var> be the set of media types
              in <var>constraints</var> with either a dictionary value or a
              value of "true".</p>
            </li>

            <li>
              <p>Let <var>finalSet</var> be an (initially) empty set.</p>
            </li>

            <li>
              <p>If <var>successCallback</var> is null, abort these steps.</p>
            </li><!-- we could throw an exception instead (that's
   why the method doesn't return until later: so that we can add an
   exception here, or for /options/ below, without changing the
   algorithm) -->
            <!--
            <li>
              <p>For each member of the <code><a>MediaStreamOptions</a></code>
              dictionary create a local representation and set it to false.</p>
            </li>

            <li>
              <p>For each property in <var>options</var> that is present and
              set to true, let the corresponding local representation be
              true.</p>
            </li>

            <li>
              <p>If none of the local representations of the
              <code><a>MediaStreamOptions</a></code> dictionary members is set
              to true, then throw a <code>NOT_SUPPORTED_ERR</code> exception
              and abort these steps.</p>
            </li>
-->

            <li>
              <p>For each media type <var>T</var> in
              <var>requestedMediaTypes</var>,</p>

              <ol>
                <li>
                  <p>Let <var>candidateSet</var> be all possible tracks of
                  media type <var>T</var> that the browser could return.</p>
                </li>

                <li>If the value of the <var>T</var> entry of
                <var>constraints</var> is "true", jump to the step labeled
                <em>final</em> below. Otherwise, continue.</li>

                <li>
                  <p>For each constraint key-value pair in the "mandatory"
                  dictionary,</p>

                  <ol>
                    <li>
                    
                      <p>If the constraint is not supported by the browser,
                      queue a task to invoke <var>errorCallback</var> with a new
                      NavigatorUserMediaError object whose name attribute has
                      the value <code> CONSTRAINT_NOT_SATISFIED </code> and
                      whose constraintName atribute is set to the name of the
                      constraint that caused the error and then jump to the step
                      labeled <em>failure</em> below. </p>
                    
                    </li>

                    <li>
                      <p>Remove from the <var>candidateSet</var> any track that
                      cannot satisfy the value given for the constraint.</p>
                    </li>

                    <li>
                    
                      <p>If the <var>candidateSet</var> no longer contains at
                      least one track, queue a task to invoke
                      <var>errorCallback</var> with a new
                      NavigatorUserMediaError object whose name attribute has
                      the value <code> CONSTRAINT_NOT_SATISFIED </code> and
                      whose constraintName atribute is set to the name of the
                      constraint that caused the error and then jump to the step
                      labeled <em>failure</em> below.  Otherwise, continue with
                      the next mandatory constraint.</p>
                    
                    </li>
                  </ol>
                </li>

                <li>
                  <p>Let the <var>secondPassSet</var> be the current contents
                  of the <var>candidateSet</var>.</p>
                </li>

                <li>
                  <p>For each constraint key-value pair in the "optional"
                  sequence of the <var>constraints</var> that are for the
                  current media type, in order,</p>

                  <ol>
                    <li>
                      <p>If the constraint is not supported by the browser,
                      skip it and continue with the next constraint.</p>
                    </li>

                    <li>
                      <p>Remove from the <var>secondPassSet</var> any tracks
                      that cannot satisfy the value given for the
                      constraint.</p>
                    </li>

                    <li>
                      <p>If the <var>secondPassSet</var> is now empty, let the
                      <var>secondPassSet</var> be the current contents of the
                      <var>candidateSet</var>. Otherwise, let the
                      <var>candidateSet</var> be the current contents of the
                      <var>secondPassSet</var>.</p>
                    </li>
                  </ol>
                </li>

                <li>
                  <p><em>Final:</em> Add the tracks in the
                  <var>candidateSet</var> to the <var>finalSet</var>.</p>
                </li>
              </ol>
            </li>
          </ol>

          <ul>
            <li>
              <p>Return, and run the remaining steps asynchronously.</p>
            </li>

            <li>
              <p>Optionally, e.g., based on a previously-established user
              preference, for security reasons, or due to platform limitations,
              jump to the step labeled <em>failure</em> below.</p>
            </li>

            <li>
              <p>Prompt the user in a user agent specific manner for permission
              to provide the entry script's origin with a
              <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object representing a media
              stream.</p>

              <p>The provided media <em title="MUST" class="rfc2119">MUST</em> include precisely one track of each
              media type in requestedMediaTypes from the <var>finalSet</var>.
              The decision of which tracks to choose from the
              <var>finalSet</var> is completely up to the user agent and may be
              determined by asking the user. Unless and until a new set of
              constraints is provided, the user agent <em title="MAY" class="rfc2119">MAY</em> change its choice of
              track at any point, provided that 1) the new choice does not
              violate given user permissions, and 2) it notifies the
              application code by raising an event. It may wish to do this, for
              example, if the user interface or network congestion changes. Note
              that no such change will have an effect on the presence or absence
              of each type of track, merely the contents.</p>

              <div class="issue"><div class="issue-title"><span>Issue 5</span></div><p class="">Define the event that should be raised when the
              user agent changes its choice of track.</p></div>

              <p>User agents are encouraged to default to using the user's
              primary or system default camera and/or microphone (when
              possible) to generate the media stream. User agents <em title="MAY" class="rfc2119">MAY</em> allow
              users to use any media source, including pre-recorded media
              files.</p>

              <p>If the user grants permission to use local recording devices,
              user agents are encouraged to include a prominent indicator that
              the devices are "hot" (i.e. an "on-air" or "recording"
              indicator).</p>

              <p>If the user denies permission, jump to the step labeled
              <em>failure</em> below. If the user never responds, this
              algorithm stalls on this step.</p>
            </li>

            <li>
              <p>Let <var>stream</var> be the
              <code><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></code> object for which the user
              granted permission.</p>
            </li>

            <li>
              <p>Queue a task to invoke <var>successCallback</var> with
              <var>stream</var> as its argument.</p>
            </li>

            <li>
              <p>Abort these steps.</p>
            </li>

            <li>
              <p><em>Failure</em>: If <var>errorCallback</var> is null, abort
              these steps.</p>
            </li>

            <li>
            
              <p>Let <var>error</var> be a new
              <code><a class="idlType" href="#idl-def-NavigatorUserMediaError"><code>NavigatorUserMediaError</code></a></code> object whose
              <code><a>name</a></code> attribute has the value
              <code><a>PERMISSION_DENIED</a></code>. </p>
            
            </li>

            <li>
              <p>Queue a task to invoke <var>errorCallback</var> with
              <var>error</var> as its argument.</p>
            </li>

            <li style="list-style: none; display: inline">
              <p>The task source for these <span title="concept-task">tasks</span> is the user interaction task
              source.</p>
            </li>
          </ul>
        <table class="parameters"><tr><th>Parameter</th><th>Type</th><th>Nullable</th><th>Optional</th><th>Description</th></tr><tr><td class="prmName">constraints</td><td class="prmType"><code><a class="idlType" href="#idl-def-MediaStreamConstraints"><code>MediaStreamConstraints</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr><tr><td class="prmName">successCallback</td><td class="prmType"><code><a class="idlType" href="#idl-def-NavigatorUserMediaSuccessCallback"><code>NavigatorUserMediaSuccessCallback</code></a></code></td><td class="prmNullFalse">✘</td><td class="prmOptFalse">✘</td><td class="prmDesc"></td></tr><tr><td class="prmName">errorCallback</td><td class="prmType"><code><a class="idlType" href="#idl-def-NavigatorUserMediaErrorCallback"><code>NavigatorUserMediaErrorCallback</code></a></code></td><td class="prmNullTrue">✔</td><td class="prmOptTrue">✔</td><td class="prmDesc"></td></tr></table><div><em>Return type: </em><code><a>void</a></code></div></dd></dl></section>

      <pre class="idl"><span class="idlImplements"><a>Navigator</a> implements <a class="idlType" href="#idl-def-NavigatorUserMedia"><code>NavigatorUserMedia</code></a>;</span></pre><div class="idlImplementsDesc"><p>All instances of the <code><a>Navigator</a></code> type are defined to also implement the <a class="idlType" href="#idl-def-NavigatorUserMedia"><code>NavigatorUserMedia</code></a> interface.</p></div>
    </section>

    <section id="mediastreamconstraints">
      <h3><span class="secno">8.2 </span>MediaStreamConstraints</h3>

      <pre class="idl"><span class="idlDictionary" id="idl-def-MediaStreamConstraints">dictionary <span class="idlDictionaryID">MediaStreamConstraints</span> {
<span class="idlMember">    <span class="idlMemberType">(<a>boolean</a> or <a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a>)</span> <span class="idlMemberName"><a href="#widl-MediaStreamConstraints-video">video</a></span> = <span class="idlMemberValue">false</span>;</span>
<span class="idlMember">    <span class="idlMemberType">(<a>boolean</a> or <a class="idlType" href="#idl-def-MediaTrackConstraints"><code>MediaTrackConstraints</code></a>)</span> <span class="idlMemberName"><a href="#widl-MediaStreamConstraints-audio">audio</a></span> = <span class="idlMemberValue">false</span>;</span>
};</span></pre><section id="dictionary-mediastreamconstraints-members"><h4><span class="secno">8.2.1 </span>Dictionary <a href="#idl-def-MediaStreamConstraints" class="idlType"><code>MediaStreamConstraints</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-MediaStreamConstraints-audio"><code>audio</code> of type <span class="idlMemberType"><a>booleanMediaTrackConstraints</a></span>, defaulting to <code>false</code></dt><dd>
          <div class="issue"><div class="issue-title"><span>Issue 7</span></div><p class="">Provide definition of audio constraints here.</p></div>
        </dd><dt id="widl-MediaStreamConstraints-video"><code>video</code> of type <span class="idlMemberType"><a>booleanMediaTrackConstraints</a></span>, defaulting to <code>false</code></dt><dd>
          <div class="issue"><div class="issue-title"><span>Issue 6</span></div><p class="">Provide definition of video constraints here.</p></div>
        </dd></dl></section>

      <pre class="idl"><span class="idlDictionary" id="idl-def-MediaTrackConstraints">dictionary <span class="idlDictionaryID">MediaTrackConstraints</span> {
<span class="idlMember">    <span class="idlMemberType"><a>MediaTrackConstraintSet</a>?</span> <span class="idlMemberName"><a href="#widl-MediaTrackConstraints-mandatory">mandatory</a></span> = <span class="idlMemberValue">null</span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>MediaTrackConstraint</a>[]?</span>  <span class="idlMemberName"><a href="#widl-MediaTrackConstraints-optional">optional</a></span> = <span class="idlMemberValue">null</span>;</span>
};</span></pre><section id="dictionary-mediatrackconstraints-members"><h4><span class="secno">8.2.2 </span>Dictionary <a href="#idl-def-MediaTrackConstraints" class="idlType"><code>MediaTrackConstraints</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-MediaTrackConstraints-mandatory"><code>mandatory</code> of type <span class="idlMemberType"><a>MediaTrackConstraintSet</a></span>, nullable, defaulting to <code>null</code></dt><dd>
          <div class="issue"><div class="issue-title"><span>Issue 8</span></div><p class="">Provide definition of mandatory constraints here.</p></div>
        </dd><dt id="widl-MediaTrackConstraints-optional"><code>optional</code> of type array of <span class="idlMemberType"><a>MediaTrackConstraint</a></span>, nullable, defaulting to <code>null</code></dt><dd>
          <div class="issue"><div class="issue-title"><span>Issue 9</span></div><p class="">Provide definition of optional constraints here.</p></div>
        </dd></dl></section>

      <p>A MediaTrackConstraintSet is a dictionary containing one or more
      key-value pairs, where each key <em title="MUST" class="rfc2119">MUST</em> be a valid registered constraint
      name in the IANA-hosted RTCWeb Media Constraints registry
      [<cite><a href="#bib-RTCWEB-CONSTRAINTS" class="bibref">RTCWEB-CONSTRAINTS</a></cite>] and its value <em title="SHOULD" class="rfc2119">SHOULD</em> be as defined in the
      associated reference[s] given in the registry.</p>

      <p>A MediaTrackConstraint is a dictionary containing exactly one
      key-value pair, where the key <em title="MUST" class="rfc2119">MUST</em> be a valid registered constraint name
      in the IANA-hosted RTCWeb Media Constraints registry
      [<cite><a href="#bib-RTCWEB-CONSTRAINTS" class="bibref">RTCWEB-CONSTRAINTS</a></cite>] and the value <em title="SHOULD" class="rfc2119">SHOULD</em> be as defined in the
      associated reference[s] given in the registry.</p>
    </section>

    <section id="navigatorusermediasuccesscallback">
      <h3><span class="secno">8.3 </span>NavigatorUserMediaSuccessCallback</h3>

      <pre class="idl"><span class="idlCallback" id="idl-def-NavigatorUserMediaSuccessCallback">callback <span class="idlCallbackID">NavigatorUserMediaSuccessCallback</span> = <span class="idlCallbackType"><a>void</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></span> <span class="idlParamName">stream</span></span>);</span></pre><section id="callback-navigatorusermediasuccesscallback-parameters"><h4><span class="secno">8.3.1 </span>Callback <a href="#idl-def-NavigatorUserMediaSuccessCallback" class="idlType"><code>NavigatorUserMediaSuccessCallback</code></a> Parameters</h4><dl class="callback-members"><dt id="widl-NavigatorUserMediaSuccessCallback-stream"><code>stream</code> of type <span class="idlMemberType"><a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a></span></dt><dd><div class="issue"><div class="issue-title"><span>Issue 10</span></div><p class="">Add explanation of handleEvent</p></div></dd></dl></section>
    </section>

    <section id="navigatorusermediaerror-and-navigatorusermediaerrorcallback">
      <h3><span class="secno">8.4 </span>NavigatorUserMediaError and NavigatorUserMediaErrorCallback</h3>

      <pre class="idl"><span class="idlInterface" id="idl-def-NavigatorUserMediaError">[<span class="extAttr">NoInterfaceObject</span>]
interface <span class="idlInterfaceID">NavigatorUserMediaError</span> {
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a></span>  <span class="idlAttrName"><a href="#widl-NavigatorUserMediaError-name">name</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-NavigatorUserMediaError-message">message</a></span>;</span>
<span class="idlAttribute">    readonly    attribute <span class="idlAttrType"><a>DOMString</a>?</span> <span class="idlAttrName"><a href="#widl-NavigatorUserMediaError-constraintName">constraintName</a></span>;</span>
};</span></pre><section id="attributes-4"><h4><span class="secno">8.4.1 </span>Attributes</h4><dl class="attributes"><dt id="widl-NavigatorUserMediaError-constraintName"><code>constraintName</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   , nullable</dt><dd>The name of the constraint that caused the error. Only used for
          some types of errors. For NavigatorUserMediaError with a name of
          CONSTRAINT_NOT_SATISFIED , the constraintName attribute in the
          NavigatorUserMediaError object <em title="MUST" class="rfc2119">MUST</em> be set to the name of the
          constraint that caused the error. </dd><dt id="widl-NavigatorUserMediaError-message"><code>message</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   , nullable</dt><dd>A human readable description of the error. This string may vary
          between different user agents.</dd><dt id="widl-NavigatorUserMediaError-name"><code>name</code> of type <span class="idlAttrType"><a>DOMString</a></span>, readonly   </dt><dd>A string representing the type of error. This string must be one
          of those defined by the 
          <code>NavigatorUserMediaErrorName</code> enum for the error object to be
          valid.</dd></dl></section>

      <pre class="idl"><span class="idlEnum" id="idl-def-NavigatorUserMediaErrorName">enum <span class="idlEnumID">NavigatorUserMediaErrorName</span> {
    "<a href="#idl-def-NavigatorUserMediaErrorName.xPERMISSION_DENIED" class="idlEnumItem">PERMISSION_DENIED</a>",
    "<a href="#idl-def-NavigatorUserMediaErrorName.xCONSTRAINT_NOT_SATISFIED" class="idlEnumItem">CONSTRAINT_NOT_SATISFIED</a>"
};</span></pre><table class="simple"><tr><th colspan="2">Enumeration description</th></tr><tr><td><code id="idl-def-NavigatorUserMediaErrorName.xPERMISSION_DENIED">PERMISSION_DENIED</code></td><td> User denied permission for scripts from this origin to access the
          media device. </td></tr><tr><td><code id="idl-def-NavigatorUserMediaErrorName.xCONSTRAINT_NOT_SATISFIED">CONSTRAINT_NOT_SATISFIED</code></td><td> One of the mandatory constraints could not be satisfied. </td></tr></table>

    

            
      <pre class="idl"><span class="idlCallback" id="idl-def-NavigatorUserMediaErrorCallback">callback <span class="idlCallbackID">NavigatorUserMediaErrorCallback</span> = <span class="idlCallbackType"><a>void</a></span> (<span class="idlParam"><span class="idlParamType"><a class="idlType" href="#idl-def-NavigatorUserMediaError"><code>NavigatorUserMediaError</code></a></span> <span class="idlParamName">error</span></span>);</span></pre><section id="callback-navigatorusermediaerrorcallback-parameters"><h4><span class="secno">8.4.2 </span>Callback <a href="#idl-def-NavigatorUserMediaErrorCallback" class="idlType"><code>NavigatorUserMediaErrorCallback</code></a> Parameters</h4><dl class="callback-members"><dt id="widl-NavigatorUserMediaErrorCallback-error"><code>error</code> of type <span class="idlMemberType"><a class="idlType" href="#idl-def-NavigatorUserMediaError"><code>NavigatorUserMediaError</code></a></span></dt><dd><div class="issue"><div class="issue-title"><span>Issue 11</span></div><p class="">Add explanation of handleEvent</p></div></dd></dl></section>
    </section>

    <section id="implementation-suggestions" class="informative">
      <h3><span class="secno">8.5 </span>Implementation Suggestions</h3><p><em>This section is non-normative.</em></p>

      <div class="practice">
        <span id="resource-reservation" class="practicelab">Best Practice 1: Resource
        reservation</span>

        <p class="practicedesc">The user agent is encouraged to reserve
        resources when it has determined that a given call to <a href="#dom-navigator-getusermedia">getUserMedia()</a> will succeed. It is
        preferable to reserve the resource prior to invoking the success
        callback provided by the web page. Subsequent calls to <a href="#dom-navigator-getusermedia">getUserMedia()</a> (in this page or any
        other) should treat the resource that was previously allocated, as well
        as resources held by other applications, as busy. Resources marked as
        busy should not be provided as sources to the current web page, unless
        specified by the user. Optionally, the user agent may choose to provide
        a stream sourced from a busy source but only to a page whose origin
        matches the owner of the original stream that is keeping the source
        busy.</p>

        <p class="practicedesc">This document recommends that in the permission
        grant dialog or device selection interace (if one is present), the user
        be allowed to select any available hardware as a source for the stream
        requested by the page (provided the resource is able to fulfill
        mandatory constraints, if any were specified), in addition to the
        ability to substitute a video or audio source with local files and
        other media. A file picker may be used to provide this functionality to
        the user.</p>

        <p class="practicedesc">This document also recommends that the user be
        shown all resources that are currently busy as a result of prior calls
        to <a href="#dom-navigator-getusermedia">getUserMedia()</a> (in this
        page or any other page that is still alive) and be allowed to terminate
        that stream and utilize the resource for the current page instead. If
        possible in the current operating environment, it is also suggested
        that resources currently held by other applications be presented and
        treated in the same manner. If the user chooses this option, the track
        corresponding to the resource that was provided to the page whose
        stream was affected must be removed. Additionally, if removing a track
        in this manner causes the stream to contain no more tracks, the
        <a>onended</a> event must be raised on it.</p>
      </div>

      <div class="practice">
        <span id="handling-devices" class="practicelab">Best Practice 2: Handling multiple
        devices</span>

        <p class="practicedesc">A <a class="idlType" href="#idl-def-MediaStream"><code>MediaStream</code></a> may contain more than one
        video and audio track. This makes it possible to include video from two
        or more webcams in a single stream object, for example. However, the
        current API does not allow a page to express a need for multiple video
        streams from independent sources.</p>

        <p class="practicedesc">It is recommended for multiple
        calls to <a href="#dom-navigator-getusermedia">getUserMedia()</a> from
        the same page be allowed as a way for pages to request multiple,
        discrete, video or audio streams.</p>

        <p class="practicedesc">A single call to
        <a href="#dom-navigator-getusermedia">getUserMedia()</a> will always
        return a stream with either zero or one audio tracks, and either zero or
        one video tracks. If a script calls
        <a href="#dom-navigator-getusermedia">getUserMedia()</a> multiple times
        before reaching a stable state, this document advises the UI designer
        that the permission dialogs should be merged, so that the user can give
        permission for the use of multiple cameras and/or media sources in one
        dialog interaction. The constraints on each getUserMedia call can be
        used to decide which stream gets which media sources.</p>
      </div>
    </section>
  </section>

  <section id="examples">
    <!--OddPage--><h2><span class="secno">9. </span>Examples</h2>

    <div>
      <p>This sample code exposes a button. When clicked, the button is
      disabled and the user is prompted to offer a stream. The user can cause
      the button to be re-enabled by providing a stream (e.g., giving the page
      access to the local camera) and then disabling the stream (e.g., revoking
      that access).</p>
      <div class="example"><div class="example-title"><span>Example 1</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"button"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"Start"</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">"</span><span class="pln">start</span><span class="pun">()</span><span class="atv">"</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"startBtn"</span><span class="tag">&gt;</span><span class="pln">
</span><span class="tag">&lt;script&gt;</span><span class="pln">
 </span><span class="kwd">var</span><span class="pln"> startBtn </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'startBtn'</span><span class="pun">);</span><span class="pln">
 </span><span class="kwd">function</span><span class="pln"> start</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   navigator</span><span class="pun">.</span><span class="pln">getUserMedia</span><span class="pun">({</span><span class="pln">audio</span><span class="pun">:</span><span class="kwd">true</span><span class="pun">,</span><span class="pln"> video</span><span class="pun">:</span><span class="kwd">true</span><span class="pun">},</span><span class="pln"> gotStream</span><span class="pun">);</span><span class="pln">
   startBtn</span><span class="pun">.</span><span class="pln">disabled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
 </span><span class="pun">}</span><span class="pln">
 </span><span class="kwd">function</span><span class="pln"> gotStream</span><span class="pun">(</span><span class="pln">stream</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
   stream</span><span class="pun">.</span><span class="pln">onended </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
     startBtn</span><span class="pun">.</span><span class="pln">disabled </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">};</span><span class="pln">
 </span><span class="pun">}</span><span class="pln">
</span><span class="tag">&lt;/script&gt;</span><span class="pln"> </span></pre></div>
    </div><!-- Put back when we define MediaStreamRecorder
    <div>
      <p>This example allows people to record a short audio message and upload
      it to the server. This example even shows rudimentary error handling.</p>
      <pre class='example sh_javascript'>
&lt;input type="button" value="⚫" onclick="msgRecord()" id="recBtn"&gt;
&lt;input type="button" value="◼" onclick="msgStop()" id="stopBtn" disabled&gt;
&lt;p id="status"&gt;To start recording, press the ⚫ button.&lt;/p&gt;
&lt;script&gt;
 var recBtn = document.getElementById('recBtn');
 var stopBtn = document.getElementById('stopBtn');
 function report(s) {
   document.getElementById('status').textContent = s;
 }
 function msgRecord() {
   report('Attempting to access microphone...');
   navigator.getUserMedia({audio:true}, gotStream, noStream);
   recBtn.disabled = true;
 }
 var msgStream, msgStreamRecorder;
 function gotStream(stream) {
   report('Recording... To stop, press to ◼ button.');
   msgStream = stream;
   msgStreamRecorder = stream.record();
   stopBtn.disabled = false;
   stream.onended = function () {
     msgStop();     
   }
 }
 function msgStop() {
   report('Creating file...');
   stopBtn.disabled = true;
   msgStream.onended = null;
   msgStream.stop();
   msgStreamRecorder.getRecordedData(msgSave);
 }
 function msgSave(blob) {
   report('Uploading file...');
   var x = new XMLHttpRequest();
   x.open('POST', 'uploadMessage');
   x.send(blob);
   x.onload = function () {
     report('Done! To record a new message, press the ⚫ button.');
     recBtn.disabled = false;
   };
   x.onerror = function () {
     report('Failed to upload message. To try recording a message again, press the ⚫ button.');
     recBtn.disabled = false;
   };
 }
 function noStream() {
   report('Could not obtain access to your microphone. To try again, press the ⚫ button.');
   recBtn.disabled = false;
 }
&lt;/script&gt;
</pre>
    </div>-->

    <div>
      <p>This example allows people to take photos of themselves from the local
      video camera.</p>
      <div class="example"><div class="example-title"><span>Example 2</span></div><pre class="example highlight prettyprint"><span class="tag">&lt;article&gt;</span><span class="pln">
 </span><span class="tag">&lt;style</span><span class="pln"> </span><span class="atn">scoped</span><span class="tag">&gt;</span><span class="pln">
  video </span><span class="pun">{</span><span class="pln"> transform</span><span class="pun">:</span><span class="pln"> scaleX</span><span class="pun">(-</span><span class="lit">1</span><span class="pun">);</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
  p </span><span class="pun">{</span><span class="pln"> text</span><span class="pun">-</span><span class="pln">align</span><span class="pun">:</span><span class="pln"> center</span><span class="pun">;</span><span class="pln"> </span><span class="pun">}</span><span class="pln">
 </span><span class="tag">&lt;/style&gt;</span><span class="pln">
 </span><span class="tag">&lt;h1&gt;</span><span class="pln">Snapshot Kiosk</span><span class="tag">&lt;/h1&gt;</span><span class="pln">
 </span><span class="tag">&lt;section</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"splash"</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;p</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"errorMessage"</span><span class="tag">&gt;</span><span class="pln">Loading...</span><span class="tag">&lt;/p&gt;</span><span class="pln">
 </span><span class="tag">&lt;/section&gt;</span><span class="pln">
 </span><span class="tag">&lt;section</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"app"</span><span class="pln"> </span><span class="atn">hidden</span><span class="tag">&gt;</span><span class="pln">
  </span><span class="tag">&lt;p&gt;&lt;video</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"monitor"</span><span class="pln"> </span><span class="atn">autoplay</span><span class="tag">&gt;&lt;/video&gt;</span><span class="pln"> </span><span class="tag">&lt;canvas</span><span class="pln"> </span><span class="atn">id</span><span class="pun">=</span><span class="atv">"photo"</span><span class="tag">&gt;&lt;/canvas&gt;</span><span class="pln">
  </span><span class="tag">&lt;p&gt;&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">button</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"&amp;#x1F4F7;"</span><span class="pln"> </span><span class="atn">onclick</span><span class="pun">=</span><span class="atv">"</span><span class="pln">snapshot</span><span class="pun">()</span><span class="atv">"</span><span class="tag">&gt;</span><span class="pln">
 </span><span class="tag">&lt;/section&gt;</span><span class="pln">
 </span><span class="tag">&lt;script&gt;</span><span class="pln">
  navigator</span><span class="pun">.</span><span class="pln">getUserMedia</span><span class="pun">({</span><span class="pln">video</span><span class="pun">:</span><span class="kwd">true</span><span class="pun">},</span><span class="pln"> gotStream</span><span class="pun">,</span><span class="pln"> noStream</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> video </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'monitor'</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">var</span><span class="pln"> canvas </span><span class="pun">=</span><span class="pln"> document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'photo'</span><span class="pun">);</span><span class="pln">
  </span><span class="kwd">function</span><span class="pln"> gotStream</span><span class="pun">(</span><span class="pln">stream</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    video</span><span class="pun">.</span><span class="pln">src </span><span class="pun">=</span><span class="pln"> URL</span><span class="pun">.</span><span class="pln">createObjectURL</span><span class="pun">(</span><span class="pln">stream</span><span class="pun">);</span><span class="pln">
    video</span><span class="pun">.</span><span class="pln">onerror </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      stream</span><span class="pun">.</span><span class="pln">stop</span><span class="pun">();</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">
    stream</span><span class="pun">.</span><span class="pln">onended </span><span class="pun">=</span><span class="pln"> noStream</span><span class="pun">;</span><span class="pln">
    video</span><span class="pun">.</span><span class="pln">onloadedmetadata </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pln"> </span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
      canvas</span><span class="pun">.</span><span class="pln">width </span><span class="pun">=</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">videoWidth</span><span class="pun">;</span><span class="pln">
      canvas</span><span class="pun">.</span><span class="pln">height </span><span class="pun">=</span><span class="pln"> video</span><span class="pun">.</span><span class="pln">videoHeight</span><span class="pun">;</span><span class="pln">
      document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'splash'</span><span class="pun">).</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
      document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'app'</span><span class="pun">).</span><span class="pln">hidden </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">};</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">function</span><span class="pln"> noStream</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    document</span><span class="pun">.</span><span class="pln">getElementById</span><span class="pun">(</span><span class="str">'errorMessage'</span><span class="pun">).</span><span class="pln">textContent </span><span class="pun">=</span><span class="pln"> </span><span class="str">'No camera available.'</span><span class="pun">;</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
  </span><span class="kwd">function</span><span class="pln"> snapshot</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    canvas</span><span class="pun">.</span><span class="pln">getContext</span><span class="pun">(</span><span class="str">'2d'</span><span class="pun">).</span><span class="pln">drawImage</span><span class="pun">(</span><span class="pln">video</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pun">);</span><span class="pln">
  </span><span class="pun">}</span><span class="pln">
 </span><span class="tag">&lt;/script&gt;</span><span class="pln">
</span><span class="tag">&lt;/article&gt;</span></pre></div>
    </div>
  </section>

  <section id="iana-registrations">
    <!--OddPage--><h2 id="sec-iana"><span class="secno">10. </span>IANA Registrations</h2>

    <section id="constraint-registrations">
      <h3 id="sec-constraints"><span class="secno">10.1 </span>Constraint Registrations</h3>

      <p>IANA is requested to register the following constraints as specified
      in [<cite><a href="#bib-RTCWEB-CONSTRAINTS" class="bibref">RTCWEB-CONSTRAINTS</a></cite>]:</p>

      <div class="note"><div class="note-title"><span>Note</span></div><div class="">
          <p><strong>Note: </strong>The following specific list(s) of
          constraints DOES NOT REFLECT CONSENSUS.  Many constraints
          beyond these have been proposed, and the ones listed do not
          have universal support.  The ones below are included ****
          ONLY **** to provide a starting point so we can see concrete
          examples of what real constraints might look like.  Along
          those lines, there was an attempt to include constraints of
          a variety of types so sample type definitions could be
          included as well (e.g., DOMString, MinMaxConstraint).</p>
      </div></div>
 
      <p>The following constraint names are defined to apply to both <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code> and <code><a class="idlType" href="#idl-def-AudioStreamTrack"><code>AudioStreamTrack</code></a></code> objects:</p>

      <table class="simple">
        <thead>
          <tr>
            <th>Constraint Name</th>
            <th>Values</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr id="def-constraint-sourceType">
            <td>sourceType</td>
            <td><a class="idlType" href="#idl-def-SourceTypeEnum"><code>SourceTypeEnum</code></a></td>
            <td>Constrain the video or audio source to an exact value from the set of enumerated-type values of the <a class="idlType" href="#idl-def-SourceTypeEnum"><code>SourceTypeEnum</code></a>.</td>
          </tr>
          <tr id="def-constraint-sourceId">
            <td>sourceId</td>
            <td>DOMString</td>
            <td>Constrain the video or audio source to an exact source identifier value.</td>
          </tr>
        </tbody>
      </table>

      <p>The following constraint names are defined to apply only to <code><a class="idlType" href="#idl-def-VideoStreamTrack"><code>VideoStreamTrack</code></a></code> objects:</p>

      <table class="simple">
        <thead>
          <tr>
            <th>Constraint Name</th>
            <th>Values</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr id="def-constraint-width">
            <td>width</td>
            <td>unsigned long or <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a></td>
            <td>Constrain the video source to the exact desired width or width range.</td>
          </tr>
          <tr id="def-constraint-height">
            <td>height</td>
            <td>unsigned long or <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a></td>
            <td>Constrain the video source to the exact desired height or height range.</td>
          </tr>
          <tr id="def-constraint-frameRate">
            <td>frameRate</td>
            <td>float or <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a></td>
            <td>Constrain the video source to the exact desired frame rate (fps) or frameRate range.</td>
          </tr>
          <tr id="def-constraint-facingMode">
            <td>facingMode</td>
            <td><a class="internalDFN" href="#dfn-videofacingmodeenum">VideoFacingModeEnum</a></td>
            <td>Constrain the video source to an exact value from the set of enumerated-type values of the <a class="internalDFN" href="#dfn-videofacingmodeenum">VideoFacingModeEnum</a>.</td>
          </tr>
        </tbody>
      </table>

      <p>The following constraint names are defined to apply only to <code><a class="idlType" href="#idl-def-AudioStreamTrack"><code>AudioStreamTrack</code></a></code> objects:</p>
                
      <table class="simple">
        <thead>
          <tr>
            <th>Constraint Name</th>
            <th>Values</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr id="def-constraint-volume">
            <td>volume</td>
            <td>unsigned long or <a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a></td>
            <td>Constrain the audio source to the exact desired volume or volume range.</td>
          </tr>
        </tbody>
      </table>

      <p>For constraints that accept ranges,
         the <code><a class="idlType" href="#idl-def-MinMaxConstraint"><code>MinMaxConstraint</code></a></code> dictionary is also
         defined. Note that the type of the value associated
         with <code>min</code> and <code>max</code> must be the same
         for both. The specific types associated with <code>min</code>
         and <code>max</code> are defined differently for each
         constraint name.</p>

      <pre class="idl"><span class="idlDictionary" id="idl-def-MinMaxConstraint">dictionary <span class="idlDictionaryID">MinMaxConstraint</span> {
<span class="idlMember">    <span class="idlMemberType"><a>any</a></span> <span class="idlMemberName"><a href="#widl-MinMaxConstraint-max">max</a></span>;</span>
<span class="idlMember">    <span class="idlMemberType"><a>any</a></span> <span class="idlMemberName"><a href="#widl-MinMaxConstraint-min">min</a></span>;</span>
};</span></pre><section id="dictionary-minmaxconstraint-members"><h4><span class="secno">10.1.1 </span>Dictionary <a href="#idl-def-MinMaxConstraint" class="idlType"><code>MinMaxConstraint</code></a> Members</h4><dl class="dictionary-members"><dt id="widl-MinMaxConstraint-max"><code>max</code> of type <span class="idlMemberType"><a>any</a></span></dt><dd>The related constraint's maximum allowed value.</dd><dt id="widl-MinMaxConstraint-min"><code>min</code> of type <span class="idlMemberType"><a>any</a></span></dt><dd>The related constraint's minimum allowed value.</dd></dl></section>

      <dl>
                
                <!-- please leaves this just commented out in the file for now - Cullen

      <dt> EchoCancelation </dt>

      <dd> <p> This is a enum type constraint that can take the values "true"
        and "false". The default is a non mandatory "true". </p>

        <p> When one or more audio streams is being played in the proceses of
        varios microphones, it is often desirable to attempt to remove the sound
        being played from the input signals recorded by the microphones. This is
        referred to echo cancelation. There are cases where it is not needed and
        it is desirable to turn it off so that no audio artifacts are
        introduced. This constraint allows the application to control this
        behavior. </p>
      </dd>

      <dt> CaptureAudio </dt>

      <dd> <p> This is a enum type constraint that can take the values "true"
        and "false". The default is a non mandatory "true". </p>

        <p> Indicates that application would like to capture audio input from a
        microphone. </p>
      </dd>

      <dt> CaptureVideo </dt>

      <dd> <p> This is a enum type constraint that can take the values "true"
        and "false". The default is a non mandatory "true". </p>

        <p> Indicates that application would like to capture video input from a
        camera. </p>
      </dd>

      <dt> CaptureImage </dt>

      <dd> <p> This is a enum type constraint that can take the values "true"
        and "false". The default is a non mandatory "true". </p>

        <p> Indicates that application would like to capture an single image from a
        camera. </p>
      </dd>


        <dt> EnableSecureMedia </dt>

      <dd> <p> This is a enum type constraint that can take the values "true"
        and "false". The default is a non mandatory "false". </p>

        <p> Indicates that application would like the browser to keep the media
        secure. This means that the media will not be a available to JavaScript
        application but is useful for cases where other objects will operate on
        the media stream. For some trusted application environments, the browser
        may enforce that this constraint is a mandatory "true". </p> </dd>

      -->
      </dl>
    </section>
  </section>

  <section id="change-log">
    <!--OddPage--><h2><span class="secno">11. </span>Change Log</h2>

    <p>This section will be removed before publication.</p>


      <!--
    <h2>To Do Items</h2>

    <p>-</p>
    -->


    <h2 id="changes-since-december-12-2012">Changes since December 12, 2012</h2>

    <ol>
      <li> Changed error code to be string instead of number.</li>
      <li> Added core of settings proposal allowing for constraint changes after stream/track creation.</li>
    </ol>

    
    <h2 id="november-15-2012">November 15 2012</h2>

    <ol>
      <li>Introduced new representation of tracks in a stream
      (removed MediaStreamTrackList).</li>

      <li>Updated MediaStreamTrack.readyState to use an enum type (instad of
      unsigned short constants).</li>

      <li>Renamed MediaStream.label to MediaStream.id (the definition needs
      some more work).</li>
    </ol>

    <h2 id="october-1-2012">October 1 2012</h2>

    <ol>
      <li>Limited the track kind values to "audio" and "video" only (could
      previously be user defined as well).</li>

      <li>Made MediaStream extend EventTarget.</li>

      <li>Simplified the MediaStream constructor.</li>
    </ol>

    <h2 id="june-23-2012">June 23 2012</h2>

    <ol>
      <li>Rename title to "Media Capture and Streams".</li>

      <li>Update document to comply with HTML5.</li>

      <li>Update image describing a MediaStream.</li>

      <li>Add known issues and various other editorial changes.</li>
    </ol>

    <h2 id="june-22-2012">June 22 2012</h2>

    <ol>
      <li>Update wording for constraints algorithm.</li>
    </ol>

    <h2 id="june-19-2012">June 19 2012</h2>

    <ol>
      <li>Added "Media Streams as Media Elements section".</li>
    </ol>

    <h2 id="june-12-2012">June 12 2012</h2>

    <ol>
      <li>Switch to respec v3.</li>
    </ol>

    <h2 id="june-5-2012">June 5 2012</h2>

    <ol>
      <li>Added non-normative section "Implementation Suggestions".</li>

      <li>Removed stray whitespace.</li>
    </ol>

    <h2 id="june-1-2012">June 1 2012</h2>

    <ol>
      <li>Added media constraint algorithm.</li>
    </ol>

    <h2 id="apr-23-2012">Apr 23 2012</h2>

    <ol>
      <li>Remove MediaStreamRecorder.</li>
    </ol>

    <h2 id="apr-20-2012">Apr 20 2012</h2>

    <ol>
      <li>Add definitions of MediaStreams and related objects.</li>
    </ol>

    <h2 id="dec-21-2011">Dec 21 2011</h2>

    <ol>
      <li>Changed to make wanted media opt in (rather than opt out). Minor
      edits.</li>
    </ol>

    <h2 id="nov-29-2011">Nov 29 2011</h2>

    <ol>
      <li>Changed examples to use MediaStreamOptions objects rather than
      strings. Minor edits.</li>
    </ol>

    <h2 id="nov-15-2011">Nov 15 2011</h2>

    <ol>
      <li>Removed MediaStream stuff. Refers to webrtc 1.0 spec for that part
      instead.</li>
    </ol>

    <h2 id="nov-9-2011">Nov 9 2011</h2>

    <ol>
      <li>Created first version by copying the webrtc spec and ripping out
      stuff. Put it on github.</li>
    </ol>
  </section>

  <section id="acknowledgements" class="appendix">
    <!--OddPage--><h2><span class="secno">A. </span>Acknowledgements</h2>
  </section>


<section class="appendix" id="references"><!--OddPage--><h2><span class="secno">B. </span>References</h2><section id="normative-references"><h3><span class="secno">B.1 </span>Normative references</h3><dl class="bibliography"><dt id="bib-FILE-API">[FILE-API]</dt><dd>Arun Ranganathan; Jonas Sicking. <a href="http://www.w3.org/TR/2012/WD-FileAPI-20121025"><cite>File API</cite></a>. 25 October 2012. W3C Working Draft. URL: <a href="http://www.w3.org/TR/2012/WD-FileAPI-20121025">http://www.w3.org/TR/2012/WD-FileAPI-20121025</a>
</dd><dt id="bib-HTML5">[HTML5]</dt><dd>Robin Berjon et al. <a href="http://www.w3.org/TR/html5/"><cite>HTML5</cite></a>. 17 December 2012. W3C Candidate Recommendation. URL: <a href="http://www.w3.org/TR/html5/">http://www.w3.org/TR/html5/</a>
</dd><dt id="bib-RFC2119">[RFC2119]</dt><dd>S. Bradner. <a href="http://www.ietf.org/rfc/rfc2119.txt"><cite>Key words for use in RFCs to Indicate Requirement Levels.</cite></a> March 1997. Internet RFC 2119.  URL: <a href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a> 
</dd><dt id="bib-RTCWEB-CONSTRAINTS">[RTCWEB-CONSTRAINTS]</dt><dd>D. Burnett. <a href="http://datatracker.ietf.org/doc/draft-burnett-rtcweb-constraints-registry/"><cite>IANA Registry for RTCWeb Media Constraints.</cite></a> URL: <a href="http://datatracker.ietf.org/doc/draft-burnett-rtcweb-constraints-registry/">http://datatracker.ietf.org/doc/draft-burnett-rtcweb-constraints-registry/</a> 
</dd><dt id="bib-WEBIDL">[WEBIDL]</dt><dd>Cameron McCormack. <a href="http://www.w3.org/TR/2011/WD-WebIDL-20110927/"><cite>Web IDL</cite></a>. 27 September 2011. W3C Working Draft. URL: <a href="http://www.w3.org/TR/2011/WD-WebIDL-20110927/">http://www.w3.org/TR/2011/WD-WebIDL-20110927/</a>
</dd><dt id="bib-WEBRTC10">[WEBRTC10]</dt><dd>A Bergkvist; D Burnett; C Jennings; A Narayanan. <a href="http://www.w3.org/TR/2011/WD-webrtc-20111027/"><cite>WebRTC 1.0</cite></a>. 27 October 2011. W3C Working Draft. URL: <a href="http://www.w3.org/TR/2011/WD-webrtc-20111027/">http://www.w3.org/TR/2011/WD-webrtc-20111027/</a>
</dd></dl></section></section></body></html>
